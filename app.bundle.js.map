{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/@jimbly/howler/src/howler.core.js","node_modules/dot-prop/index.js","node_modules/gl-mat3/create.js","node_modules/gl-mat3/fromMat4.js","node_modules/gl-mat4/copy.js","node_modules/gl-mat4/create.js","node_modules/gl-mat4/invert.js","node_modules/gl-mat4/multiply.js","node_modules/gl-mat4/perspective.js","node_modules/gl-mat4/transpose.js","node_modules/is-obj/index.js","node_modules/simplex-noise/simplex-noise.js","src/client/app.js","src/client/biome_test.js","src/client/continent_gen.js","src/client/continent_serialize.js","src/client/continent_serialize_test.js","src/client/glov/bootstrap.js","src/client/glov/camera2d.js","src/client/glov/cmds.js","src/client/glov/edit_box.js","src/client/glov/effects.js","src/client/glov/engine.js","src/client/glov/filewatch.js","src/client/glov/font.js","src/client/glov/geom.js","src/client/glov/glb/decode-utf8.js","src/client/glov/glb/gltf-type-utils.js","src/client/glov/glb/parser.js","src/client/glov/glb/unpack-binary-json.js","src/client/glov/glb/unpack-glb-buffers.js","src/client/glov/in_event.js","src/client/glov/input.js","src/client/glov/link.js","src/client/glov/local_storage.js","src/client/glov/mat43.js","src/client/glov/models.js","src/client/glov/net.js","src/client/glov/particles.js","src/client/glov/perf.js","src/client/glov/pointer_lock.js","src/client/glov/polyfill.js","src/client/glov/rand_alea.js","src/client/glov/settings.js","src/client/glov/shaders.js","src/client/glov/sound.js","src/client/glov/sprites.js","src/client/glov/subscription_manager.js","src/client/glov/textures.js","src/client/glov/transition.js","src/client/glov/ui.js","src/client/glov/urlhash.js","src/client/glov/vmath.js","src/client/glov/walltime.js","src/client/glov/webfs.js","src/client/glov/wsclient.js","src/client/img/font/04b03_8x1.json","src/client/img/font/04b03_8x2.json","src/client/img/font/palanquin32.json","src/client/main.js","src/client/proc_gen_constants.js","src/client/shims/assert.js","src/client/shims/buffer.js","src/client/shims/not_worker.js","src/common/ack.js","src/common/base64.js","src/common/cmd_parse.js","src/common/md5.js","src/common/packet.js","src/common/tiny-events.js","src/common/util.js","src/common/wscommon.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","HowlerGlobal","this","init","prototype","self","Howler","_counter","_html5AudioPool","html5PoolSize","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","window","navigator","masterGain","noAudio","usingWebAudio","autoSuspend","ctx","safeToPlay","autoUnlock","_setup","volume","vol","parseFloat","setupAudioContext","gain","setValueAtTime","currentTime","_webAudio","ids","_getSoundIds","j","sound","_soundById","_node","mute","muted","stop","unload","close","codecs","ext","replace","state","_autoSuspend","Audio","test","oncanplaythrough","_setupCodecs","audioTest","err","canPlayType","mpegTest","checkOpera","userAgent","match","isOldOpera","parseInt","split","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","mp4","weba","webm","dolby","flac","_unlockAudio","_audioUnlocked","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","audioNode","_unlocked","_releaseHtml5Audio","load","_autoResume","onUnlockFinish","document","removeEventListener","_emit","source","createBufferSource","buffer","connect","destination","start","noteOn","resume","onended","disconnect","addEventListener","_obtainHtml5Audio","pop","audio","push","suspend","_sounds","_paused","_suspendTimer","clearTimeout","setTimeout","then","_resumeAfterSuspend","Howl","src","console","error","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","undefined","_xhrWithCredentials","xhrWithCredentials","_xhrHeaders","xhrHeaders","_duration","_state","_endTimers","_queue","_playLock","_onend","onend","fn","_onfade","onfade","_onload","onload","_onloaderror","onloaderror","_onplayerror","onplayerror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onunlock","onunlock","_onresume","event","action","play","url","str","exec","toLowerCase","warn","location","protocol","slice","Sound","loadBuffer","internal","id","num","_ended","_id","_inactiveSound","soundId","_loadQueue","seek","Math","max","_seek","duration","timeout","abs","setParams","_start","_stop","sound_volume","node","playWebAudio","_refreshBuffer","_playStart","bufferSource","noteGrainOn","Infinity","bind","once","_clearTimer","playHtml5","playbackRate","Promise","catch","paused","loadedNoReadyState","ejecta","readyState","isCocoonJS","listener","pause","_rateSeek","_stopFade","noteOff","_cleanBuffer","isNaN","arguments","_clearSound","_interval","args","index","indexOf","apply","fade","from","to","len","end","linearRampToValueAtTime","_startFadeInterval","isGroup","diff","steps","stepLen","lastTick","Date","now","_fadeTo","setInterval","tick","min","round","clearInterval","cancelScheduledValues","loopStart","loopEnd","playing","seekAndEmit","emitSeek","realTime","rateSeek","sounds","_errorFn","_loadFn","splice","remCache","cache","on","events","off","isId","keys","Object","Array","isArray","msg","task","shift","ended","_drain","reset","limit","cnt","_panner","isIOS","vendor","checkIE","howl","_parent","parent","create","createGain","createGainNode","_errorListener","_loadListener","ceil","__default","loadSound","data","atob","dataView","Uint8Array","charCodeAt","decodeAudioData","xhr","XMLHttpRequest","open","withCredentials","responseType","forEach","key","setRequestHeader","status","response","onerror","safeXhrSend","send","arraybuffer","success","AudioContext","webkitAudioContext","iOS","platform","appVersion","version","safari","define","amd","global","isObj","getPathSegments","path","pathArr","parts","get","obj","value","propertyIsEnumerable","set","root","delete","_delete","has","out","Float32Array","fromMat4","copy","invert","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply","b","b0","b1","b2","b3","perspective","fovy","aspect","near","far","tan","nf","transpose","x","type","_typeof","F2","sqrt","G2","F3","G3","F4","G4","SimplexNoise","randomOrSeed","random","alea","buildPermutationTable","perm","permMod12","grad3","grad4","noise2D","xin","yin","n0","n1","n2","s","floor","X0","Y0","x0","y0","i1","j1","x1","y1","x2","y2","ii","jj","t0","gi0","t1","gi1","t2","gi2","noise3D","zin","n3","k","Z0","z0","k1","i2","j2","k2","z1","z2","x3","y3","z3","kk","t3","gi3","noise4D","y","z","w","n4","l","W0","w0","rankx","ranky","rankz","rankw","l1","l2","i3","j3","k3","l3","w1","w2","w3","x4","y4","z4","w4","ll","t4","gi4","aux","_buildPermutationTable","s0","s1","s2","mash","masher","toString","h","called_once","main","calculateBiomesTest","assert","randCreate","C_WATER","C_PLAINS","C_HILLS","C_MOUNTAINS","rgb","g","OCEAN","TUNDRA","MOUNTAINS","CLIFFS","HILLS_FOREST","DENSE_FOREST","PLAINS_FOREST","HILLS","PLAINS","DESERT","PLAINS_RED","PLAINS_BLUE","COMMON","UNCOMMON","RARE","weightedChoiceBuild","list","total","weightedChoiceGet","precalc","choice","choice_elev0_hum75","choice_elev0_hum50","choice_elev0_hum25","getBiomeV2","classif","tot_slope","elev","humidity","cdist","is_cliff","hex_tex_size","cdata","tex_data_color","ocean_distance","sea_level","max_elevation","width","height","stride","neighbors_even","neighbors_odd","neighbors_bit","rand","land_range","pos","celev","humid","cat","neighbors","npos","nelev","slope","color","continentGen","atan2","cos","pow","sin","PI","SKEW_X","clamp","lerp","ridx","vec2","v2copy","v2lengthSq","default_tex_size","TWOPI","D_OPEN","D_BORDER","D_SEA","D_SEA2","D_INLAND_SEA","D_COASTLINE","D_LAKE","default_opts","seed","coast","frequency","amplitude","persistence","lacunarity","freq","octaves","cutoff","domain_warp","warp_freq","warp_amp","fill_seas","channels","tslope","range","rslope","river","weight_bend","weight_afork","weight_sfork","max_tslope","tuning_h","show_elev","prune","mtify_prune_grace","mtify_prune","ocean","lakes","lake_search_radius","lake_percent","lake_k","min_sep","blur","threshold","weight","mountainify","peak_radius","peak_percent","peak_k","height_scale","blend_radius","weight_local","power_min","power_max","power_blend","cdist_ramp","rainshadow","show_relief","cut1","cut2","blur_scale","blur_w","show_rivers","output","sea_range_exp","land_range_exp","sea_range","debug","early_out","land","fill","util","mountain_delta","relev","rstrahler","water_level","coast_distance","blur_temp1","blur_temp2","debug_priority","total_size","setupWorkBuffers","Uint32Array","Uint16Array","last_tex_size","unif_pos","world_pos","opts","subopts","shuffleArray","arr","swap","noise","noise_warp","total_amplitude","noise_field","initNoise","subopts_in","_ii","amp","_ii2","v","mul","add","sample_pos","field","sample","dx","dy","lac","HEX_HEIGHT","HEX_EDGE","HEX_WIDTH","hexPosToUnifPos","count_by_h","generateCoastlines","idx","_ii3","cutoff_percent","cutoff_count","_ii4","_h","fillSeas","unfilled_seas","todo","done","fillBorders","_ii5","tryMark","spreadSeas","inland_seas","sea","is_ocean","checked","adjacent","_ii6","_pos","nidx","outer","_ii7","_pos2","_neighbors","_nidx","_npos","_ii8","poissonSample","radius","ret","peak_rsquared","cell_bound","cell_w","cell_h","cells","Int16Array","active","emitSample","posx","posy","cellidx","nx","ny","generateAround","px","py","Î¸","yy","xx","gx","gy","dsq","active_idx","findMaxPerRegion","candidates","map","max_elev","max_pos","sort","generateLakes","lake_seeds","generateInlandDF","d","next","_ii9","_pos3","_neighbors2","_subopts","check_points","lake_elev","filter","want","use","min_sep_sq","pt","too_close","other","placeLake","_ii10","generateTerrainSlope","min_v","generateRiverSlope","growRivers","coastlines","coastlines_incdir","findCandidates","incoming_dir","invdir","tryMarkXY","ocean_coastlines","_ii11","_pos4","findBorderMinDist","_ii12","_pos5","border_min_dist","orig_coastlines","filterCoastalRivers","rank","open_count","open_bits","bpos","count","blocked","grow","MAX_PRIORITY","weight_total","active_by_prior","min_elev_by_prior","_ii13","active_by_elev","chosen_priority","chooseNode","min_elev","_p","_p2","_active_by_elev","_ii14","mep","equal","validGrowth","frompos","topos","new_elev","_ii15","_pos6","options","cur_bits","bad_bits","_ii16","asym","nopt","_ii17","cidx","_ii18","_npos2","ndir","_p3","_active_by_elev2","computeStrahler","fillStrahler","from_dir","bits","pruneRivers","buildUpHeight","work_nodes","next_nodes","_pos7","nheight","_ii19","_pos8","generateOceanDistanceField","_ii20","_pos9","generateOcean","_state2","noise_v","distance","noise_weight","generateOutputElevation","est_max_output","voxel_scale","above_sea_level","fixupCoastalWaters","land_count","elev_min","delev","_state3","_pos10","blurExtremeSlopes","_subopts2","blurs","_ii21","_nidx2","_nelev","_ii22","fillLakes","_state4","fillLake","source_pos","cur_elev","neighbors_by_elev","filled","try_elev","good_elevations","addPos","ne","neighbors2","nidx2","filled_len","is_good","pick","_ii23","_ii24","Number","_ne","pruneFloodedRivers","wl","generateCoastDistanceField","findCoast","default_water_level","is_coast","nid","_ii25","_pos11","_subopts3","peak_candidates","choosePeaks","peak_elev","keep","points","_subopts4","growMountain","rsquared","horiz_radius","weight_abs","avg_height","avg_count","pos_idx","center_dh","angle_offs","best_h","angles","sx","sy","_dx","_dy","_x","_y","unif_dx","unif_dy","_dsq","_pos_idx","dh","scale","angle","eff_power","delta","applyGrowth","pruneUphillRivers","_subopts5","clearRiver","my_elev","rbits","found_one","generateHumidity","total_range","slope_mul","generateSlope","right_slope","blurSlope","addToNoise","rainshadow_effect","determineClassification","_subopts6","blurHeight","w_len","h_min","_yy","_xx","_pos12","_v","classifFromDiff","blurred","opts_in","_opts","output_debug","time","encodeRLEZeroes","encodeRLEU2","encodeRLEDict","encodeDeltaPakInt","continentSerialize","continentDeserialize","packetCreate","packetFromBuffer","PACKET_DEBUG","CONTINENT_SER_VERSION","SER_METHOD_DELTA_PACK_INT","SER_METHOD_RLE_DICT","SER_METHOD_RLE_ZEROES","SER_METHOD_RLE_U2","FIELDS","SER_METHOD_FOR_FIELD","FIELD_TYPE","pak","size","writeInt","decodeRLEZeroes","readInt","writecv","writeU8","decodeRLEU2","readU8","dict","dict_idx","di","decodeRLEDict","decodeDeltaPakInt","encodeToPacket","method","buf","decodeFromPacket","FIELD_MAGIC","writeFlags","makeReadable","ret_len","getBufferLen","getBuffer","readFlags","ver","field_magic","ArrayType","continentSerializeTest","BitBuffer","writeBits","num_bits","flush","encodeRLEPakInt","encodeRLEUx","base_bits","count_pak","value_buf","ret1","ret2","temp_u8_encode","encodeRLEU8","temp_u16_encode","encodeRLEU16","encodeHuffman","histo","nodes","checkCount","lowest1","lowest2","newnode","encoding","enc_pak","node_idx","walk","prefix","numbits","left_idx","right_idx","_v2","enc","encodeWrap","log","name","byteLength","getElementById","file","line","col","errorobj","stack","message","origin","join","show","glov_error_report","innerText","debugmsg","clear","virtualToCanvas","setSafeAreaPadding","safeAreaPadding","domToCanvasRatio","screenAspect","setAspectFixed","setAspectFixed2","zoom","setNormalized","x0Real","y0Real","x1Real","y1Real","wReal","hReal","xScale","yScale","htmlPos","htmlSize","domToVirtual","domDeltaToVirtual","virtualToDom","virtualToFontSize","virtualToDomPosParam","tickCamera2D","startup","engine","safearea_pad","screen_width","screen_height","render_width","render_height","render_viewport_w","render_viewport_h","render_offset_x","render_offset_y_top","render_offset_y_bottom","reapply","dst","ignore_safe_area","wscale","hscale","left","right","top","bottom","old","pa","pixel_aspect","inv_aspect","inv_desired_aspect","margin","_margin","_margin2","factor","inv_factor","devicePixelRatio","viewport","eff_screen_width","eff_screen_height","_margin3","setViewport","cmd_parse_mod","local_storage","cmd_parse","storage","textures","cmd","handle","defaultHandler","registerValue","TYPE_FLOAT","label","fov_min","setFOV","store","byteFormat","bytes","toFixed","register","help","func","resp_func","gpu_mem","perf_state","geom","tex","toUpperCase","defines","definesChanged","webgl2","cmdDesc","cmd_data","autoComplete","access","str_cname","canonical","str_lc","cname","safearea","TYPE_STRING","usage","default_value","String","disable_data","getJSON","setJSON","camera2d","glov_input","glov_ui","focuslog","GlovUIEditBox","params","Z","UI","button_width","allow_modal","font_height","text","placeholder","max_len","initial_focus","onetime_focus","auto_unfocus","initial_select","spellcheck","applyParams","is_focused","elem","input","submitted","pointer_lock","last_frame","new_text","focus","focusSteal","pointerLockExit","focusNext","was_glov_focused","glov_focused","focusCheck","dom_focused","activeElement","focused","key_opt","in_event_cb","pointerLockEnter","keyUpEdge","KEYS","ESC","setText","focusCanvas","canceled","_this","global_frame_index","updateFocus","this_frame_edit_boxes","getElem","textContent","form","createElement","setAttribute","ev","preventDefault","appendChild","span","select","style","old_fontsize","fontSize","new_fontsize","click","peek","eatAllKeyboardInput","SUBMIT","CANCEL","registerShader","grayScaleMatrix","sepiaMatrix","negativeMatrix","saturationMatrix","hueMatrix","brightnessAddMatrix","brightnessScaleMatrix","additiveMatrix","contrastMatrix","applyCopy","applyPixelyExpand","applyGaussianBlur","applyColorMatrix","clearAlpha","shaders","vec3","vec4","v4set","shader_data","vp_copy","vp","fp","pixely_expand","gaussian_blur","color_matrix","getShader","shader","inited","clip_space","copy_uv_scale","shader_params_default","shader_params_color_matrix","shader_params_gaussian_blur","shader_params_pixely_expand","quad_geom","semantic","POSITION","gl","FLOAT","QUADS","colorMatrix","sampleRadius","Gauss","orig_pixel_size","saturationScale","is","brightnessOffset","additiveRGB","contrastScale","applyEffect","effect","view_w","view_h","target_w","target_h","bindArray","texs","draw","setSamplerState","filter_min","LINEAR","filter_mag","wrap_s","CLAMP_TO_EDGE","wrap_t","resx","resy","hblur","captureFramebuffer","vblur","final_viewport","clear_color","clearColor","COLOR_BUFFER_BIT","max_size","min_size","inputTexture0","res","shader_copy","glow","matrix","mout","old_dt","getParameter","DEPTH_TEST","disable","colorMask","white","enable","setGlobalMatrices","setGameDims","postprocessingAllow","glCheckError","releaseCanvas","reloadSafe","defineCausesReload","updateMatrices","getFrameTimestamp","getFrameIndex","getFrameDt","getFrameDtActual","setState","stateActive","resizing","addTickFunc","postTick","getTemporaryTexture","setupProjection","start3DRendering","projectionZBias","setErrorReportDetails","loadsPending","DEBUG","cmds","effects","glov_font","font_info_palanquin32","mat3FromMat4","mat4Copy","mat4Invert","mat4Mul","mat4Transpose","mat4Perspective","asin","models","perf","settings","soundLoading","soundStartup","soundTick","sprites","texturesTick","glov_transition","urlhash","defaults","nearSame","mat3","mat4","v3mulMat4","v3iNormalize","v4copy","v4same","canvas","glov_particles","antialias","game_width","game_height","TYPE_SET","change","any_3d","ZFAR","ZNEAR","fov_y","fov_x","mat_projection","mat_view","mat_m","mat_vp","mat_mv","mat_mv_no_skew","mat_mvp","mat_mv_inv_transform","mat_inv_view","projection_inverse","light_diffuse","light_dir_vs","light_ambient","light_dir_ws","font","app_state","border_color","mat_temp","_mat_view","new_fov","is_ios_safari","ua","is_ios","webkit","postprocessing_reset_version","postprocessing","allow","gl_err","getError","getExtension","loseContext","ignored","reload","reloading_defines","onURLChange","handleDefinesChanged","normalizeRow","m","mat_model","global_timer","this_frame_time","hrtime","this_frame_time_actual","after_loading_state","is_loading","new_state","test_state","mspf","mspf_update_time","mspf_frame_count","last_tick_cpu","mspf_tick","mspf_tick_accum","PERF_HISTORY_SIZE","glov_perf_state","fpsgraph","history","addMetric","show_stat","show_graph","labels","fps: ","fps","ms/f: ","msF","cpu: ","cpu","line_scale_top","colors","interactable","do_borders","do_viewport_postprocess","need_repos","app_tick_functions","cb","post_tick","ticks","inactive","temporary_textures","resetEffects","temp","destroy","SAFARI_FULLSCREEN_ASPECT","screen","SAFARI_DIMS","896,414","812,375","736,414","716,414","667,375","647,375","548,320","availWidth","availHeight","safariTopSafeArea","last_canvas_width","last_canvas_height","last_body_height","safearea_elem","safearea_ignore_bottom","safearea_values","last_safearea_values","checkResize","vv","visualViewport","css_to_real","innerWidth","innerHeight","body","new_width","clientWidth","new_height","clientHeight","sa_width","offsetWidth","sa_height","offsetHeight","offsetLeft","offsetTop","pixel_scale","scroll","xywh","last_temp_idx","_tex","createForCapture","do_filter_linear","do_wrap","copyTexImage","NEAREST","REPEAT","frame_requested","requestFrame","max_fps","SLOWLOAD","requestAnimationFrame","mat_projection_10","had_3d_this_frame","use_fov_y","use_width","use_height","znear","zfar","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","BLEND","depthMask","DEPTH_BUFFER_BIT","CULL_FACE","dist","at_z","fixNatives","is_startup","old_val","defineProperty","enumerable","_a","hrnow","performance","last_tick","timestamp","dt","hidden","webkitHidden","rise","_rise","tickInput","tickUI","ul","lr","viewport2","view_height","font_size","elem_fullscreen","drawRect","BORDERS","show_metrics","render","endFrame","error_report_details","error_report_details_str","escape","last_error_time","crash_idx","filtered_errors","glovErrorReport","getURLBase","lastIndexOf","href","periodiclyRequestFrame","error_report","is_pixely","pixely","powerPreference","high","context_names","force_webgl1","NOWEBGL2","ts","FORCEWEBGL2","rc","context_opts","good","getContext","alert","visibility","viewport_postprocess","depthFunc","LEQUAL","cullFace","BACK","pixelStorei","UNPACK_ALIGNMENT","ambient","mvp","mv_inv_trans","view","projection","defaultFilters","LINEAR_MIPMAP_LINEAR","font_info_04b03x2","font_info_04b03x1","info","texture","bindSounds","ui_sounds","button_click","rollover","show_fps","load_count","loading","elem_loading_text","loading_elem","glov_engine","filewatchOn","filewatchMessageHandler","filewatchTriggerChange","filewatchStartup","by_ext","by_match","ext_or_search","message_cb","onFileChange","filename","ext_idx","did_reload","client","onMsg","intColorFromVec4Color","vec4ColorFromIntColor","styleColored","styleAlpha","v4clone","v4scale","COLOR_MODE","SINGLE","GRADIENT","ALIGN","HLEFT","HCENTER","HRIGHT","HMASK","VTOP","VCENTER","VBOTTOM","VMASK","HFIT","HWRAP","HCENTERFIT","HVCENTER","HVCENTERFIT","GlovFontStyle","color_vec4","outline_width","outline_color","glow_xoffs","glow_yoffs","glow_inner","glow_outer","glow_color","colorUR","colorLR","colorLL","color_mode","font_shaders","glov_font_default_style","font_style","fields","_f","colorAlpha","alpha","tech_params","tech_params_dirty","temp_color","createTechniqueParameters","param0","outlineColor","glowColor","glowParams","tex0","techParamsSet","param","tpv","techParamsGet","GlovFont","font_info","texture_name","noFilter","font_aa","tex_w","imageW","tex_h","imageH","char_infos","char_info","sc","_char_info","xpad","yoffs","replacement_character","infoFromChar","default_style","applied_style","drawSizedColor","drawSized","drawScaled","drawSizedAligned","align","x_size","y_size","getStringWidth","drawSizedColorWrapped","indent","drawScaledWrapped","drawSizedWrapped","wrapLines","word_cb","wrapLinesScaled","numLines","applyStyle","numlines","wordCallback","linenum","word","getCharacterWidth","xsc","x_advance","calcXAdvance","word_start","word_x0","space_info","space_size","hard_wrap","newx","char_w","tabsize","word_width","ysc","last_width","num_lines","xoffs","word_w","font_texel_scale","isFinite","y_offset","avg_scale_font","camera_xscale","camera_yscale","avg_scale_combined","tile_state","delta_per_source_pixel","spread","delta_per_dest_pixel","padding1","padding4","outer_scaled","value2","padding_in_font_space","z_advance","rel_x_scale","rel_y_scale","char_scale","xsc2","ysc2","pad_scale","tile_width","tile_height","u0","u1","v0","v1","queueraw","determineShader","outline","font_aa_outline_glow","font_aa_outline","font_aa_glow","fontShadersInit","_len","_key","Function","concat","createIndices","createQuads","TRIANGLES","TRIANGLE_FAN","gl_byte_size","5120","5121","5122","5123","5126","bound_geom","bound_array_buf","bound_index_buf","quad_index_buf","quad_index_buf_len","deleteBuffer","bindBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","attrib_enabled","enableVertexAttribArray","disable_mask","enable_mask","disableVertexAttribArray","_n","getQuadIndexBuf","quad_count","vidx","bufferData","STATIC_DRAW","idxs","ibo","ibo_size","formatInfo","elem_count","used_attribs","common_byte_size","fmt","sem","gltype","byte_size","Geom","verts","mode","format_info","vert_count","vert_gpu_mem","vbo","orig_mode","ibo_owned","updateSub","offset","bufferSubData","update","num_verts","DYNAMIC_DRAW","subarray","dispose","bound_attribs","normalized","vertexAttribPointer","drawElements","UNSIGNED_SHORT","drawArrays","GeomMultiQuads","ec","geoms","num_sub_verts","sub_data","decode","charCache","charFromCodePt","fromCodePoint","fromCharCode","result","array","codePt","byte1","buffLen","getAccessorTypeFromSize","TYPES","ATTRIBUTE_TYPE_TO_COMPONENTS","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE","5125","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","Int8Array","unpackGLBBuffers","unpackBinaryJson","padTo4Bytes","decode_utf8","MAGIC_glTF","GLB_FILE_HEADER_SIZE","GLB_CHUNK_HEADER_SIZE","GLB_CHUNK_TYPE_JSON","GLB_CHUNK_TYPE_BIN","LE","BE","GLBParser","binaryByteOffset","packedJson","json","parseBinary","DataView","glbArrayBuffer","magic1","getUint32","fileLength","valid","jsonChunkLength","jsonChunkFormat","jsonChunkOffset","jsonChunk","jsonText","JSON","parse","binaryChunkStart","binChunkFormat","arrayBuffer","parseInternal","unpackedBuffers","parseSync","getApplicationData","getArrayBuffer","getBinaryByteOffset","getBufferView","glTFBufferView","byteOffset","glTFAccessor","componentType","components","bytesPerComponent","bufferViews","bufferView","getImageData","glTFImage","typedArray","mimeType","getImage","arrayBufferView","blob","Blob","urlCreator","URL","webkitURL","imageUrl","createObjectURL","img","Image","parser","parseJSONPointer","matches","_index","decodeJSONPointer","object","buffers","pointer","unpackJsonArraysRecursive","topJson","element","newObject","getArrayBufferAtOffset","binaryBuffer","ArrayBuffer","sourceArray","binaryArray","getArrayTypeAndLength","accessor","unpackAccessors","accessors","accessorBuffers","_getArrayTypeAndLengt","unpackImages","images","imageBuffers","image","imate","topOfFrame","cbs","code_or_pos","keyCode","pageX","pageY","button","pointerLocked","eatAllInput","mousePos","mouseMoved","mouseWheel","mouseOver","mouseDown","mousePosIsTouch","isTouchDown","numTouches","keyDown","keyDownEdge","padGetAxes","padButtonDown","padButtonDownEdge","padButtonUpEdge","mouseUpEdge","mouseDownEdge","mouseConsumeClicks","drag","longPress","dragDrop","dragOver","in_event","soundResume","v2add","v2set","v2scale","v2sub","UP_EDGE","UP","DOWN","DOWN_EDGE","TOUCH_AS_MOUSE","map_analog_to_dpad","mouse_log","ANY","POINTERLOCK","BACKSPACE","TAB","ENTER","RETURN","SHIFT","CTRL","ALT","SPACE","PAGEUP","PAGEDOWN","END","HOME","LEFT","RIGHT","INS","DEL","NUMPAD_DIVIDE","EQUALS","MINUS","SLASH","TILDE","Proxy","target","prop","PAD","A","SELECT","B","X","Y","LB","LEFT_BUMPER","RB","RIGHT_BUMPER","LT","LEFT_TRIGGER","RT","RIGHT_TRIGGER","START","LEFT_STICK","RIGHT_STICK","ANALOG_UP","ANALOG_LEFT","ANALOG_DOWN","ANALOG_RIGHT","pad_to_touch","key_state_new","pad_states","gamepad_data","mouse_pos","last_mouse_pos","mouse_pos_is_touch","mouse_over_captured","mouse_down","mouse_wheel","movement_questionable_frames","MOVEMENT_QUESTIONABLE_FRAMES","input_eaten_kb","input_eaten_mouse","touches","touch_mode","pad_mode","TYPE_INT","eventTimestamp","timeStamp","TouchData","touch","cur_pos","start_pos","start_time","dispatched","dispatched_drag_over","up_edge","down_edge","down_time","origin_time","down","is_edge","MIN_EVENT_TIME_DELTA","timeDelta","et","KeyData","keyUp","setMouseToMid","isLocked","pointerlock_touch_id","when","enter","onPointerLockEnter","touch_data","exit","last_event","skip","isTrusted","sourceCapabilities","currentTarget","eventlog","pairs","letEventThrough","tagName","className","stopPropagation","unload_protected","beforeUnload","returnValue","protectUnload","onKeyUp","ctrlKey","ks","onKeyDown","no_stop","F5","F12","I","altKey","metaKey","shiftKey","mouse_moved","temp_delta","last_abs_move","last_abs_move_time","onMouseMove","any_movement","movementX","movementY","abs_move","onMouseDown","no_click","touch_id","onMouseUp","onWheel","deltaY","wheelDelta","detail","touch_pos","released_touch_id","onTouchChange","cancelable","ct","seen","new_count","old_count","last_touch","identifier","released_touch","released_ids","_touch","release","_touch2","new_id","_touch3","onBlurOrFocus","evt","ANALOG_MAP","genAnalogMap","_canvas","passive_param","passive","WheelEvent","DEADZONE","DEADZONE_SQ","NUM_STICKS","PAD_THRESHOLD","getGamepadData","gpd","sticks","updatePadState","ps","padcode","_touch_id","gamepadUpdate","gamepads","webkitGamepads","getGamepads","webkitGetGamepads","numGamePads","gamepad","buttons","numButtons","axes","pair","magnitude","endFrameTickMap","keycode","skip_mouse","mousePosParam","check_pos","checkPos","pos_param","drag_target","stickindex","padindex","sub","padButtonDownInternal","padButtonDownEdgeInternal","padButtonUpEdgeInternal","padButtonShared","max_click_dist","max_dist","phys","in_event_button","min_dist","is_down_edge","eat_clicks","payload","drag_payload","min_time","long_press_dispatched","long_press","link","linkText","linkTick","ui","state_cache","good_url","clicked","frame","a_elem","onclick","style_link","style_link_hover","mouseover","underline_w","drawLine","clearAll","exportAll","importAll","storage_prefix","lsd","localStorage","stringify","def","key_prefix","RegExp","serialized","mat43","m43identity","m43mul","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","b4","b5","b6","b7","b8","glb_parser","renderer","box_glb","default_vshader","default_fshader","initShaders","Model","base_url","array_buffer","skip_attr","TANGENT","glb_data","glb","glb_json","objs","meshes","mesh","primitives","material","materials","bct","pbrMetallicRoughness","baseColorTexture","texture_def","sampler_def","samplers","sampler","uri","magFilter","minFilter","wrapS","wrapT","bidx","attr","attributes","_accessor","geom_format","geom_count","my_vert_count","vert","_attr","indices","mat","drawGeom","model","box","model_box","buildString","packet","subscription_manager","WSClient","wscommon","subs","pver","PROTOCOL_VERSION","default_flags","auto_create_user","Boolean","build_timestamp_string","toISOString","preloadParticleData","v2lerp","v2mul","v3add","v4lerp","v4mul","blend_map","BLEND_ALPHA","additive","BLEND_ADDITIVE","particle_data","defs","part_name","particles","part_def","normalizeValue","normalizeValueVec","vec","normalizeParticle","particle_manager","norm","blend","color_track","size_track","accel","rot","rot_vel","lifespan","kill_time_accel","_e","_arr","findParticle","normalizeEmitter","part_map","part_idx","particle","vel","emit_rate","emit_time","emit_initial","normalizeDef","system_lifespan","emitters","instValue","instValueVec","temp_color2","temp_size","temp_size2","ParticleSystem","def_in","age","kill_hard","kill_soft","part_sets","part_set","_def","emitter","countdown","started","stopped","part","age_norm","dts","_weight","queueraw4","dt_orig","tickParticle","init_dt","emitter_def","emitParticle","remaining_dt","emit_dt","tickPartSet","tickEmitter","ParticleManager","systems","system","_key2","v3copy","metrics","METRIC_PAD","bg_default","bg_mouse_over","bg_fade","fps_graph","fps_style","metric","history_size","num_labels","showMetric","pad","METRIC_VALUE_WIDTH","line_height","max_label_w","max_labels","drew_any","label_w","FPSMETER","bg","showMetricGraph","small","LINE_WIDTH","LINE_PAD","LINE_HEIGHT","NUM_LINES","history_index","line_scale","line_index","bar_max","line_jj","bar_min","bars_stack","lesser","line_kk","y_graph","user_want_locked","on_ptr_lock","pointerLog","exitPointerLock","requestPointerLock","onPointerLockChange","pointerLockElement","mozPointerLockElement","webkitPointerLockElement","onPointerLockError","_elem","_on_ptr_lock","mozRequestPointerLock","webkitRequestPointerLock","mozExitPointerLock","webkitExitPointerLock","begin","Int32Array","delim","cmpDefault","cmp","mashString","Mash","Alea","reseed","step","uint32","fract53","floatBetween","titleCase","true","addInclude","addReservedDefine","setInternalDefines","addGlobal","matchAll","texturesUnloadDynamic","webFSGetFile","last_id","bound_prog","ATTR0","ATTR1","COLOR","COLOR_0","ATTR2","TEXCOORD","TEXCOORD_0","ATTR3","NORMAL","ATTR4","TEXCOORD_1","globals","error_fp","error_vp","vp_attr_regex","uniform_regex","sampler_regex","include_regex","type_size","float","includes","loadInclude","report_queued","shader_errors","reportShaderError","doReport","parseIncludes","supplied_uniforms","replacement","str2","webgl2_header","webgl2_header_fp","webgl2_header_vp","Shader","endsWith","FRAGMENT_SHADER","VERTEX_SHADER","createShader","programs","compile","header","found","uniforms","type_name","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","error_text","getShaderInfoLog","trim","uniformSetValue","unif","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","uniformMatrix4fv","prog","createProgram","attachShader","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","getUniformLocation","glob","_name","uniform1i","_jj","reserved","WEBGL2","internal_defines","applyDefines","shaderReload","deleteProgram","new_values","onShaderChange","_globals","soundLoad","soundResumed","soundPlay","soundPlayMusic","FADE_DEFAULT","FADE_OUT","FADE_IN","FADE","DEFAULT_FADE_RATE","num_loading","default_params","ext_list","fade_rate","sound_params","last_played","fades","music","base","preferred_ext","srcs","suffix","for_reload","tryLoad","streaming","glov_load_opts","extra","soundReload","sound_name","current_volume","target_volume","sys_volume","need_play","max_fade","mus","fade_amt","soundname","as_music","last_played_time","fadeOut","transition","start_vol","_sys_volume","spriteQueuePush","spriteQueuePop","queuefn","queuesprite","clip","buildRects","nextHighestPowerOfTwo","sprite_vshader","sprite_fshader","sprite_dual_fshader","sprite_shader_params","last_uid","sprite_queue","sprite_freelist","sprite_queue_stack","SpriteData","shader_params","uid","spriteDataAlloc","cmpSprite","uvs","nozoom","pixel_perfect","cosr","sinr","ch","cw","sh","sw","ubias","vbias","zoom_level","mipped_texels","z_start","z_end","xy","wh","gd_h","scissor","SCISSOR_TEST","diffTextures","texsa","texsb","batch_state","sprite_geom","sprite_buffer","sprite_buffer_len","sprite_buffer_batch_start","sprite_buffer_idx","last_blend_mode","last_bound_shader","MAX_VERT_COUNT","batches","commit","commitAndFlush","batch","ONE","bufferSpriteData","c1","c2","c3","c4","u2","v2","new_length","ws","hs","rects","total_w","total_h","hw","non_square","asp","widths","heights","Sprite","layers","onLoad","src_width","src_height","uidata","drawDualTint","color1","dot_prop","EventEmitter","md5","isPacket","ClientChannelWorker","channel_id","subscriptions","subscribe_failed","got_subscribe","handlers","handleChannelData","handleApplyChannelData","inherits","onSubscribe","autosubscribed","onceSubscribe","emit","channel_type","cmd_list","cmds_list_by_worker","resp","addServerCommands","getChannelData","setChannelData","skip_predict","q","wsPak","writeAnsiString","writeBool","writeJSON","removeMsgHandler","broadcast","silent_error","SubscriptionManager","logged_in","login_credentials","logged_in_username","was_logged_in","logging_in","logging_out","first_connect","server_time","server_time_interp","handleConnect","handleChannelMessage","handleServerTime","handleAdminMsg","onceConnected","connected","reconnect","socket","resub","channel","loginInternal","login","readAnsiString","is_packet","readBool","readJSON","debug_msg","contents","getChannel","getServerTime","subscribe","do_subscribe","getUserId","loggedIn","getMyUserChannel","user_id","unsubscribe","onLogin","handleLoginResponse","logged_in_display_name","display_name","password","secret","userCreateInternal","hashedPassword","username","hashed_password","userCreate","password_confirm","email","hashed_password_confirm","logout","_this2","_channel","sendCmdParse","command","channel_ids","last_error","tryNext","isArrayBound","getExternalTextureURL","setExternalTextureBaseURL","findTexForReplacement","callEach","isPowerOfTwo","TEX_UNLOAD_TIME","aniso","max_aniso","aniso_enum","default_filter_min","default_filter_mag","cube_faces","R8","RGB8","RGBA8","mag","bound_unit","bound_tex","handle_loading","handle_error","setUnit","unit","activeTexture","TEXTURE0","bindHandle","bindTexture","unbindAll","TEXTURE_2D","last_use","eff_handle","auto_unload_textures","Texture","loaded","load_fail","is_array","TEXTURE_2D_ARRAY","is_cube","TEXTURE_CUBE_MAP","createTexture","on_load","soft_error","auto_unload","updateData","loadURL","updateGPUMem","new_size","mipmaps","texParameteri","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","texParameterf","destroyed","np2","texImage2D","internal_type","gl_type","num_images","texImage3D","texSubImage2D","tex_size","face","drawImage","_num_images","_ctx","generateMipmap","texture_base_url","TEX_RETRY_COUNT","did_next","fail","crossOrigin","retries","handleLoad","err_details","_err","copyTexImage2D","RGB","deleteTexture","last_temporary_id","unique_name","search_key","compare_key","tick_next_tex","textureReload","LUMINANCE","UNSIGNED_BYTE","RGBA","ext_anisotropic","TEXTURE_MAX_ANISOTROPY_EXT","MAX_TEXTURE_MAX_ANISOTROPY_EXT","queue","splitScreen","pixelate","randomTransition","easeOut","unit_vec","transitions","IMMEDIATE","REMOVE","CONTINUE","transition_pixelate","GlovTransition","capture","accum_time","transitionCapture","trans","immediate","TRANSITION_FINAL","_trans","destroyTexture","trans_idx","TRANSITION_RANGE","force_end","glovTransitionFadeFunc","fade_time","initial","ms_since_start","progress","glovTransitionSplitScreenFunc","border_width","slide_window","v_half","border_grow_progress","render_scale","transition_pixelate_texture","transitionPixelateCapture","glovTransitionPixelateFunc","gd_width","partial_progress","param1","texSizeX","texSizeY","fade_time_scale","makeColorSet","loadUISprite","drawHBox","drawVBox","drawBox","playUISound","setMouseOver","isFocusedPeek","isFocused","focusPrev","panel","drawTooltip","buttonShared","buttonTextDraw","buttonText","buttonImage","print","modalDialog","modalDialogClear","modalTextEntry","createEditBox","slider","menuUp","provideUserString","drawCircle","drawHollowCircle","drawCone","scaleSizes","setModalSizes","setFontHeight","setTooltipWidth","MODAL","TOOLTIP","glov_edit_box","glov_sprites","clone","merge","MODAL_DARKEN","menu_fade_params_default","saturation","brightness","fallback_darken","regular","disabled","doBlurEffect","desaturate_xform","desaturate_tmp","doDesaturateEffect","button_height","modal_button_width","button_img_size","modal_width","modal_y0","modal_title_scale","modal_pad","panel_pixel_scale","tooltip_panel_pixel_scale","tooltip_width","tooltip_pad","font_style_focused","font_style_normal","color_button","color_panel","modal_font_style","button_mouseover","button_focused","touch_changed_focus","last_frame_button_mouseover","frame_button_mouseover","modal_dialog","modal_stealing_focus","menu_up","menu_fade_params","menu_up_time","last_frame_edit_boxes","dom_elems","dom_elems_issued","button_keys","focused_last_frame","focused_this_frame","focused_key_not","focused_key","focused_key_prev1","focused_key_prev2","pad_focus_left","pad_focus_right","overrides","only_override","override","ui_sprites","pad_focus_dpad","button_regular","ok","O","cancel","yes","no","N","dynamic_text_elem","per_frame_dom_alloc","last_elem","sum","coords","my_w","my_h","quiet","tooltip","tooltip_w","tooltip_y0","eff_tooltip_pad","tooltip_above","draw_only","rollover_quiet","no_focus","key_opts","no_touch_mouseover","touch_twice","drag_over","z_bias","button_last_color","base_name","sprite_name","hpad","_buttonShared","shrink","img_rect","_buttonShared2","no_bg","img_origin","img_w","img_h","largest_w_horiz","largest_w_vert","pad_top","draw_param","left_align","rotation","flip","title","dom_requirement","virtual_size","modalDialogRun","fullscreen_mode","eff_font_height","eff_button_height","vpad","general_scale","old_h","_modal_dialog","click_anywhere","eff_modal_width","eff_button_width","max_total_button_width","text_w","tick_key","avail_width","eff_button_keys","pressed","eb","edit_text","val","old_fn","getText","old_tick","eb_ret","run","edit_w","color_slider_handle","color_slider_handle_grab","color_slider_handle_over","slider_dragging","draggable_width","grabbed","handle_center_pos","handle_h","handle_w","slider_handle","handle_x","handle_y","handle_color","pp_bad_frames","pp_this_frame","NOPP","edit_box","unrun","removeChild","copyTextToClipboard","textArea","position","border","boxShadow","background","execCommand","thing","copy_success","OK","mx","my","Mx","My","spreadTechParams","drawCircleInternal","tu1","tv1","tu2","tv2","circle","CIRCLE_SIZE","midp","filter_max","hollow_circle","LINE_W","LINE_SIZE","tangx","tangy","cone","CONE_SIZE","dCircle","_modal_button_width","title_scale","_font_height","_tooltip_width","_tooltip_panel_pixel_scale","onChange","route","refreshTitle","go","HISTORY_UPDATE_TIME","title_suffix","url_base","on_change","cmpNumKeys","route_param_regex","routes","route_string","regex","new_route","queryString","regex_value","getValue","query_string","_m","_r","m2","last_history_str","goInternal","hides","otherkey","dirty","new_value","_opts2","eff_title","values","root_value","route_title","_key3","_opts3","hide_values","_key4","_opts4","periodicRefreshTitle","onPopState","on_url_change","last_history_set_time","scheduled","need_push_state","updateHistory","new_need_push_state","new_str","delay","pushState","replaceState","regex_search","regex_type","onpopstate","vec1","v2abs","v2addScale","v2distSq","v2div","v2floor","v2normalize","v2same","v3iAdd","v3addScale","v3cross","v3determinant","v3dot","v3distSq","v3div","v3iFloor","v3floor","v3lengthSq","v3lerp","v3iMax","v3iMin","v3mul","v3normalize","v3perspectiveProject","v3round","v3same","v3scale","v3set","v3sub","v3iSub","v3zero","v4add","v4mulAdd","v4zero","half_vec","zero_vec","identity_mat3","identity_mat4","xaxis","yaxis","zaxis","it","invw","offs","sync","seconds","webFSExists","webFSReportUnused","fs","glov_webfs","decoded","used","u8","idxo","idxi","byte","report_ignore_regex","tot_size","webFSReload","scriptTag","old_fs","old_value","getElementsByTagName","ack","ackInitReceiver","walltime","wsHandleMessage","disconnected","retry_scheduled","retry_count","disconnect_time","last_receive_time","last_send_time","auto_path","path2","onConnectAck","onAppVer","onError","timeSinceDisconnect","on_app_ver_mismatch","app_ver","client_id","sendMessage","wrappedCallback","checkForNewAppVersion","app_ver_check_in_progress","responseText","delayed_recheck","retryConnection","for_reconnect","WebSocket","binaryType","guard","abort","skip_close","failAll","retry","doPing","PING_TIME","glov_local_storage","continent_gen","net","BACKGROUND","SPRITES","PARTICLES","UI_TEST","worldsModAPI","mapi","shader_hex","style_labels","createSprite","modes","edit","debug_tex1","debug_tex2","debug_sprite","tex_total_size","hex_param","tex_data1","test_export","updateDebugTexture","view_mode","seaColor","setColorBuffer","do_ocean","landv","tslope_min","tslope_range","tslope_mul","_jj2","serialize_size","doExport","ser","writeBuffer","continentDataSet","need_regen","debug_uvs","HEX_ASPECT","VIEW_OFFS","HEX_EXTRA_WIDTH","HEX_NON_EXTRA","HEX_HEIGHT_2","HEX_SLOPE","fpos","ix","odd","fracx","iy","fracy","_slope","_cdata","button_spacing","sliderInternal","max_v","fixed","ex","is_ex","toggle","modeButton","subkey","colors_selected","selected","num_rows","testInit","exp","Buffer","isBuffer","ackWrapPakStart","ackWrapPakPayload","ackWrapPakFinish","ackHandleMessage","receiver","last_pak_id","resp_cbs","responses_waiting","ACKFLAG_IS_RESP","ACKFLAG_ERR","ACKFLAG_DATA_JSON","flags","ack_data","resp_pak_id","resp_pak_id_offs","getOffset","data_offs","appendRemaining","writeString","zeroInt","updateFlags","ackReadHeader","getFlags","pak_id","readString","net_data_or_pak","send_func","pak_func","handle_func","net_data","expecting_response","timeout_id","sent_response","preSendResp","respFunc","resp_data","ref_pak","orig_send","chr_table","encode","dv","effi","decodeNativeBrowser","allocator","decode_size","encodeNativeNode","decodeNativeNode","buffer_len","write","BROWSER","base64Decode","base64Encode","isInteger","TYPE_NAME","checkAccess","CmdParse","cmds_for_complete","was_not_found","default_handler","cmdList","access_show","access_run","setDefaultHandler","store_key","init_value","store_value","cmpCmd","new_cmds","_cname","first_tok","stringUtf8Encode","utftext","rotateLeft","lValue","iShiftBits","addUnsigned","lX","lY","lX8","lY8","lX4","lY4","lResult","F","G","H","FF","ac","GG","HH","II","convertToWordArray","string","lWordCount","lMessageLength","lNumberOfWords_temp1","lNumberOfWords_temp2","lNumberOfWords","lWordArray","lBytePosition","lByteCount","wordToHex","wordToHexValue","wordToHexValue_temp","lByte","lCount","substr","AA","BB","CC","DD","S11","S12","S13","S14","S21","S22","S23","S24","S31","S32","S33","S34","S41","S42","S43","S44","packetBufPoolAlloc","packetBufPoolFree","PACKET_RESERVED1","PACKET_RESERVED2","FLAG_PACKET_INTERNAL","PACKET_UNOWNED_BUFFER","log2","FALSYS","NaN","PAK_BUF_DEFAULT_SIZE","UNDERRUN","POOL_PACKETS","POOL_TIMEOUT","POOL_BUF_BY_SIZE","pak_pool","pak_debug_pool","buf_pool","allocDataView","pool_idx","packet_pool_idx","wrapU8AsDataView","utf8ByteLength","utf8WriteChar","buf_offs","poolBuf","Packet","init_size","pak_debug","reinit","has_flags","buf_len","bufs","bsizes","readable","ref_count","fit","ref","poolDebug","totalSize","setReadable","bsize","extra_bytes","no_advance","new_offs","advance","neg","setUint16","setUint32","low_bits","zeroes","sign","getUint16","high_bits","writeFloat","setFloat32","readFloat","getFloat32","writeU32","readU32","byte_length","utf8ReadChar","string_assembly","end_offset","_c","null_buf","readBuffer","do_copy","append","_buf","_bsize","_offs","toJSON","setBuffer","read","getInternalFlags","PacketDebug","in_pool","warned","pool_timer","types","write_fn","read_fn","found_idx","fname","cur_offs","read_len","saved_ref_count","type_idx","need_copy","_pak","packetFromJSON","js_obj","_listeners","addListener","ee","hasListener","removeListener","filterNotOnce","any","any_once","nop","empty","easeInOut","easeIn","cloneShallow","mix","round100","round1000","fract","lineCircleIntersect","logdata","toNumber","randomNot","toArray","va","dest","hasOwnProperty","mn","tol","EPSILON","p1","p2","pCircle","dp","bb4ac","mu1","mu2","ctor","superCtor","constructor","writable","configurable","not_value","max_value","array_like","re","pre_clear","wsPakSendDest","CONNECTION_TIMEOUT","PAK_HEADER_SIZE","ws_server","wsPakSendFinish","_pak$ws_data","ws_data","ack_resp_pkt_id","wsPakSend","sendMessageInternal","sendFunc","pakFunc","handleFunc","handler","error_msg"],"mappings":"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","file":"app.bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/*!\n *  howler.js v2.1.3\n *  howlerjs.com\n *\n *  (c) 2013-2019, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  Modified by Jimb Esser:\n *    Fix inconsistent return of self.\n *    Do not throw uncaught promise rejections at startup\n *    Fix audio not resuming upon keypress\n *    Fix audio not resuming upon mousedown\n *    Fix pre-loading entire audio file when streaming is desired\n *    Unlock audio even if WebAudio is disabled\n *    Expose `safeToPlay` so app doesn't queue up hundreds of sounds before we can play any\n *    Add `volume` parameter to `play()` so you can play a sound a specific volume without popping\n *    Add extra delay before firing `end` event to prevent sounds from being stopped before they even start on Android\n *    Fix creating unbounded number of Audio elements when `unlock` is called multiple times\n *    Fix calling createBufferSource() on every touch event if not unlocked\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n      self.safeToPlay = false;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Handle stopping all sounds globally.\n     */\n    stop: function() {\n      var self = this || Howler;\n\n      // Loop through all Howls and stop them.\n      for (var i=0; i<self._howls.length; i++) {\n        self._howls[i].stop();\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n      if  (self.state === 'running') {\n        self.safeToPlay = true;\n      }\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var checkOpera = self._navigator && self._navigator.userAgent.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!audioTest.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        webm: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      // JE: Unlock even if not using WebAudio; Also, _audioUnlocked is never true here, and would be false while unlocking anyway\n      // if (self._audioUnlocked || !self.ctx) {\n      //   return self;\n      // }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      if (self.ctx) {\n        // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n        // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n        // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n        if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n          self._mobileUnloaded = true;\n          self.unload();\n        }\n\n        // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n        // http://stackoverflow.com/questions/24119684\n        self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n      }\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        // JE: Don't add more to the pool than desired\n        while (self._html5AudioPool.length < self.html5PoolSize) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n            break;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        function onUnlockFinish() {\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n          self.safeToPlay = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n          document.removeEventListener('mousedown', unlock, true);\n          document.removeEventListener('keydown', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        }\n\n        if (self.ctx) {\n          // Create an empty buffer.\n          var source = self.ctx.createBufferSource();\n          source.buffer = self._scratchBuffer;\n          source.connect(self.ctx.destination);\n\n          // Play the empty buffer.\n          if (typeof source.start === 'undefined') {\n            source.noteOn(0);\n          } else {\n            source.start(0);\n          }\n\n          // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n          if (typeof self.ctx.resume === 'function') {\n            self.ctx.resume();\n          }\n\n          // Setup a timeout to check that we are unlocked on the next event loop.\n          source.onended = function() {\n            source.disconnect(0);\n            onUnlockFinish();\n          };\n        } else {\n          // JE: non-WebAudio - we received user input, assume unlocked immediately\n          onUnlockFinish();\n        }\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n      document.addEventListener('mousedown', unlock, true);\n      document.addEventListener('keydown', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      // JE: Disabling this, it causes un-ignorable Uncaught Promise Rejection errors in Chrome.\n      // //.Check if the audio is locked and throw a warning.\n      // var testPlay = new Audio().play();\n      // if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n      //   testPlay.catch(function() {\n      //     console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n      //   });\n      // }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return self;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n        self.ctx.suspend().then(function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        });\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return self;\n      }\n\n      if (self.state === 'running' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhrWithCredentials = o.xhrWithCredentials || false;\n      self._xhrHeaders = o.xhrHeaders || null;\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (Howler.autoUnlock) { // JE: Unlock even if not using WebAudio\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload) {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return self;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return self;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Number} volume\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, volume, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      // JE: With short timeouts, we get clipped on no sound at all on Android\n      timeout += 500;\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return null;\n      }\n\n      var sound_volume = typeof volume === 'number' ? volume : sound._volume;\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound_volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound_volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n\n          var listener = function() {\n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = parseFloat(from);\n      to = parseFloat(to);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Make sure the volume is in the right bounds.\n        vol = Math.max(0, vol);\n        vol = Math.min(1, vol);\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return self;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            self._emit('seek', id);\n\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, undefined, true);\n            }\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else if (!Howler.noAudio) {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        // JE: If _html5 was requested, then we want this audio streamed, not buffered!\n        self._node.preload = parent._html5 ? 'metadata' : 'auto';\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, true);\n      xhr.withCredentials = self._xhrWithCredentials;\n      xhr.responseType = 'arraybuffer';\n\n      // Apply any custom headers to the request.\n      if (self._xhrHeaders) {\n        Object.keys(self._xhrHeaders).forEach(function(key) {\n          xhr.setRequestHeader(key, self._xhrHeaders[key]);\n        });\n      }\n\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  };\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Define globally in case AMD is not available or unused.\n  if (typeof window !== 'undefined') {\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  } else if (typeof global !== 'undefined') { // Add to global in Node.js (for testing, etc).\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  }\n}());\n","'use strict';\nconst isObj = require('is-obj');\n\nfunction getPathSegments(path) {\n\tconst pathArr = path.split('.');\n\tconst parts = [];\n\n\tfor (let i = 0; i < pathArr.length; i++) {\n\t\tlet p = pathArr[i];\n\n\t\twhile (p[p.length - 1] === '\\\\' && pathArr[i + 1] !== undefined) {\n\t\t\tp = p.slice(0, -1) + '.';\n\t\t\tp += pathArr[++i];\n\t\t}\n\n\t\tparts.push(p);\n\t}\n\n\treturn parts;\n}\n\nmodule.exports = {\n\tget(obj, path, value) {\n\t\tif (!isObj(obj) || typeof path !== 'string') {\n\t\t\treturn value === undefined ? obj : value;\n\t\t}\n\n\t\tconst pathArr = getPathSegments(path);\n\n\t\tfor (let i = 0; i < pathArr.length; i++) {\n\t\t\tif (!Object.prototype.propertyIsEnumerable.call(obj, pathArr[i])) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tobj = obj[pathArr[i]];\n\n\t\t\tif (obj === undefined || obj === null) {\n\t\t\t\t// `obj` is either `undefined` or `null` so we want to stop the loop, and\n\t\t\t\t// if this is not the last bit of the path, and\n\t\t\t\t// if it did't return `undefined`\n\t\t\t\t// it would return `null` if `obj` is `null`\n\t\t\t\t// but we want `get({foo: null}, 'foo.bar')` to equal `undefined`, or the supplied value, not `null`\n\t\t\t\tif (i !== pathArr.length - 1) {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\tset(obj, path, value) {\n\t\tif (!isObj(obj) || typeof path !== 'string') {\n\t\t\treturn obj;\n\t\t}\n\n\t\tconst root = obj;\n\t\tconst pathArr = getPathSegments(path);\n\n\t\tfor (let i = 0; i < pathArr.length; i++) {\n\t\t\tconst p = pathArr[i];\n\n\t\t\tif (!isObj(obj[p])) {\n\t\t\t\tobj[p] = {};\n\t\t\t}\n\n\t\t\tif (i === pathArr.length - 1) {\n\t\t\t\tobj[p] = value;\n\t\t\t}\n\n\t\t\tobj = obj[p];\n\t\t}\n\n\t\treturn root;\n\t},\n\n\tdelete(obj, path) {\n\t\tif (!isObj(obj) || typeof path !== 'string') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst pathArr = getPathSegments(path);\n\n\t\tfor (let i = 0; i < pathArr.length; i++) {\n\t\t\tconst p = pathArr[i];\n\n\t\t\tif (i === pathArr.length - 1) {\n\t\t\t\tdelete obj[p];\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tobj = obj[p];\n\n\t\t\tif (!isObj(obj)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t},\n\n\thas(obj, path) {\n\t\tif (!isObj(obj) || typeof path !== 'string') {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst pathArr = getPathSegments(path);\n\n\t\tfor (let i = 0; i < pathArr.length; i++) {\n\t\t\tif (isObj(obj)) {\n\t\t\t\tif (!(pathArr[i] in obj)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tobj = obj[pathArr[i]];\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n};\n","module.exports = create\n\n/**\n * Creates a new identity mat3\n *\n * @alias mat3.create\n * @returns {mat3} a new 3x3 matrix\n */\nfunction create() {\n  var out = new Float32Array(9)\n  out[0] = 1\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 1\n  out[5] = 0\n  out[6] = 0\n  out[7] = 0\n  out[8] = 1\n  return out\n}\n","module.exports = fromMat4\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @alias mat3.fromMat4\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nfunction fromMat4(out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[4]\n  out[4] = a[5]\n  out[5] = a[6]\n  out[6] = a[8]\n  out[7] = a[9]\n  out[8] = a[10]\n  return out\n}\n","module.exports = copy;\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};","module.exports = create;\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nfunction create() {\n    var out = new Float32Array(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};","module.exports = invert;\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction invert(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) { \n        return null; \n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n};","module.exports = multiply;\n\n/**\n * Multiplies two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nfunction multiply(out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];  \n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n    return out;\n};","module.exports = perspective;\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction perspective(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n};","module.exports = transpose;\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a03 = a[3],\n            a12 = a[6], a13 = a[7],\n            a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n    \n    return out;\n};","'use strict';\nmodule.exports = function (x) {\n\tvar type = typeof x;\n\treturn x !== null && (type === 'object' || type === 'function');\n};\n","/*\n * A fast javascript implementation of simplex noise by Jonas Wagner\n\nBased on a speed-improved simplex noise algorithm for 2D, 3D and 4D in Java.\nWhich is based on example code by Stefan Gustavson (stegu@itn.liu.se).\nWith Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\nBetter rank ordering method by Stefan Gustavson in 2012.\n\n\n Copyright (c) 2018 Jonas Wagner\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n(function() {\n  'use strict';\n\n  var F2 = 0.5 * (Math.sqrt(3.0) - 1.0);\n  var G2 = (3.0 - Math.sqrt(3.0)) / 6.0;\n  var F3 = 1.0 / 3.0;\n  var G3 = 1.0 / 6.0;\n  var F4 = (Math.sqrt(5.0) - 1.0) / 4.0;\n  var G4 = (5.0 - Math.sqrt(5.0)) / 20.0;\n\n  function SimplexNoise(randomOrSeed) {\n    var random;\n    if (typeof randomOrSeed == 'function') {\n      random = randomOrSeed;\n    }\n    else if (randomOrSeed) {\n      random = alea(randomOrSeed);\n    } else {\n      random = Math.random;\n    }\n    this.p = buildPermutationTable(random);\n    this.perm = new Uint8Array(512);\n    this.permMod12 = new Uint8Array(512);\n    for (var i = 0; i < 512; i++) {\n      this.perm[i] = this.p[i & 255];\n      this.permMod12[i] = this.perm[i] % 12;\n    }\n\n  }\n  SimplexNoise.prototype = {\n    grad3: new Float32Array([1, 1, 0,\n      -1, 1, 0,\n      1, -1, 0,\n\n      -1, -1, 0,\n      1, 0, 1,\n      -1, 0, 1,\n\n      1, 0, -1,\n      -1, 0, -1,\n      0, 1, 1,\n\n      0, -1, 1,\n      0, 1, -1,\n      0, -1, -1]),\n    grad4: new Float32Array([0, 1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1,\n      0, -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1,\n      1, 0, 1, 1, 1, 0, 1, -1, 1, 0, -1, 1, 1, 0, -1, -1,\n      -1, 0, 1, 1, -1, 0, 1, -1, -1, 0, -1, 1, -1, 0, -1, -1,\n      1, 1, 0, 1, 1, 1, 0, -1, 1, -1, 0, 1, 1, -1, 0, -1,\n      -1, 1, 0, 1, -1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, -1,\n      1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1, 0,\n      -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1, 0]),\n    noise2D: function(xin, yin) {\n      var permMod12 = this.permMod12;\n      var perm = this.perm;\n      var grad3 = this.grad3;\n      var n0 = 0; // Noise contributions from the three corners\n      var n1 = 0;\n      var n2 = 0;\n      // Skew the input space to determine which simplex cell we're in\n      var s = (xin + yin) * F2; // Hairy factor for 2D\n      var i = Math.floor(xin + s);\n      var j = Math.floor(yin + s);\n      var t = (i + j) * G2;\n      var X0 = i - t; // Unskew the cell origin back to (x,y) space\n      var Y0 = j - t;\n      var x0 = xin - X0; // The x,y distances from the cell origin\n      var y0 = yin - Y0;\n      // For the 2D case, the simplex shape is an equilateral triangle.\n      // Determine which simplex we are in.\n      var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n      if (x0 > y0) {\n        i1 = 1;\n        j1 = 0;\n      } // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n      else {\n        i1 = 0;\n        j1 = 1;\n      } // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n      // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n      // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n      // c = (3-sqrt(3))/6\n      var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n      var y1 = y0 - j1 + G2;\n      var x2 = x0 - 1.0 + 2.0 * G2; // Offsets for last corner in (x,y) unskewed coords\n      var y2 = y0 - 1.0 + 2.0 * G2;\n      // Work out the hashed gradient indices of the three simplex corners\n      var ii = i & 255;\n      var jj = j & 255;\n      // Calculate the contribution from the three corners\n      var t0 = 0.5 - x0 * x0 - y0 * y0;\n      if (t0 >= 0) {\n        var gi0 = permMod12[ii + perm[jj]] * 3;\n        t0 *= t0;\n        n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0); // (x,y) of grad3 used for 2D gradient\n      }\n      var t1 = 0.5 - x1 * x1 - y1 * y1;\n      if (t1 >= 0) {\n        var gi1 = permMod12[ii + i1 + perm[jj + j1]] * 3;\n        t1 *= t1;\n        n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1);\n      }\n      var t2 = 0.5 - x2 * x2 - y2 * y2;\n      if (t2 >= 0) {\n        var gi2 = permMod12[ii + 1 + perm[jj + 1]] * 3;\n        t2 *= t2;\n        n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2);\n      }\n      // Add contributions from each corner to get the final noise value.\n      // The result is scaled to return values in the interval [-1,1].\n      return 70.0 * (n0 + n1 + n2);\n    },\n    // 3D simplex noise\n    noise3D: function(xin, yin, zin) {\n      var permMod12 = this.permMod12;\n      var perm = this.perm;\n      var grad3 = this.grad3;\n      var n0, n1, n2, n3; // Noise contributions from the four corners\n      // Skew the input space to determine which simplex cell we're in\n      var s = (xin + yin + zin) * F3; // Very nice and simple skew factor for 3D\n      var i = Math.floor(xin + s);\n      var j = Math.floor(yin + s);\n      var k = Math.floor(zin + s);\n      var t = (i + j + k) * G3;\n      var X0 = i - t; // Unskew the cell origin back to (x,y,z) space\n      var Y0 = j - t;\n      var Z0 = k - t;\n      var x0 = xin - X0; // The x,y,z distances from the cell origin\n      var y0 = yin - Y0;\n      var z0 = zin - Z0;\n      // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n      // Determine which simplex we are in.\n      var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n      var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n      if (x0 >= y0) {\n        if (y0 >= z0) {\n          i1 = 1;\n          j1 = 0;\n          k1 = 0;\n          i2 = 1;\n          j2 = 1;\n          k2 = 0;\n        } // X Y Z order\n        else if (x0 >= z0) {\n          i1 = 1;\n          j1 = 0;\n          k1 = 0;\n          i2 = 1;\n          j2 = 0;\n          k2 = 1;\n        } // X Z Y order\n        else {\n          i1 = 0;\n          j1 = 0;\n          k1 = 1;\n          i2 = 1;\n          j2 = 0;\n          k2 = 1;\n        } // Z X Y order\n      }\n      else { // x0<y0\n        if (y0 < z0) {\n          i1 = 0;\n          j1 = 0;\n          k1 = 1;\n          i2 = 0;\n          j2 = 1;\n          k2 = 1;\n        } // Z Y X order\n        else if (x0 < z0) {\n          i1 = 0;\n          j1 = 1;\n          k1 = 0;\n          i2 = 0;\n          j2 = 1;\n          k2 = 1;\n        } // Y Z X order\n        else {\n          i1 = 0;\n          j1 = 1;\n          k1 = 0;\n          i2 = 1;\n          j2 = 1;\n          k2 = 0;\n        } // Y X Z order\n      }\n      // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n      // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n      // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n      // c = 1/6.\n      var x1 = x0 - i1 + G3; // Offsets for second corner in (x,y,z) coords\n      var y1 = y0 - j1 + G3;\n      var z1 = z0 - k1 + G3;\n      var x2 = x0 - i2 + 2.0 * G3; // Offsets for third corner in (x,y,z) coords\n      var y2 = y0 - j2 + 2.0 * G3;\n      var z2 = z0 - k2 + 2.0 * G3;\n      var x3 = x0 - 1.0 + 3.0 * G3; // Offsets for last corner in (x,y,z) coords\n      var y3 = y0 - 1.0 + 3.0 * G3;\n      var z3 = z0 - 1.0 + 3.0 * G3;\n      // Work out the hashed gradient indices of the four simplex corners\n      var ii = i & 255;\n      var jj = j & 255;\n      var kk = k & 255;\n      // Calculate the contribution from the four corners\n      var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;\n      if (t0 < 0) n0 = 0.0;\n      else {\n        var gi0 = permMod12[ii + perm[jj + perm[kk]]] * 3;\n        t0 *= t0;\n        n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0 + grad3[gi0 + 2] * z0);\n      }\n      var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;\n      if (t1 < 0) n1 = 0.0;\n      else {\n        var gi1 = permMod12[ii + i1 + perm[jj + j1 + perm[kk + k1]]] * 3;\n        t1 *= t1;\n        n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1 + grad3[gi1 + 2] * z1);\n      }\n      var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;\n      if (t2 < 0) n2 = 0.0;\n      else {\n        var gi2 = permMod12[ii + i2 + perm[jj + j2 + perm[kk + k2]]] * 3;\n        t2 *= t2;\n        n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2 + grad3[gi2 + 2] * z2);\n      }\n      var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;\n      if (t3 < 0) n3 = 0.0;\n      else {\n        var gi3 = permMod12[ii + 1 + perm[jj + 1 + perm[kk + 1]]] * 3;\n        t3 *= t3;\n        n3 = t3 * t3 * (grad3[gi3] * x3 + grad3[gi3 + 1] * y3 + grad3[gi3 + 2] * z3);\n      }\n      // Add contributions from each corner to get the final noise value.\n      // The result is scaled to stay just inside [-1,1]\n      return 32.0 * (n0 + n1 + n2 + n3);\n    },\n    // 4D simplex noise, better simplex rank ordering method 2012-03-09\n    noise4D: function(x, y, z, w) {\n      var perm = this.perm;\n      var grad4 = this.grad4;\n\n      var n0, n1, n2, n3, n4; // Noise contributions from the five corners\n      // Skew the (x,y,z,w) space to determine which cell of 24 simplices we're in\n      var s = (x + y + z + w) * F4; // Factor for 4D skewing\n      var i = Math.floor(x + s);\n      var j = Math.floor(y + s);\n      var k = Math.floor(z + s);\n      var l = Math.floor(w + s);\n      var t = (i + j + k + l) * G4; // Factor for 4D unskewing\n      var X0 = i - t; // Unskew the cell origin back to (x,y,z,w) space\n      var Y0 = j - t;\n      var Z0 = k - t;\n      var W0 = l - t;\n      var x0 = x - X0; // The x,y,z,w distances from the cell origin\n      var y0 = y - Y0;\n      var z0 = z - Z0;\n      var w0 = w - W0;\n      // For the 4D case, the simplex is a 4D shape I won't even try to describe.\n      // To find out which of the 24 possible simplices we're in, we need to\n      // determine the magnitude ordering of x0, y0, z0 and w0.\n      // Six pair-wise comparisons are performed between each possible pair\n      // of the four coordinates, and the results are used to rank the numbers.\n      var rankx = 0;\n      var ranky = 0;\n      var rankz = 0;\n      var rankw = 0;\n      if (x0 > y0) rankx++;\n      else ranky++;\n      if (x0 > z0) rankx++;\n      else rankz++;\n      if (x0 > w0) rankx++;\n      else rankw++;\n      if (y0 > z0) ranky++;\n      else rankz++;\n      if (y0 > w0) ranky++;\n      else rankw++;\n      if (z0 > w0) rankz++;\n      else rankw++;\n      var i1, j1, k1, l1; // The integer offsets for the second simplex corner\n      var i2, j2, k2, l2; // The integer offsets for the third simplex corner\n      var i3, j3, k3, l3; // The integer offsets for the fourth simplex corner\n      // simplex[c] is a 4-vector with the numbers 0, 1, 2 and 3 in some order.\n      // Many values of c will never occur, since e.g. x>y>z>w makes x<z, y<w and x<w\n      // impossible. Only the 24 indices which have non-zero entries make any sense.\n      // We use a thresholding to set the coordinates in turn from the largest magnitude.\n      // Rank 3 denotes the largest coordinate.\n      i1 = rankx >= 3 ? 1 : 0;\n      j1 = ranky >= 3 ? 1 : 0;\n      k1 = rankz >= 3 ? 1 : 0;\n      l1 = rankw >= 3 ? 1 : 0;\n      // Rank 2 denotes the second largest coordinate.\n      i2 = rankx >= 2 ? 1 : 0;\n      j2 = ranky >= 2 ? 1 : 0;\n      k2 = rankz >= 2 ? 1 : 0;\n      l2 = rankw >= 2 ? 1 : 0;\n      // Rank 1 denotes the second smallest coordinate.\n      i3 = rankx >= 1 ? 1 : 0;\n      j3 = ranky >= 1 ? 1 : 0;\n      k3 = rankz >= 1 ? 1 : 0;\n      l3 = rankw >= 1 ? 1 : 0;\n      // The fifth corner has all coordinate offsets = 1, so no need to compute that.\n      var x1 = x0 - i1 + G4; // Offsets for second corner in (x,y,z,w) coords\n      var y1 = y0 - j1 + G4;\n      var z1 = z0 - k1 + G4;\n      var w1 = w0 - l1 + G4;\n      var x2 = x0 - i2 + 2.0 * G4; // Offsets for third corner in (x,y,z,w) coords\n      var y2 = y0 - j2 + 2.0 * G4;\n      var z2 = z0 - k2 + 2.0 * G4;\n      var w2 = w0 - l2 + 2.0 * G4;\n      var x3 = x0 - i3 + 3.0 * G4; // Offsets for fourth corner in (x,y,z,w) coords\n      var y3 = y0 - j3 + 3.0 * G4;\n      var z3 = z0 - k3 + 3.0 * G4;\n      var w3 = w0 - l3 + 3.0 * G4;\n      var x4 = x0 - 1.0 + 4.0 * G4; // Offsets for last corner in (x,y,z,w) coords\n      var y4 = y0 - 1.0 + 4.0 * G4;\n      var z4 = z0 - 1.0 + 4.0 * G4;\n      var w4 = w0 - 1.0 + 4.0 * G4;\n      // Work out the hashed gradient indices of the five simplex corners\n      var ii = i & 255;\n      var jj = j & 255;\n      var kk = k & 255;\n      var ll = l & 255;\n      // Calculate the contribution from the five corners\n      var t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0;\n      if (t0 < 0) n0 = 0.0;\n      else {\n        var gi0 = (perm[ii + perm[jj + perm[kk + perm[ll]]]] % 32) * 4;\n        t0 *= t0;\n        n0 = t0 * t0 * (grad4[gi0] * x0 + grad4[gi0 + 1] * y0 + grad4[gi0 + 2] * z0 + grad4[gi0 + 3] * w0);\n      }\n      var t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1;\n      if (t1 < 0) n1 = 0.0;\n      else {\n        var gi1 = (perm[ii + i1 + perm[jj + j1 + perm[kk + k1 + perm[ll + l1]]]] % 32) * 4;\n        t1 *= t1;\n        n1 = t1 * t1 * (grad4[gi1] * x1 + grad4[gi1 + 1] * y1 + grad4[gi1 + 2] * z1 + grad4[gi1 + 3] * w1);\n      }\n      var t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2;\n      if (t2 < 0) n2 = 0.0;\n      else {\n        var gi2 = (perm[ii + i2 + perm[jj + j2 + perm[kk + k2 + perm[ll + l2]]]] % 32) * 4;\n        t2 *= t2;\n        n2 = t2 * t2 * (grad4[gi2] * x2 + grad4[gi2 + 1] * y2 + grad4[gi2 + 2] * z2 + grad4[gi2 + 3] * w2);\n      }\n      var t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3;\n      if (t3 < 0) n3 = 0.0;\n      else {\n        var gi3 = (perm[ii + i3 + perm[jj + j3 + perm[kk + k3 + perm[ll + l3]]]] % 32) * 4;\n        t3 *= t3;\n        n3 = t3 * t3 * (grad4[gi3] * x3 + grad4[gi3 + 1] * y3 + grad4[gi3 + 2] * z3 + grad4[gi3 + 3] * w3);\n      }\n      var t4 = 0.6 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4;\n      if (t4 < 0) n4 = 0.0;\n      else {\n        var gi4 = (perm[ii + 1 + perm[jj + 1 + perm[kk + 1 + perm[ll + 1]]]] % 32) * 4;\n        t4 *= t4;\n        n4 = t4 * t4 * (grad4[gi4] * x4 + grad4[gi4 + 1] * y4 + grad4[gi4 + 2] * z4 + grad4[gi4 + 3] * w4);\n      }\n      // Sum up and scale the result to cover the range [-1,1]\n      return 27.0 * (n0 + n1 + n2 + n3 + n4);\n    }\n  };\n\n  function buildPermutationTable(random) {\n    var i;\n    var p = new Uint8Array(256);\n    for (i = 0; i < 256; i++) {\n      p[i] = i;\n    }\n    for (i = 0; i < 255; i++) {\n      var r = i + ~~(random() * (256 - i));\n      var aux = p[i];\n      p[i] = p[r];\n      p[r] = aux;\n    }\n    return p;\n  }\n  SimplexNoise._buildPermutationTable = buildPermutationTable;\n\n  function alea() {\n    // Johannes BaagÃ¸e <baagoe@baagoe.com>, 2010\n    var s0 = 0;\n    var s1 = 0;\n    var s2 = 0;\n    var c = 1;\n\n    var mash = masher();\n    s0 = mash(' ');\n    s1 = mash(' ');\n    s2 = mash(' ');\n\n    for (var i = 0; i < arguments.length; i++) {\n      s0 -= mash(arguments[i]);\n      if (s0 < 0) {\n        s0 += 1;\n      }\n      s1 -= mash(arguments[i]);\n      if (s1 < 0) {\n        s1 += 1;\n      }\n      s2 -= mash(arguments[i]);\n      if (s2 < 0) {\n        s2 += 1;\n      }\n    }\n    mash = null;\n    return function() {\n      var t = 2091639 * s0 + c * 2.3283064365386963e-10; // 2^-32\n      s0 = s1;\n      s1 = s2;\n      return s2 = t - (c = t | 0);\n    };\n  }\n  function masher() {\n    var n = 0xefc8249d;\n    return function(data) {\n      data = data.toString();\n      for (var i = 0; i < data.length; i++) {\n        n += data.charCodeAt(i);\n        var h = 0.02519603282416938 * n;\n        n = h >>> 0;\n        h -= n;\n        h *= n;\n        n = h >>> 0;\n        h -= n;\n        n += h * 0x100000000; // 2^32\n      }\n      return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n    };\n  }\n\n  // amd\n  if (typeof define !== 'undefined' && define.amd) define(function() {return SimplexNoise;});\n  // common js\n  if (typeof exports !== 'undefined') exports.SimplexNoise = SimplexNoise;\n  // browser\n  else if (typeof window !== 'undefined') window.SimplexNoise = SimplexNoise;\n  // nodejs\n  if (typeof module !== 'undefined') {\n    module.exports = SimplexNoise;\n  }\n\n})();\n","/* eslint global-require:off */\n\n// Startup code.\n\nlet called_once = false;\nwindow.onload = function () {\n  if (called_once) {\n    return;\n  }\n  called_once = true;\n  require('./glov/bootstrap.js');\n  require('./main.js').main();\n};","const assert = require('assert');\nconst { abs } = Math;\nconst { randCreate } = require('./glov/rand_alea.js');\n\nconst C_WATER = 0;\nconst C_PLAINS = 1;\nconst C_HILLS = 2;\nconst C_MOUNTAINS = 3;\n\nfunction rgb(r, g, b) {\n  return new Uint8Array([r, g, b, 255]);\n}\nconst OCEAN = rgb(0, 0, 255);\nconst TUNDRA = rgb(224, 244, 255);\nconst MOUNTAINS = rgb(170, 170, 170);\nconst CLIFFS = rgb(90, 90, 90);\nconst HILLS_FOREST = rgb(32, 128, 32);\nconst DENSE_FOREST = rgb(16, 64, 16);\nconst PLAINS_FOREST = rgb(96, 128, 32);\nconst HILLS = rgb(64, 255, 64);\nconst PLAINS = rgb(255, 255, 64);\nconst DESERT = rgb(255, 255, 191);\nconst PLAINS_RED = rgb(255, 96, 64);\nconst PLAINS_BLUE = rgb(64, 96, 255);\n\nconst COMMON = 1;\nconst UNCOMMON = 0.25;\nconst RARE = 0.03;\nfunction weightedChoiceBuild(list) {\n  let total = 0;\n  for (let ii = 0; ii < list.length; ++ii) {\n    total += list[ii][0];\n  }\n  return { total, list };\n}\n\nfunction weightedChoiceGet(precalc, choice) {\n  let { total, list } = precalc;\n  let w = total * choice;\n  for (let ii = 0; ii < list.length; ++ii) {\n    w -= list[ii][0];\n    if (w <= 0) {\n      return list[ii][1];\n    }\n  }\n  // Should never get here, baring floating point rounding errors\n  return list[0][1];\n}\n\nconst choice_elev0_hum75 = weightedChoiceBuild([[COMMON, DENSE_FOREST], [UNCOMMON, PLAINS_FOREST]]);\n\nconst choice_elev0_hum50 = weightedChoiceBuild([[COMMON, PLAINS_FOREST], [UNCOMMON, PLAINS]]);\n\nconst choice_elev0_hum25 = weightedChoiceBuild([[COMMON, PLAINS], [RARE, PLAINS_BLUE], [RARE, PLAINS_RED], [RARE, HILLS]]);\n\nfunction getBiomeV2(classif, tot_slope, elev, humidity, choice, cdist) {\n  if (classif === C_WATER) {\n    return OCEAN;\n  }\n  tot_slope *= 4;\n  let is_cliff = tot_slope > 0.6;\n  if (is_cliff) {\n    return CLIFFS;\n  }\n  if (classif === C_MOUNTAINS) {\n    if (tot_slope > 0.1) {\n      return MOUNTAINS;\n    } else {\n      return TUNDRA;\n    }\n  }\n  if (classif === C_HILLS) {\n    if (humidity > 0.66) {\n      return HILLS_FOREST;\n    } else {\n      return HILLS;\n    }\n  } else if (classif === C_PLAINS) {\n    if (humidity > 0.75) {\n      return weightedChoiceGet(choice_elev0_hum75, choice);\n    } else if (humidity > 0.5) {\n      return weightedChoiceGet(choice_elev0_hum50, choice);\n    } else if (humidity > 0.25) {\n      return weightedChoiceGet(choice_elev0_hum25, choice);\n    } else {\n      return DESERT;\n    }\n  } else {\n    return assert(0);\n  }\n}\n\nexport function calculateBiomesTest(hex_tex_size, cdata, tex_data_color) {\n  let {\n    elev, humidity, classif, ocean_distance, sea_level, max_elevation\n  } = cdata;\n  // This is not in output, just simulating what the game will do with this data when it gets it\n  let width = hex_tex_size;\n  let height = width;\n  let stride = width;\n  let neighbors_even = [stride, // above\n  1, // upper right\n  1 - stride, // lower right\n  -stride, // below\n  -1 - stride, // lower left\n  -1];\n  let neighbors_odd = [stride, // above\n  1 + stride, // upper right,\n  1, // lower right\n  -stride, // below\n  -1, // lower left\n  -1 + stride];\n  let neighbors_bit = [neighbors_even, neighbors_odd];\n\n  let rand = randCreate(0x12345);\n\n  let land_range = max_elevation - sea_level;\n  for (let y = 0; y < height; ++y) {\n    for (let x = 0; x < width; ++x) {\n      let pos = y * width + x;\n      //let is_land = land[pos];\n      let celev = (elev[pos] - sea_level) / land_range;\n      // let has_river = is_land && river[pos];\n      let humid = humidity[pos] / 255;\n      // let slope = tslope[pos]; // Use actual calculated abs(max?) of slope from elev?\n      let cdist = ocean_distance[pos] / (hex_tex_size * 2);\n      let cat = classif[pos];\n      let choice = rand.random();\n\n      // calc actual slope\n      let tot_slope = 0;\n      //let max_slope = 0;\n      let neighbors = neighbors_bit[x & 1];\n      for (let ii = 0; ii < 6; ++ii) {\n        let npos = pos + neighbors[ii];\n        let nelev = (elev[npos] - sea_level) / land_range;\n        let slope = abs(celev - nelev);\n        tot_slope += slope;\n        //max_slope = max(max_slope, slope);\n      }\n\n      let color = getBiomeV2(cat, tot_slope, celev, humid, choice, cdist);\n\n      //let color = getBiomeV1(is_land, celev, humid, choice);\n      for (let jj = 0; jj < 4; ++jj) {\n        tex_data_color[pos * 4 + jj] = color[jj];\n      }\n    }\n  }\n}","/*eslint no-labels:off */\nconst assert = require('assert');\nconst { abs, atan2, ceil, cos, max, min, floor, round, pow, sin, sqrt, PI } = Math;\nconst { C_WATER, C_PLAINS, C_HILLS, C_MOUNTAINS, SKEW_X } = require('./proc_gen_constants.js');\nconst { randCreate } = require('./glov/rand_alea.js');\nconst SimplexNoise = require('simplex-noise');\nconst { clamp, lerp, ridx } = require('../common/util.js');\nconst {\n  vec2, v2copy, v2lengthSq\n} = require('./glov/vmath.js');\n\nconst default_tex_size = 256;\n\nconst TWOPI = PI * 2;\n\n// For `fill` buffer\nexport const D_OPEN = 0;\nexport const D_BORDER = 1;\nexport const D_SEA = 2;\nexport const D_SEA2 = 3;\nexport const D_INLAND_SEA = 4;\nexport const D_COASTLINE = 5;\nexport const D_LAKE = 6;\n\nexport const default_opts = {\n  hex_tex_size: default_tex_size,\n  seed: 1,\n  coast: {\n    key: '',\n    frequency: 2,\n    amplitude: 1,\n    persistence: 0.5,\n    lacunarity: { min: 1.6, max: 2.8, freq: 0.3 },\n    octaves: 6,\n    cutoff: 0.5,\n    domain_warp: 0,\n    warp_freq: 1,\n    warp_amp: 0.1,\n    fill_seas: true,\n    channels: true\n  },\n  tslope: {\n    key: 'ts',\n    frequency: 3.5,\n    amplitude: 1,\n    min: 0,\n    range: 8,\n    persistence: 0.5,\n    lacunarity: 1.33,\n    octaves: 1,\n    domain_warp: 1,\n    warp_freq: 1,\n    warp_amp: 0.1\n  },\n  rslope: {\n    key: 'rs',\n    frequency: 1.2,\n    amplitude: 1,\n    persistence: 0.5,\n    lacunarity: 1.33,\n    octaves: 1,\n    domain_warp: 1,\n    warp_freq: 1,\n    warp_amp: 0.1,\n    steps: 4\n  },\n  river: {\n    weight_bend: 2,\n    weight_afork: 2,\n    weight_sfork: 1,\n    max_tslope: 48,\n    tuning_h: 32,\n    show_elev: true, // debug display option, not used by generator\n    prune: true,\n    mtify_prune_grace: 100,\n    mtify_prune: true\n  },\n  ocean: {\n    frequency: 3,\n    amplitude: 1,\n    persistence: 0.5,\n    lacunarity: 2.4,\n    octaves: 3,\n    domain_warp: 1,\n    warp_freq: 1,\n    warp_amp: 1\n  },\n  lakes: {\n    lake_search_radius: round(10 * default_tex_size / 256),\n    lake_percent: 0.10,\n    lake_k: 5,\n    min_sep: round(40 * default_tex_size / 256)\n  },\n  blur: {\n    threshold: 500,\n    weight: 1\n  },\n  mountainify: {\n    peak_radius: round(10 * default_tex_size / 256),\n    peak_percent: 0.80,\n    peak_k: 5,\n    height_scale: 3,\n    blend_radius: round(10 * default_tex_size / 256),\n    weight_local: 0.25,\n    power_min: 1,\n    power_max: 4,\n    power_blend: 0.25,\n    cdist_ramp: 2\n  },\n  humidity: {\n    frequency: 2.2,\n    amplitude: 1,\n    persistence: 0.5,\n    lacunarity: 4,\n    octaves: 3,\n    domain_warp: 0,\n    warp_freq: 1,\n    warp_amp: 1,\n    rainshadow: 0.75,\n    show_relief: false // debug display option, makes extreme rainshadow\n  },\n  classif: {\n    cut1: 0.033,\n    cut2: 0.666,\n    blur_scale: 680,\n    blur_w: 10,\n    show_rivers: false // debug display option, not used by generator\n  },\n  output: {\n    sea_range_exp: 13,\n    land_range_exp: 14,\n    sea_range: 1 << 13,\n    land_range: 1 << 14,\n    debug: false\n  },\n  early_out: null // 'river'\n};\n\nlet land;\nlet fill;\nlet util;\nlet mountain_delta;\nlet tslope;\nlet rslope;\nlet river;\nlet relev;\nlet rstrahler;\nlet water_level;\nlet coast_distance;\nlet ocean_distance;\nlet humidity;\nlet classif;\nlet blur_temp1;\nlet blur_temp2;\nlet debug_priority;\n\nlet total_size;\nlet width;\nlet height;\nlet neighbors_bit;\nlet state;\n\nfunction setupWorkBuffers(hex_tex_size) {\n  total_size = hex_tex_size * hex_tex_size;\n  width = height = hex_tex_size;\n\n  land = new Uint8Array(total_size);\n  fill = new Uint8Array(total_size);\n  util = new Uint8Array(total_size);\n  mountain_delta = new Uint32Array(total_size);\n  tslope = new Uint8Array(total_size);\n  rslope = new Uint8Array(total_size);\n  river = new Uint8Array(total_size);\n  relev = new Uint16Array(total_size);\n  rstrahler = new Uint8Array(total_size);\n  water_level = new Uint16Array(total_size);\n  coast_distance = new Uint8Array(total_size);\n  ocean_distance = new Uint8Array(total_size);\n  humidity = new Uint8Array(total_size);\n  classif = new Uint8Array(total_size);\n  blur_temp1 = new Uint32Array(total_size);\n  blur_temp2 = new Uint32Array(total_size);\n\n  let neighbors_even = [width, // above\n  1, // upper right\n  1 - width, // lower right\n  -width, // below\n  -1 - width, // lower left\n  -1];\n  let neighbors_odd = [width, // above\n  1 + width, // upper right,\n  1, // lower right\n  -width, // below\n  -1, // lower left\n  -1 + width];\n  neighbors_bit = [neighbors_even, neighbors_odd];\n}\n\nlet last_tex_size = -1;\nlet unif_pos = vec2();\nlet world_pos = vec2();\nlet opts;\nlet subopts;\n\nlet rand;\nfunction shuffleArray(arr) {\n  for (let ii = arr.length - 1; ii >= 1; --ii) {\n    let swap = rand.range(ii + 1);\n    let t = arr[ii];\n    arr[ii] = arr[swap];\n    arr[swap] = t;\n  }\n}\n\nlet noise;\nlet noise_warp;\nlet total_amplitude;\nlet noise_field;\nfunction initNoise(subopts_in) {\n  subopts = subopts_in;\n  noise = new Array(subopts.octaves);\n  for (let ii = 0; ii < noise.length; ++ii) {\n    noise[ii] = new SimplexNoise(`${opts.seed}n${subopts.key}${ii}`);\n  }\n  noise_warp = new Array(subopts.domain_warp);\n  for (let ii = 0; ii < noise_warp.length; ++ii) {\n    noise_warp[ii] = new SimplexNoise(`${opts.seed}w${subopts.key}${ii}`);\n  }\n  total_amplitude = 0; // Used for normalizing result to 0.0 - 1.0\n  let amp = subopts.amplitude;\n  let p = subopts.persistence && subopts.persistence.max || subopts.persistence;\n  for (let ii = 0; ii < subopts.octaves; ii++) {\n    total_amplitude += amp;\n    amp *= p;\n  }\n  noise_field = {};\n  for (let f in subopts) {\n    let v = subopts[f];\n    if (typeof v === 'object') {\n      noise_field[f] = new SimplexNoise(`${opts.seed}f${subopts.key}${f}`);\n      v.mul = (v.max - v.min) * 0.5;\n      v.add = v.min + v.mul;\n    }\n  }\n}\n\nlet sample_pos = vec2();\nfunction get(field) {\n  let v = subopts[field];\n  if (typeof v !== 'object') {\n    return v;\n  }\n  return v.add + v.mul * noise_field[field].noise2D(sample_pos[0] * v.freq, sample_pos[1] * v.freq);\n}\nfunction sample() {\n  v2copy(sample_pos, unif_pos);\n  let warp_freq = subopts.warp_freq;\n  let warp_amp = subopts.warp_amp;\n  for (let ii = 0; ii < subopts.domain_warp; ++ii) {\n    let dx = noise_warp[ii].noise2D(sample_pos[0] * warp_freq, sample_pos[1] * warp_freq);\n    let dy = noise_warp[ii].noise2D((sample_pos[0] + 7) * warp_freq, sample_pos[1] * warp_freq);\n    sample_pos[0] += dx * warp_amp;\n    sample_pos[1] += dy * warp_amp;\n  }\n  let total = 0;\n  let amp = subopts.amplitude;\n  let freq = get('frequency');\n  let p = get('persistence');\n  let lac = get('lacunarity');\n  for (let i = 0; i < subopts.octaves; i++) {\n    total += (0.5 + 0.5 * noise[i].noise2D(sample_pos[0] * freq, sample_pos[1] * freq)) * amp;\n    amp *= p;\n    freq *= lac;\n  }\n  return total / total_amplitude;\n}\n\nconst HEX_HEIGHT = 1.0; // distance between any two hexes = 1.0\nconst HEX_EDGE = HEX_HEIGHT / sqrt(3);\nconst HEX_WIDTH = 1.5 * HEX_EDGE;\nfunction hexPosToUnifPos(ii, jj) {\n  world_pos[0] = ii * HEX_WIDTH;\n  world_pos[1] = jj * HEX_HEIGHT - HEX_HEIGHT * 0.5;\n  if (ii & 1) {\n    world_pos[1] += HEX_HEIGHT * 0.5;\n  }\n  unif_pos[0] = world_pos[0] / ((width - 1) * HEX_WIDTH) * 2.0 - 1.0;\n  unif_pos[1] = world_pos[1] / ((height - 1.5) * HEX_HEIGHT) * 2.0 - 1.0;\n}\n\nlet count_by_h;\nfunction generateCoastlines() {\n  initNoise(opts.coast);\n\n  if (!count_by_h) {\n    count_by_h = new Array(256);\n  }\n  for (let ii = 0; ii < 256; ++ii) {\n    count_by_h[ii] = 0;\n  }\n  for (let idx = 0, jj = 0; jj < height; ++jj) {\n    for (let ii = 0; ii < width; ++ii, ++idx) {\n      hexPosToUnifPos(ii, jj);\n\n      let h = sample();\n      //let cutoff_scale = cutoff / 255; // scale cutoff to extend nearer to edge of maps\n      //h *= cutoff_scale + (1 - cutoff_scale) * (1 - v2lengthSq(unif_pos));\n      h *= 1 - v2lengthSq(unif_pos);\n\n      h = clamp(floor(h * 255), 0.0, 255);\n      count_by_h[h]++;\n      land[idx] = h;\n    }\n  }\n  // Determine cutoff as a percentile\n  //   Probably not generally necessary, but allows for playing with domain-warped\n  //   persistence sliders without changing the overall density, etc.\n  let cutoff_percent = get('cutoff');\n  cutoff_percent = 1 - (1 - cutoff_percent) * (1 - cutoff_percent);\n  let cutoff_count = total_size * cutoff_percent;\n  let cutoff = 0;\n  for (cutoff = 0; cutoff_count > 0 && cutoff < 256; ++cutoff) {\n    cutoff_count -= count_by_h[cutoff];\n  }\n  for (let ii = 0; ii < total_size; ++ii) {\n    let h = land[ii];\n    land[ii] = h > cutoff ? 255 : 0;\n    fill[ii] = D_OPEN;\n  }\n}\n\nfunction fillSeas() {\n  let unfilled_seas = state.unfilled_seas = [];\n  let todo = [];\n  let done = [];\n  function fillBorders() {\n    for (let ii = 0; ii < width; ++ii) {\n      fill[ii] = D_BORDER;\n      fill[(height - 1) * width + ii] = D_BORDER;\n    }\n    for (let ii = 0; ii < height; ++ii) {\n      fill[width * ii] = D_BORDER;\n      fill[width * ii + width - 1] = D_BORDER;\n    }\n  }\n  fillBorders();\n  function tryMark(pos, v) {\n    if (land[pos] || fill[pos]) {\n      return;\n    }\n    fill[pos] = v;\n    todo.push(pos);\n    done.push(pos);\n  }\n  function spreadSeas(v) {\n    while (todo.length) {\n      let pos = todo.pop();\n      let neighbors = neighbors_bit[pos & 1];\n      for (let ii = 0; ii < neighbors.length; ++ii) {\n        tryMark(pos + neighbors[ii], v);\n      }\n    }\n  }\n  tryMark(width + 1, D_SEA);\n  spreadSeas(D_SEA);\n  // Find all inland seas, mark them, then grow them N steps to either find a channel or fill them\n  let inland_seas = [];\n  for (let pos = 0; pos < width * height; ++pos) {\n    if (!land[pos] && !fill[pos]) {\n      // open, and not an ocean or previously marked\n      done = [];\n      tryMark(pos, D_INLAND_SEA);\n      spreadSeas(D_INLAND_SEA);\n      inland_seas.push(done);\n    }\n  }\n  shuffleArray(inland_seas);\n  inland_seas.forEach(function (sea) {\n    // Channel to ocean if possible\n    let is_ocean = false;\n    if (subopts.channels) {\n      let checked = [];\n      for (let ii = 0; ii < sea.length; ++ii) {\n        checked[sea[ii]] = 1;\n      }\n      let adjacent = [];\n      for (let ii = 0; ii < sea.length; ++ii) {\n        let pos = sea[ii];\n        let neighbors = neighbors_bit[pos & 1];\n        for (let nidx = 0; nidx < neighbors.length; ++nidx) {\n          let npos = pos + neighbors[nidx];\n          if (!checked[npos]) {\n            adjacent.push(npos);\n            // if (!data[npos * BPP]) {\n            //   // a neighboring sea already channeled this, it must connect to the ocean!\n            // }\n            checked[npos] = 1;\n          }\n        }\n      }\n      shuffleArray(adjacent);\n      outer: for (let ii = 0; ii < adjacent.length; ++ii) {\n        let pos = adjacent[ii];\n        let neighbors = neighbors_bit[pos & 1];\n        for (let nidx = 0; nidx < neighbors.length; ++nidx) {\n          let npos = pos + neighbors[nidx];\n          if (!checked[npos] && !land[npos] && fill[npos] === D_SEA) {\n            // open route to the ocean!\n            land[pos] = 0;\n            sea.push(pos);\n            land[npos] = 0;\n            sea.push(npos);\n            for (let jj = 0; jj < sea.length; ++jj) {\n              fill[sea[jj]] = D_SEA;\n            }\n            is_ocean = true;\n            break outer;\n          }\n        }\n      }\n    }\n    if (!is_ocean) {\n      if (subopts.fill_seas) {\n        for (let ii = 0; ii < sea.length; ++ii) {\n          land[sea[ii]] = 255;\n          fill[sea[ii]] = D_OPEN;\n        }\n      } else {\n        unfilled_seas.push(sea);\n      }\n    }\n  });\n}\n\n// Generates poisson sampled points with between radius and 2 * radius between each\nfunction poissonSample(radius, k) {\n  let ret = [];\n  let peak_rsquared = radius * radius;\n  let cell_bound = radius / sqrt(2);\n  let cell_w = ceil(width / cell_bound);\n  let cell_h = ceil(height / cell_bound);\n  let cells = new Int16Array(cell_w * cell_h);\n  let active = [];\n  function emitSample(pos) {\n    let posx = pos % width;\n    let posy = (pos - posx) / width;\n    let cellidx = (posx / cell_bound | 0) + (posy / cell_bound | 0) * cell_w;\n    ret.push(pos);\n    cells[cellidx] = ret.length;\n    active.push(pos);\n  }\n  emitSample(rand.range(total_size));\n\n  // From https://www.jasondavies.com/poisson-disc/\n  // Generate point chosen uniformly from spherical annulus between radius r and 2r from p.\n  let nx;\n  let ny;\n  function generateAround(px, py) {\n    let Î¸ = rand.random() * 2 * PI;\n    let r = sqrt(rand.random() * 3 * peak_rsquared + peak_rsquared); // http://stackoverflow.com/a/9048443/64009\n    nx = px + r * cos(Î¸) | 0;\n    ny = py + r * sin(Î¸) | 0;\n  }\n\n  function near() {\n    let n = 2;\n    let x = nx / cell_bound | 0;\n    let y = ny / cell_bound | 0;\n    let x0 = max(x - n, 0);\n    let y0 = max(y - n, 0);\n    let x1 = min(x + n + 1, cell_w);\n    let y1 = min(y + n + 1, cell_h);\n    for (let yy = y0; yy < y1; ++yy) {\n      let o = yy * cell_w;\n      for (let xx = x0; xx < x1; ++xx) {\n        let g = cells[o + xx];\n        if (!g) {\n          continue;\n        }\n        g = ret[g - 1];\n        let gx = g % width;\n        let gy = (g - gx) / width;\n        let dsq = (nx - gx) * (nx - gx) + (ny - gy) * (ny - gy);\n        if (dsq < peak_rsquared) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  while (active.length) {\n    let active_idx = rand.range(active.length);\n    let pos = active[active_idx];\n    ridx(active, active_idx);\n    let posx = pos % width;\n    let posy = (pos - posx) / width;\n    for (let jj = 0; jj < k; ++jj) {\n      generateAround(posx, posy);\n      if (nx < 0 || nx >= width || ny < 0 || ny >= height || near()) {\n        continue;\n      }\n      emitSample(nx + ny * width);\n    }\n  }\n  return ret;\n}\n\nfunction findMaxPerRegion(candidates, map, radius) {\n  let ret = [];\n  for (let ii = 0; ii < candidates.length; ++ii) {\n    let pos = candidates[ii];\n    let posx = pos % width;\n    let posy = (pos - posx) / width;\n    let x0 = max(0, posx - radius);\n    let x1 = min(width - 1, posx + radius);\n    let y0 = max(0, posy - radius);\n    let y1 = min(height - 1, posy + radius);\n    let max_elev = map[pos];\n    let max_pos = pos;\n    for (let yy = y0; yy <= y1; ++yy) {\n      for (let xx = x0; xx <= x1; ++xx) {\n        let p = xx + yy * width;\n        let e = map[p];\n        if (e > max_elev) {\n          max_elev = e;\n          max_pos = p;\n        }\n      }\n    }\n    ret.push([max_elev, max_pos]);\n  }\n  ret.sort((a, b) => b[0] - a[0]);\n  return ret;\n}\n\nfunction generateLakes() {\n  subopts = opts.lakes;\n  let lakes = state.lakes = [];\n  let lake_seeds = state.lake_seeds = [];\n  function generateInlandDF() {\n    util.fill(0);\n    let todo = [];\n    let d = 0;\n    for (let pos = 0; pos < total_size; ++pos) {\n      if (!land[pos]) {\n        util[pos] = 1;\n        coast_distance[pos] = 0;\n        continue;\n      }\n      let neighbors = neighbors_bit[pos & 1];\n      for (let ii = 0; ii < neighbors.length; ++ii) {\n        let nidx = pos + neighbors[ii];\n        if (!land[nidx]) {\n          todo.push(pos);\n          coast_distance[pos] = d;\n          util[pos] = 1;\n          break;\n        }\n      }\n    }\n    while (todo.length) {\n      d = min(d + 1, 255);\n      let next = [];\n      for (let ii = 0; ii < todo.length; ++ii) {\n        let pos = todo[ii];\n        let neighbors = neighbors_bit[pos & 1];\n        for (let jj = 0; jj < neighbors.length; ++jj) {\n          let npos = pos + neighbors[jj];\n          if (!util[npos]) {\n            util[npos] = 1;\n            coast_distance[npos] = d;\n            if (fill[npos] !== D_BORDER) {\n              next.push(npos);\n            }\n          }\n        }\n      }\n      todo = next;\n    }\n  }\n  generateInlandDF();\n\n  let { lake_search_radius, lake_k, lake_percent, min_sep } = subopts;\n  let check_points = poissonSample(lake_search_radius, lake_k);\n  let lake_elev = findMaxPerRegion(check_points, coast_distance, floor(lake_search_radius / 2));\n  lake_elev = lake_elev.filter(a => a[0] > 2);\n  let want = floor(lake_elev.length * lake_percent);\n  let use = [];\n  let min_sep_sq = min_sep * min_sep;\n  for (let ii = 0; ii < lake_elev.length && use.length < want; ++ii) {\n    let pt = lake_elev[ii][1];\n    let px = pt % width;\n    let py = (pt - px) / width;\n    let too_close = false;\n    for (let jj = 0; jj < use.length; ++jj) {\n      let other = use[jj];\n      let dx = px - other[0];\n      let dy = py - other[1];\n      let dsq = dx * dx + dy * dy;\n      if (dsq < min_sep_sq) {\n        too_close = true;\n        break;\n      }\n    }\n    if (too_close) {\n      continue;\n    }\n    use.push([px, py]);\n  }\n\n  function placeLake(x, y) {\n    let pos = x + y * width;\n    fill[pos] = D_INLAND_SEA;\n    land[pos] = 0;\n    lake_seeds.push(pos);\n    lakes.push(pos);\n  }\n  for (let ii = 0; ii < use.length; ++ii) {\n    placeLake(use[ii][0], use[ii][1]);\n  }\n}\n\nfunction generateTerrainSlope() {\n  initNoise(opts.tslope);\n  for (let jj = 0; jj < height; ++jj) {\n    for (let ii = 0; ii < width; ++ii) {\n      hexPosToUnifPos(ii, jj);\n\n      let h = sample();\n      let min_v = get('min');\n      let range = get('range');\n      h = clamp(min_v + floor(h * range), 0.0, 255);\n      tslope[jj * width + ii] = h;\n    }\n  }\n}\n\nfunction generateRiverSlope() {\n  initNoise(opts.rslope);\n  for (let jj = 0; jj < height; ++jj) {\n    for (let ii = 0; ii < width; ++ii) {\n      hexPosToUnifPos(ii, jj);\n\n      let h = sample();\n      h = clamp(floor(h * opts.rslope.steps), 0, opts.rslope.steps - 1);\n      rslope[jj * width + ii] = h + 1;\n    }\n  }\n}\n\nfunction growRivers() {\n  subopts = opts.river;\n  river.fill(0);\n  relev.fill(0);\n  let coastlines = [];\n  let coastlines_incdir = [];\n  function findCandidates() {\n    // PERF: this could be an output from the above steps - oceans and inland seas combined,\n    //   would just need better random choice for initial incoming direction\n    let { unfilled_seas, lake_seeds } = state;\n    let todo = [];\n    function tryMark(pos, v, incoming_dir) {\n      let d = fill[pos];\n      if (d !== D_SEA && d !== D_INLAND_SEA) {\n        if (d === D_OPEN) {\n          // land\n          fill[pos] = D_COASTLINE;\n          let invdir = (incoming_dir + 3) % 6;\n          river[pos] = 1 << invdir;\n          relev[pos] = rslope[pos];\n          coastlines.push(pos);\n          coastlines_incdir.push(invdir);\n        }\n        return;\n      }\n      fill[pos] = v;\n      todo.push(pos);\n    }\n    function spreadSeas(v) {\n      while (todo.length) {\n        let idx = rand.range(todo.length);\n        let pos = todo[idx];\n        ridx(todo, idx);\n        let neighbors = neighbors_bit[pos & 1];\n        for (let ii = 0; ii < neighbors.length; ++ii) {\n          tryMark(pos + neighbors[ii], v, ii);\n        }\n      }\n    }\n    function tryMarkXY(x, y, v) {\n      tryMark(y * width + x, v || D_SEA2);\n    }\n    tryMarkXY(1, 1);\n    tryMarkXY(width - 2, 1);\n    tryMarkXY(width - 2, height - 2);\n    tryMarkXY(1, height - 2);\n    for (let ii = 0; ii < unfilled_seas.length; ++ii) {\n      let sea = unfilled_seas[ii];\n      let pos = sea[rand.range(sea.length)];\n      tryMarkXY(pos % width, floor(pos / width));\n    }\n    spreadSeas(D_SEA2);\n    state.ocean_coastlines = coastlines.slice(0); // oceans and unfilled seas, not lakes\n    for (let ii = 0; ii < lake_seeds.length; ++ii) {\n      let pos = lake_seeds[ii];\n      tryMarkXY(pos % width, floor(pos / width), D_LAKE);\n    }\n    spreadSeas(D_LAKE);\n  }\n  findCandidates();\n\n  function findBorderMinDist() {\n    util.fill(0);\n    let todo = coastlines;\n    let d = 0;\n    for (let ii = 0; ii < todo.length; ++ii) {\n      let pos = todo[ii];\n      util[pos] = 1;\n    }\n    while (todo.length) {\n      d = min(d + 1, 255);\n      let next = [];\n      for (let ii = 0; ii < todo.length; ++ii) {\n        let pos = todo[ii];\n        let neighbors = neighbors_bit[pos & 1];\n        for (let jj = 0; jj < neighbors.length; ++jj) {\n          let npos = pos + neighbors[jj];\n          if (!util[npos] && !land[npos]) {\n            util[npos] = 1;\n            if (fill[npos] === D_BORDER) {\n              state.border_min_dist = d;\n              return;\n            } else {\n              next.push(npos);\n            }\n          }\n        }\n      }\n      todo = next;\n    }\n    assert(false);\n    state.border_min_dist = 0;\n  }\n  findBorderMinDist();\n\n  if (opts.early_out === 'river') {\n    return;\n  }\n\n  let orig_coastlines = coastlines;\n  function filterCoastalRivers() {\n    let rank = [[], [], []];\n    coastlines.forEach(function (pos) {\n      let neighbors = neighbors_bit[pos & 1];\n      let open_count = 0;\n      let open_bits = 0;\n      for (let ii = 0; ii < neighbors.length; ++ii) {\n        let npos = pos + neighbors[ii];\n        if (!land[npos]) {\n          open_bits |= 1 << ii;\n          ++open_count;\n        }\n      }\n      if (open_count >= 4) {\n        return;\n      }\n      assert(open_count);\n      if (open_count === 1) {\n        // perfect\n        rank[0].push(pos);\n        return;\n      }\n      // are all open tiles adjacent?\n      open_bits |= open_bits << 6;\n      let bpos = 0;\n      // Find something solid\n      while (open_bits & 1 << bpos) {\n        bpos++;\n      }\n      // Find first open\n      while (!(open_bits & 1 << bpos)) {\n        bpos++;\n      }\n      let count = 0;\n      // count num contiguous open\n      while (open_bits & 1 << bpos) {\n        bpos++;\n        ++count;\n      }\n      if (count !== open_count) {\n        return;\n      }\n      let r = !rand.range(open_count === 2 ? 4 : 2);\n      if (r) {\n        rank[open_count - 1].push(pos);\n      }\n    });\n    let blocked = [];\n    coastlines = [];\n    for (let ii = 0; ii < rank.length; ++ii) {\n      let list = rank[ii];\n      for (let jj = 0; jj < list.length; ++jj) {\n        let pos = list[jj];\n        if (blocked[pos]) {\n          continue;\n        }\n        coastlines.push(pos);\n        let neighbors = neighbors_bit[pos & 1];\n        for (let kk = 0; kk < neighbors.length; ++kk) {\n          let npos = pos + neighbors[kk];\n          blocked[npos] = true;\n        }\n      }\n    }\n  }\n  filterCoastalRivers();\n  function grow() {\n    const MAX_PRIORITY = 10;\n    let weight_total = subopts.weight_bend + subopts.weight_sfork + subopts.weight_afork;\n    let active_by_prior = [];\n    let min_elev_by_prior = [];\n    let tuning_h = opts.river.tuning_h;\n    for (let ii = 0; ii <= MAX_PRIORITY; ++ii) {\n      active_by_prior[ii] = [[]];\n      min_elev_by_prior[ii] = 0;\n    }\n    for (let ii = 0; ii < coastlines.length; ++ii) {\n      let pos = coastlines[ii];\n      let p = rand.random();\n      p = 1 + floor(p * p * p * MAX_PRIORITY);\n      debug_priority[pos] = p;\n      let active_by_elev = active_by_prior[p];\n      active_by_elev[0].push(pos);\n    }\n    let chosen_priority;\n    function chooseNode() {\n      // find min elevation\n      let min_elev = Infinity;\n      for (let p = MAX_PRIORITY; p >= 0; --p) {\n        min_elev = min(min_elev, min_elev_by_prior[p]);\n      }\n      for (let p = MAX_PRIORITY; p >= 0; --p) {\n        let active_by_elev = active_by_prior[p];\n        for (let ii = 0; ii < tuning_h; ++ii) {\n          let elev = min_elev + ii;\n          let active = active_by_elev[elev];\n          if (active) {\n            let idx = rand.range(active.length);\n            let ret = active[idx];\n            ridx(active, idx);\n            if (!active.length) {\n              // Nothing more at this (min) elevation at this priority\n              delete active_by_elev[elev];\n              let mep = min_elev_by_prior[p];\n              assert.equal(mep, elev);\n              while (!active_by_elev[mep] && mep < active_by_elev.length) {\n                ++mep;\n              }\n              if (mep === active_by_elev.length) {\n                mep = Infinity;\n              }\n              min_elev_by_prior[p] = mep;\n            }\n            chosen_priority = p;\n            return ret;\n          }\n        }\n      }\n      return -1;\n    }\n    function validGrowth(frompos, topos) {\n      // Not too high relative to neighbors?\n      let new_elev = relev[frompos] + rslope[topos];\n      let neighbors = neighbors_bit[topos & 1];\n      for (let ii = 0; ii < neighbors.length; ++ii) {\n        let npos = topos + neighbors[ii];\n        if (river[npos]) {\n          let d = new_elev - relev[npos];\n          if (abs(d) > opts.river.max_tslope) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    while (true) {\n      let pos = chooseNode();\n      if (pos === -1) {\n        break;\n      }\n      // Check all 6 neighbors, find any that are expandable\n      let neighbors = neighbors_bit[pos & 1];\n      let options = [];\n      let cur_bits = river[pos];\n      let bad_bits = cur_bits | cur_bits << 1 | cur_bits >> 1 | cur_bits >> 5 | cur_bits << 5;\n      for (let ii = 0; ii < neighbors.length; ++ii) {\n        if (1 << ii & bad_bits) {\n          continue;\n        }\n        let npos = pos + neighbors[ii];\n        if (!land[npos] || river[npos]) {\n          continue;\n        }\n        // Technically valid\n        if (validGrowth(pos, npos)) {\n          options.push([npos, ii]);\n        }\n      }\n      if (!options.length) {\n        // river is done, cannot expand\n        continue;\n      }\n      let asym = false;\n      if (options.length > 1) {\n        let nopt = 1;\n        let split = rand.range(weight_total);\n        if (split >= subopts.weight_bend) {\n          nopt = 2;\n          if (split - subopts.weight_bend >= subopts.weight_sfork) {\n            asym = true;\n          }\n        }\n        for (let ii = 0; ii < nopt; ++ii) {\n          let t = options[ii];\n          let cidx = ii + rand.range(options.length - ii);\n          options[ii] = options[cidx];\n          options[cidx] = t;\n        }\n        options.length = nopt;\n      }\n      for (let ii = 0; ii < options.length; ++ii) {\n        let npos = options[ii][0];\n        let ndir = options[ii][1];\n        let nelev = relev[pos] + rslope[npos];\n        let p = asym ? ii === 1 ? chosen_priority - 1 : chosen_priority : options.length > 1 ? chosen_priority - 1 : chosen_priority;\n        p = max(0, p);\n        debug_priority[npos] = p;\n        relev[npos] = nelev;\n        river[npos] = 1 << (ndir + 3) % 6;\n        river[pos] |= 1 << ndir;\n        min_elev_by_prior[p] = min(min_elev_by_prior[p], nelev);\n        let active_by_elev = active_by_prior[p];\n        let active = active_by_elev[nelev];\n        if (!active) {\n          active = active_by_elev[nelev] = [];\n        }\n        active.push(npos);\n      }\n    }\n  }\n  grow();\n  function computeStrahler() {\n    function fillStrahler(pos, from_dir) {\n      let bits = river[pos];\n      let out = [];\n      for (let ii = 0; ii < 6; ++ii) {\n        if (ii !== from_dir && bits & 1 << ii) {\n          out.push(ii);\n        }\n      }\n      let s;\n      if (!out.length) {\n        s = 1;\n      } else {\n        let neighbors = neighbors_bit[pos & 1];\n        if (out.length === 1) {\n          s = fillStrahler(pos + neighbors[out[0]], (out[0] + 3) % 6);\n        } else {\n          assert.equal(out.length, 2);\n          let s1 = fillStrahler(pos + neighbors[out[0]], (out[0] + 3) % 6);\n          let s2 = fillStrahler(pos + neighbors[out[1]], (out[1] + 3) % 6);\n          if (s1 === s2) {\n            s = s1 + 1;\n          } else {\n            s = max(s1, s2);\n          }\n        }\n      }\n      rstrahler[pos] = s;\n      return s;\n    }\n    for (let ii = 0; ii < orig_coastlines.length; ++ii) {\n      fillStrahler(orig_coastlines[ii], coastlines_incdir[ii]);\n    }\n  }\n  computeStrahler();\n  function pruneRivers() {\n    for (let pos = 0; pos < total_size; ++pos) {\n      if (rstrahler[pos] === 1) {\n        let bits = river[pos];\n        river[pos] = 0;\n        rstrahler[pos] = 0;\n        relev[pos] = 0;\n        let neighbors = neighbors_bit[pos & 1];\n        for (let ii = 0; ii < 6; ++ii) {\n          if (bits & 1 << ii) {\n            let npos = pos + neighbors[ii];\n            river[npos] &= ~(1 << (ii + 3) % 6);\n          }\n        }\n      }\n    }\n  }\n  if (subopts.prune) {\n    pruneRivers();\n    computeStrahler();\n  }\n  function buildUpHeight() {\n    util.fill(0);\n    // Accumulate river nodes\n    // Maybe also start with coastlines?\n    let work_nodes = [];\n    for (let pos = 0; pos < total_size; ++pos) {\n      if (river[pos]) {\n        work_nodes.push(pos);\n      }\n    }\n    // Contribute from work nodes to all land neighbors\n    while (work_nodes.length) {\n      let next_nodes = [];\n      for (let ii = 0; ii < work_nodes.length; ++ii) {\n        let pos = work_nodes[ii];\n        let neighbors = neighbors_bit[pos & 1];\n        let nheight = relev[pos] + tslope[pos];\n        for (let jj = 0; jj < neighbors.length; ++jj) {\n          let npos = pos + neighbors[jj];\n          if (!river[npos] && land[npos] && util[npos] !== 255) {\n            if (!util[npos]) {\n              relev[npos] = 0;\n              next_nodes.push(npos);\n            }\n            relev[npos] += nheight;\n            util[npos]++;\n          }\n        }\n      }\n      // average\n      for (let ii = 0; ii < next_nodes.length; ++ii) {\n        let pos = next_nodes[ii];\n        relev[pos] /= util[pos];\n        util[pos] = 255;\n      }\n      work_nodes = next_nodes;\n    }\n  }\n  buildUpHeight();\n}\n\nfunction generateOceanDistanceField() {\n  util.fill(0);\n  let todo = state.ocean_coastlines;\n  let d = 0;\n  for (let ii = 0; ii < todo.length; ++ii) {\n    let pos = todo[ii];\n    ocean_distance[pos] = d;\n    util[pos] = 1;\n  }\n  while (todo.length) {\n    d = min(d + 1, 255);\n    let next = [];\n    for (let ii = 0; ii < todo.length; ++ii) {\n      let pos = todo[ii];\n      let neighbors = neighbors_bit[pos & 1];\n      for (let jj = 0; jj < neighbors.length; ++jj) {\n        let npos = pos + neighbors[jj];\n        if (!util[npos]) {\n          util[npos] = 1;\n          ocean_distance[npos] = d;\n          if (fill[npos] !== D_BORDER) {\n            next.push(npos);\n          }\n        }\n      }\n    }\n    todo = next;\n  }\n  ocean_distance[0] = min(ocean_distance[1] + 1, 255);\n  ocean_distance[total_size - 1] = min(ocean_distance[total_size - 2] + 1, 255);\n}\n\nfunction generateOcean() {\n  let { border_min_dist } = state;\n  initNoise(opts.ocean);\n  for (let jj = 0; jj < height; ++jj) {\n    for (let ii = 0; ii < width; ++ii) {\n      let pos = jj * width + ii;\n      if (fill[pos] === D_SEA2 || fill[pos] === D_BORDER) {\n        hexPosToUnifPos(ii, jj);\n\n        let noise_v = sample();\n        let distance = clamp(ocean_distance[pos] / border_min_dist, 0, 1);\n        let noise_weight = 0.5 - abs(distance - 0.5);\n        distance -= noise_v * noise_weight;\n        relev[pos] = clamp(distance * 255, 0, 255);\n      }\n    }\n  }\n}\n\nfunction generateOutputElevation() {\n  // let max_depth = 0; // always 255\n  // let max_height = 0;\n  // Empirical estimate on 256x256 texture, before mountainifying\n  let est_max_output = opts.rslope.steps * 50 + 80;\n  // covert to a height in quarter-voxels for output\n  let voxel_scale = state.voxel_scale = 1 / est_max_output * opts.output.land_range / 2;\n  // for (let pos = 0; pos < total_size; ++pos) {\n  //   let e = relev[pos];\n  //   if (land[pos]) {\n  //     max_height = max(max_height, e);\n  //   } else {\n  //     max_depth = max(max_depth, e);\n  //   }\n  // }\n  let above_sea_level = opts.output.sea_range;\n  for (let pos = 0; pos < total_size; ++pos) {\n    let e = relev[pos];\n    if (land[pos]) {\n      e = above_sea_level + e * voxel_scale; // (e / max_height) * opts.output.land_range;\n    } else {\n      e = above_sea_level - 1 - e / 255 * above_sea_level;\n    }\n    relev[pos] = max(0, round(e));\n  }\n  water_level.fill(0);\n}\n\nfunction fixupCoastalWaters() {\n  // Hack: use average slope to calc depth of hexomes bordering coast, instead of noise\n  let above_sea_level = opts.output.sea_range;\n  for (let pos = 0; pos < total_size; ++pos) {\n    if (fill[pos] === D_SEA2) {\n      let land_count = 0;\n      //let elev_sum = 0;\n      let elev_min = Infinity;\n      let neighbors = neighbors_bit[pos & 1];\n      for (let kk = 0; kk < neighbors.length; ++kk) {\n        let nidx = pos + neighbors[kk];\n        if (land[nidx]) {\n          ++land_count;\n          let delev = relev[nidx] - above_sea_level;\n          //elev_sum += delev;\n          elev_min = min(elev_min, delev);\n        }\n      }\n      if (land_count) {\n        //relev[pos] = max(relev[pos], above_sea_level - max(elev_sum / land_count, 1));\n        relev[pos] = max(relev[pos], above_sea_level - max(elev_min, 1));\n      }\n    }\n  }\n  // Hack: any land that is level with the water, raise up a bit so it blends well\n  let { voxel_scale } = state;\n  for (let pos = 0; pos < total_size; ++pos) {\n    if (relev[pos] === above_sea_level && !river[pos]) {\n      relev[pos] = above_sea_level + min(rslope[pos], tslope[pos]) * voxel_scale * 0.5;\n    }\n  }\n}\n\nfunction blurExtremeSlopes() {\n  subopts = opts.blur;\n  let { threshold, weight } = subopts;\n  let blurs = [];\n  for (let pos = 0; pos < total_size; ++pos) {\n    if (!land[pos] || river[pos]) {\n      continue;\n    }\n    let elev = relev[pos];\n    let neighbors = neighbors_bit[pos & 1];\n    let blur = false;\n    for (let ii = 0; ii < neighbors.length; ++ii) {\n      let nidx = pos + neighbors[ii];\n      let nelev = relev[nidx];\n      if (nelev - elev > threshold) {\n        blur = true;\n      }\n    }\n    if (blur) {\n      let total = elev;\n      for (let ii = 0; ii < neighbors.length; ++ii) {\n        let nidx = pos + neighbors[ii];\n        let nelev = relev[nidx];\n        total += max(opts.output.sea_range, nelev);\n      }\n      blurs.push([pos, lerp(weight, elev, round(total / 7))]);\n    }\n  }\n  for (let ii = 0; ii < blurs.length; ++ii) {\n    let b = blurs[ii];\n    relev[b[0]] = b[1];\n  }\n}\n\nfunction fillLakes() {\n  // Happens much later than generateLakes - after river growing!\n  let { lakes } = state;\n  util.fill(0);\n  function fillLake(source_pos) {\n    let cur_elev = relev[source_pos];\n    util[source_pos] = 1;\n    let neighbors_by_elev = []; // neighbors of distance 1, sorted by elevation\n    let n2 = {}; // neighbors of a distance 2\n    let filled = [];\n    let try_elev = cur_elev;\n    let good_elevations = [];\n    function addPos(pos) {\n      filled.push(pos);\n      let neighbors = neighbors_bit[pos & 1];\n      for (let jj = 0; jj < neighbors.length; ++jj) {\n        let nidx = pos + neighbors[jj];\n        if (!util[nidx]) {\n          let nelev = relev[nidx];\n          if (nelev < try_elev) {\n            return false;\n          }\n          let ne = neighbors_by_elev[nelev];\n          if (!ne) {\n            ne = neighbors_by_elev[nelev] = [];\n          }\n          ne.push(nidx);\n          util[nidx] = 1;\n\n          // Also remove from N2\n          delete n2[nidx];\n          // Also add our neighbors to N2\n          let neighbors2 = neighbors_bit[nidx & 1];\n          for (let kk = 0; kk < neighbors2.length; ++kk) {\n            let nidx2 = nidx + neighbors2[kk];\n            if (!util[nidx2] && !n2[nidx2]) {\n              n2[nidx2] = relev[nidx2];\n            }\n          }\n        }\n      }\n      return true;\n    }\n    if (!addPos(source_pos)) {\n      return;\n    }\n    // try increasing water elevation\n    outer: do {\n      ++try_elev;\n      let ne = neighbors_by_elev[try_elev];\n      let filled_len = filled.length;\n      if (ne) {\n        for (let ii = 0; ii < ne.length; ++ii) {\n          // grows while iterating\n          if (!addPos(ne[ii])) {\n            filled.length = filled_len;\n            break outer;\n          }\n        }\n        // This elevation is lower than all immediate neighbors\n        // This is a good elevation if it is lower than everyone in N2\n        let is_good = true;\n        for (let key in n2) {\n          if (n2[key] <= try_elev) {\n            is_good = false;\n            break;\n          }\n        }\n        if (is_good) {\n          cur_elev = try_elev;\n          good_elevations.push([cur_elev, filled.length]);\n        }\n      }\n    } while (true);\n    if (!good_elevations.length) {\n      return;\n    }\n    // Aribitrary grab the elevation found halfway though the flooding process\n    let pick = floor(good_elevations.length * 0.5);\n    pick = good_elevations[pick];\n    filled.length = pick[1];\n    cur_elev = pick[0] + 1;\n    for (let ii = 0; ii < filled.length; ++ii) {\n      let pos = filled[ii];\n      water_level[pos] = cur_elev;\n      land[pos] = 0;\n    }\n    // lake_fills.push(filled);\n    // Also spread sea level to neighboring hexomes\n    for (let ii in neighbors_by_elev) {\n      let elev = Number(ii);\n      if (elev > cur_elev) {\n        let ne = neighbors_by_elev[elev];\n        for (let jj = 0; jj < ne.length; ++jj) {\n          water_level[ne[jj]] = cur_elev;\n        }\n      }\n    }\n  }\n  for (let ii = 0; ii < lakes.length; ++ii) {\n    fillLake(lakes[ii]);\n  }\n}\n\nfunction pruneFloodedRivers() {\n  for (let ii = 0; ii < total_size; ++ii) {\n    if (!river[ii]) {\n      continue;\n    }\n    let wl = water_level[ii];\n    if (wl && relev[ii] < wl) {\n      river[ii] = 0;\n    }\n  }\n}\n\nfunction generateCoastDistanceField() {\n  util.fill(0);\n  function findCoast() {\n    let default_water_level = opts.output.sea_range;\n    let coast = [];\n    for (let ii = 0; ii < total_size; ++ii) {\n      if (relev[ii] >= (water_level[ii] || default_water_level)) {\n        // it's land\n        let neighbors = neighbors_bit[ii & 1];\n        let is_coast = false;\n        for (let jj = 0; jj < neighbors.length; ++jj) {\n          let nid = ii + neighbors[jj];\n          if (relev[nid] < (water_level[nid] || default_water_level)) {\n            is_coast = true;\n            break;\n          }\n        }\n        if (is_coast) {\n          coast.push(ii);\n        }\n      }\n    }\n    return coast;\n  }\n  let todo = findCoast();\n  let d = 0;\n  for (let ii = 0; ii < todo.length; ++ii) {\n    let pos = todo[ii];\n    coast_distance[pos] = d;\n    util[pos] = 1;\n  }\n  while (todo.length) {\n    d = min(d + 1, 255);\n    let next = [];\n    for (let ii = 0; ii < todo.length; ++ii) {\n      let pos = todo[ii];\n      let neighbors = neighbors_bit[pos & 1];\n      for (let jj = 0; jj < neighbors.length; ++jj) {\n        let npos = pos + neighbors[jj];\n        if (!util[npos]) {\n          util[npos] = 1;\n          coast_distance[npos] = d;\n          if (fill[npos] !== D_BORDER) {\n            next.push(npos);\n          }\n        }\n      }\n    }\n    todo = next;\n  }\n  coast_distance[0] = min(coast_distance[1] + 1, 255);\n  coast_distance[total_size - 1] = min(coast_distance[total_size - 2] + 1, 255);\n}\n\nfunction mountainify() {\n  subopts = opts.mountainify;\n  let { cdist_ramp, peak_radius, peak_percent, peak_k } = subopts;\n  let peak_candidates;\n  // Generate Poisson disk sampling across map\n  peak_candidates = poissonSample(peak_radius, peak_k).filter(a => land[a]);\n  function choosePeaks() {\n    let peak_elev = findMaxPerRegion(peak_candidates, relev, peak_radius / 2 | 0);\n    let keep = max(1, ceil(peak_percent * peak_elev.length));\n    peak_elev = peak_elev.slice(0, keep);\n    return peak_elev.map(a => a[1]);\n  }\n  let points = choosePeaks();\n\n  let {\n    blend_radius,\n    height_scale,\n    weight_local,\n    power_max,\n    power_min,\n    power_blend\n  } = subopts;\n  function growMountain(pos) {\n    let rsquared = blend_radius * blend_radius;\n    let horiz_radius = ceil(blend_radius * SKEW_X);\n    let weight_abs = 1 - weight_local;\n    let avg_height = 0;\n    let avg_count = 0;\n    let x0 = pos % width;\n    let y0 = (pos - x0) / width;\n    // Find average height under the mountain within the radius\n    // PERFTODO: If constant radius, could pre-build an array of just the\n    //   index-offsets of points that pass the range tests and pre-compute\n    //   their weights.\n\n    // Weighted average of entire area\n    for (let dx = -horiz_radius; dx <= horiz_radius; ++dx) {\n      for (let dy = -blend_radius; dy <= blend_radius; ++dy) {\n        let dsq = dx * dx + dy * dy; // Not quite accurate distance, but fine for this estimate\n        if (dsq >= rsquared) {\n          continue;\n        }\n        let x = x0 + dx;\n        let y = y0 + dy;\n        if (x < 0 || x >= width || y < 0 || y >= height) {\n          continue;\n        }\n        let pos_idx = y * width + x;\n        if (!land[pos_idx]) {\n          continue;\n        }\n        //let w = 1 - dsq / rsquared; // 1 in center, 0 on edge\n        let w = dsq / rsquared; // 0 in center, 1 on edge\n        avg_height += relev[y * width + x] * w;\n        avg_count += w;\n      }\n    }\n    avg_height /= avg_count;\n    // Scale up exponentially in the middle\n    let center_dh = relev[pos] - avg_height;\n    if (center_dh < 10) {\n      // the center is lower than the average - must have been at the edge of a peak selection radius, and\n      // on a slope, so probably not actually a good choice for a exaggerated peak\n      return;\n    }\n\n    // Decide which angle to apply the power curve\n    // Try just perpindicular to the 3 cardinal hex-axes\n    let angle_offs = PI / 6;\n    let best_h = 0;\n    let angles = [[-0.5, sqrt(3 / 4), PI / 6], [-1, 0, PI * 3 / 6], [-0.5, -sqrt(3 / 4), PI * 5 / 6], [0.5, -sqrt(3 / 4), PI * 7 / 6], [1, 0, PI * 9 / 6], [0.5, sqrt(3 / 4), PI * 11 / 6]];\n    for (let ii = 0; ii < angles.length; ++ii) {\n      let sx = round(x0 + angles[ii][0] * blend_radius / 2 / SKEW_X);\n      let sy = round(y0 + angles[ii][1] * blend_radius / 2);\n      sx = clamp(sx, 0, width - 1);\n      sy = clamp(sy, 0, height - 1);\n      let h = relev[sx + sy * width];\n      if (h > best_h) {\n        best_h = h;\n        angle_offs = angles[ii][2];\n      }\n    }\n\n    for (let dx = -horiz_radius; dx <= horiz_radius; ++dx) {\n      for (let dy = -blend_radius; dy <= blend_radius; ++dy) {\n        let x = x0 + dx;\n        let y = y0 + dy;\n        let unif_dx = (x - x0) / SKEW_X;\n        let unif_dy = y - y0;\n        if ((x0 & 1) !== (x & 1)) {\n          if (x0 & 1) {\n            unif_dy -= 0.5;\n          } else {\n            unif_dy += 0.5;\n          }\n        }\n        let dsq = unif_dx * unif_dx + unif_dy * unif_dy;\n        if (dsq >= rsquared) {\n          continue;\n        }\n        if (x < 0 || x >= width || y < 0 || y >= height) {\n          continue;\n        }\n        let pos_idx = y * width + x;\n        if (!land[pos_idx]) {\n          continue;\n        }\n        let elev = relev[pos_idx];\n        let dh = elev - avg_height;\n        let scale = 1 - sqrt(dsq) / blend_radius;\n        let angle = atan2(unif_dx, unif_dy);\n        // TODO: add rotate here\n        angle = (angle + angle_offs + PI) % TWOPI - PI;\n        angle = abs(angle) / PI;\n        angle = clamp((angle - (1 - power_blend) / 2) / power_blend, 0, 1);\n        let eff_power = lerp(angle, power_min, power_max);\n        scale = pow(scale, eff_power);\n        let cdist = coast_distance[pos_idx];\n        if (cdist_ramp) {\n          scale *= clamp(cdist / cdist_ramp, 0, 1);\n        }\n        let delta = (weight_local * max(0, dh) + weight_abs * center_dh) * height_scale * scale;\n        mountain_delta[pos_idx] = max(mountain_delta[pos_idx], delta);\n      }\n    }\n  }\n  function applyGrowth() {\n    for (let pos_idx = 0; pos_idx < total_size; ++pos_idx) {\n      relev[pos_idx] += mountain_delta[pos_idx];\n    }\n  }\n\n  mountain_delta.fill(0);\n  for (let ii = 0; ii < points.length; ++ii) {\n    growMountain(points[ii]);\n  }\n  applyGrowth();\n}\n\nfunction pruneUphillRivers() {\n  // After Mountainify has changed the slopes, are any rivers now flowing uphill?\n  subopts = opts.river;\n  if (!subopts.mtify_prune) {\n    return;\n  }\n  let { mtify_prune_grace } = subopts;\n\n  function clearRiver(pos, from_dir) {\n    let bits = river[pos];\n    let neighbors = neighbors_bit[pos & 1];\n    for (let ii = 0; ii < 6; ++ii) {\n      if (ii !== from_dir && bits & 1 << ii) {\n        clearRiver(pos + neighbors[ii], (ii + 3) % 6);\n      }\n    }\n    rstrahler[pos] = 0;\n    river[pos] = 0;\n  }\n  function fillStrahler(pos, from_dir) {\n    let my_elev = relev[pos];\n    let bits = river[pos];\n    let out = [];\n    let neighbors = neighbors_bit[pos & 1];\n    for (let ii = 0; ii < 6; ++ii) {\n      if (ii !== from_dir && bits & 1 << ii) {\n        let nid = pos + neighbors[ii];\n        if (relev[nid] < my_elev) {\n          if (relev[nid] < my_elev - mtify_prune_grace) {\n            river[pos] &= ~(1 << ii);\n            clearRiver(nid, (ii + 3) % 6);\n          } else {\n            // Pretty close, just raise a bit\n            relev[nid] = my_elev;\n            out.push(ii);\n          }\n        } else {\n          out.push(ii);\n        }\n      }\n    }\n    // Might as well also re-compute Strahler (just for debug)\n    let s;\n    if (!out.length) {\n      s = 1;\n    } else {\n      if (out.length === 1) {\n        s = fillStrahler(pos + neighbors[out[0]], (out[0] + 3) % 6);\n      } else {\n        assert.equal(out.length, 2);\n        let s1 = fillStrahler(pos + neighbors[out[0]], (out[0] + 3) % 6);\n        let s2 = fillStrahler(pos + neighbors[out[1]], (out[1] + 3) % 6);\n        if (s1 === s2) {\n          s = s1 + 1;\n        } else {\n          s = max(s1, s2);\n        }\n      }\n    }\n    rstrahler[pos] = s;\n    return s;\n  }\n\n  for (let ii = 0; ii < total_size; ++ii) {\n    let rbits = river[ii];\n    if (!rbits) {\n      continue;\n    }\n    let neighbors = neighbors_bit[ii & 1];\n    let found_one = false;\n    for (let jj = 0; jj < neighbors.length; ++jj) {\n      if (rbits & 1 << jj) {\n        let nid = ii + neighbors[jj];\n        if (!river[nid]) {\n          assert(!found_one);\n          found_one = true;\n          fillStrahler(ii, jj);\n          // Also, add a bit to where we flow into, to continue rivers\n          // todo.push([nid, jj]);\n        }\n      }\n    }\n  }\n}\n\nfunction generateHumidity() {\n  let total_range = opts.output.land_range; // + opts.output.sea_range; - sea isn't used for slope, for the most part\n  let slope_mul = 4096 / total_range;\n  function generateSlope() {\n    for (let y = 0; y < height; ++y) {\n      for (let x = 0; x < width; ++x) {\n        let pos = y * width + x;\n        if (land[pos]) {\n          // hexPosToUnifPos(x, y);\n          // let noise_v = sample();\n          let elev = relev[pos];\n          let right_slope = 0; // if positive, slopes down to the right\n          let neighbors = neighbors_bit[x & 1];\n          for (let ii = 1; ii < 6; ++ii) {\n            if (ii === 3) {\n              continue;\n            }\n            let npos = pos + neighbors[ii];\n            let nelev = relev[npos];\n            if (ii < 3) {\n              right_slope += elev - nelev;\n            } else {\n              right_slope += nelev - elev;\n            }\n          }\n          humidity[pos] = clamp(128 + right_slope * slope_mul, 0, 255);\n        } else {\n          humidity[pos] = 128;\n        }\n      }\n    }\n  }\n  generateSlope();\n  if (opts.humidity.show_relief) {\n    return;\n  }\n  function blurSlope() {\n    for (let y = 0; y < height; ++y) {\n      for (let x = 0; x < width; ++x) {\n        let pos = y * width + x;\n        if (land[pos]) {\n          let neighbors = neighbors_bit[x & 1];\n          let total = humidity[pos];\n          let count = 1;\n          for (let ii = 1; ii < 6; ++ii) {\n            let npos = pos + neighbors[ii];\n            if (land[npos]) {\n              total += humidity[npos];\n              count++;\n            }\n          }\n          humidity[pos] = round(total / count);\n        }\n      }\n    }\n  }\n  blurSlope();\n  function addToNoise() {\n    initNoise(opts.humidity);\n    for (let y = 0; y < height; ++y) {\n      for (let x = 0; x < width; ++x) {\n        let pos = y * width + x;\n        hexPosToUnifPos(x, y);\n        let noise_v = sample();\n        let rainshadow = (humidity[pos] - 128) / 127;\n        rainshadow = (rainshadow >= 0 ? 0.25 : -0.25) + rainshadow * 0.75; // [-1,-0.25] or [0.25,1.0]\n        let rainshadow_effect = get('rainshadow'); // [0,1]\n        rainshadow *= rainshadow_effect;\n        noise_v = (noise_v + rainshadow + rainshadow_effect) / (1 + rainshadow_effect * 2); // [0,1]\n        humidity[pos] = clamp(noise_v * 255, 0, 255);\n      }\n    }\n  }\n  addToNoise();\n}\n\nfunction determineClassification() {\n  subopts = opts.classif;\n  let { cut1, cut2, blur_scale, blur_w } = subopts;\n\n  function blurHeight() {\n    let w_len = blur_w * 2 + 1;\n    let w = 1 / w_len;\n\n    let h_min = opts.output.sea_range;\n\n    // Horizontal blur\n    for (let yy = 0; yy < height; ++yy) {\n      for (let xx = 0; xx <= width - w_len; ++xx) {\n        let pos = xx + yy * width;\n        let v = 0;\n        for (let dx = 0; dx < w_len; ++dx) {\n          v += max(h_min, relev[pos + dx]);\n        }\n        blur_temp1[pos + blur_w] = round(v * w);\n      }\n    }\n    // Vertical blur\n    for (let yy = 0; yy < height - w_len; ++yy) {\n      for (let xx = blur_w; xx <= width - blur_w; ++xx) {\n        let pos = xx + yy * width;\n        let v = 0;\n        for (let dy = 0; dy < w_len; ++dy) {\n          v += blur_temp1[pos + dy * width];\n        }\n        blur_temp2[pos + blur_w * width] = round(v * w);\n      }\n    }\n  }\n  function classifFromDiff() {\n    for (let pos = 0; pos < total_size; ++pos) {\n      let c;\n      if (!land[pos]) {\n        c = C_WATER;\n      } else {\n        let elev = relev[pos];\n        let blurred = blur_temp2[pos] || elev;\n        let diff = elev - blurred;\n        let v = diff / blur_scale;\n        c = v > cut2 ? C_MOUNTAINS : v > cut1 ? C_HILLS : C_PLAINS;\n      }\n      classif[pos] = c;\n    }\n  }\n  blurHeight();\n  classifFromDiff();\n  // Maybe also want a blur / cellular automata pass to remove islands of classification\n  // Maybe want to do stuff to decrease the mountains on the coasts\n}\n\nexport function continentGen(opts_in) {\n  let start = Date.now();\n  opts = opts_in;\n  let { hex_tex_size } = opts;\n  let output_debug = opts.output.debug;\n  if (hex_tex_size !== last_tex_size) {\n    setupWorkBuffers(hex_tex_size);\n  }\n\n  debug_priority = [];\n  state = {}; // for passing misc parameters between phases\n  rand = randCreate(opts.seed);\n\n  fill.fill(0);\n\n  generateCoastlines();\n  fillSeas();\n  generateLakes();\n  generateTerrainSlope();\n  generateRiverSlope();\n  growRivers();\n  generateOceanDistanceField();\n  generateOcean();\n  generateOutputElevation();\n  fixupCoastalWaters();\n  blurExtremeSlopes();\n  fillLakes();\n  pruneFloodedRivers();\n  generateCoastDistanceField(); // includes lakes\n  mountainify();\n  pruneUphillRivers();\n  if (opts.early_out !== 'river') {\n    generateHumidity();\n  }\n  determineClassification();\n\n  let ret = {\n    sea_level: opts.output.sea_range,\n    max_elevation: opts.output.sea_range + opts.output.land_range\n  };\n  if (output_debug) {\n    ret.land = land;\n    ret.fill = fill;\n    ret.tslope = tslope;\n    ret.rslope = rslope;\n    ret.river = river;\n    ret.elev = relev;\n    ret.water_level = water_level;\n    ret.rstrahler = rstrahler;\n    ret.humidity = humidity;\n    ret.classif = classif;\n    ret.coast_distance = coast_distance;\n    ret.ocean_distance = ocean_distance;\n    ret.debug_priority = debug_priority;\n    ret.blur_temp1 = blur_temp1;\n    ret.blur_temp2 = blur_temp2;\n  } else {\n    ret.elev = relev.slice(0);\n    ret.humidity = humidity.slice(0);\n    ret.river = river.slice(0);\n    ret.water_level = water_level.slice(0);\n    ret.classif = classif.slice(0);\n  }\n  ret.time = Date.now() - start;\n  return ret;\n}","const assert = require('assert');\nconst { packetCreate, packetFromBuffer, PACKET_DEBUG } = require('../common/packet.js');\n\nconst CONTINENT_SER_VERSION = 1;\n\nconst SER_METHOD_DELTA_PACK_INT = 1;\nconst SER_METHOD_RLE_DICT = 2;\nconst SER_METHOD_RLE_ZEROES = 3;\nconst SER_METHOD_RLE_U2 = 4;\n\nconst FIELDS = ['elev', // U16\n'water_level', // U16\n'humidity', // U8\n'river', // U8\n'classif'];\n\nconst SER_METHOD_FOR_FIELD = {\n  // U16; best: DeltaPakInt (saves just 19%; will zip\n  //            very well after delta encoded, though!)\n  // - huffman(delta()) would save another 30%\n  elev: SER_METHOD_DELTA_PACK_INT,\n\n  // U16; best: RLEDict (saves 99.6%)\n  water_level: SER_METHOD_RLE_DICT,\n\n  // U8;  same: raw=RLEZeroes=DeltaPakInt (saves 0%, but deltas should zip\n  //            or huffman very well though)\n  // - huffman(delta()) saves a total of 35%\n  humidity: SER_METHOD_DELTA_PACK_INT,\n\n  // U8;  best: RLEZeroes (saves 82%)\n  river: SER_METHOD_RLE_ZEROES,\n\n  // U8;  best: RLEU2 (saves 92%)\n  classif: SER_METHOD_RLE_U2\n};\n\nconst FIELD_TYPE = {\n  elev: Uint16Array,\n  water_level: Uint16Array,\n  humidity: Uint8Array,\n  river: Uint8Array,\n  classif: Uint8Array\n};\n\n// Write either a single value, or a 0 followed by a count of zeroes\nexport function encodeRLEZeroes(pak, data) {\n  let size = data.length;\n  let c = 0;\n  for (let ii = 0; ii < size; ++ii) {\n    let v = data[ii];\n    if (v) {\n      if (c) {\n        pak.writeInt(c);\n        c = 0;\n      }\n      pak.writeInt(v);\n    } else {\n      if (!c) {\n        pak.writeInt(v);\n      }\n      c++;\n    }\n  }\n  if (c) {\n    pak.writeInt(c);\n  }\n}\n\nfunction decodeRLEZeroes(data, pak) {\n  let idx = 0;\n  while (idx < data.length) {\n    let v = pak.readInt();\n    let c = 1;\n    if (!v) {\n      c = pak.readInt();\n    }\n    assert(idx + c <= data.length);\n    for (let ii = 0; ii < c; ++ii) {\n      data[idx++] = v;\n    }\n  }\n}\n\nexport function encodeRLEU2(pak, data) {\n  let v = data[0];\n  let size = data.length;\n  let c = 0;\n  function writecv() {\n    let out = v << 6 | c;\n    pak.writeU8(out);\n  }\n  for (let ii = 1; ii < size; ++ii) {\n    if (data[ii] !== v || c === 63) {\n      writecv();\n      c = 0;\n      v = data[ii];\n    } else {\n      c++;\n    }\n  }\n  writecv();\n}\n\nfunction decodeRLEU2(data, pak) {\n  let idx = 0;\n  while (idx < data.length) {\n    let v = pak.readU8();\n    let c = (v & 0x3F) + 1;\n    v >>>= 6;\n    assert(idx + c <= data.length);\n    for (let ii = 0; ii < c; ++ii) {\n      data[idx++] = v;\n    }\n  }\n}\n\nexport function encodeRLEDict(pak, data) {\n  let v = data[0];\n  let size = data.length;\n  let c = 0;\n  let dict = [];\n  let dict_idx = 0;\n  function writecv() {\n    pak.writeInt(c);\n    let di = dict[v];\n    if (di !== undefined) {\n      pak.writeInt(di);\n    } else {\n      di = dict[v] = dict_idx++;\n      pak.writeInt(di);\n      pak.writeInt(v);\n    }\n  }\n  for (let ii = 1; ii < size; ++ii) {\n    if (data[ii] !== v) {\n      writecv();\n      c = 0;\n      v = data[ii];\n    } else {\n      c++;\n    }\n  }\n  writecv();\n}\n\nfunction decodeRLEDict(data, pak) {\n  let idx = 0;\n  let dict = [];\n  while (idx < data.length) {\n    let c = pak.readInt() + 1;\n    let di = pak.readInt();\n    let v = dict[di];\n    if (v === undefined) {\n      v = dict[di] = pak.readInt();\n    }\n    assert(idx + c <= data.length);\n    for (let ii = 0; ii < c; ++ii) {\n      data[idx++] = v;\n    }\n  }\n}\n\n// Packed int, biasing the delta by 124 to try to keep it in a single byte\n//   (which encodes 0-248)\nexport function encodeDeltaPakInt(pak, data) {\n  let v = 124;\n  let size = data.length;\n  for (let ii = 0; ii < size; ++ii) {\n    let delta = data[ii] - v + 124;\n    pak.writeInt(delta);\n    v = data[ii];\n  }\n}\n\nfunction decodeDeltaPakInt(data, pak) {\n  let size = data.length;\n  let v = 124;\n  for (let ii = 0; ii < size; ++ii) {\n    v += pak.readInt() - 124;\n    data[ii] = v;\n  }\n}\n\nfunction encodeToPacket(pak, method, buf) {\n  switch (method) {\n    case SER_METHOD_DELTA_PACK_INT:\n      encodeDeltaPakInt(pak, buf);\n      break;\n    case SER_METHOD_RLE_DICT:\n      encodeRLEDict(pak, buf);\n      break;\n    case SER_METHOD_RLE_ZEROES:\n      encodeRLEZeroes(pak, buf);\n      break;\n    case SER_METHOD_RLE_U2:\n      encodeRLEU2(pak, buf);\n      break;\n    default:\n      assert();\n  }\n}\n\nfunction decodeFromPacket(buf, method, pak) {\n  switch (method) {\n    case SER_METHOD_DELTA_PACK_INT:\n      decodeDeltaPakInt(buf, pak);\n      break;\n    case SER_METHOD_RLE_DICT:\n      decodeRLEDict(buf, pak);\n      break;\n    case SER_METHOD_RLE_ZEROES:\n      decodeRLEZeroes(buf, pak);\n      break;\n    case SER_METHOD_RLE_U2:\n      decodeRLEU2(buf, pak);\n      break;\n    default:\n      assert();\n  }\n}\n\nconst FIELD_MAGIC = 227;\nexport function continentSerialize(cdata, debug) {\n  let { sea_level, max_elevation } = cdata;\n  let total_size = cdata.elev.length;\n  // Estimated total size of packet is = total_size * 3, from empirical data,\n  //   give a little extra room.\n  let pak = packetCreate(debug ? PACKET_DEBUG : 0, total_size * 4);\n  pak.writeFlags();\n  pak.writeInt(CONTINENT_SER_VERSION);\n  pak.writeInt(sea_level);\n  pak.writeInt(max_elevation);\n  pak.writeInt(total_size);\n\n  FIELDS.forEach(function (field) {\n    pak.writeInt(FIELD_MAGIC);\n    encodeToPacket(pak, SER_METHOD_FOR_FIELD[field], cdata[field]);\n  });\n  pak.makeReadable();\n  let ret_len = pak.getBufferLen();\n  let ret = pak.getBuffer().slice(0, ret_len);\n  pak.pool();\n  return ret;\n}\n\nexport function continentDeserialize(buf) {\n  let ret = {};\n  let pak = packetFromBuffer(buf, buf.length, false);\n  pak.readFlags();\n  let ver = pak.readInt();\n  assert.equal(ver, CONTINENT_SER_VERSION);\n  ret.sea_level = pak.readInt();\n  ret.max_elevation = pak.readInt();\n  let total_size = pak.readInt();\n  assert(total_size <= 512 * 512);\n\n  FIELDS.forEach(function (field) {\n    let field_magic = pak.readInt();\n    assert.equal(field_magic, FIELD_MAGIC);\n    let ArrayType = FIELD_TYPE[field];\n    let out = ret[field] = new ArrayType(total_size);\n    decodeFromPacket(out, SER_METHOD_FOR_FIELD[field], pak);\n  });\n  return ret;\n}","// Additional serialization methods and comparison, that were not significantly\n//   better.\n\nconst assert = require('assert');\nconst { packetCreate } = require('../common/packet.js');\nconst { ridx } = require('../common/util.js');\nconst {\n  encodeRLEZeroes,\n  encodeRLEU2,\n  encodeRLEDict,\n  encodeDeltaPakInt\n} = require('./continent_serialize.js');\n\nfunction BitBuffer() {\n  this.pak = packetCreate(0);\n  this.v = 0;\n  this.b = 0;\n}\nBitBuffer.prototype.writeBits = function (num_bits, value) {\n  assert(num_bits < 24);\n  let { v, b, pak } = this;\n  v |= value << b;\n  b += num_bits;\n  while (b > 8) {\n    pak.writeU8(v & 255);\n    v >>>= 8;\n    b -= 8;\n  }\n  this.v = v;\n  this.b = b;\n};\nBitBuffer.prototype.flush = function () {\n  let { pak, b } = this;\n  if (b) {\n    this.writeBits(8 - b, 0);\n  }\n  pak.makeReadable();\n  let ret_len = pak.getBufferLen();\n  let ret = pak.getBuffer().slice(0, ret_len);\n  pak.pool();\n  return ret;\n};\n\nfunction encodeRLEPakInt(pak, data) {\n  let v = data[0];\n  let size = data.length;\n  let c = 0;\n  for (let ii = 1; ii < size; ++ii) {\n    if (data[ii] !== v) {\n      pak.writeInt(c);\n      pak.writeInt(v);\n      c = 0;\n      v = data[ii];\n    } else {\n      c++;\n    }\n  }\n  pak.writeInt(c);\n  pak.writeInt(v);\n}\n\nfunction encodeRLEUx(base_bits, data) {\n  let count_pak = packetCreate(0);\n  let value_buf = new BitBuffer();\n  let v = data[0];\n  let size = data.length;\n  let c = 0;\n  function writecv() {\n    count_pak.writeInt(c);\n    if (v) {\n      value_buf.writeBits(1, 1);\n      value_buf.writeBits(base_bits, v);\n    } else {\n      value_buf.writeBits(1, 0);\n    }\n  }\n  for (let ii = 1; ii < size; ++ii) {\n    if (data[ii] !== v) {\n      writecv();\n      c = 0;\n      v = data[ii];\n    } else {\n      c++;\n    }\n  }\n  writecv();\n\n  count_pak.makeReadable();\n  let ret_len = count_pak.getBufferLen();\n  let ret1 = count_pak.getBuffer().slice(0, ret_len);\n  count_pak.pool();\n  let ret2 = value_buf.flush();\n  return [ret1, ret2];\n}\n\nlet temp_u8_encode;\nfunction encodeRLEU8(data) {\n  if (!(data instanceof Uint8Array)) {\n    return '';\n  }\n  if (!temp_u8_encode || temp_u8_encode.length < data.length * 2) {\n    temp_u8_encode = new Uint8Array(data.length * 2);\n  }\n  let out = temp_u8_encode;\n  let idx = 0;\n\n  let v = data[0];\n  let size = data.length;\n  let c = 0;\n  for (let ii = 1; ii < size; ++ii) {\n    if (data[ii] !== v || c === 255) {\n      out[idx++] = c;\n      out[idx++] = v;\n      c = 0;\n      v = data[ii];\n    } else {\n      c++;\n    }\n  }\n  out[idx++] = c;\n  out[idx++] = v;\n  return out.slice(0, idx);\n}\n\nlet temp_u16_encode;\nfunction encodeRLEU16(data) {\n  if (!(data instanceof Uint16Array)) {\n    return '';\n  }\n  if (!temp_u16_encode || temp_u16_encode.length < data.length * 2) {\n    temp_u16_encode = new Uint16Array(data.length * 2);\n  }\n  let out = temp_u16_encode;\n  let idx = 0;\n\n  let v = data[0];\n  let size = data.length;\n  let c = 0;\n  for (let ii = 1; ii < size; ++ii) {\n    if (data[ii] !== v || c === 65535) {\n      out[idx++] = c;\n      out[idx++] = v;\n      c = 0;\n      v = data[ii];\n    } else {\n      c++;\n    }\n  }\n  out[idx++] = c;\n  out[idx++] = v;\n  return out.slice(0, idx);\n}\n\nfunction encodeHuffman(data) {\n  // Build encoding table\n  let histo = {};\n  for (let ii = 0; ii < data.length; ++ii) {\n    let v = data[ii];\n    histo[v] = (histo[v] || 0) + 1;\n  }\n  let nodes = [];\n  for (let key in histo) {\n    let v = Number(key);\n    let count = histo[key];\n    nodes.push([count, v]);\n  }\n  function checkCount() {\n    let a = 0;\n    for (let ii = 0; ii < nodes.length; ++ii) {\n      a += nodes[ii][0];\n    }\n    assert.equal(a, data.length);\n  }\n  checkCount();\n  while (nodes.length > 1) {\n    let lowest1 = 0;\n    let lowest2 = 1;\n    if (nodes[0][0] > nodes[1][0]) {\n      lowest1 = 1;\n      lowest2 = 0;\n    }\n    for (let ii = 2; ii < nodes.length; ++ii) {\n      if (nodes[ii][0] < nodes[lowest2][0]) {\n        if (nodes[ii][0] < nodes[lowest1][0]) {\n          lowest2 = lowest1;\n          lowest1 = ii;\n        } else {\n          lowest2 = ii;\n        }\n      }\n    }\n    assert(lowest1 !== lowest2);\n    let n1 = nodes[lowest1];\n    let n2 = nodes[lowest2];\n    let newnode = [n1[0] + n2[0], [n1[1], n2[1]]];\n    if (lowest1 === nodes.length - 1) {\n      nodes.pop();\n      ridx(nodes, lowest2);\n    } else if (lowest2 === nodes.length - 1) {\n      nodes.pop();\n      ridx(nodes, lowest1);\n    } else {\n      ridx(nodes, lowest1);\n      ridx(nodes, lowest2);\n    }\n    nodes.push(newnode);\n    checkCount();\n  }\n  let encoding = [];\n  // Note: current data written to enc_pak is not coherent, we'd need to first\n  // sort nodes by their values so a values lower than the current node_idx\n  // is never written\n  let enc_pak = packetCreate(0);\n  let node_idx = 0;\n  function walk(node, prefix, numbits) {\n    if (Array.isArray(node)) {\n      prefix <<= 1;\n      let left_idx = walk(node[0], prefix, numbits + 1);\n      let right_idx = walk(node[1], prefix | 1, numbits + 1);\n      enc_pak.writeInt(left_idx);\n      enc_pak.writeInt(right_idx);\n    } else {\n      encoding[node] = [prefix, numbits];\n      enc_pak.writeInt(node);\n    }\n    return node_idx++;\n  }\n  walk(nodes[0][1], 0, 0);\n\n  let buf = new BitBuffer();\n\n  for (let ii = 0; ii < data.length; ++ii) {\n    let v = data[ii];\n    let enc = encoding[v];\n    assert(enc);\n    buf.writeBits(enc[1], enc[0]);\n  }\n\n  enc_pak.makeReadable();\n  let ret_len = enc_pak.getBufferLen();\n  let ret1 = enc_pak.getBuffer().slice(0, ret_len);\n  enc_pak.pool();\n  return [buf.flush(), ret1];\n}\n\nfunction encodeWrap(fn) {\n  return function (data) {\n    let pak = packetCreate(0);\n    fn(pak, data);\n    pak.makeReadable();\n    let ret_len = pak.getBufferLen();\n    let ret = pak.getBuffer().slice(0, ret_len);\n    pak.pool();\n    return ret;\n  };\n}\n\nexport function continentSerializeTest(cdata) {\n  ['elev', // U16\n  'water_level', // U16\n  'humidity', // U8\n  'river', // U8\n  'classif'].forEach(function (field) {\n    let data = cdata[field];\n    console.log(`${field}:`);\n    function test(name, fn) {\n      let buf = fn(data);\n      if (Array.isArray(buf)) {\n        let b0 = buf[0].buffer.byteLength;\n        let b1 = buf[1].buffer.byteLength;\n        console.log(`  ${name}: ${b0 + b1} (${b0} + ${b1})`);\n      } else {\n        console.log(`  ${name}: ${buf.buffer.byteLength}`);\n      }\n    }\n    test('raw', () => new Uint8Array(data.buffer));\n    test('RLEPakInt', encodeWrap(encodeRLEPakInt));\n    test('RLEZeroes', encodeWrap(encodeRLEZeroes));\n    test('RLEDict', encodeWrap(encodeRLEDict));\n    test('RLEU8/16', data instanceof Uint8Array ? encodeRLEU8 : encodeRLEU16);\n    test('DeltaPakInt', encodeWrap(encodeDeltaPakInt));\n    if (field === 'river') {\n      test('RLEU6', encodeRLEUx.bind(null, 6));\n    }\n    if (field === 'classif') {\n      test('RLEUx(2)', encodeRLEUx.bind(null, 2));\n      test('RLEU2', encodeWrap(encodeRLEU2));\n    }\n    test('Huffman', encodeHuffman);\n    test('Huffman(DeltaPakInt)', () => encodeHuffman(encodeWrap(encodeDeltaPakInt)(data)));\n\n    // Chaining did nothing good:\n    // test('rlePakInt(deltaPakInt)', () => encodeWrap(encodePakInt)(encodeWrap(encodeDeltaPakInt)(data)));\n    // test('encodeRLEDict(deltaPakInt)', () => encodeWrap(encodeRLEDict)(encodeWrap(encodeDeltaPakInt)(data)));\n  });\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n// Things that should be done before requiring or running any user-level code or other engine code\n\nrequire('./polyfill.js');\n\nlet debug = document.getElementById('debug');\nwindow.onerror = function (e, file, line, col, errorobj) {\n  let msg = `${e}\\n  at ${file}(${line}:${col})`;\n  if (errorobj && errorobj.stack) {\n    msg = `${errorobj.stack}`;\n    if (errorobj.message) {\n      if (msg.indexOf(errorobj.message) === -1) {\n        msg = `${errorobj.message}\\n${msg}`;\n      }\n    }\n    let origin = document.location.origin || '';\n    if (origin) {\n      if (origin.slice(-1) !== '/') {\n        origin += '/';\n      }\n      msg = msg.split(origin).join(''); // replace\n    }\n    // fixup weird Firefox weirdness\n    msg = msg.replace(/\\[\\d+\\]</g, '') // remove funny [123] at start of stack lines\n    .replace(/<?\\/<?/g, '/') // remove funny <s, they mess up people's copy and paste\n    .replace(/\\n([^ ])/g, '\\n  $1'); // add indentation if missing\n  }\n  let show = true;\n  if (window.glov_error_report) {\n    show = window.glov_error_report(msg, file, line, col);\n  }\n  if (show) {\n    debug.innerText = `${msg}\\n\\nPlease report this error to the developer, and then reload this page.`;\n  }\n};\nwindow.debugmsg = function (msg, clear) {\n  if (clear) {\n    debug.innerText = msg;\n  } else {\n    debug.innerText += `${msg}\\n`;\n  }\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-shadow:off */\n\nconst engine = require('./engine.js');\n\nconst { round } = Math;\n\nconst safearea_pad = new Float32Array(4); // left, right, top, bottom\n// 0: x0_real\n// 1: y0_real\n// 2: x1_real\n// 3: y1_real\n// 4: x_scale\n// 5: y_scale\n// 6: css_to_real\n// 7: inverse viewport x_scale\n// 8: inverse viewport y_scale\n// 9: x0\n// 10: y0\n// 11: x1\n// 12: y1\nexport const data = new Float32Array(13);\n\nlet screen_width;\nlet screen_height;\n// Note: render_* not used by FRVR at this time\nlet render_width;\nlet render_height;\nexport let render_viewport_w;\nexport let render_viewport_h;\nexport let render_offset_x;\nlet render_offset_y_top;\nexport let render_offset_y_bottom;\n\nfunction reapply() {\n  if (render_width) {\n    data[4] = render_width / (data[2] - data[0]);\n    data[5] = render_height / (data[3] - data[1]);\n    data[7] = (data[2] - data[0]) / render_viewport_w;\n    data[8] = (data[3] - data[1]) / render_viewport_h;\n  } else {\n    data[4] = screen_width / (data[2] - data[0]);\n    data[5] = screen_height / (data[3] - data[1]);\n  }\n}\n\n// To get to coordinates used by OpenGL / canvas\nexport function virtualToCanvas(dst, src) {\n  dst[0] = (src[0] - data[0]) * data[4];\n  dst[1] = (src[1] - data[1]) * data[5];\n}\n\n// Sets the 2D \"camera\" used to translate sprite positions to screen space.  Affects sprites queued\n//  after this call\nexport function set(x0, y0, x1, y1, ignore_safe_area) {\n  if (ignore_safe_area || render_width) {\n    data[9] = data[0] = x0;\n    data[10] = data[1] = y0;\n    data[11] = data[2] = x1;\n    data[12] = data[3] = y1;\n  } else {\n    data[9] = x0;\n    data[10] = y0;\n    data[11] = x1;\n    data[12] = y1;\n    let wscale = (x1 - x0) / (screen_width - safearea_pad[0] - safearea_pad[1]);\n    let hscale = (y1 - y0) / (screen_height - safearea_pad[2] - safearea_pad[3]);\n    data[0] = x0 - safearea_pad[0] * wscale;\n    data[1] = y0 - safearea_pad[2] * hscale;\n    data[2] = x1 + safearea_pad[1] * wscale;\n    data[3] = y1 + safearea_pad[3] * hscale;\n  }\n\n  reapply();\n}\n\nexport function setSafeAreaPadding(left, right, top, bottom) {\n  safearea_pad[0] = round(left);\n  safearea_pad[1] = round(right);\n  safearea_pad[2] = round(top);\n  safearea_pad[3] = round(bottom);\n  // Called while updating screen width/height, reapply() should get called later\n}\n\nexport function safeAreaPadding() {\n  return safearea_pad;\n}\n\nconst stack = [];\nexport function push() {\n  stack.push(data.slice(0));\n}\nexport function pop() {\n  let old = stack.pop();\n  set(old[0], old[1], old[2], old[3], true);\n}\n\nexport function domToCanvasRatio() {\n  return data[6];\n}\n\nexport function screenAspect() {\n  return (screen_width - safearea_pad[0] - safearea_pad[1]) / (screen_height - safearea_pad[2] - safearea_pad[3]);\n}\n\n// Drawing area 0,0-w,h\n// But keep the aspect ratio of those things drawn to be correct\n// This may create a padding or margin on either top and bottom or sides of the screen\n// User users constant values in this range for consistent UI on all devices\nexport function setAspectFixed(w, h) {\n  let pa = render_width ? 1 : engine.pixel_aspect;\n  let inv_aspect = h / pa / w;\n  let inv_desired_aspect;\n  if (render_width) {\n    inv_desired_aspect = render_height / render_width;\n  } else {\n    inv_desired_aspect = 1 / screenAspect();\n  }\n  if (inv_aspect > inv_desired_aspect) {\n    let margin = (h / pa / inv_desired_aspect - w) / 2;\n    set(-margin, 0, w + margin, h, false);\n  } else {\n    let margin = (w * pa * inv_desired_aspect - h) / 2;\n    set(0, -margin, w, h + margin, false);\n  }\n}\n\n// Primary drawing area at least W x H\n// But keep the aspect ratio of those things drawn to be correct\n// Similar to setAspectFixed() but keeps (0,0) in the upper left (all padding\n//   is added to right and bottom)\n// Requires users to use camera2d.w()/ and camera2d.h() to determine reasonable\n//   UI positioning\nexport function setAspectFixed2(w, h) {\n  let pa = render_width ? 1 : engine.pixel_aspect;\n  let inv_aspect = h / pa / w;\n  let inv_desired_aspect;\n  if (render_width) {\n    inv_desired_aspect = render_height / render_width;\n  } else {\n    inv_desired_aspect = 1 / screenAspect();\n  }\n  if (inv_aspect > inv_desired_aspect) {\n    let margin = h / pa / inv_desired_aspect - w;\n    set(0, 0, w + margin, h, false);\n  } else {\n    let margin = w * pa * inv_desired_aspect - h;\n    set(0, 0, w, h + margin, false);\n  }\n}\n\nexport function zoom(x, y, factor) {\n  let inv_factor = 1.0 / factor;\n  set(x - (x - data[0]) * inv_factor, y - (y - data[1]) * inv_factor, x + (data[2] - x) * inv_factor, y + (data[3] - y) * inv_factor, true);\n}\n\nexport function setNormalized() {\n  set(0, 0, 1, 1, true);\n}\n\nexport function x0Real() {\n  return data[0];\n}\nexport function y0Real() {\n  return data[1];\n}\nexport function x1Real() {\n  return data[2];\n}\nexport function y1Real() {\n  return data[3];\n}\nexport function wReal() {\n  return data[2] - data[0];\n}\nexport function hReal() {\n  return data[3] - data[1];\n}\nexport function x0() {\n  return data[9];\n}\nexport function y0() {\n  return data[10];\n}\nexport function x1() {\n  return data[11];\n}\nexport function y1() {\n  return data[12];\n}\nexport function w() {\n  return data[11] - data[9];\n}\nexport function h() {\n  return data[12] - data[10];\n}\nexport function xScale() {\n  return data[4];\n}\nexport function yScale() {\n  return data[5];\n}\n\nexport function htmlPos(x, y) {\n  if (render_width) {\n    return [100 * (((x - data[0]) / data[7] + render_offset_x) / screen_width), 100 * (((y - data[1]) / data[8] + render_offset_y_top) / screen_height)];\n  } else {\n    return [100 * (x - data[0]) / (data[2] - data[0]), 100 * (y - data[1]) / (data[3] - data[1])];\n  }\n}\nexport function htmlSize(w, h) {\n  if (render_width) {\n    return [100 * w / data[7] / screen_width, 100 * h / data[8] / screen_height];\n  } else {\n    return [100 * w / (data[2] - data[0]), 100 * h / (data[3] - data[1])];\n  }\n}\n\nexport function domToVirtual(dst, src) {\n  if (render_width) {\n    dst[0] = (src[0] * data[6] - render_offset_x) * data[7] + data[0];\n    dst[1] = (src[1] * data[6] - render_offset_y_top) * data[8] + data[1];\n  } else {\n    dst[0] = src[0] * data[6] / data[4] + data[0];\n    dst[1] = src[1] * data[6] / data[5] + data[1];\n  }\n}\n\nexport function domDeltaToVirtual(dst, src) {\n  if (render_width) {\n    dst[0] = src[0] * data[6] * data[7];\n    dst[1] = src[1] * data[6] * data[8];\n  } else {\n    dst[0] = src[0] * data[6] / data[4];\n    dst[1] = src[1] * data[6] / data[5];\n  }\n}\n\n// To get to coordinates used by mouse events\nexport function virtualToDom(dst, src) {\n  if (render_width) {\n    dst[0] = (render_offset_x + (src[0] - data[0]) / data[7]) / data[6];\n    dst[1] = (render_offset_y_top + (src[1] - data[1]) / data[8]) / data[6];\n  } else {\n    dst[0] = (src[0] - data[0]) * data[4] / data[6];\n    dst[1] = (src[1] - data[1]) * data[5] / data[6];\n  }\n}\n\nexport function virtualToFontSize(height) {\n  if (render_width) {\n    return height / (data[6] * data[8]) * 0.84;\n  } else {\n    return height * data[5] / data[6] * 0.84;\n  }\n}\n\n// dst/src are x/y/w/h objects (e.g. from input system)\nexport function virtualToDomPosParam(dst, src) {\n  if (render_width) {\n    dst.x = (render_offset_x + (src.x - data[0]) / data[7]) / data[6];\n    dst.w = src.w / data[7] / data[6];\n    dst.y = (render_offset_y_top + (src.y - data[1]) / data[8]) / data[6];\n    dst.h = src.h / data[8] / data[6];\n  } else {\n    dst.x = (src.x - data[0]) * data[4] / data[6];\n    dst.w = src.w * data[4] / data[6];\n    dst.y = (src.y - data[1]) * data[5] / data[6];\n    dst.h = src.h * data[5] / data[6];\n  }\n}\n\nexport function tickCamera2D() {\n  data[6] = window.devicePixelRatio || 1; /* css_to_real */\n  screen_width = engine.width;\n  screen_height = engine.height;\n  let viewport = [0, 0, screen_width, screen_height];\n  if (engine.render_width) {\n    // Note: render_* not used by FRVR at this time\n    render_width = engine.render_width;\n    render_height = engine.render_height;\n    // Find an offset so this rendered viewport is centered while preserving aspect ratio, just like setAspectFixed\n    let pa = engine.pixel_aspect;\n    let inv_aspect = render_height / pa / render_width;\n    let eff_screen_width = screen_width - safearea_pad[0] - safearea_pad[1];\n    let eff_screen_height = screen_height - safearea_pad[2] - safearea_pad[3];\n    let inv_desired_aspect = eff_screen_height / eff_screen_width;\n    if (inv_aspect > inv_desired_aspect) {\n      let margin = (render_height / inv_desired_aspect - render_width * pa) / 2 * eff_screen_height / render_height;\n      render_offset_x = safearea_pad[0] + round(margin);\n      render_offset_y_top = safearea_pad[2];\n      render_offset_y_bottom = safearea_pad[3];\n      render_viewport_w = round(eff_screen_width - margin * 2);\n      render_viewport_h = eff_screen_height;\n    } else {\n      let margin = (render_width * inv_desired_aspect - render_height / pa) / 2 * eff_screen_width / render_width;\n      render_offset_x = safearea_pad[0];\n      render_offset_y_top = safearea_pad[2] + round(margin);\n      render_offset_y_bottom = safearea_pad[3] + round(margin);\n      render_viewport_w = eff_screen_width;\n      render_viewport_h = round(eff_screen_height - margin * 2);\n    }\n    viewport[2] = render_width;\n    viewport[3] = render_height;\n  } else {\n    render_width = render_height = 0;\n    render_offset_x = 0;\n    render_offset_y_top = 0;\n    render_offset_y_bottom = 0;\n  }\n\n  reapply();\n\n  // let screen_width = engine.width;\n  // let screen_height = engine.height;\n  // let screen_aspect = screen_width / screen_height;\n  // let view_aspect = game_width / game_height;\n  // if (screen_aspect > view_aspect) {\n  //   let viewport_width = game_height * screen_aspect;\n  //   let half_diff = (viewport_width - game_width) / 2;\n  //   viewportRectangle = [-half_diff, 0, game_width + half_diff, game_height];\n  // } else {\n  //   let viewport_height = game_width / screen_aspect;\n  //   let half_diff = (viewport_height - game_height) / 2;\n  //   viewportRectangle = [0, -half_diff, game_width, game_height + half_diff];\n  // }\n\n  engine.setViewport(viewport);\n}\n\nexport function startup() {\n  set(0, 0, engine.width, engine.height);\n  tickCamera2D();\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst cmd_parse_mod = require('../../common/cmd_parse.js');\nconst local_storage = require('./local_storage.js');\nexport let cmd_parse = cmd_parse_mod.create({ storage: local_storage });\n\nconst engine = require('./engine.js');\nconst textures = require('./textures.js');\nconst { PI, round } = Math;\n\nwindow.cmd = function (str) {\n  cmd_parse.handle(null, str, cmd_parse_mod.defaultHandler);\n};\n\ncmd_parse.registerValue('fov', {\n  type: cmd_parse.TYPE_FLOAT,\n  label: 'FOV',\n  range: [1, 179],\n  get: () => round(engine.fov_min * 180 / PI),\n  set: v => engine.setFOV(v * PI / 180),\n  store: true\n});\n\nfunction byteFormat(bytes) {\n  if (bytes > 850000) {\n    return `${(bytes / (1024 * 1024)).toFixed(2)}MB`;\n  }\n  if (bytes > 850) {\n    return `${(bytes / 1024).toFixed(2)}KB`;\n  }\n  return `${bytes}B`;\n}\n\ncmd_parse.register({\n  cmd: 'texmem',\n  help: 'Displays texture memory usage',\n  func: function (str, resp_func) {\n    let keys = Object.keys(textures.textures);\n    keys = keys.filter(a => textures.textures[a].gpu_mem > 1024);\n    keys.sort((a, b) => textures.textures[a].gpu_mem - textures.textures[b].gpu_mem);\n    resp_func(null, keys.map(a => `${byteFormat(textures.textures[a].gpu_mem)} ${a}`).join('\\n'));\n  }\n});\n\ncmd_parse.register({\n  cmd: 'gpumem',\n  help: 'Displays GPU memory usage summary',\n  func: function (str, resp_func) {\n    let { gpu_mem } = engine.perf_state;\n    resp_func(null, `${byteFormat(gpu_mem.geom)} Geo\\n${byteFormat(gpu_mem.tex)} Tex\\n${byteFormat(gpu_mem.geom + gpu_mem.tex)} Total`);\n  }\n});\n\ncmd_parse.register({\n  cmd: 'd',\n  help: 'Toggles a debug define',\n  func: function (str, resp_func) {\n    str = str.toUpperCase();\n    engine.defines[str] = !engine.defines[str];\n    resp_func(null, `D=${str} now ${engine.defines[str] ? 'SET' : 'unset'}`);\n    engine.definesChanged();\n  }\n});\n\ncmd_parse.register({\n  cmd: 'renderer',\n  help: 'Displays current renderer',\n  func: function (str, resp_func) {\n    resp_func(null, `Renderer=WebGL${engine.webgl2 ? 2 : 1}`);\n  }\n});\n\nfunction cmdDesc(cmd_data) {\n  return `/${cmd_data.cmd} - ${cmd_data.help}`;\n}\n\ncmd_parse.register({\n  cmd: 'help',\n  help: 'Searches commands',\n  func: function (str, resp_func) {\n    let list = cmd_parse.autoComplete('', this && this.access);\n    if (str) {\n      let str_cname = cmd_parse.canonical(str);\n      let str_lc = str.toLowerCase();\n      list = list.filter(cmd_data => cmd_data.cname.indexOf(str_cname) !== -1 || cmd_data.help.toLowerCase().indexOf(str_lc) !== -1);\n    }\n    if (!list.length) {\n      return void resp_func(null, `No commands found matching \"${str}\"`);\n    }\n    resp_func(null, list.map(cmdDesc).join('\\n'));\n  }\n});\n\nexport let safearea = [-1, -1, -1, -1];\ncmd_parse.registerValue('safe_area', {\n  label: 'Safe Area',\n  type: cmd_parse.TYPE_STRING,\n  usage: 'Safe Area value: Use -1 for auto based on browser environment,\\n' + 'or 0-25 for percentage of screen size\\n' + '  Usage: /safe_area [value]\\n' + '  Usage: /safe_area horizontal,vertical\\n' + '  Usage: /safe_area left,right,top,bottom',\n  default_value: '-1',\n  get: () => safearea[0] === -1 ? '-1 (auto)' : safearea.join(','),\n  set: v => {\n    v = String(v);\n    let keys = v.split(',');\n    if (v && keys.length === 1) {\n      safearea[0] = safearea[1] = safearea[2] = safearea[3] = Number(v);\n    } else if (keys.length === 2) {\n      safearea[0] = safearea[1] = Number(keys[0]);\n      safearea[2] = safearea[3] = Number(keys[1]);\n    } else if (keys.length === 4) {\n      for (let ii = 0; ii < 4; ++ii) {\n        safearea[ii] = Number(keys[ii]);\n      }\n    } else {\n      // error, ignore?\n    }\n  },\n  store: true\n});\n\ncmd_parse.register({\n  cmd: 'webgl2_auto',\n  help: 'Resets WebGL2 auto-detection',\n  func: function (str, resp_func) {\n    let disable_data = local_storage.getJSON('webgl2_disable');\n    if (!disable_data) {\n      return resp_func(null, 'WebGL2 is already being auto-detected');\n    }\n    local_storage.setJSON('webgl2_disable', undefined);\n    return resp_func(null, 'WebGL2 was disabled, will attempt to use it again on the next load');\n  }\n});","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst camera2d = require('./camera2d.js');\nconst engine = require('./engine.js');\nconst glov_input = require('./input.js');\nconst glov_ui = require('./ui.js');\n\nconst { focuslog } = glov_ui;\n\nclass GlovUIEditBox {\n  constructor(params) {\n    this.x = 0;\n    this.y = 0;\n    this.z = Z.UI; // actually in DOM, so above everything!\n    this.w = glov_ui.button_width;\n    this.type = 'text';\n    this.allow_modal = false;\n    // this.h = glov_ui.button_height;\n    this.font_height = glov_ui.font_height;\n    this.text = '';\n    this.placeholder = '';\n    this.max_len = 0;\n    this.initial_focus = false;\n    this.onetime_focus = false;\n    this.auto_unfocus = false;\n    this.initial_select = false;\n    this.spellcheck = true;\n    this.applyParams(params);\n    this.is_focused = false;\n\n    this.elem = null;\n    this.input = null;\n    this.submitted = false;\n    this.pointer_lock = false;\n    this.last_frame = 0;\n  }\n  applyParams(params) {\n    if (!params) {\n      return;\n    }\n    for (let f in params) {\n      this[f] = params[f];\n    }\n  }\n  getText() {\n    return this.text;\n  }\n  setText(new_text) {\n    if (this.input) {\n      this.input.value = new_text;\n    }\n    this.text = new_text;\n  }\n  focus() {\n    if (this.input) {\n      this.input.focus();\n    } else {\n      this.onetime_focus = true;\n    }\n    glov_ui.focusSteal(this);\n    this.is_focused = true;\n    if (this.pointer_lock) {\n      glov_input.pointerLockExit();\n    }\n  }\n  unfocus() {\n    glov_ui.focusNext(this);\n  }\n  isFocused() {\n    // call after .run()\n    return this.is_focused;\n  }\n\n  updateFocus() {\n    let was_glov_focused = this.is_focused;\n    let glov_focused = glov_ui.focusCheck(this);\n    let dom_focused = this.input && document.activeElement === this.input;\n    if (was_glov_focused !== glov_focused) {\n      // something external (from clicks/keys in GLOV) changed, apply it if it doesn't match\n      if (glov_focused && !dom_focused && this.input) {\n        focuslog('GLOV focused, DOM not, focusing', this);\n        this.input.focus();\n      }\n      if (!glov_focused && dom_focused) {\n        focuslog('DOM focused, GLOV not, and changed, blurring', this);\n        this.input.blur();\n      }\n    } else if (dom_focused && !glov_focused) {\n      focuslog('DOM focused, GLOV not, stealing', this);\n      glov_ui.focusSteal(this);\n      glov_focused = true;\n    } else if (!dom_focused && glov_focused) {\n      // Leave it alone, it may be a browser pop-up such as for passwords\n    }\n    let focused = glov_focused;\n\n    if (focused) {\n      let key_opt = this.pointer_lock && !this.text ? { in_event_cb: glov_input.pointerLockEnter } : null;\n      if (glov_input.keyUpEdge(glov_input.KEYS.ESC, key_opt)) {\n        if (this.text) {\n          this.setText('');\n        } else {\n          glov_ui.focusCanvas();\n          if (this.input) {\n            this.input.blur();\n          }\n          focused = false;\n          this.canceled = true;\n        }\n      }\n    }\n    this.is_focused = focused;\n    return focused;\n  }\n\n  run(params) {\n    this.applyParams(params);\n\n    if (this.last_frame !== engine.global_frame_index - 1) {\n      // it's been more than a frame, we must have not been running, discard async events\n      this.submitted = false;\n    }\n    this.last_frame = engine.global_frame_index;\n\n    this.canceled = false;\n    let focused = this.updateFocus();\n\n    glov_ui.this_frame_edit_boxes.push(this);\n    let elem = glov_ui.getElem(this.allow_modal, this.elem);\n    if (elem !== this.elem) {\n      if (elem) {\n        // new DOM element, initialize\n        elem.textContent = '';\n        let form = document.createElement('form');\n        form.setAttribute('autocomplete', 'off');\n        let input = document.createElement('input');\n        input.setAttribute('autocomplete', `auto_off_${Math.random()}`);\n        input.setAttribute('type', this.type);\n        input.setAttribute('placeholder', this.placeholder);\n        if (this.max_len) {\n          input.setAttribute('maxLength', this.max_len);\n        }\n        input.setAttribute('tabindex', 2);\n        form.addEventListener('submit', ev => {\n          ev.preventDefault();\n          this.submitted = true;\n          this.text = this.input.value;\n          if (this.pointer_lock && !this.text) {\n            glov_input.pointerLockEnter('edit_box_submit');\n          }\n        }, true);\n        form.appendChild(input);\n        let span = document.createElement('span');\n        span.setAttribute('tabindex', 3);\n        form.appendChild(span);\n        elem.appendChild(form);\n        input.value = this.text;\n        this.input = input;\n        if (this.initial_focus || this.onetime_focus) {\n          input.focus();\n          this.onetime_focus = false;\n        }\n        if (this.initial_select) {\n          input.select();\n        }\n      } else {\n        this.input = null;\n      }\n      this.submitted = false;\n      this.elem = elem;\n    } else {\n      if (this.input) {\n        this.text = this.input.value;\n      }\n    }\n    if (elem) {\n      let pos = camera2d.htmlPos(this.x, this.y);\n      if (!this.spellcheck) {\n        elem.spellcheck = false;\n      }\n      elem.style.left = `${pos[0]}%`;\n      elem.style.top = `${pos[1]}%`;\n      let size = camera2d.htmlSize(this.w, 0);\n      elem.style.width = `${size[0]}%`;\n      let old_fontsize = elem.style.fontSize || '?px';\n      let new_fontsize = `${camera2d.virtualToFontSize(this.font_height).toFixed(0)}px`;\n      if (new_fontsize !== old_fontsize) {\n        elem.style.fontSize = new_fontsize;\n      }\n    }\n\n    if (focused) {\n      if (this.auto_unfocus) {\n        if (glov_input.click({ peek: true })) {\n          glov_ui.focusSteal('canvas');\n        }\n      }\n      // keyboard input is handled by the INPUT element, but allow mouse events to trickle\n      glov_input.eatAllKeyboardInput();\n    }\n\n    if (this.submitted) {\n      this.submitted = false;\n      return this.SUBMIT;\n    }\n    if (this.canceled) {\n      this.canceled = false;\n      return this.CANCEL;\n    }\n    return null;\n  }\n  unrun() {\n    // remove from DOM or hide\n    this.elem = null;\n    this.input = null;\n  }\n}\nGlovUIEditBox.prototype.SUBMIT = 'submit';\nGlovUIEditBox.prototype.CANCEL = 'cancel';\n\nexport function create(params) {\n  return new GlovUIEditBox(params);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst engine = require('./engine.js');\nconst geom = require('./geom.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\nconst { vec2, vec3, vec4, v4set } = require('./vmath.js');\n\nconst shader_data = {\n  vp_copy: {\n    vp: 'glov/shaders/effects_copy.vp'\n  },\n  copy: {\n    fp: 'glov/shaders/effects_copy.fp'\n  },\n  pixely_expand: {\n    fp: 'glov/shaders/pixely_expand.fp'\n  },\n  gaussian_blur: {\n    fp: 'glov/shaders/effects_gaussian_blur.fp'\n  },\n  // bloom_merge: {\n  //   fp: 'glov/shaders/effects_bloom_merge.fp',\n  // },\n  // bloom_threshold: {\n  //   fp: 'glov/shaders/effects_bloom_threshold.fp',\n  // },\n  color_matrix: {\n    fp: 'glov/shaders/effects_color_matrix.fp'\n  }\n  // distort: {\n  //   fp: 'glov/shaders/effects_distort.fp',\n  // },\n};\n\nexport function registerShader(key, obj) {\n  shader_data[key] = obj;\n}\n\nfunction getShader(key) {\n  let elem = shader_data[key];\n  if (!elem.shader) {\n    if (elem.fp) {\n      elem.shader = shaders.create(elem.fp);\n    } else {\n      elem.shader = shaders.create(elem.vp);\n    }\n  }\n  return elem.shader;\n}\n\nlet inited = false;\nlet clip_space = vec4(2, 2, -1, -1);\nlet copy_uv_scale = vec2(1, 1);\nlet shader_params_default = {\n  clip_space,\n  copy_uv_scale\n};\n// let shader_params_distort;\nlet shader_params_color_matrix;\n// let shader_params_bloom;\n// let shader_params_bloom_merge;\nlet shader_params_gaussian_blur;\nlet shader_params_pixely_expand;\nlet quad_geom;\nfunction startup() {\n  inited = true;\n\n  quad_geom = geom.create([[shaders.semantic.POSITION, gl.FLOAT, 2, false]], new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]), null, geom.QUADS); // TODO: use gl.TRIANGLE_STRIP instead, save index buffer binding\n\n  // shader_params_distort = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   strength: vec2(0, 0),\n  //   transform: new Float32Array([0, 0, 0, 0, 0, 0]),\n  //   invTransform: vec4(0, 0, 0, 0),\n  // };\n\n  shader_params_color_matrix = {\n    clip_space,\n    copy_uv_scale,\n    colorMatrix: new Float32Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n  };\n\n  // shader_params_bloom = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   bloomThreshold: 0,\n  //   thresholdCuttoff: 0,\n  // };\n\n  // shader_params_bloom_merge = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   bloomIntensity: 0,\n  //   bloomSaturation: 0,\n  //   originalIntensity: 0,\n  //   originalSaturation: 0,\n  // };\n\n  // Gaussian Blur effect (also used by bloom)\n  shader_params_gaussian_blur = {\n    clip_space,\n    copy_uv_scale,\n    sampleRadius: vec3(1, 1, 1),\n    Gauss: new Float32Array([0.93, 0.8, 0.7, 0.6, 0.5, 0.4, 0.3, 0.2, 0.1])\n  };\n\n  shader_params_pixely_expand = {\n    clip_space,\n    copy_uv_scale,\n    orig_pixel_size: vec4()\n  };\n}\n\nexport function grayScaleMatrix(dst) {\n  dst[0] = 0.2126;\n  dst[1] = 0.2126;\n  dst[2] = 0.2126;\n  dst[3] = 0.7152;\n  dst[4] = 0.7152;\n  dst[5] = 0.7152;\n  dst[6] = 0.0722;\n  dst[7] = 0.0722;\n  dst[8] = 0.0722;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function sepiaMatrix(dst) {\n  dst[0] = 0.393;\n  dst[1] = 0.349;\n  dst[2] = 0.272;\n  dst[3] = 0.769;\n  dst[4] = 0.686;\n  dst[5] = 0.534;\n  dst[6] = 0.189;\n  dst[7] = 0.168;\n  dst[8] = 0.131;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function negativeMatrix(dst) {\n  dst[0] = dst[4] = dst[8] = -1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 1;\n}\n\nexport function saturationMatrix(dst, saturationScale) {\n  let is = 1 - saturationScale;\n  dst[0] = is * 0.2126 + saturationScale;\n  dst[1] = is * 0.2126;\n  dst[2] = is * 0.2126;\n  dst[3] = is * 0.7152;\n  dst[4] = is * 0.7152 + saturationScale;\n  dst[5] = is * 0.7152;\n  dst[6] = is * 0.0722;\n  dst[7] = is * 0.0722;\n  dst[8] = is * 0.0722 + saturationScale;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function hueMatrix(dst, angle) {\n  ////\n  //// Uncomment to calculate new coeffecients should luminance\n  //// values 0.2126 0.7152 0.0722 change.\n  //let lumR = 0.2126;\n  //let lumG = 0.7152;\n  //let lumB = 0.0722;\n  ////\n  //let r23 = Math.sqrt(2 / 3);\n  //let r12 = 1 / Math.sqrt(2);\n  //let r13 = 1 / Math.sqrt(3);\n  //let r16 = 1 / Math.sqrt(6);\n  //let M = [r23, 0, r13, -r16, r12, r13, -r16, -r12, r13, 0, 0, 0];\n  //let zx = (r23 * lumR) - (r16 * lumG) - (r16 * lumB);\n  //let zy =                (r12 * lumG) - (r12 * lumB);\n  //let zz = (r13 * lumR) + (r13 * lumG) + (r13 * lumB);\n  //let x = zx / zz;\n  //let y = zy / zz;\n  //let C = [1, 0, x, 0, 1, y, 0, 0, 1, 0, 0, 0];\n  //m43mul(M, M, C);\n  //console.log(\"Pre transform = \", M);\n  //let E = [1, 0, -x, 0, 1, -y, 0, 0, 1, 0, 0, 0];\n  //let N = [r23, -r16, -r16, 0, r12, -r12, r13, r13, r13, 0, 0, 0];\n  //m43mul(N, E, N);\n  //console.log(\"Post transform = \", N);\n  ////\n  //// Final matrix is then: m43Mul(Pre, [c, s, 0, -s, c, 0, 0, 0, 1, 0, 0, 0, ], Post);\n  //// for c = cos(angle), s = sin(angle)\n  ////\n  //let out = \"\";\n  //out += \"let c = Math.cos(angle);\\n\";\n  //out += \"let s = Math.sin(angle);\\n\";\n  //out += \"dst[0] = (\" + (N[0]*M[0]+N[3]*M[1]) + \" * c) + (\" + (N[3]*M[0]-N[0]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[1] = (\" + (-lumR)               + \" * c) + (\" + (N[4]*M[0]-N[1]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[2] = (\" + (-lumR)               + \" * c) + (\" + (N[5]*M[0]-N[2]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[3] = (\" + (-lumG)               + \" * c) + (\" + (N[3]*M[3]-N[0]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[4] = (\" + (N[1]*M[3]+N[4]*M[4]) + \" * c) + (\" + (N[4]*M[3]-N[1]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[5] = (\" + (-lumG)               + \" * c) + (\" + (N[5]*M[3]-N[2]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[6] = (\" + (-lumB)               + \" * c) + (\" + (N[3]*M[6]-N[0]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //out += \"dst[7] = (\" + (-lumB)               + \" * c) + (\" + (N[4]*M[6]-N[1]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //out += \"dst[8] = (\" + (N[2]*M[6]+N[5]*M[7]) + \" * c) + (\" + (N[5]*M[6]-N[2]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //console.log(out);\n  let c = Math.cos(angle);\n  let s = Math.sin(angle);\n  dst[0] = 0.7874 * c + -0.3712362230889293 * s + 0.2126;\n  dst[1] = -0.2126 * c + 0.20611404610069642 * s + 0.2126;\n  dst[2] = -0.2126 * c + -0.9485864922785551 * s + 0.2126;\n  dst[3] = -0.7152 * c + -0.4962902913954023 * s + 0.7152;\n  dst[4] = 0.2848 * c + 0.08105997779422341 * s + 0.7152;\n  dst[5] = -0.7152 * c + 0.6584102469838492 * s + 0.7152;\n  dst[6] = -0.0722 * c + 0.8675265144843316 * s + 0.0722;\n  dst[7] = -0.0722 * c + -0.28717402389491986 * s + 0.0722;\n  dst[8] = 0.9278 * c + 0.290176245294706 * s + 0.0722;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function brightnessAddMatrix(dst, brightnessOffset) {\n  dst[0] = dst[4] = dst[8] = 1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = brightnessOffset;\n}\n\nexport function brightnessScaleMatrix(dst, scale) {\n  dst[0] = dst[4] = dst[8] = scale;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function additiveMatrix(dst, additiveRGB) {\n  dst[0] = dst[4] = dst[8] = 1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = additiveRGB[0];\n  dst[10] = additiveRGB[1];\n  dst[11] = additiveRGB[2];\n}\n\nexport function contrastMatrix(dst, contrastScale) {\n  dst[0] = dst[4] = dst[8] = contrastScale;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 0.5 * (1 - contrastScale);\n}\n\n// effect: { shader, params, texs }\nfunction applyEffect(effect, view_w, view_h) {\n  let viewport = engine.viewport;\n  let target_w = viewport[2];\n  let target_h = viewport[3];\n  view_w = view_w || target_w;\n  view_h = view_h || target_h;\n\n  // Set values for parameters used by all effects\n  clip_space[0] = 2.0 * view_w / target_w;\n  clip_space[1] = 2.0 * view_h / target_h;\n  // clip_space[2] = -1.0;\n  // clip_space[3] = -1.0;\n  // copy_uv_scale[0] = target_w / effect.coord_source.width;\n  // copy_uv_scale[1] = target_h / effect.coord_source.height;\n\n  shaders.bind(getShader('vp_copy'), getShader(effect.shader), effect.params);\n  textures.bindArray(effect.texs);\n  quad_geom.draw();\n}\n\n// // TODO: Update for RTBBCTT and port to new GLOV.js\n// function applyBloomTODO(params) {\n//   let source = params.source;\n//   let blur1 = params.blurTarget1;\n//   let blur2 = params.blurTarget2;\n//   let dest = params.destination;\n//   if (!source || !dest || !blur1 || !blur2 || !blur1.colorTexture0 ||\n//     !blur2.colorTexture0 || blur1 === blur2 || blur1 === dest ||\n//     source === blur1.colorTexture0 || source === dest.colorTexture0) {\n//     return false;\n//   }\n//\n//   let effectParams = this.effectParams;\n//   let techparams;\n//\n//   // Threshold copy.\n//   techparams = this.bloomThresholdParameters;\n//   effectParams.technique = this.bloomThresholdTechnique;\n//   effectParams.params = techparams;\n//\n//   techparams.bloomThreshold = (params.bloomThreshold !== undefined) ? params.bloomThreshold : 0.65;\n//   techparams.thresholdCutoff = Math.exp((params.thresholdCutoff !== undefined) ? params.thresholdCutoff : 3);\n//   techparams.inputTexture0 = source;\n//   effectParams.destination = blur1;\n//   this.applyEffect(effectParams);\n//\n//   // Gaussian blur.\n//   techparams = this.gaussianBlurParameters;\n//   effectParams.technique = this.gaussianBlurTechnique;\n//   effectParams.params = techparams;\n//\n//   let sampleRadius = (params.blurRadius || 20);\n//   techparams.sampleRadius[0] = sampleRadius / source.width;\n//   techparams.sampleRadius[1] = 0;\n//   techparams.sampleRadius[2] = 1;\n//   techparams.inputTexture0 = blur1.colorTexture0;\n//   effectParams.destination = blur2;\n//   this.applyEffect(effectParams);\n//\n//   techparams.sampleRadius[0] = 0;\n//   techparams.sampleRadius[1] = sampleRadius / source.height;\n//   techparams.sampleRadius[2] = 1;\n//   techparams.inputTexture0 = blur2.colorTexture0;\n//   effectParams.destination = blur1;\n//   this.applyEffect(effectParams);\n//\n//   // Merge.\n//   techparams = this.bloomMergeParameters;\n//   effectParams.technique = this.bloomMergeTechnique;\n//   effectParams.params = techparams;\n//\n//   techparams.bloomIntensity = (params.bloomIntensity !== undefined) ? params.bloomIntensity : 1.2;\n//   techparams.bloomSaturation = (params.bloomSaturation !== undefined) ? params.bloomSaturation : 1.2;\n//   techparams.originalIntensity = (params.originalIntensity !== undefined) ? params.originalIntensity : 1.0;\n//   techparams.originalSaturation = (params.originalSaturation !== undefined) ? params.originalSaturation : 1.0;\n//   techparams.inputTexture0 = source;\n//   techparams.inputTexture1 = blur1.colorTexture0;\n//   effectParams.destination = dest;\n//   this.applyEffect(effectParams);\n//\n//   return true;\n// }\n\nexport function applyCopy(params) {\n  if (!inited) {\n    startup();\n  }\n  applyEffect({\n    shader: params.shader || 'copy',\n    params: shader_params_default,\n    texs: [params.source]\n  });\n}\n\nexport function applyPixelyExpand(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n\n  // do horizontal blur for primary lines\n  let resx = source.width;\n  let resy = source.height;\n  let sampleRadius = (params.hblur || 0.25) / resx;\n  shader_params_gaussian_blur.sampleRadius[0] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[1] = 0;\n  shader_params_gaussian_blur.sampleRadius[2] = 1;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [source]\n  }, resx, resy);\n  let hblur = engine.captureFramebuffer(null, resx, resy, true, false);\n\n  // do seperable gaussian blur for scanlines (using horizontal blur from above)\n  sampleRadius = (params.vblur || 0.75) / resy;\n  shader_params_gaussian_blur.sampleRadius[0] = 0;\n  shader_params_gaussian_blur.sampleRadius[1] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[2] = 1;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [hblur]\n  }, resx, resy);\n  let vblur = engine.captureFramebuffer(null, resx, resy, true, false);\n\n  // combine at full res\n  v4set(shader_params_pixely_expand.orig_pixel_size, source.width, source.height, 1 / source.width, 1 / source.height);\n\n  engine.setViewport(params.final_viewport);\n  if (params.clear_color) {\n    gl.clearColor(params.clear_color[0], params.clear_color[1], params.clear_color[2], params.clear_color[3]);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  }\n\n  applyEffect({\n    shader: 'pixely_expand',\n    params: shader_params_pixely_expand,\n    texs: [source, hblur, vblur]\n  });\n}\n\nexport function applyGaussianBlur(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n  let max_size = params.max_size || 512;\n  let min_size = params.min_size || 128;\n\n  // Quick shrink down to 512->256->128 (or other specified min/max size)\n  let inputTexture0 = source;\n\n  let viewport = engine.viewport;\n  let res = max_size;\n  while (res > viewport[2] || res > viewport[3]) {\n    res /= 2;\n  }\n\n  while (res > min_size) {\n    applyEffect({\n      shader: params.shader_copy || 'copy',\n      params: shader_params_default,\n      texs: [inputTexture0]\n    }, res, res);\n    inputTexture0 = engine.captureFramebuffer(null, res, res, true, false);\n    res /= 2;\n  }\n\n  // Do seperable blur\n  let sampleRadius = (params.blur || 1) / res;\n  shader_params_gaussian_blur.sampleRadius[0] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[1] = 0;\n  shader_params_gaussian_blur.sampleRadius[2] = params.glow || 1;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [inputTexture0]\n  }, res, res);\n  let blur = engine.captureFramebuffer(null, res, res, true, false);\n\n  shader_params_gaussian_blur.sampleRadius[0] = 0;\n  shader_params_gaussian_blur.sampleRadius[1] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[2] = params.glow || 1;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [blur]\n  });\n\n  return true;\n}\n\nexport function applyColorMatrix(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n\n  let matrix = params.colorMatrix;\n  let mout = shader_params_color_matrix.colorMatrix;\n\n  mout[0] = matrix[0];\n  mout[1] = matrix[3];\n  mout[2] = matrix[6];\n  mout[3] = matrix[9];\n  mout[4] = matrix[1];\n  mout[5] = matrix[4];\n  mout[6] = matrix[7];\n  mout[7] = matrix[10];\n  mout[8] = matrix[2];\n  mout[9] = matrix[5];\n  mout[10] = matrix[8];\n  mout[11] = matrix[11];\n\n  applyEffect({\n    shader: 'color_matrix',\n    params: shader_params_color_matrix,\n    texs: [source]\n  });\n\n  return true;\n}\n\n// // TODO: Update for RTBBCTT and port to new GLOV.js\n// export function applyDistortTODO(params) {\n//   let source = params.source;\n//   let dest = params.destination;\n//   let distort = params.distortion;\n//   if (!source || !dest || !distort || !dest.colorTexture0 ||\n//     source === dest.colorTexture0 || distort === dest.colorTexture0) {\n//     return false;\n//   }\n//\n//   // input transform.\n//   //  a b tx\n//   //  c d ty\n//   let a;\n//   let b;\n//   let c;\n//   let d;\n//   let tx;\n//   let ty;\n//\n//   let transform = params.transform;\n//   if (transform) {\n//     // transform col-major.\n//     a = transform[0];\n//     b = transform[2];\n//     tx = transform[4];\n//     c = transform[1];\n//     d = transform[3];\n//     ty = transform[5];\n//   } else {\n//     a = d = 1;\n//     b = c = 0;\n//     tx = ty = 0;\n//   }\n//\n//   let effectParams = this.effectParams;\n//   let techparams = this.distortParameters;\n//   effectParams.technique = this.distortTechnique;\n//   effectParams.params = techparams;\n//\n//   // TODO: Cache 'transform', 'invTransform', etc in the code below\n//   techparams.transform[0] = a;\n//   techparams.transform[1] = b;\n//   techparams.transform[2] = tx;\n//   techparams.transform[3] = c;\n//   techparams.transform[4] = d;\n//   techparams.transform[5] = ty;\n//\n//   // Compute inverse transform to use in distort texture displacement..\n//   let idet = 1 / (a * d - b * c);\n//   let ia = techparams.invTransform[0] = (idet * d);\n//   let ib = techparams.invTransform[1] = (idet * -b);\n//   let ic = techparams.invTransform[2] = (idet * -c);\n//   let id = techparams.invTransform[3] = (idet * a);\n//\n//   // Compute max pixel offset after transform for normalisation.\n//   let x1 = ((ia + ib) * (ia + ib)) + ((ic + id) * (ic + id));\n//   let x2 = ((ia - ib) * (ia - ib)) + ((ic - id) * (ic - id));\n//   let x3 = ((-ia + ib) * (-ia + ib)) + ((-ic + id) * (-ic + id));\n//   let x4 = ((-ia - ib) * (-ia - ib)) + ((-ic - id) * (-ic - id));\n//   let xmax = 0.5 * Math.sqrt(Math.max(x1, x2, x3, x4));\n//\n//   let strength = (params.strength || 10);\n//   techparams.strength[0] = strength / (source.width * xmax);\n//   techparams.strength[1] = strength / (source.height * xmax);\n//\n//   techparams.inputTexture0 = source;\n//   techparams.distortTexture = distort; // linear / repeat\n//   effectParams.destination = dest;\n//   this.applyEffect(effectParams);\n//\n//   return true;\n// }\n\nexport function clearAlpha() {\n  let old_dt = gl.getParameter(gl.DEPTH_TEST);\n  if (old_dt) {\n    gl.disable(gl.DEPTH_TEST);\n  }\n  gl.colorMask(false, false, false, true);\n  applyCopy({ source: textures.textures.white });\n  gl.colorMask(true, true, true, true);\n  if (old_dt) {\n    gl.enable(gl.DEPTH_TEST);\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\nrequire('./bootstrap.js'); // Just in case it's not in app.js\n\nexport let DEBUG = String(document.location).match(/^https?:\\/\\/localhost/);\n\nrequire('not_worker'); // This module cannot be required from a worker bundle\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst cmds = require('./cmds.js');\nconst effects = require('./effects.js');\nconst glov_font = require('./font.js');\nconst font_info_palanquin32 = require('../img/font/palanquin32.json');\nconst geom = require('./geom.js');\nconst input = require('./input.js');\nconst local_storage = require('./local_storage.js');\nconst mat3FromMat4 = require('gl-mat3/fromMat4');\nconst mat4Copy = require('gl-mat4/copy');\nconst mat4Invert = require('gl-mat4/invert');\nconst mat4Mul = require('gl-mat4/multiply');\nconst mat4Transpose = require('gl-mat4/transpose');\nconst mat4Perspective = require('gl-mat4/perspective');\nconst { asin, cos, floor, min, max, PI, round, sin, sqrt } = Math;\nconst models = require('./models.js');\nconst perf = require('./perf.js');\nconst settings = require('./settings.js');\nconst shaders = require('./shaders.js');\nconst { soundLoading, soundStartup, soundTick } = require('./sound.js');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { texturesTick } = textures;\nconst glov_transition = require('./transition.js');\nconst glov_ui = require('./ui.js');\nconst urlhash = require('./urlhash.js');\nconst { clamp, defaults, nearSame, ridx } = require('../../common/util.js');\nconst { mat3, mat4, vec3, vec4, v3mulMat4, v3iNormalize, v4copy, v4same, v4set } = require('./vmath.js');\n\nexport let canvas;\nexport let webgl2;\nexport let glov_particles;\n\nexport let width;\nexport let height;\nexport let pixel_aspect = 1;\nexport let antialias;\n\nexport let game_width;\nexport let game_height;\n\nexport let render_width;\nexport let render_height;\n\n//eslint-disable-next-line no-use-before-define\nexport let defines = urlhash.register({ key: 'D', type: urlhash.TYPE_SET, change: definesChanged });\n\nexport let any_3d = false;\nexport let ZFAR;\nexport let ZNEAR;\nexport let fov_y = 1;\nexport let fov_x = 1;\nexport let fov_min = 60 * PI / 180;\n\nexport let mat_projection = mat4();\nexport let mat_view = mat4();\nlet mat_m = mat4();\nexport let mat_vp = mat4();\nlet mat_mv = mat4();\nlet mat_mv_no_skew = mat4();\nlet mat_mvp = mat4();\nlet mat_mv_inv_transform = mat3();\nlet mat_inv_view = mat3();\nlet projection_inverse = vec4();\n\nexport let light_diffuse = vec3(0.75, 0.75, 0.75);\nlet light_dir_vs = vec3(0, 0, 0);\nexport let light_ambient = vec3(0.25, 0.25, 0.25);\nexport let light_dir_ws = vec3(-1, -2, -3);\n\nexport let font;\nexport let app_state = null;\nexport const border_color = vec4(0, 0, 0, 1);\n\nlet mat_temp = mat4();\nexport function setGlobalMatrices(_mat_view) {\n  mat4Copy(mat_view, _mat_view);\n  mat4Mul(mat_vp, mat_projection, mat_view);\n  v3iNormalize(light_dir_ws);\n  v3mulMat4(light_dir_vs, light_dir_ws, mat_view);\n  mat4Invert(mat_temp, mat_view);\n  mat3FromMat4(mat_inv_view, mat_temp);\n}\n\nexport function setFOV(new_fov) {\n  fov_min = new_fov;\n}\n\nexport function setGameDims(w, h) {\n  game_width = w;\n  game_height = h;\n}\n\nlet is_ios_safari = function () {\n  let ua = window.navigator.userAgent;\n  let is_ios = ua.match(/iPad/i) || ua.match(/iPhone/i);\n  let webkit = ua.match(/WebKit/i);\n  return is_ios && webkit && !ua.match(/CriOS/i);\n}();\n\n// Didn't need this for a while, but got slow on iOS recently :(\nconst postprocessing_reset_version = '3';\nexport let postprocessing = local_storage.get('glov_no_postprocessing') !== postprocessing_reset_version;\nexport function postprocessingAllow(allow) {\n  local_storage.set('glov_no_postprocessing', allow ? undefined : postprocessing_reset_version);\n  postprocessing = allow;\n}\n\nexport function glCheckError() {\n  let gl_err = gl.getError();\n  if (gl_err) {\n    console.error(gl_err);\n    throw new Error(gl_err);\n  }\n}\n\nexport function releaseCanvas() {\n  try {\n    if (gl) {\n      let ext = gl.getExtension('WEBGL_lose_context');\n      if (ext) {\n        ext.loseContext();\n      }\n    }\n  } catch (ignored) {\n    // nothing, it's fine\n  }\n}\n\nexport function reloadSafe() {\n  // Release canvas to not leak memory on Firefox\n  releaseCanvas();\n  document.location.reload();\n}\nwindow.reloadSafe = reloadSafe;\n\nlet reloading_defines = {};\nexport function defineCausesReload(define) {\n  reloading_defines[define] = defines[define];\n}\ndefineCausesReload('FORCEWEBGL2');\ndefineCausesReload('NOWEBGL2');\nexport function definesChanged() {\n  for (let key in reloading_defines) {\n    if (defines[key] !== reloading_defines[key]) {\n      urlhash.onURLChange(reloadSafe);\n      break;\n    }\n  }\n  shaders.handleDefinesChanged();\n}\n\nfunction normalizeRow(m, idx) {\n  let len = m[idx] * m[idx] + m[idx + 1] * m[idx + 1] + m[idx + 2] * m[idx + 2];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    m[idx] *= len;\n    m[idx + 1] *= len;\n    m[idx + 2] *= len;\n  }\n}\n\nexport function updateMatrices(mat_model) {\n  // PERFTODO: depending on rendering path, only some of these are needed (m + vp or just mvp)\n  mat4Copy(mat_m, mat_model);\n\n  mat4Mul(mat_mv, mat_view, mat_model);\n  mat4Mul(mat_mvp, mat_projection, mat_mv);\n  // TODO: Can expand and simplify all of this, especially below\n  // Compute the inverse transform of thee model_view matrix, discarding scale,\n  // to be used for getting normals into view space\n  mat4Copy(mat_temp, mat_model);\n  normalizeRow(mat_temp, 0);\n  normalizeRow(mat_temp, 4);\n  normalizeRow(mat_temp, 8);\n  mat4Mul(mat_mv_no_skew, mat_view, mat_temp);\n  mat4Invert(mat_temp, mat_mv_no_skew);\n  mat4Transpose(mat_temp, mat_temp);\n  mat3FromMat4(mat_mv_inv_transform, mat_temp);\n}\nexport let global_timer = 0;\nexport function getFrameTimestamp() {\n  return global_timer;\n}\n\nexport let global_frame_index = 0;\nexport function getFrameIndex() {\n  return global_frame_index;\n}\n\nexport let this_frame_time = 0;\nexport function getFrameDt() {\n  return this_frame_time;\n}\n\nexport let hrtime = 0;\n\n// Wall time, may contain large jumps, may be 0 or negative\nlet this_frame_time_actual = 0;\nexport function getFrameDtActual() {\n  return this_frame_time_actual;\n}\n\nlet after_loading_state = null;\nexport let is_loading = true;\nexport function setState(new_state) {\n  if (is_loading) {\n    after_loading_state = new_state;\n  } else {\n    app_state = new_state;\n  }\n}\n\nexport function stateActive(test_state) {\n  if (is_loading) {\n    return after_loading_state === test_state;\n  } else {\n    return app_state === test_state;\n  }\n}\n\nlet mspf = 1000;\nlet mspf_update_time = 0;\nlet mspf_frame_count = 0;\nlet last_tick_cpu = 0;\nlet mspf_tick = 1000;\n// let net_time = 1000;\nlet mspf_tick_accum = 0;\n// let net_time_accum = 0;\nexport const PERF_HISTORY_SIZE = 128;\nexport let perf_state = window.glov_perf_state = {\n  fpsgraph: {\n    index: 0,\n    history: new Float32Array(PERF_HISTORY_SIZE * 2)\n  },\n  gpu_mem: {\n    tex: 0,\n    geom: 0\n  }\n};\nlet fpsgraph = perf_state.fpsgraph;\n\nperf.addMetric({\n  name: 'fps',\n  show_stat: 'show_fps', // always, if we're showing any metrics\n  show_graph: 'fps_graph',\n  labels: {\n    'fps: ': () => (1000 / mspf).toFixed(1),\n    'ms/f: ': () => mspf.toFixed(0),\n    'cpu: ': () => mspf_tick.toFixed(0)\n    // 'net: ': () => net_time.toFixed(0),\n  },\n  data: fpsgraph, // contain .index and .history (stride of colors.length)\n  line_scale_top: 50,\n  colors: [\n  // vec4(0.161, 0.678, 1, 1), // net time\n  vec4(1, 0.925, 0.153, 1), // cpu/tick time\n  vec4(0, 0.894, 0.212, 1)],\n  interactable: DEBUG\n});\n\nlet do_borders = true;\nlet do_viewport_postprocess = false;\nlet need_repos = 0;\n\nexport function resizing() {\n  return need_repos;\n}\n\nlet app_tick_functions = [];\nexport function addTickFunc(cb) {\n  app_tick_functions.push(cb);\n}\n\nlet post_tick = [];\nexport function postTick(opts) {\n  opts.ticks = opts.ticks || 1; // run in how many ticks?\n  opts.inactive = opts.inactive || false; // run even if inactive?\n  assert.equal(typeof opts.fn, 'function');\n  post_tick.push(opts);\n}\n\nlet temporary_textures = {};\n\nfunction resetEffects() {\n  for (let key in temporary_textures) {\n    let temp = temporary_textures[key];\n    // Release unused textures\n    while (temp.list.length > temp.idx) {\n      temp.list.pop().destroy();\n    }\n    if (!temp.idx) {\n      delete temporary_textures[key];\n    } else {\n      temp.idx = 0;\n    }\n  }\n}\n\nconst SAFARI_FULLSCREEN_ASPECT = function () {\n  let screen = window.screen;\n  if (!is_ios_safari || !screen) {\n    return 0;\n  }\n  const SAFARI_DIMS = { // wxh : [fullscreen aspect]\n    // iPhone XR\n    // iPhone 11 Pro Max\n    // iPhone XS Max\n    // iPhone 11\n    '896,414': 896 / 414,\n    // iPhone 11 Pro\n    // iPhone X (probably)\n    '812,375': 812 / 375,\n    // iPhone 8 Plus\n    '736,414': 736 / 414,\n    // iPhone 6s+\n    // iPhone 6+\n    '716,414': 736 / 414, // (screen.availWidth reports 20 less)\n    // iPhone 8\n    // iPhone 7 (10.1)\n    // iPhone 7 (11.4)\n    '667,375': 667 / 375,\n    // iPhone 6s\n    // iPhone 6\n    '647,375': 667 / 375, // (screen.availWidth reports 20 less)\n    // iPhone 5s\n    '548,320': 568 / 320 // (screen.availWidth reports 20 less)\n  };\n  let key = `${max(screen.availWidth, screen.availHeight)},${min(screen.availWidth, screen.availHeight)}`;\n  return SAFARI_DIMS[key] || 0;\n}();\nfunction safariTopSafeArea(view_w, view_h) {\n  // Detect if the URL bar is hidden, but should be a safe area\n  if (SAFARI_FULLSCREEN_ASPECT && nearSame(view_w / view_h, SAFARI_FULLSCREEN_ASPECT, 0.001)) {\n    // Note: if user has scaling enabled, the padding required might be different\n    //   but the same holds true for the safe area padding detected via CSS!\n    return 50 * (window.devicePixelRatio || 1); // seems to be 50pts on all devices\n  }\n  return 0;\n}\n\nlet last_canvas_width;\nlet last_canvas_height;\nlet last_body_height;\nlet safearea_elem;\nlet safearea_ignore_bottom = false;\nlet safearea_values = [0, 0, 0, 0];\nlet last_safearea_values = [0, 0, 0, 0];\nfunction checkResize() {\n  // use VisualViewport on at least iOS Safari - deal with tabs and keyboard\n  //   shrinking the viewport without changing the window height\n  let vv = window.visualViewport || {};\n  let css_to_real = window.devicePixelRatio || 1;\n  let view_w = vv.width || window.innerWidth;\n  let view_h = vv.height || window.innerHeight;\n  if (view_h !== last_body_height) {\n    // set this *before* getting canvas and safearea_elem dims below\n    last_body_height = view_h;\n    document.body.style.height = `${view_h}px`;\n  }\n  let new_width = round(canvas.clientWidth * css_to_real) || 1;\n  let new_height = round(canvas.clientHeight * css_to_real) || 1;\n\n  if (cmds.safearea[0] === -1) {\n    if (safearea_elem) {\n      let sa_width = safearea_elem.offsetWidth;\n      let sa_height = safearea_elem.offsetHeight;\n      if (sa_width && sa_height) {\n        v4set(safearea_values, safearea_elem.offsetLeft * css_to_real, new_width - (sa_width + safearea_elem.offsetLeft) * css_to_real, max(safearea_elem.offsetTop * css_to_real, safariTopSafeArea(view_w, view_h)),\n        // Note: Possibly ignoring bottom safe area, it seems not useful on iPhones (does not\n        //  adjust when keyboard is up, only obscured in the middle, if obeying left/right safe area)\n        safearea_ignore_bottom ? 0 : new_height - (sa_height + safearea_elem.offsetTop) * css_to_real);\n      }\n    }\n  } else {\n    v4set(safearea_values, new_width * clamp(cmds.safearea[0], 0, 25) / 100, new_width * clamp(cmds.safearea[1], 0, 25) / 100, new_height * clamp(cmds.safearea[2], 0, 25) / 100, new_height * clamp(cmds.safearea[3], 0, 25) / 100);\n  }\n  if (!v4same(safearea_values, last_safearea_values)) {\n    v4copy(last_safearea_values, safearea_values);\n    camera2d.setSafeAreaPadding(safearea_values[0], safearea_values[1], safearea_values[2], safearea_values[3]);\n    need_repos = max(need_repos, 1);\n  }\n\n  if (new_width !== last_canvas_width || new_height !== last_canvas_height) {\n    window.pixel_scale = css_to_real; // for debug\n    last_canvas_width = canvas.width = new_width || 1;\n    last_canvas_height = canvas.height = new_height || 1;\n    // For the next 10 frames, make sure font size is correct\n    need_repos = 10;\n  }\n  if (is_ios_safari && (window.visualViewport || need_repos)) {\n    // we have accurate view information, or screen was just rotated / resized\n    // force scroll to top\n    window.scroll(0, 0);\n  }\n}\n\nexport let viewport = vec4(0, 0, 1, 1);\nexport function setViewport(xywh) {\n  v4copy(viewport, xywh);\n  gl.viewport(xywh[0], xywh[1], xywh[2], xywh[3]);\n}\n\nlet last_temp_idx = 0;\nexport function getTemporaryTexture(w, h) {\n  let key = w ? `${w}_${h}` : 'screen';\n  let temp = temporary_textures[key];\n  if (!temp) {\n    temp = temporary_textures[key] = { list: [], idx: 0 };\n  }\n  if (temp.idx >= temp.list.length) {\n    let tex = textures.createForCapture(`temp_${key}_${++last_temp_idx}`);\n    temp.list.push(tex);\n  }\n  let tex = temp.list[temp.idx++];\n  return tex;\n}\n\nexport function captureFramebuffer(tex, w, h, do_filter_linear, do_wrap) {\n  if (!w && render_width) {\n    w = render_width;\n    h = render_height;\n  }\n  if (!tex) {\n    tex = getTemporaryTexture(w, h);\n  }\n  if (w) {\n    tex.copyTexImage(viewport[0], viewport[1], w, h);\n  } else {\n    tex.copyTexImage(0, 0, width, height);\n  }\n  tex.setSamplerState({\n    filter_min: do_filter_linear ? gl.LINEAR : gl.NEAREST,\n    filter_mag: do_filter_linear ? gl.LINEAR : gl.NEAREST,\n    wrap_s: do_wrap ? gl.REPEAT : gl.CLAMP_TO_EDGE,\n    wrap_t: do_wrap ? gl.REPEAT : gl.CLAMP_TO_EDGE\n  });\n  return tex;\n}\n\nlet frame_requested = false;\nfunction requestFrame() {\n  if (frame_requested) {\n    return;\n  }\n  frame_requested = true;\n  let max_fps = settings.max_fps;\n  if (defines.SLOWLOAD && is_loading) {\n    // Safari on CrossBrowserTesting needs this in order to have some time to load/decode audio data\n    // TODO: Instead, generally, if loading, compare last_tick_cpu vs dt, and if\n    //   we're not idle for at least half of the time and we have *internal*\n    //   loads (textures, sounds, models, NOT user code), delay so that we are.\n    max_fps = 2;\n  }\n  if (max_fps) {\n    // eslint-disable-next-line no-use-before-define\n    setTimeout(tick, round(1000 / max_fps));\n  } else {\n    // eslint-disable-next-line no-use-before-define\n    requestAnimationFrame(tick);\n  }\n}\n\nlet mat_projection_10;\nexport let had_3d_this_frame;\n\nexport function setupProjection(use_fov_y, use_width, use_height, znear, zfar) {\n  mat4Perspective(mat_projection, use_fov_y, use_width / use_height, znear, zfar);\n  mat_projection_10 = mat_projection[10];\n  v4set(projection_inverse, 2 / (use_width * mat_projection[0]), // projection_matrix.m00),\n  2 / (use_height * mat_projection[5]), // projection_matrix.m11),\n  -(1 + mat_projection[8]) / mat_projection[0], // projection_matrix.m20) / projection_matrix.m00,\n  -(1 + mat_projection[9]) / mat_projection[5] // projection_matrix.m21) / projection_matrix.m11\n  );\n}\n\nexport function start3DRendering() {\n  had_3d_this_frame = true;\n  gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n  gl.enable(gl.BLEND);\n  gl.enable(gl.DEPTH_TEST);\n  gl.depthMask(true);\n\n  setupProjection(fov_y, width, height, ZNEAR, ZFAR);\n\n  gl.viewport(viewport[0], viewport[1], viewport[2], viewport[3]);\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT); // eslint-disable-line no-bitwise\n  gl.enable(gl.CULL_FACE);\n}\n\nexport function projectionZBias(dist, at_z) {\n  if (!dist) {\n    mat_projection[10] = mat_projection_10;\n    return;\n  }\n  //let e = 2 * ZFAR * ZNEAR / (ZFAR - ZNEAR) * (dist / (at_z * (at_z + dist)));\n  let e = 0.2 * (dist / (at_z * (at_z + dist)));\n  e = max(e, 2e-7);\n  mat_projection[10] = mat_projection_10 + e;\n}\n\nfunction fixNatives(is_startup) {\n  // If any browser extensions have added things to the Array prototype, remove them!\n  let b = [];\n  for (let a in b) {\n    console[is_startup ? 'log' : 'error'](`Found invasive enumerable property \"${a}\" on Array.prototype, removing...`);\n    let old_val = b[a];\n    delete Array.prototype[a];\n    // If this fails to work, perhaps try using Object.preventExtensions(Array.prototype) in an inline header script?\n    // eslint-disable-next-line no-extend-native\n    Object.defineProperty(Array.prototype, a, { value: old_val, enumerable: false });\n  }\n  for (let a in b) {\n    // Failed: code that iterates arrays will fail\n    assert(false, `Array.prototype has unremovable member ${a}`);\n  }\n}\n\nexport const hrnow = window.performance ? window.performance.now.bind(window.performance) : Date.now.bind(Date);\n\nlet last_tick = 0;\nfunction tick(timestamp) {\n  frame_requested = false;\n  // if (timestamp < 1e12) { // high resolution timer\n  //   this ends up being a value way back in time, relative to what hrnow() returns,\n  //   and even back in time relative to input events already dispatched,\n  //   causing timing confusion, so ignore it, just call hrnow()\n  //   hrtime = timestamp;\n  // } else { // probably integer milliseconds since epoch, or nothing\n  hrtime = hrnow();\n  // }\n  let now = round(hrtime); // Code assumes integer milliseconds\n  if (!last_tick) {\n    last_tick = now;\n  }\n  this_frame_time_actual = now - last_tick;\n  let dt = min(max(this_frame_time_actual, 1), 250);\n  this_frame_time = dt;\n  last_tick = now;\n  global_timer += dt;\n  ++global_frame_index;\n\n  fixNatives(false);\n\n  // let this_net_time = wsclient.getNetTime();\n  // fpsgraph.history[(fpsgraph.index % PERF_HISTORY_SIZE) * 3 + 0] = this_net_time;\n  fpsgraph.history[fpsgraph.index % PERF_HISTORY_SIZE * 2 + 1] = this_frame_time_actual;\n  fpsgraph.index++;\n  fpsgraph.history[fpsgraph.index % PERF_HISTORY_SIZE * 2 + 0] = 0;\n\n  ++mspf_frame_count;\n  mspf_tick_accum += last_tick_cpu;\n  // net_time_accum += this_net_time;\n  if (now - mspf_update_time > 1000) {\n    if (!mspf_update_time) {\n      mspf_update_time = now;\n    } else {\n      mspf = (now - mspf_update_time) / mspf_frame_count;\n      mspf_tick = mspf_tick_accum / mspf_frame_count;\n      mspf_tick_accum = 0;\n      // net_time = net_time_accum / mspf_frame_count;\n      // net_time_accum = 0;\n      mspf_frame_count = 0;\n      mspf_update_time = now;\n    }\n  }\n\n  if (document.hidden || document.webkitHidden) {\n    resetEffects();\n    last_tick_cpu = 0;\n    for (let ii = post_tick.length - 1; ii >= 0; --ii) {\n      if (post_tick[ii].inactive && ! --post_tick[ii].ticks) {\n        post_tick[ii].fn();\n        ridx(post_tick, ii);\n      }\n    }\n    requestFrame();\n    return;\n  }\n\n  had_3d_this_frame = false;\n  checkResize();\n  width = canvas.width;\n  height = canvas.height;\n\n  if (any_3d) {\n    // setting the fov values for the frame even if we don't do 3D this frame, because something\n    // might need it before start3DRendering() (e.g. mouse click inverse projection)\n    if (width > height) {\n      fov_y = fov_min;\n      let rise = width / height * sin(fov_y / 2) / cos(fov_y / 2);\n      fov_x = 2 * asin(rise / sqrt(rise * rise + 1));\n    } else {\n      fov_x = fov_min;\n      let rise = height / width * sin(fov_x / 2) / cos(fov_x / 2);\n      fov_y = 2 * asin(rise / sqrt(rise * rise + 1));\n    }\n  }\n  textures.bind(0, textures.textures.error);\n\n  camera2d.tickCamera2D();\n  camera2d.setAspectFixed(game_width, game_height);\n\n  soundTick(dt);\n  input.tickInput();\n  glov_ui.tickUI(dt);\n\n  if (need_repos) {\n    --need_repos;\n    let ul = [];\n    camera2d.virtualToDom(ul, [0, 0]);\n    let lr = [];\n    camera2d.virtualToDom(lr, [game_width - 1, game_height - 1]);\n    let viewport2 = [ul[0], ul[1], lr[0], lr[1]];\n    let view_height = viewport2[3] - viewport2[1];\n    // default font size of 16 when at height of game_height\n    let font_size = min(256, max(2, floor(view_height / 800 * 16)));\n    let elem_fullscreen = document.getElementById('fullscreen');\n    if (elem_fullscreen) {\n      elem_fullscreen.style['font-size'] = `${font_size}px`;\n    }\n  }\n\n  if (do_borders) {\n    // Borders\n    glov_ui.drawRect(camera2d.x0Real(), camera2d.y0Real(), camera2d.x1Real(), 0, Z.BORDERS, border_color);\n    glov_ui.drawRect(camera2d.x0Real(), game_height, camera2d.x1Real(), camera2d.y1Real(), Z.BORDERS, border_color);\n    glov_ui.drawRect(camera2d.x0Real(), 0, 0, game_height, Z.BORDERS, border_color);\n    glov_ui.drawRect(game_width, 0, camera2d.x1Real(), game_height, Z.BORDERS, border_color);\n  }\n\n  if (settings.show_metrics) {\n    perf.draw();\n  }\n\n  for (let ii = 0; ii < app_tick_functions.length; ++ii) {\n    app_tick_functions[ii](dt);\n  }\n  if (app_state) {\n    app_state(dt);\n  }\n\n  glov_particles.tick(dt); // *after* app_tick, so newly added/killed particles can be queued into the draw list\n  glov_transition.render(dt);\n\n  if (had_3d_this_frame) {\n    gl.disable(gl.CULL_FACE);\n  } else {\n    // delayed clear (and general GL init) until after app_state, app might change clear color\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n    gl.enable(gl.BLEND);\n    gl.disable(gl.DEPTH_TEST);\n    gl.depthMask(false);\n    gl.viewport(viewport[0], viewport[1], viewport[2], viewport[3]);\n    // TODO: for do_viewport_post_process, we need to enable gl.scissor to avoid clearing the whole screen!\n    // gl.scissor(0, 0, viewport[2] - viewport[0], viewport[3] - viewport[1]);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  }\n\n  sprites.draw();\n\n  glov_ui.endFrame();\n\n  if (render_width) {\n    let source = captureFramebuffer();\n    let clear_color = [0, 0, 0, 1];\n    let final_viewport = [camera2d.render_offset_x, camera2d.render_offset_y_bottom, camera2d.render_viewport_w, camera2d.render_viewport_h];\n    if (do_viewport_postprocess) {\n      effects.applyPixelyExpand({ source, final_viewport, clear_color });\n    } else {\n      if (clear_color) {\n        gl.clearColor(clear_color[0], clear_color[1], clear_color[2], clear_color[3]);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n      }\n      setViewport(final_viewport);\n      // gl.scissor(0, 0, width, height);\n      effects.applyCopy({ source });\n    }\n  }\n\n  input.endFrame();\n  resetEffects();\n  texturesTick();\n\n  for (let ii = post_tick.length - 1; ii >= 0; --ii) {\n    if (! --post_tick[ii].ticks) {\n      post_tick[ii].fn();\n      ridx(post_tick, ii);\n    }\n  }\n\n  last_tick_cpu = hrnow() - now;\n  fpsgraph.history[fpsgraph.index % PERF_HISTORY_SIZE * 2 + 0] = last_tick_cpu;\n  requestFrame();\n}\n\nlet error_report_details = {};\nlet error_report_details_str = '';\nexport function setErrorReportDetails(key, value) {\n  if (value) {\n    error_report_details[key] = escape(String(value));\n  } else {\n    delete error_report_details[key];\n  }\n  error_report_details_str = `&${Object.keys(error_report_details).map(k => `${k}=${error_report_details[k]}`).join('&')}`;\n}\nsetErrorReportDetails('ver', BUILD_TIMESTAMP);\nlet last_error_time = 0;\nlet crash_idx = 0;\n// Errors from plugins that we don't want to get reported to us, or show the user!\nlet filtered_errors = /avast_submit|vc_request_action/;\nfunction glovErrorReport(msg, file, line, col) {\n  ++crash_idx;\n  let now = Date.now();\n  setTimeout(requestFrame, 1);\n  let dt = now - last_error_time;\n  last_error_time = now;\n  if (dt < 30 * 1000) {\n    // Less than 30 seconds since the last error, either we're erroring every\n    // frame, or this is a secondary error caused by the first, do not report it.\n    // Could maybe hash the error message and just report each message once, and\n    // flag errors as primary or secondary.\n    return false;\n  }\n  if (msg.match(filtered_errors)) {\n    return false;\n  }\n  // Post to an error reporting endpoint that (probably) doesn't exist - it'll get in the logs anyway!\n  let url = urlhash.getURLBase(); // base like http://foo.com/bar/index.html or http://foo.com/bar/\n  let idx = url.lastIndexOf('/'); // Remove anything after the last slash\n  if (idx !== -1 && idx > 8) {\n    // > 'https://'.length\n    url = url.slice(0, idx + 1);\n  }\n  url += `errorReport?cidx=${crash_idx}&file=${escape(file)}&line=${line}&col=${col}&url=${escape(location.href)}` + `&msg=${escape(msg)}${error_report_details_str}`;\n  let xhr = new XMLHttpRequest();\n  xhr.open('POST', url, true);\n  xhr.send(null);\n  return true;\n}\n\nfunction periodiclyRequestFrame() {\n  requestFrame();\n  setTimeout(periodiclyRequestFrame, 5000);\n}\n\nexport function startup(params) {\n  fixNatives(true);\n\n  canvas = document.getElementById('canvas');\n  safearea_elem = document.getElementById('safearea');\n\n  if (params.error_report !== false) {\n    window.glov_error_report = glovErrorReport;\n  }\n\n  safearea_ignore_bottom = params.safearea_ignore_bottom || false;\n\n  // resize the canvas to fill browser window dynamically\n  window.addEventListener('resize', checkResize, false);\n  checkResize();\n\n  let is_pixely = params.pixely && params.pixely !== 'off';\n  antialias = params.antialias || !is_pixely && params.antialias !== false;\n  let powerPreference = params.high ? 'high-performance' : 'default';\n  let context_names = ['webgl2', 'webgl', 'experimental-webgl'];\n  let force_webgl1 = defines.NOWEBGL2;\n  let disable_data = local_storage.getJSON('webgl2_disable');\n  // Check if a previous, recent run had an error that hinted we should disable WebGL2\n  if (disable_data && disable_data.ua === navigator.userAgent && disable_data.ts > Date.now() - 7 * 24 * 60 * 60 * 1000) {\n    console.log('Disabling WebGL2 because a previous run encountered a related error');\n    force_webgl1 = true;\n  }\n  if (DEBUG && !defines.FORCEWEBGL2) {\n    let rc = local_storage.getJSON('run_count', 0) + 1;\n    local_storage.setJSON('run_count', rc);\n    if (rc % 2) {\n      force_webgl1 = true;\n    }\n  }\n  if (force_webgl1) {\n    context_names.splice(0, 1);\n  }\n  let context_opts = [{ antialias, powerPreference }, { powerPreference }, {}];\n  let good = false;\n  webgl2 = false;\n  for (let i = 0; !good && i < context_names.length; i += 1) {\n    for (let jj = 0; !good && jj < context_opts.length; ++jj) {\n      try {\n        window.gl = canvas.getContext(context_names[i], context_opts[jj]);\n        if (window.gl) {\n          if (context_names[i] === 'webgl2') {\n            webgl2 = true;\n          }\n          good = true;\n          break;\n        }\n      } catch (e) {\n        // ignore\n      }\n    }\n  }\n  if (!good) {\n    // eslint-disable-next-line no-alert\n    window.alert('Sorry, but your browser does not support WebGL or does not have it enabled.');\n    document.getElementById('loading').style.visibility = 'hidden';\n    document.getElementById('nowebgl').style.visibility = 'visible';\n    return false;\n  }\n  console.log(`Using WebGL${webgl2 ? 2 : 1}`);\n\n  assert(gl);\n  canvas.focus();\n  width = canvas.width;\n  height = canvas.height;\n  game_width = params.game_width || 1280;\n  game_height = params.game_height || 960;\n  any_3d = params.any_3d || false;\n  ZNEAR = params.znear || 0.7;\n  ZFAR = params.zfar || 10000;\n  if (params.pixely === 'strict') {\n    render_width = game_width;\n    render_height = game_height;\n    if (params.viewport_postprocess) {\n      do_viewport_postprocess = true;\n    }\n  } else {\n    render_width = undefined;\n    render_height = undefined;\n  }\n  pixel_aspect = params.pixel_aspect || 1;\n\n  gl.depthFunc(gl.LEQUAL);\n  // gl.enable(gl.SCISSOR_TEST);\n  if (!any_3d) {\n    gl.disable(gl.CULL_FACE);\n  }\n  gl.cullFace(gl.BACK);\n  gl.clearColor(0, 0.1, 0.2, 1);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1); // Allow RGB texture data with non-mult-4 widths\n\n  textures.startup();\n  geom.startup();\n  shaders.startup({\n    light_diffuse,\n    light_dir_vs,\n    ambient: light_ambient,\n    mat_m: mat_m,\n    mat_mv: mat_mv,\n    mat_vp: mat_vp,\n    mvp: mat_mvp,\n    mv_inv_trans: mat_mv_inv_transform,\n    mat_inv_view: mat_inv_view,\n    view: mat_view,\n    projection: mat_projection,\n    projection_inverse\n  });\n  camera2d.startup();\n  sprites.startup();\n  input.startup(canvas, params);\n  if (any_3d) {\n    models.startup();\n  }\n\n  /* eslint-disable global-require */\n  glov_particles = require('./particles.js').create();\n\n  if (is_pixely) {\n    textures.defaultFilters(gl.NEAREST, gl.NEAREST);\n  } else {\n    textures.defaultFilters(gl.LINEAR_MIPMAP_LINEAR, gl.LINEAR);\n  }\n\n  const font_info_04b03x2 = require('../img/font/04b03_8x2.json');\n  const font_info_04b03x1 = require('../img/font/04b03_8x1.json');\n  if (params.font) {\n    font = glov_font.create(params.font.info, params.font.texture);\n  } else if (params.pixely === 'strict') {\n    font = glov_font.create(font_info_04b03x1, 'font/04b03_8x1');\n  } else if (is_pixely) {\n    font = glov_font.create(font_info_04b03x2, 'font/04b03_8x2');\n  } else {\n    font = glov_font.create(font_info_palanquin32, 'font/palanquin32');\n  }\n  params.font = font;\n  glov_ui.startup(params);\n\n  soundStartup(params.sound);\n  glov_ui.bindSounds(defaults(params.ui_sounds || {}, {\n    button_click: 'button_click',\n    rollover: 'rollover'\n  }));\n\n  camera2d.setAspectFixed(game_width, game_height);\n\n  if (params.state) {\n    setState(params.state);\n  }\n  if (params.do_borders !== undefined) {\n    do_borders = params.do_borders;\n  }\n  if (params.show_fps !== undefined) {\n    settings.show_fps = params.show_fps;\n  }\n\n  periodiclyRequestFrame();\n  return true;\n}\n\nexport function loadsPending() {\n  return textures.load_count + soundLoading() + models.load_count;\n}\n\nfunction loading() {\n  let load_count = loadsPending();\n  let elem_loading_text = document.getElementById('loading_text');\n  if (elem_loading_text) {\n    elem_loading_text.innerText = `Loading (${load_count})...`;\n  }\n  if (!load_count) {\n    is_loading = false;\n    app_state = after_loading_state;\n    // Clear after next frame, so something is rendered to the canvas\n    postTick({\n      ticks: 2,\n      fn: function () {\n        let loading_elem = document.getElementById('loading');\n        if (loading_elem) {\n          loading_elem.style.visibility = 'hidden';\n        }\n      }\n    });\n  }\n}\napp_state = loading;\n\nwindow.glov_engine = exports;","const assert = require('assert');\n\nlet by_ext = {};\nlet by_match = [];\n\n// cb(filename)\nexport function filewatchOn(ext_or_search, cb) {\n  if (ext_or_search[0] === '.') {\n    assert(!by_ext[ext_or_search]);\n    by_ext[ext_or_search] = cb;\n  } else {\n    by_match.push([ext_or_search, cb]);\n  }\n}\n\nlet message_cb;\n// cb(message)\nexport function filewatchMessageHandler(cb) {\n  message_cb = cb;\n}\n\nfunction onFileChange(filename) {\n  console.log(`FileWatch change: ${filename}`);\n  let ext_idx = filename.lastIndexOf('.');\n  let did_reload = false;\n  if (ext_idx !== -1) {\n    let ext = filename.slice(ext_idx);\n    if (by_ext[ext]) {\n      by_ext[ext](filename);\n      did_reload = true;\n    }\n  }\n  for (let ii = 0; ii < by_match.length; ++ii) {\n    if (filename.match(by_match[ii][0])) {\n      by_match[ii][1](filename);\n      did_reload = true;\n    }\n  }\n  if (message_cb && did_reload) {\n    message_cb(`Reloading: ${filename}`);\n  }\n}\n\nexport function filewatchTriggerChange(filename) {\n  onFileChange(filename);\n}\n\nexport function filewatchStartup(client) {\n  client.onMsg('filewatch', onFileChange);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off, complexity:off, no-shadow:off */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst { floor, max, round } = Math;\nconst shaders = require('./shaders.js');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { clamp } = require('../../common/util.js');\nconst { vec4, v4clone, v4scale } = require('./vmath.js');\n\n/*\n\nfont_style = glov_font.style(null, {\n  color: 0xFFFFFFff,\n  outline_width: 0,\n  outline_color: 0x00000000,\n  glow_xoffs: 0,\n  glow_yoffs: 0,\n  glow_inner: 0,\n  glow_outer: 0,\n  glow_color: 0x000000ff,\n});\n\n */\n\n// typedef struct FontCharInfo {\n//   int c;\n//   float x0;\n//   float y0;\n//   int w;\n//   int h;\n//   int imgIdx;\n// } FontCharInfo;\n\n// typedef struct FontInfo {\n//   AS_NAME(CharInfo) FontCharInfo **char_infos;\n//   int font_size;\n//   float x0;\n//   float y0;\n//   int imageW;\n//   int imageH;\n//   int spread;\n// } FontInfo;\n\nexport const COLOR_MODE = {\n  SINGLE: 0,\n  GRADIENT: 1\n};\n\nexport const ALIGN = {\n  HLEFT: 0,\n  HCENTER: 1,\n  HRIGHT: 2,\n  HMASK: 3,\n\n  VTOP: 0 << 2,\n  VCENTER: 1 << 2,\n  VBOTTOM: 2 << 2,\n  VMASK: 3 << 2,\n\n  HFIT: 1 << 4,\n  HWRAP: 1 << 5, // only for glovMarkup*, not drawSizedAligned below, use drawSizedWrapped below instead\n\n  HCENTERFIT: 1 | 1 << 4,\n  HVCENTER: 1 | 1 << 2, // to avoid doing bitwise ops elsewhere\n  HVCENTERFIT: 1 | 1 << 2 | 1 << 4 // to avoid doing bitwise ops elsewhere\n};\n\n// typedef struct GlovFontStyle\n// {\n//   // These members will never be changed (safe to initialize with GlovFontStyle foo = {1.0, 0xfff, etc};\n//   float outline_width;\n//   U32 outline_color;\n//   // Glow: can be used for a dropshadow as well\n//   //   inner can be negative to have the glow be less opaque (can also just change the alpha of the glow color)\n//   //   a glow would be e.g. (0, 0, -1, 5)\n//   //   a dropshadow would be e.g. (3.25, 3.25, -2.5, 5)\n//   float glow_xoffs;\n//   float glow_yoffs;\n//   float glow_inner;\n//   float glow_outer;\n//   U32 glow_color;\n//   U32 color; // upper left, or single color\n//   U32 colorUR; // upper right\n//   U32 colorLR; // lower right\n//   U32 colorLL; // lower left\n//   GlovFontColorMode color_mode;\n// } GlovFontStyle;\n\n/* Default GlovFontStyle:\n  font_style = {\n    outline_width: 0, outline_color: 0x00000000,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: 0x00000000,\n    color: 0xFFFFFFff\n  };\n\n  font_style = {\n    outline_width: 0, outline_color: 0x00000000,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: 0x00000000,\n    // Color gradient: UL, UR, LR, LL\n    color: 0xFFFFFFff, colorUR: 0xFFFFFFff, colorLR: 0x000000ff, colorLL: 0x000000ff,\n    color_mode: glov_font.COLOR_MODE.GRADIENT,\n  };\n*/\n\nfunction GlovFontStyle() {\n  this.color_vec4 = vec4(1, 1, 1, 1); // Matches GlovFontStyle.prototype.color below\n}\nGlovFontStyle.prototype.outline_width = 0;\nGlovFontStyle.prototype.outline_color = 0x00000000;\nGlovFontStyle.prototype.glow_xoffs = 0;\nGlovFontStyle.prototype.glow_yoffs = 0;\nGlovFontStyle.prototype.glow_inner = 0;\nGlovFontStyle.prototype.glow_outer = 0;\nGlovFontStyle.prototype.glow_color = 0x00000000;\nGlovFontStyle.prototype.color = 0xFFFFFFff;\nGlovFontStyle.prototype.colorUR = 0;\nGlovFontStyle.prototype.colorLR = 0;\nGlovFontStyle.prototype.colorLL = 0;\nGlovFontStyle.prototype.color_mode = COLOR_MODE.SINGLE;\n\nexport const font_shaders = {};\n\nexport function intColorFromVec4Color(v) {\n  return (v[0] * 255 | 0) << 24 | (v[1] * 255 | 0) << 16 | (v[2] * 255 | 0) << 8 | (v[3] * 255 | 0);\n}\n\nexport function vec4ColorFromIntColor(v, c) {\n  v[0] = (c >> 24 & 0xFF) / 255;\n  v[1] = (c >> 16 & 0xFF) / 255;\n  v[2] = (c >> 8 & 0xFF) / 255;\n  v[3] = (c & 0xFF) / 255;\n}\n\nexport const glov_font_default_style = new GlovFontStyle();\n\nexport function style(font_style, fields) {\n  let ret = new GlovFontStyle();\n  let { color_vec4 } = ret;\n  if (font_style) {\n    for (let f in font_style) {\n      ret[f] = font_style[f];\n    }\n  }\n  for (let f in fields) {\n    ret[f] = fields[f];\n  }\n  ret.color_vec4 = color_vec4; // Restore\n  vec4ColorFromIntColor(ret.color_vec4, ret.color);\n  return ret;\n}\n\nexport function styleColored(font_style, color) {\n  return style(font_style, {\n    color\n  });\n}\n\nfunction colorAlpha(color, alpha) {\n  alpha = clamp(round((color & 0xFF) * alpha), 0, 255);\n  return color & 0xFFFFFF00 | alpha;\n}\n\nexport function styleAlpha(font_style, alpha) {\n  return style(font_style, {\n    color: colorAlpha((font_style || glov_font_default_style).color, alpha),\n    outline_color: colorAlpha((font_style || glov_font_default_style).outline_color, alpha),\n    glow_color: colorAlpha((font_style || glov_font_default_style).glow_color, alpha)\n  });\n}\n\nlet tech_params = null;\nlet tech_params_dirty = false;\nlet temp_color = null;\n\nfunction createTechniqueParameters() {\n  if (tech_params) {\n    return;\n  }\n\n  tech_params = {\n    param0: vec4(),\n    outlineColor: vec4(),\n    glowColor: vec4(),\n    glowParams: vec4(),\n    tex0: null\n  };\n  if (!temp_color) {\n    temp_color = vec4();\n  }\n}\n\nfunction techParamsSet(param, value) {\n  let tpv = tech_params[param];\n  // not dirty, if anything changes, we need a new object!\n  if (!tech_params_dirty) {\n    if (tpv[0] !== value[0] || tpv[1] !== value[1] || tpv[2] !== value[2] || tpv[3] !== value[3]) {\n      // clone\n      tech_params = {\n        param0: v4clone(tech_params.param0),\n        outlineColor: v4clone(tech_params.outlineColor),\n        glowColor: v4clone(tech_params.glowColor),\n        glowParams: v4clone(tech_params.glowParams)\n      };\n      tech_params_dirty = true;\n      tpv = tech_params[param];\n    } else {\n      // identical, do nothing\n      return;\n    }\n  }\n  if (tech_params_dirty) {\n    // just set\n    tpv[0] = value[0];\n    tpv[1] = value[1];\n    tpv[2] = value[2];\n    tpv[3] = value[3];\n    // return;\n  }\n}\n\nfunction techParamsGet() {\n  tech_params_dirty = false;\n  return tech_params;\n}\n\nfunction GlovFont(font_info, texture_name) {\n  assert(font_info.font_size !== 0); // Got lost somewhere\n\n  this.texture = textures.load({\n    url: `img/${texture_name}.png`,\n    filter_min: font_info.noFilter ? gl.NEAREST : gl.LINEAR,\n    filter_mag: font_info.noFilter ? gl.NEAREST : gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n  this.textures = [this.texture];\n\n  this.font_info = font_info;\n  this.shader = font_shaders.font_aa;\n  this.tex_w = font_info.imageW;\n  this.tex_h = font_info.imageH;\n\n  // Calculate inverse scale\n  for (let ii = 0; ii < font_info.char_infos.length; ++ii) {\n    let char_info = font_info.char_infos[ii];\n    char_info.scale = 1 / (char_info.sc || 1);\n  }\n\n  // build lookup\n  this.char_infos = [];\n  for (let ii = 0; ii < font_info.char_infos.length; ++ii) {\n    let char_info = font_info.char_infos[ii];\n    this.char_infos[font_info.char_infos[ii].c] = char_info;\n    char_info.xpad = char_info.xpad || 0;\n    char_info.yoffs = char_info.yoffs || 0;\n  }\n  this.replacement_character = this.infoFromChar(0xFFFD);\n  if (!this.replacement_character) {\n    this.replacement_character = this.infoFromChar(63); // '?'\n  }\n\n  this.default_style = new GlovFontStyle();\n  this.applied_style = new GlovFontStyle();\n\n  createTechniqueParameters();\n}\n\n// General draw functions return width\n// Pass NULL for style to use default style\n// If the function takes a color, this overrides the color on the style\nGlovFont.prototype.drawSizedColor = function (style, x, y, z, size, color, text) {\n  return this.drawSized(styleColored(style, color), x, y, z, size, text);\n};\nGlovFont.prototype.drawSized = function (style, x, y, z, size, text) {\n  return this.drawScaled(style, x, y, z, size / this.font_info.font_size, size / this.font_info.font_size, text);\n};\n\nGlovFont.prototype.drawSizedAligned = function (style, _x, _y, z, size, align, w, h, text) {\n  let x_size = size;\n  let y_size = size;\n  let width = this.getStringWidth(style, x_size, text);\n  if (align & ALIGN.HFIT && width > w) {\n    let scale = w / width;\n    x_size *= scale;\n    width = w;\n    // Additionally, if we're really squishing things horizontally, shrink the font size\n    // and offset to be centered.\n    if (scale < 0.5) {\n      if ((align & ALIGN.VMASK) !== ALIGN.VCENTER && (align & ALIGN.VMASK) !== ALIGN.VBOTTOM) {\n        // Offset to be roughly centered in the original line bounds\n        _y += (y_size - y_size * scale * 2) / 2;\n      }\n      y_size *= scale * 2;\n    }\n  }\n  let height = y_size;\n  let x;\n  let y;\n  switch (align & ALIGN.HMASK) {\n    case ALIGN.HCENTER:\n      x = _x + (w - width) / 2;\n      if (this.font_info.noFilter) {\n        x |= 0; // ensure integral\n      }\n      break;\n    case ALIGN.HRIGHT:\n      x = _x + w - width;\n      break;\n    case ALIGN.HLEFT:\n      x = _x;\n      break;\n    default:\n      x = _x;\n  }\n  switch (align & ALIGN.VMASK) {\n    case ALIGN.VCENTER:\n      y = _y + (h - height) / 2;\n      if (this.font_info.noFilter) {\n        y |= 0; // ensure integral\n      }\n      break;\n    case ALIGN.VBOTTOM:\n      y = _y + h - height;\n      break;\n    case ALIGN.VTOP:\n      y = _y;\n      break;\n    default:\n      y = _y;\n  }\n\n  return this.drawScaled(style, x, y, z, x_size / this.font_info.font_size, y_size / this.font_info.font_size, text);\n};\n\n// returns height\nGlovFont.prototype.drawSizedColorWrapped = function (style, x, y, z, w, indent, size, color, text) {\n  return this.drawScaledWrapped(styleColored(style, color), x, y, z, w, indent, size / this.font_info.font_size, size / this.font_info.font_size, text);\n};\nGlovFont.prototype.drawSizedWrapped = function (style, x, y, z, w, indent, size, text) {\n  return this.drawScaledWrapped(style, x, y, z, w, indent, size / this.font_info.font_size, size / this.font_info.font_size, text);\n};\n\nGlovFont.prototype.wrapLines = function (w, indent, size, text, word_cb /*(x, int linenum, const char *word)*/) {\n  return this.wrapLinesScaled(w, indent, size / this.font_info.font_size, text, word_cb);\n};\n\nGlovFont.prototype.numLines = function (style, w, indent, size, text) {\n  this.applyStyle(style);\n  let numlines = 0;\n  function wordCallback(ignored, linenum, word) {\n    numlines = max(numlines, linenum);\n  }\n  this.wrapLines(w, indent, size, text, wordCallback);\n  return numlines + 1;\n};\n\nGlovFont.prototype.infoFromChar = function (c) {\n  let ret = this.char_infos[c];\n  if (ret) {\n    return ret;\n  }\n  if (c > 127) {\n    // no char info, and non-ascii, non-control code\n    return this.replacement_character;\n  }\n  return null;\n};\n\nGlovFont.prototype.getCharacterWidth = function (style, x_size, c) {\n  assert.equal(typeof c, 'number');\n  this.applyStyle(style);\n  let char_info = this.infoFromChar(c);\n  let xsc = x_size / this.font_info.font_size;\n  let x_advance = this.calcXAdvance(xsc);\n  if (char_info) {\n    return (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n  }\n  return 0;\n};\n\nGlovFont.prototype.getStringWidth = function (style, x_size, text) {\n  this.applyStyle(style);\n  let ret = 0;\n  let xsc = x_size / this.font_info.font_size;\n  let x_advance = this.calcXAdvance(xsc);\n  for (let ii = 0; ii < text.length; ++ii) {\n    let c = text.charCodeAt(ii);\n    let char_info = this.infoFromChar(c);\n    if (!char_info) {\n      char_info = this.infoFromChar(13);\n    }\n    if (char_info) {\n      ret += (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n    }\n  }\n  return ret;\n};\n\n// word_cb(x, int linenum, const char *word)\nGlovFont.prototype.wrapLinesScaled = function (w, indent, xsc, text, word_cb) {\n  let len = text.length;\n  let s = 0;\n  let word_start = 0;\n  let word_x0 = 0;\n  let x = word_x0;\n  let linenum = 0;\n  let space_info = this.infoFromChar(32); // ' '\n  let space_size = (space_info ? space_info.w + space_info.xpad : this.font_info.font_size) * xsc;\n  let hard_wrap = false;\n  let x_advance = this.calcXAdvance(xsc);\n\n  do {\n    let c = s < len ? text.charCodeAt(s) : 0;\n    let newx = x;\n    let char_w;\n    if (c === 9) {\n      // '\\t') {\n      let tabsize = xsc * this.font_info.font_size * 4;\n      newx = (floor(x / tabsize) + 1) * tabsize;\n      char_w = tabsize;\n    } else {\n      let char_info = this.infoFromChar(c);\n      if (!char_info) {\n        char_info = this.infoFromChar(10);\n      }\n      if (char_info) {\n        char_w = (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n        newx = x + char_w;\n      }\n    }\n    if (newx >= w && hard_wrap) {\n      // flush the word so far!\n      if (word_cb) {\n        word_cb(word_x0, linenum, text.slice(word_start, s));\n      }\n      word_start = s;\n      word_x0 = indent;\n      x = word_x0 + char_w;\n      linenum++;\n    } else {\n      x = newx;\n    }\n    if (!(c === 32 /*' '*/ || c === 0 || c === 10 /*'\\n'*/)) {\n      s++;\n      c = s < len ? text.charCodeAt(s) : 0;\n    }\n    if (c === 32 /*' '*/ || c === 0 || c === 10 /*'\\n'*/) {\n        hard_wrap = false;\n        // draw word until s\n        if (x > w) {\n          // maybe wrap\n          let word_width = x - word_x0;\n          if (word_width > w - indent) {\n            // not going to fit, split it up!\n            hard_wrap = true;\n            // recover and restart at word start\n            s = word_start;\n            x = word_x0;\n            continue;\n          } else {\n            word_x0 = indent;\n            x = word_x0 + word_width;\n            linenum++;\n          }\n        }\n        if (word_cb) {\n          word_cb(word_x0, linenum, text.slice(word_start, s));\n        }\n        word_start = s + 1;\n        if (c === 10 /*'\\n'*/) {\n            x = indent;\n            linenum++;\n          } else {\n          x += space_size;\n        }\n        word_x0 = x;\n        if (c === 32 /*' '*/ || c === 10 /*'\\n'*/) {\n            s++; // advance past space\n          }\n      }\n  } while (s < len);\n  ++linenum;\n  return linenum;\n};\n\nGlovFont.prototype.drawScaledWrapped = function (style, x, y, z, w, indent, xsc, ysc, text) {\n  if (text === null || text === undefined) {\n    text = '(null)';\n  }\n  this.applyStyle(style);\n  this.last_width = 0;\n  let num_lines = this.wrapLinesScaled(w, indent, xsc, text, (xoffs, linenum, word) => {\n    let y2 = y + this.font_info.font_size * ysc * linenum;\n    let x2 = x + xoffs;\n    let word_w = this.drawScaled(style, x2, y2, z, xsc, ysc, word);\n    this.last_width = max(this.last_width, xoffs + word_w);\n  });\n  return num_lines * this.font_info.font_size * ysc;\n};\n\nGlovFont.prototype.calcXAdvance = function (xsc) {\n  // Assume called: applyStyle(style);\n\n  // scale all supplied values by this so that if we swap in a font with twice the resolution (and twice the spread)\n  //   things look almost identical, just crisper\n  let font_texel_scale = this.font_info.font_size / 32;\n  // As a compromise, -2 bias here seems to work well\n  let x_advance = xsc * font_texel_scale * max(this.applied_style.outline_width - 2, 0);\n  // As a compromise, there's a -3 bias in there, so it only kicks in under extreme circumstances\n  x_advance = max(x_advance, xsc * font_texel_scale * max(this.applied_style.glow_outer - this.applied_style.glow_xoffs - 3, 0));\n  return x_advance;\n};\n\n//////////////////////////////////////////////////////////////////////////\n// Main implementation\n\nGlovFont.prototype.drawScaled = function (style, _x, y, z, xsc, ysc, text) {\n  let x = _x;\n  assert(isFinite(x));\n  assert(isFinite(y));\n  assert(isFinite(z));\n  let font_info = this.font_info;\n  // Debug: show expect area of glyphs\n  // require('./ui.js').drawRect(_x, y,\n  //   _x + xsc * font_info.font_size * 20, y + ysc * font_info.font_size,\n  //   1000, [1, 0, 1, 0.5]);\n  y += (font_info.y_offset || 0) * ysc;\n  let texs = this.textures;\n  if (text === null || text === undefined) {\n    text = '(null)';\n  }\n  const len = text.length;\n  if (xsc === 0 || ysc === 0) {\n    return 0;\n  }\n\n  this.applyStyle(style);\n\n  const avg_scale_font = (xsc + ysc) * 0.5;\n  const camera_xscale = camera2d.data[4];\n  const camera_yscale = camera2d.data[5];\n  let avg_scale_combined = (xsc * camera_xscale + ysc * camera_yscale) * 0.5;\n  // avg_scale_combined *= glov_settings.render_scale;\n\n  // scale all supplied values by this so that if we swap in a font with twice the resolution (and twice the spread)\n  //   things look almost identical, just crisper\n  let x_advance = this.calcXAdvance(xsc);\n  let font_texel_scale = font_info.font_size / 32;\n  let tile_state = 0;\n\n  let applied_style = this.applied_style;\n\n  // Calculate anti-aliasing values\n  let delta_per_source_pixel = 0.5 / font_info.spread;\n  let delta_per_dest_pixel = delta_per_source_pixel / avg_scale_combined;\n  let value = vec4(1 / delta_per_dest_pixel, // AA Mult and Outline Mult\n  -0.5 / delta_per_dest_pixel + 0.5, // AA Add\n  // Outline Add\n  -0.5 / delta_per_dest_pixel + 0.5 + applied_style.outline_width * font_texel_scale * avg_scale_combined, 0 // Unused\n  );\n  if (value[2] > 0) {\n    value[2] = 0;\n  }\n  let padding1 = max(0, applied_style.outline_width * font_texel_scale * avg_scale_font);\n  let padding4 = vec4();\n  const outer_scaled = applied_style.glow_outer * font_texel_scale;\n  padding4[0] = max(outer_scaled * xsc - applied_style.glow_xoffs * font_texel_scale * xsc, padding1);\n  padding4[2] = max(outer_scaled * xsc + applied_style.glow_xoffs * font_texel_scale * xsc, padding1);\n  padding4[1] = max(outer_scaled * ysc - applied_style.glow_yoffs * font_texel_scale * ysc, padding1);\n  padding4[3] = max(outer_scaled * ysc + applied_style.glow_yoffs * font_texel_scale * ysc, padding1);\n\n  techParamsSet('param0', value);\n  let value2 = vec4(0, // filled later\n  0, // filled later\n  // Glow mult\n  1 / ((applied_style.glow_outer - applied_style.glow_inner) * delta_per_source_pixel * font_texel_scale), -(0.5 - applied_style.glow_outer * delta_per_source_pixel * font_texel_scale) / ((applied_style.glow_outer - applied_style.glow_inner) * delta_per_source_pixel * font_texel_scale));\n  if (value2[3] > 0) {\n    value2[3] = 0;\n  }\n\n  let padding_in_font_space = vec4();\n  v4scale(padding_in_font_space, padding4, 1 / avg_scale_font);\n  for (let ii = 0; ii < 4; ++ii) {\n    if (padding_in_font_space[ii] > font_info.spread) {\n      // Not enough buffer\n      let sc = font_info.spread / padding_in_font_space[ii];\n      padding4[ii] *= sc;\n      padding_in_font_space[ii] *= sc;\n    }\n  }\n\n  // Choose appropriate z advance so that character are drawn left to right (or RTL if the glow is on the other side)\n  const z_advance = applied_style.glow_xoffs < 0 ? -0.0001 : 0.0001;\n\n  // For non-1:1 aspect ration rendering, need to scale our coordinates' padding differently in each axis\n  let rel_x_scale = xsc / avg_scale_font;\n  let rel_y_scale = ysc / avg_scale_font;\n\n  for (let i = 0; i < len; i++) {\n    const c = text.charCodeAt(i);\n    if (c === 9) {\n      // '\\t'.charCodeAt(0)) {\n      let tabsize = xsc * font_info.font_size * 4;\n      x = (((x - _x) / tabsize | 0) + 1) * tabsize + _x;\n    } else {\n      let char_info = this.infoFromChar(c);\n      if (!char_info) {\n        char_info = this.infoFromChar(13);\n      }\n      if (char_info) {\n        let char_scale = char_info.scale;\n        let xsc2 = xsc * char_scale;\n        if (char_info.w) {\n          let ysc2 = ysc * char_scale;\n          let pad_scale = 1 / char_scale;\n          let tile_width = this.tex_w;\n          let tile_height = this.tex_h;\n          // Lazy update params here\n          if (char_scale !== tile_state) {\n            value2[0] = -applied_style.glow_xoffs * font_texel_scale * pad_scale / tile_width;\n            value2[1] = -applied_style.glow_yoffs * font_texel_scale * pad_scale / tile_height;\n            techParamsSet('glowParams', value2);\n          }\n\n          let u0 = (char_info.x0 - padding_in_font_space[0] * pad_scale) / tile_width;\n          let u1 = (char_info.x0 + char_info.w + padding_in_font_space[2] * pad_scale) / tile_width;\n          let v0 = (char_info.y0 - padding_in_font_space[1] * pad_scale) / tile_height;\n          let v1 = (char_info.y0 + char_info.h + padding_in_font_space[3] * pad_scale) / tile_height;\n\n          let w = char_info.w * xsc2 + (padding4[0] + padding4[2]) * rel_x_scale;\n          let h = char_info.h * ysc2 + (padding4[1] + padding4[3]) * rel_y_scale;\n\n          sprites.queueraw(texs, x - rel_x_scale * padding4[0], y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2, z + z_advance * i, w, h, u0, v0, u1, v1, applied_style.color_vec4, this.shader, techParamsGet());\n\n          // require('./ui.js').drawRect(x - rel_x_scale * padding4[0],\n          //   y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2,\n          //   w + x - rel_x_scale * padding4[0],\n          //   h + y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2,\n          //   1000, [i & 1, (i & 2)>>1, (i & 4)>>2, 0.5]);\n        }\n\n        x += (char_info.w + char_info.xpad) * xsc2 + x_advance;\n      }\n    }\n  }\n  return x - _x;\n};\n\nGlovFont.prototype.determineShader = function () {\n  let outline = this.applied_style.outline_width && this.applied_style.outline_color & 0xff;\n  let glow = this.applied_style.glow_outer > 0 && this.applied_style.glow_color & 0xff;\n  if (outline) {\n    if (glow) {\n      this.shader = font_shaders.font_aa_outline_glow;\n    } else {\n      this.shader = font_shaders.font_aa_outline;\n    }\n  } else if (glow) {\n    this.shader = font_shaders.font_aa_glow;\n  } else {\n    this.shader = font_shaders.font_aa;\n  }\n};\n\nGlovFont.prototype.applyStyle = function (style) {\n  if (!style) {\n    style = this.default_style;\n  }\n  // outline\n  vec4ColorFromIntColor(temp_color, style.outline_color);\n  techParamsSet('outlineColor', temp_color);\n\n  // glow\n  vec4ColorFromIntColor(temp_color, style.glow_color);\n  techParamsSet('glowColor', temp_color);\n\n  // everything else\n  this.applied_style.outline_width = style.outline_width;\n  this.applied_style.outline_color = style.outline_color;\n  this.applied_style.glow_xoffs = style.glow_xoffs;\n  this.applied_style.glow_yoffs = style.glow_yoffs;\n  this.applied_style.glow_inner = style.glow_inner;\n  this.applied_style.glow_outer = style.glow_outer;\n  this.applied_style.glow_color = style.glow_color;\n  this.applied_style.color = style.color;\n  this.applied_style.color_vec4 = style.color_vec4;\n  this.applied_style.colorUR = style.colorUR;\n  this.applied_style.colorLR = style.colorLR;\n  this.applied_style.colorLL = style.colorLL;\n  this.applied_style.color_mode = style.color_mode;\n\n  if (this.applied_style.color_mode === COLOR_MODE.SINGLE) {\n    this.applied_style.colorUR = this.applied_style.colorLL = this.applied_style.colorLR = this.applied_style.color;\n  }\n\n  this.determineShader();\n};\n\n// Replicate constants and utility functions on all font instances as well\nGlovFont.prototype.COLOR_MODE = COLOR_MODE;\nGlovFont.prototype.ALIGN = ALIGN;\nGlovFont.prototype.style = style;\nGlovFont.prototype.styleAlpha = styleAlpha;\nGlovFont.prototype.styleColored = styleColored;\n\nfunction fontShadersInit() {\n  if (font_shaders.font_aa) {\n    return;\n  }\n  font_shaders.font_aa = shaders.create('glov/shaders/font_aa.fp');\n  font_shaders.font_aa_glow = shaders.create('glov/shaders/font_aa_glow.fp');\n  font_shaders.font_aa_outline = shaders.create('glov/shaders/font_aa_outline.fp');\n  font_shaders.font_aa_outline_glow = shaders.create('glov/shaders/font_aa_outline_glow.fp');\n}\n\nexport function create(...args) {\n  fontShadersInit();\n  return new GlovFont(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off */\n\nconst assert = require('assert');\nconst engine = require('./engine.js');\nconst { ceil, max, min } = Math;\n\nexport const TRIANGLES = 4;\nexport const TRIANGLE_FAN = 6;\nexport const QUADS = 7;\n\nconst gl_byte_size = {\n  0x1400: 1, // GL_BYTE\n  0x1401: 1, // GL_UNSIGNED_BYTE\n  0x1402: 2, // GL_SHORT\n  0x1403: 2, // GL_UNSIGNED_SHORT\n  0x1406: 4 // GL_FLOAT\n};\n\n// let unit_buf;\n// let unit_buf_len = 0;\n\nlet bound_geom;\n\nlet bound_array_buf = null;\nlet bound_index_buf = null;\n\nlet quad_index_buf;\nlet quad_index_buf_len = 0;\n\nfunction deleteBuffer(handle) {\n  if (!handle) {\n    return;\n  }\n  if (bound_array_buf === handle) {\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    bound_array_buf = null;\n  }\n  if (bound_index_buf === handle) {\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    bound_index_buf = null;\n  }\n  gl.deleteBuffer(handle);\n}\n\nlet attrib_enabled = 0;\nfunction enableVertexAttribArray(bits) {\n  if (bits === attrib_enabled) {\n    return;\n  }\n  let disable_mask = attrib_enabled & ~bits;\n  let enable_mask = ~attrib_enabled & bits;\n  attrib_enabled = bits;\n\n  if (disable_mask) {\n    let n = 0;\n    do {\n      if (disable_mask & 1) {\n        gl.disableVertexAttribArray(n);\n      }\n      n++;\n      disable_mask >>= 1;\n    } while (disable_mask);\n  }\n\n  if (enable_mask) {\n    let n = 0;\n    do {\n      if (enable_mask & 1) {\n        gl.enableVertexAttribArray(n);\n      }\n      n++;\n      enable_mask >>= 1;\n    } while (enable_mask);\n  }\n}\n\n// function bindUnitBuf(arr_idx, len) {\n//   if (len > unit_buf_len) {\n//     deleteBuffer(unit_buf);\n//     unit_buf = gl.createBuffer();\n//     unit_buf_len = max(ceil(unit_buf_len * 1.5), len);\n//     gl.bindBuffer(gl.ARRAY_BUFFER, unit_buf);\n//     bound_array_buf = unit_buf;\n//     let arr = new Uint8Array(unit_buf_len * 4);\n//     for (let ii = 0; ii < unit_buf_len * 4; ++ii) {\n//       arr[ii] = 255;\n//     }\n//     gl.bufferData(gl.ARRAY_BUFFER, arr, gl.STATIC_DRAW);\n//   } else {\n//     if (bound_array_buf !== unit_buf) {\n//       gl.bindBuffer(gl.ARRAY_BUFFER, unit_buf);\n//       bound_array_buf = unit_buf;\n//     }\n//   }\n//   gl.vertexAttribPointer(arr_idx, 4, gl.UNSIGNED_BYTE, true, 0, 0);\n// }\n\n// Verts should be ordered counter-clockwise from the upper left\nfunction getQuadIndexBuf(quad_count) {\n  assert(quad_count <= 16384);\n  // If not, need to split into multiple vertex and index buffers (fairly easy),\n  //   or use the OES_element_index_uint extension (trivial, but probably slower, maybe not supported on mobile?)\n  if (quad_count * 6 > quad_index_buf_len) {\n    if (!quad_index_buf) {\n      quad_index_buf = gl.createBuffer();\n    } else {\n      // freeing old one\n      engine.perf_state.gpu_mem.geom -= quad_index_buf_len * 2;\n    }\n    quad_index_buf_len = max(ceil(quad_index_buf_len * 1.5), quad_count * 6);\n    if (bound_index_buf !== quad_index_buf) {\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, quad_index_buf);\n      bound_index_buf = quad_index_buf;\n    }\n    let arr = new Uint16Array(quad_index_buf_len);\n    let vidx = 0;\n    for (let ii = 0; ii < quad_index_buf_len;) {\n      arr[ii++] = vidx + 1;\n      arr[ii++] = vidx + 3;\n      arr[ii++] = vidx++; // 0\n      arr[ii++] = vidx++; // 1\n      arr[ii++] = vidx++; // 2\n      arr[ii++] = vidx++; // 3\n    }\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, arr, gl.STATIC_DRAW);\n    engine.perf_state.gpu_mem.geom += quad_index_buf_len * 2;\n  }\n  return quad_index_buf;\n}\n\nexport function createIndices(idxs) {\n  let ret = {\n    ibo: gl.createBuffer(),\n    ibo_size: idxs.length\n  };\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ret.ibo);\n  bound_index_buf = ret.ibo;\n  gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, idxs, gl.STATIC_DRAW);\n  engine.perf_state.gpu_mem.geom += idxs.length * 2;\n  return ret;\n}\n\nfunction formatInfo(format) {\n  if (!format.info) {\n    let stride = 0;\n    let elem_count = 0;\n    let used_attribs = 0;\n    let common_byte_size = 0;\n    for (let ii = 0; ii < format.length; ++ii) {\n      let fmt = format[ii];\n      let sem = fmt[0];\n      let gltype = fmt[1];\n      let count = fmt[2];\n      used_attribs |= 1 << sem;\n      let byte_size = gl_byte_size[gltype];\n      assert(byte_size);\n      assert(!common_byte_size || byte_size === common_byte_size);\n      common_byte_size = byte_size;\n      fmt[3] = fmt[3] || false;\n      fmt[4] = byte_size;\n      stride += count * byte_size;\n      elem_count += count;\n    }\n    format.info = {\n      stride, elem_count, used_attribs, common_byte_size\n    };\n  }\n  return format.info;\n}\n\n// format is [shaders.semantic.foo, gl.FLOAT/UNSIGNED_BYTE/etc, count, normalized]\nfunction Geom(format, verts, idxs, mode) {\n  this.mode = mode || TRIANGLES;\n  this.format = format;\n  let info = this.format_info = formatInfo(format);\n  this.stride = info.stride;\n  this.used_attribs = info.used_attribs;\n\n  this.vert_count = verts.length / this.format_info.elem_count;\n  this.vert_gpu_mem = verts.length * this.format_info.common_byte_size;\n  if (verts.length) {\n    this.vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n    gl.bufferData(gl.ARRAY_BUFFER, verts, gl.STATIC_DRAW);\n    engine.perf_state.gpu_mem.geom += this.vert_gpu_mem;\n  }\n  this.orig_mode = mode;\n  if (idxs) {\n    if (idxs.ibo) {\n      this.ibo = idxs.ibo;\n      this.ibo_owned = false;\n      this.ibo_size = idxs.ibo_size;\n    } else {\n      this.ibo = gl.createBuffer();\n      this.ibo_owned = true;\n      this.ibo_size = idxs.length;\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibo);\n      bound_index_buf = this.ibo;\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, idxs, gl.STATIC_DRAW);\n      engine.perf_state.gpu_mem.geom += idxs.length * 2;\n    }\n  } else if (mode === QUADS) {\n    assert.equal(this.vert_count % 4, 0);\n    let quad_count = this.vert_count / 4;\n    // PERFTODO: Use GL_QUADS_OES extension\n    this.ibo = getQuadIndexBuf(quad_count);\n    this.ibo_owned = false;\n    this.ibo_size = quad_count * 6;\n    this.mode = TRIANGLES;\n  } else if (mode === TRIANGLE_FAN) {\n    this.mode = TRIANGLE_FAN;\n  } else {\n    this.ibo = null;\n    this.ibo_owned = false;\n  }\n}\n\nGeom.prototype.updateSub = function (offset, verts) {\n  if (bound_array_buf !== this.vbo) {\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n  }\n  gl.bufferSubData(gl.ARRAY_BUFFER, offset, verts);\n};\n\nGeom.prototype.update = function (verts, num_verts) {\n  assert.equal(this.ibo_owned, false);\n  if (num_verts > this.vert_count) {\n    if (bound_geom === this) {\n      bound_geom = null;\n    }\n    engine.perf_state.gpu_mem.geom -= this.vert_gpu_mem;\n    deleteBuffer(this.vbo);\n    // Note: matching size, ignoring num_verts\n    this.vert_count = verts.length / this.format_info.elem_count;\n    this.vert_gpu_mem = verts.length * this.format_info.common_byte_size;\n    this.vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n    gl.bufferData(gl.ARRAY_BUFFER, verts, gl.DYNAMIC_DRAW);\n    engine.perf_state.gpu_mem.geom += this.vert_gpu_mem;\n  } else {\n    // Fits\n    if (bound_array_buf !== this.vbo) {\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n      bound_array_buf = this.vbo;\n    }\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, verts.subarray(0, num_verts * this.format_info.elem_count));\n    // gl.bufferData(gl.ARRAY_BUFFER, verts, gl.DYNAMIC_DRAW);\n  }\n  if (this.orig_mode === QUADS) {\n    let quad_count = num_verts / 4;\n    this.ibo = getQuadIndexBuf(quad_count);\n    this.ibo_size = quad_count * 6;\n  }\n};\n\nGeom.prototype.dispose = function () {\n  if (this.ibo_owned) {\n    deleteBuffer(this.ibo);\n  }\n  this.ibo = null;\n  deleteBuffer(this.vbo);\n  this.vbo = null;\n  engine.perf_state.gpu_mem.geom -= this.vert_gpu_mem;\n  this.vert_gpu_mem = 0;\n};\n\nlet bound_attribs = function () {\n  let r = [];\n  for (let ii = 0; ii < 16; ++ii) {\n    r.push({\n      vbo: null,\n      offset: 0\n    });\n  }\n  return r;\n}();\nGeom.prototype.bind = function () {\n  if (bound_geom !== this) {\n    bound_geom = this;\n    let vbo = this.vbo;\n\n    let offset = 0;\n    for (let ii = 0; ii < this.format.length; ++ii) {\n      let fmt = this.format[ii];\n      let count = fmt[2];\n      let byte_size = fmt[4];\n      if (bound_attribs[ii].vbo === vbo) {//  && bound_attribs[ii].offset = offset\n        // already bound\n      } else {\n        if (bound_array_buf !== vbo) {\n          gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n          bound_array_buf = vbo;\n        }\n        let sem = fmt[0];\n        let gltype = fmt[1];\n        let normalized = fmt[3];\n        gl.vertexAttribPointer(sem, count, gltype, normalized, this.stride, offset);\n        bound_attribs[ii].vbo = bound_array_buf;\n        // bound_attribs[ii].offset = offset;\n      }\n      offset += count * byte_size;\n    }\n    // if (!used[1]) { // COLOR\n    //   used_attribs |= 1 << shader.semantics.COLOR;\n    //   bindUnitBuf(1, this.vert_count);\n    // }\n    enableVertexAttribArray(this.used_attribs);\n  }\n\n  if (this.ibo && bound_index_buf !== this.ibo) {\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibo);\n    bound_index_buf = this.ibo;\n  }\n};\nGeom.prototype.draw = function () {\n  this.bind();\n  if (this.ibo) {\n    gl.drawElements(this.mode, this.ibo_size, gl.UNSIGNED_SHORT, 0);\n  } else {\n    gl.drawArrays(this.mode, 0, this.vert_count);\n  }\n};\n\nfunction GeomMultiQuads(format, verts) {\n  let format_info = formatInfo(format);\n  let ec = format_info.elem_count;\n  let vert_count = verts.length / ec;\n  this.geoms = [];\n  for (let idx = 0; idx < vert_count; idx += 65536) {\n    let num_sub_verts = min(vert_count - idx, 65536);\n    let sub_data = new Uint8Array(verts.buffer, idx * ec, num_sub_verts * ec);\n    this.geoms.push(new Geom(format, sub_data, null, QUADS));\n  }\n}\nGeomMultiQuads.prototype.draw = function () {\n  for (let ii = 0; ii < this.geoms.length; ++ii) {\n    this.geoms[ii].draw();\n  }\n};\nGeomMultiQuads.prototype.dispose = function () {\n  for (let ii = 0; ii < this.geoms.length; ++ii) {\n    this.geoms[ii].dispose();\n  }\n  this.geoms = null;\n};\n\nexport function create(...args) {\n  return new Geom(...args);\n}\n\nexport function createQuads(format, verts) {\n  let format_info = formatInfo(format);\n  assert(verts instanceof Uint8Array); // only one handled by GeomMultiQuads for now\n  let vert_count = verts.length / format_info.elem_count;\n  if (vert_count > 65536) {\n    return new GeomMultiQuads(format, verts);\n  }\n  return new Geom(format, verts, null, QUADS);\n}\n\nexport function startup() {\n  // Nothing for now.\n}","/* eslint no-bitwise:off */\n// From https://stackoverflow.com/questions/8936984/uint8array-to-string-in-javascript\n\nlet charCache = new Array(128); // Preallocate the cache for the common single byte chars\nlet charFromCodePt = String.fromCodePoint || String.fromCharCode;\nlet result = [];\nexport function decode(array) {\n  let codePt;\n  let byte1;\n  let buffLen = array.length;\n\n  result.length = 0;\n\n  for (let i = 0; i < buffLen;) {\n    byte1 = array[i++];\n\n    if (byte1 <= 0x7F) {\n      codePt = byte1;\n    } else if (byte1 <= 0xDF) {\n      codePt = (byte1 & 0x1F) << 6 | array[i++] & 0x3F;\n    } else if (byte1 <= 0xEF) {\n      codePt = (byte1 & 0x0F) << 12 | (array[i++] & 0x3F) << 6 | array[i++] & 0x3F;\n    } else if (String.fromCodePoint) {\n      codePt = (byte1 & 0x07) << 18 | (array[i++] & 0x3F) << 12 | (array[i++] & 0x3F) << 6 | array[i++] & 0x3F;\n    } else {\n      codePt = 63; // Cannot convert four byte code points, so use \"?\" instead\n      i += 3;\n    }\n\n    result.push(charCache[codePt] || (charCache[codePt] = charFromCodePt(codePt)));\n  }\n\n  return result.join('');\n}","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n\nconst TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\n\nexport function getAccessorTypeFromSize(size) {\n  const type = TYPES[size - 1];\n  return type || TYPES[0];\n}\n\n// glTF ACCESSOR CONSTANTS\n\nexport const ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n/* eslint-env browser */\n\nconst assert = require('assert');\n\n/* eslint-disable camelcase, max-statements */\nconst { unpackGLBBuffers } = require('./unpack-glb-buffers.js');\nconst { unpackBinaryJson } = require('./unpack-binary-json.js');\n\nfunction padTo4Bytes(byteLength) {\n  return byteLength + 3 & ~3; //eslint-disable-line no-bitwise\n}\n\nconst decode_utf8 = require('./decode-utf8.js');\n\nconst {\n  ATTRIBUTE_TYPE_TO_COMPONENTS,\n  ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE,\n  ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY\n} = require('./gltf-type-utils.js');\n\nconst MAGIC_glTF = 0x676c5446; // glTF in Big-Endian ASCII\n\nconst GLB_FILE_HEADER_SIZE = 12;\nconst GLB_CHUNK_HEADER_SIZE = 8;\n\nconst GLB_CHUNK_TYPE_JSON = 0x4e4f534a;\nconst GLB_CHUNK_TYPE_BIN = 0x004e4942;\n\nconst LE = true; // Binary GLTF is little endian.\nconst BE = false; // Magic needs to be written as BE\n\n// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#glb-file-format-specification\nfunction GLBParser() {\n  // Result\n  this.binaryByteOffset = null;\n  this.packedJson = null;\n  this.json = null;\n}\n\nfunction parseBinary(self) {\n  // GLB Header\n  const dataView = new DataView(self.glbArrayBuffer);\n  const magic1 = dataView.getUint32(0, BE); // Magic number (the ASCII string 'glTF').\n  const version = dataView.getUint32(4, LE); // Version 2 of binary glTF container format\n  const fileLength = dataView.getUint32(8, LE); // Total byte length of generated file\n\n  let valid = magic1 === MAGIC_glTF;\n  if (!valid) {\n    console.warn('Invalid GLB magic string');\n  }\n\n  assert(version === 2, `Invalid GLB version ${version}. Only .glb v2 supported`);\n  assert(fileLength > 20);\n\n  // Write the JSON chunk\n  const jsonChunkLength = dataView.getUint32(12, LE); // Byte length of json chunk\n  const jsonChunkFormat = dataView.getUint32(16, LE); // Chunk format as uint32\n\n  valid = jsonChunkFormat === GLB_CHUNK_TYPE_JSON || jsonChunkFormat === 0; // Back compat\n  assert(valid, `JSON chunk format ${jsonChunkFormat}`);\n\n  // Create a \"view\" of the binary encoded JSON data\n  const jsonChunkOffset = GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE; // First headers: 20 bytes\n  const jsonChunk = new Uint8Array(self.glbArrayBuffer, jsonChunkOffset, jsonChunkLength);\n\n  // Decode the JSON binary array into clear text\n  const jsonText = decode_utf8.decode(jsonChunk);\n\n  // Parse the JSON text into a JavaScript data structure\n  self.json = JSON.parse(jsonText);\n\n  // TODO - BIN chunk can be optional\n  const binaryChunkStart = jsonChunkOffset + padTo4Bytes(jsonChunkLength);\n  self.binaryByteOffset = binaryChunkStart + GLB_CHUNK_HEADER_SIZE;\n\n  const binChunkFormat = dataView.getUint32(binaryChunkStart + 4, LE); // Chunk format as uint32\n  valid = binChunkFormat === GLB_CHUNK_TYPE_BIN || binChunkFormat === 1; // Back compat\n  assert(valid, `BIN chunk format ${binChunkFormat}`);\n\n  return {\n    arrayBuffer: self.glbArrayBuffer,\n    binaryByteOffset: self.binaryByteOffset,\n    json: self.json\n  };\n}\n\nfunction parseInternal(self) {\n  const result = parseBinary(self);\n  self.packedJson = result.json;\n  self.unpackedBuffers = unpackGLBBuffers(self.glbArrayBuffer, self.json, self.binaryByteOffset);\n  self.json = unpackBinaryJson(self.json, self.unpackedBuffers);\n}\n\nGLBParser.prototype.parseSync = function (arrayBuffer) {\n  // Input\n  this.glbArrayBuffer = arrayBuffer;\n\n  // Only parse once\n  if (this.json === null && this.binaryByteOffset === null) {\n    parseInternal(this);\n  }\n  return this;\n};\n\n// Return the gltf JSON and the original arrayBuffer\nGLBParser.prototype.parse = function (arrayBuffer) {\n  return this.parseSync(arrayBuffer);\n};\n\n// Returns application JSON data stored in `key`\nGLBParser.prototype.getApplicationData = function (key) {\n  return this.json[key];\n};\n\n// Returns JSON envelope\nGLBParser.prototype.getJSON = function () {\n  return this.json;\n};\n\n// Return binary chunk\nGLBParser.prototype.getArrayBuffer = function () {\n  return this.glbArrayBuffer;\n};\n\n// Return index into binary chunk\nGLBParser.prototype.getBinaryByteOffset = function () {\n  return this.binaryByteOffset;\n};\n\n// Unpacks a bufferview into a new Uint8Array that is a view into the binary chunk\nGLBParser.prototype.getBufferView = function (glTFBufferView) {\n  const byteOffset = (glTFBufferView.byteOffset || 0) + this.binaryByteOffset;\n  return new Uint8Array(this.glbArrayBuffer, byteOffset, glTFBufferView.byteLength);\n};\n\n// Unpacks a glTF accessor into a new typed array that is a view into the binary chunk\nGLBParser.prototype.getBuffer = function (glTFAccessor) {\n  // Decode the glTF accessor format\n  const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[glTFAccessor.componentType];\n  const components = ATTRIBUTE_TYPE_TO_COMPONENTS[glTFAccessor.type];\n  const bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[glTFAccessor.componentType];\n  const length = glTFAccessor.count * components;\n  const byteLength = glTFAccessor.count * components * bytesPerComponent;\n\n  // Get the boundaries of the binary sub-chunk for this bufferView\n  const glTFBufferView = this.json.bufferViews[glTFAccessor.bufferView];\n  assert(byteLength >= 0 && glTFAccessor.byteOffset + byteLength <= glTFBufferView.byteLength);\n\n  const byteOffset = glTFBufferView.byteOffset + this.binaryByteOffset + glTFAccessor.byteOffset;\n  return new ArrayType(this.glbArrayBuffer, byteOffset, length);\n};\n\n// Unpacks an image into an HTML image\nGLBParser.prototype.getImageData = function (glTFImage) {\n  return {\n    typedArray: this.getBufferView(glTFImage.bufferView),\n    mimeType: glTFImage.mimeType || 'image/jpeg'\n  };\n};\n\nGLBParser.prototype.getImage = function (glTFImage) {\n  const arrayBufferView = this.getBufferView(glTFImage.bufferView);\n  const mimeType = glTFImage.mimeType || 'image/jpeg';\n  const blob = new Blob([arrayBufferView], { type: mimeType });\n  const urlCreator = window.URL || window.webkitURL;\n  const imageUrl = urlCreator.createObjectURL(blob);\n  const img = new Image();\n  img.src = imageUrl;\n  return img;\n};\n\n// GLBParser.prototype.getImageAsync = function (glTFImage) {\n//   return new Promise(resolve => {\n//     const arrayBufferView = this.getBufferView(glTFImage.bufferView);\n//     const mimeType = glTFImage.mimeType || 'image/jpeg';\n//     const blob = new Blob([arrayBufferView], {type: mimeType});\n//     const urlCreator = window.URL || window.webkitURL;\n//     const imageUrl = urlCreator.createObjectURL(blob);\n//     const img = new Image();\n//     img.onload = () => resolve(img);\n//     img.src = imageUrl;\n//   });\n// };\n\nmodule.exports = GLBParser;\nGLBParser.parse = function (data) {\n  let parser = new GLBParser();\n  return parser.parse(data);\n};","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n\nfunction parseJSONPointer(value) {\n  if (typeof value === 'string') {\n    // Remove escape character\n    if (value.indexOf('##/') === 0) {\n      return value.slice(1);\n    }\n\n    let matches = value.match(/#\\/([a-z]+)\\/([0-9]+)/);\n    if (matches) {\n      const index = parseInt(matches[2], 10);\n      return [matches[1], index];\n    }\n\n    // Legacy: `$$$i`\n    matches = value.match(/\\$\\$\\$([0-9]+)/);\n    if (matches) {\n      const index = parseInt(matches[1], 10);\n      return ['accessors', index];\n    }\n  }\n\n  return null;\n}\n\nfunction decodeJSONPointer(object, buffers) {\n  const pointer = parseJSONPointer(object);\n  if (pointer) {\n    const field = pointer[0];\n    const index = pointer[1];\n    const buffer = buffers[field] && buffers[field][index];\n    if (buffer) {\n      return buffer;\n    }\n    console.error(`Invalid JSON pointer ${object}: #/${field}/${index}`);\n  }\n  return null;\n}\n\n// Recursively unpacks objects, replacing \"JSON pointers\" with typed arrays\nfunction unpackJsonArraysRecursive(json, topJson, buffers, options = {}) {\n  const object = json;\n\n  const buffer = decodeJSONPointer(object, buffers);\n  if (buffer) {\n    return buffer;\n  }\n\n  // Copy array\n  if (Array.isArray(object)) {\n    return object.map(element => unpackJsonArraysRecursive(element, topJson, buffers, options));\n  }\n\n  // Copy object\n  if (object !== null && typeof object === 'object') {\n    const newObject = {};\n    for (const key in object) {\n      newObject[key] = unpackJsonArraysRecursive(object[key], topJson, buffers, options);\n    }\n    return newObject;\n  }\n\n  return object;\n}\n\nexport function unpackBinaryJson(json, buffers, options = {}) {\n  return unpackJsonArraysRecursive(json, json, buffers, options);\n}","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n\nconst assert = require('assert');\n\nconst {\n  ATTRIBUTE_TYPE_TO_COMPONENTS,\n  ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE,\n  ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY\n} = require('./gltf-type-utils.js');\n\n// Creates a new ArrayBuffer starting at the offset, containing all remaining bytes\n// TODO - should not be needed, see above\nfunction getArrayBufferAtOffset(arrayBuffer, byteOffset) {\n  const length = arrayBuffer.byteLength - byteOffset;\n  const binaryBuffer = new ArrayBuffer(length);\n  const sourceArray = new Uint8Array(arrayBuffer);\n  const binaryArray = new Uint8Array(binaryBuffer);\n  for (let i = 0; i < length; i++) {\n    binaryArray[i] = sourceArray[byteOffset + i];\n  }\n  return binaryBuffer;\n}\n\nfunction getArrayTypeAndLength(accessor, bufferView) {\n  const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  const components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  const bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  const length = accessor.count * components;\n  const byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return { ArrayType, length, byteLength };\n}\n\nfunction unpackAccessors(arrayBuffer, bufferViews, json) {\n  // unpack accessors\n  const accessors = json.accessors || [];\n\n  const accessorBuffers = [];\n\n  for (let i = 0; i < accessors.length; ++i) {\n    const accessor = accessors[i];\n    assert(accessor);\n\n    const bufferView = bufferViews[accessor.bufferView];\n    // Draco encoded meshes don't have bufferView in accessor\n    if (bufferView) {\n      // Create a new typed array as a view into the combined buffer\n      const { ArrayType, length } = getArrayTypeAndLength(accessor, bufferView);\n      const array = new ArrayType(arrayBuffer, bufferView.byteOffset, length);\n      // Store the metadata on the array (e.g. needed to determine number of components per element)\n      array.accessor = accessor;\n      accessorBuffers.push(array);\n    }\n  }\n\n  return accessorBuffers;\n}\n\nfunction unpackImages(arrayBuffer, bufferViews, json) {\n  // unpack images\n  const images = json.images || [];\n\n  const imageBuffers = [];\n\n  for (let i = 0; i < images.length; ++i) {\n    const image = images[i];\n    assert(image);\n\n    if (image.bufferView === undefined) {\n      imageBuffers.push(null);\n      continue;\n    }\n\n    const bufferView = bufferViews[image.bufferView];\n    assert(bufferView);\n\n    // Create a new typed array as a view into the combined buffer\n    const array = new Uint8Array(arrayBuffer, bufferView.byteOffset, bufferView.byteLength);\n    // Store the metadata on the array (e.g. needed to determine number of components per element)\n    array.imate = image;\n    imageBuffers.push(array);\n  }\n\n  return imageBuffers;\n}\n\nexport function unpackGLBBuffers(arrayBuffer, json, binaryByteOffset) {\n  // TODO - really inefficient, should just use the offset into the original array buffer\n  if (binaryByteOffset) {\n    arrayBuffer = getArrayBufferAtOffset(arrayBuffer, binaryByteOffset);\n  }\n\n  const bufferViews = json.bufferViews || [];\n\n  for (let i = 0; i < bufferViews.length; ++i) {\n    const bufferView = bufferViews[i];\n    assert(bufferView.byteLength >= 0);\n  }\n\n  return {\n    // TODO: delete unpackAccessors and use buffer views only?\n    accessors: unpackAccessors(arrayBuffer, bufferViews, json),\n    images: unpackImages(arrayBuffer, bufferViews, json)\n  };\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n// System for registering callbacks to run in event handlers on the next frame\n// Used to get around restrictions on APIs like pointer lock, fullscreen, or\n// screen orientation.\n\nconst assert = require('assert');\n\nlet cbs = {};\nexport function topOfFrame() {\n  cbs = {};\n}\n\nexport function on(type, code_or_pos, cb) {\n  let list = cbs[type] = cbs[type] || [];\n  if (typeof code_or_pos === 'number') {\n    list[code_or_pos] = cb;\n  } else {\n    list.push([code_or_pos, cb]);\n  }\n}\n\nexport function handle(type, event) {\n  let list = cbs[type];\n  if (!list) {\n    return;\n  }\n  switch (type) {\n    case 'keydown':\n    case 'keyup':\n      if (list[event.keyCode]) {\n        list[event.keyCode](type, event);\n      }\n      break;\n    case 'mouseup':\n    case 'mousedown':\n      {\n        let x = event.pageX;\n        let y = event.pageY;\n        let button = event.button;\n        for (let ii = 0; ii < list.length; ++ii) {\n          let elem = list[ii];\n          let pos = elem[0];\n          if (x >= pos.x && x < pos.x + pos.w && y >= pos.y && y < pos.y + pos.h && (pos.button < 0 || pos.button === button)) {\n            elem[1](type, event);\n            break;\n          }\n        }\n      }break;\n    default:\n      assert(false);\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* global navigator */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst { cmd_parse } = require('./cmds.js');\nconst engine = require('./engine.js');\nconst in_event = require('./in_event.js');\nconst local_storage = require('./local_storage.js');\nconst { abs, max, min, sqrt } = Math;\nconst pointer_lock = require('./pointer_lock.js');\nconst { soundResume } = require('./sound.js');\nconst { vec2, v2add, v2copy, v2lengthSq, v2set, v2scale, v2sub } = require('./vmath.js');\n\nconst UP_EDGE = 0; // only for pads, which use === null as \"up\"\nconst UP = 0; // only for key/mouse\nconst DOWN = 1;\nconst DOWN_EDGE = 2; // only for pads\n\n// per-app overrideable options\nconst TOUCH_AS_MOUSE = true;\nlet map_analog_to_dpad = true;\n\nlet mouse_log = false;\n\nexport const ANY = -2;\nexport const POINTERLOCK = -1;\n\nexport let KEYS = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  RETURN: 13,\n  SHIFT: 16,\n  CTRL: 17,\n  ALT: 18,\n  ESC: 27,\n  SPACE: 32,\n  PAGEUP: 33,\n  PAGEDOWN: 34,\n  END: 35,\n  HOME: 36,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  INS: 45,\n  DEL: 46,\n  NUMPAD_DIVIDE: 111,\n  EQUALS: 187,\n  MINUS: 189,\n  SLASH: 191,\n  TILDE: 192\n};\n(function () {\n  for (let ii = 1; ii <= 12; ++ii) {\n    KEYS[`F${ii}`] = 111 + ii;\n  }\n  for (let ii = 48; ii <= 90; ++ii) {\n    // 0-9;A-Z\n    KEYS[String.fromCharCode(ii)] = ii;\n  }\n})();\nif (typeof Proxy === 'function') {\n  // Catch referencing keys that are not in our map\n  KEYS = new Proxy(KEYS, {\n    get: function (target, prop) {\n      let ret = target[prop];\n      assert(ret);\n      return ret;\n    }\n  });\n}\nexport const PAD = {\n  A: 0,\n  SELECT: 0, // GLOV name\n  B: 1,\n  CANCEL: 1, // GLOV name\n  X: 2,\n  Y: 3,\n  LB: 4,\n  LEFT_BUMPER: 4,\n  RB: 5,\n  RIGHT_BUMPER: 5,\n  LT: 6,\n  LEFT_TRIGGER: 6,\n  RT: 7,\n  RIGHT_TRIGGER: 7,\n  BACK: 8,\n  START: 9,\n  LEFT_STICK: 10,\n  RIGHT_STICK: 11,\n  UP: 12,\n  DOWN: 13,\n  LEFT: 14,\n  RIGHT: 15,\n  ANALOG_UP: 20,\n  ANALOG_LEFT: 21,\n  ANALOG_DOWN: 22,\n  ANALOG_RIGHT: 23\n};\n\nlet pad_to_touch;\n\nlet canvas;\nlet key_state_new = {};\nlet pad_states = []; // One map per gamepad to pad button states\nlet gamepad_data = []; // Other tracking data per gamepad\nlet mouse_pos = vec2(); // in DOM coordinates, not canvas or virtual\nlet last_mouse_pos = vec2();\nlet mouse_pos_is_touch = false;\nlet mouse_over_captured = false;\nlet mouse_down = [];\nlet mouse_wheel = 0;\nlet movement_questionable_frames = 0;\nconst MOVEMENT_QUESTIONABLE_FRAMES = 2; // Need at least 2\n\nlet input_eaten_kb = false;\nlet input_eaten_mouse = false;\n\nlet touches = {}; // `m${button}` or touch_id -> TouchData\n\nexport let touch_mode = local_storage.getJSON('touch_mode', false);\nexport let pad_mode = local_storage.getJSON('pad_mode', false);\n\ncmd_parse.registerValue('mouse_log', {\n  type: cmd_parse.TYPE_INT,\n  range: [0, 1],\n  get: () => mouse_log,\n  set: v => mouse_log = v\n});\n\nfunction eventTimestamp(event) {\n  if (event && event.timeStamp) {\n    // assert((event.timeStamp < 1e12) === (engine.hrtime < 1e12));\n    // Must both be high res times, or both not!\n    if (event.timeStamp < 1e12 !== engine.hrtime < 1e12) {\n      return engine.hrtime;\n    }\n    return event.timeStamp;\n  }\n  return engine.hrtime;\n}\n\nfunction TouchData(pos, touch, button, event) {\n  this.delta = vec2();\n  this.total = 0;\n  this.cur_pos = pos.slice(0);\n  this.start_pos = pos.slice(0);\n  this.touch = touch;\n  this.button = button;\n  this.start_time = Date.now();\n  this.dispatched = false;\n  this.dispatched_drag_over = false;\n  this.up_edge = 0;\n  this.down_edge = 0;\n  this.state = DOWN;\n  this.down_time = 0;\n  this.origin_time = eventTimestamp(event);\n}\nTouchData.prototype.down = function (event, is_edge) {\n  if (is_edge) {\n    this.down_edge++;\n  }\n  this.state = DOWN;\n  this.origin_time = eventTimestamp(event);\n};\n\nconst MIN_EVENT_TIME_DELTA = 0.01; // fractions of a millisecond\nfunction timeDelta(event, origin_time) {\n  let et = eventTimestamp(event);\n  // timestamps on events are often back in time relative to the last tick time\n  return max(et - origin_time, MIN_EVENT_TIME_DELTA);\n}\n\nfunction KeyData() {\n  this.down_edge = 0;\n  // this.down_start = 0;\n  this.origin_time = 0;\n  this.down_time = 0;\n  this.up_edge = 0;\n  this.state = UP;\n}\nKeyData.prototype.keyUp = function (event) {\n  ++this.up_edge;\n  this.down_time += timeDelta(event, this.origin_time);\n  this.state = UP;\n};\n\nfunction setMouseToMid() {\n  v2set(mouse_pos, engine.width * 0.5 / camera2d.domToCanvasRatio(), engine.height * 0.5 / camera2d.domToCanvasRatio());\n}\n\nexport function pointerLocked() {\n  return pointer_lock.isLocked();\n}\nlet pointerlock_touch_id = `m${POINTERLOCK}`;\n// only works reliably when called from an event handler\nexport function pointerLockEnter(when) {\n  pointer_lock.enter(when);\n}\nfunction onPointerLockEnter() {\n  if (touch_mode) {\n    return;\n  }\n  let touch_data = touches[pointerlock_touch_id];\n  setMouseToMid();\n  if (touch_data) {\n    v2copy(touch_data.start_pos, mouse_pos);\n    touch_data.state = DOWN;\n    touch_data.origin_time = engine.hrtime;\n  } else {\n    touch_data = touches[pointerlock_touch_id] = new TouchData(mouse_pos, false, POINTERLOCK, null);\n  }\n  movement_questionable_frames = MOVEMENT_QUESTIONABLE_FRAMES;\n}\nexport function pointerLockExit() {\n  let touch_data = touches[pointerlock_touch_id];\n  if (touch_data) {\n    v2copy(touch_data.cur_pos, mouse_pos);\n    // no UP_EDGE for this\n    touch_data.state = UP;\n  }\n  pointer_lock.exit();\n  movement_questionable_frames = MOVEMENT_QUESTIONABLE_FRAMES;\n}\n\nlet last_event;\nconst skip = { isTrusted: 1, sourceCapabilities: 1, path: 1, currentTarget: 1, view: 1 };\nfunction eventlog(event) {\n  if (event === last_event) {\n    return;\n  }\n  last_event = event;\n  let pairs = [];\n  for (let k in event) {\n    let v = event[k];\n    if (!v || typeof v === 'function' || k.toUpperCase() === k || skip[k]) {\n      continue;\n    }\n    pairs.push(`${k}:${v.id || v}`);\n  }\n  console.log(`${engine.global_frame_index} ${event.type} ${pointerLocked() ? 'ptrlck' : 'unlckd'} ${pairs.join(',')}`);\n}\n\nfunction letEventThrough(event) {\n  return event.target.tagName === 'INPUT' || String(event.target.className).indexOf('noglov') !== -1;\n}\n\nfunction ignored(event) {\n  // eventlog(event);\n  if (!letEventThrough(event)) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n}\n\nlet unload_protected = false;\nfunction beforeUnload(e) {\n  if (unload_protected) {\n    // Cancel the event\n    e.preventDefault();\n    // Chrome requires returnValue to be set\n    e.returnValue = 'Are you sure you want to quit?';\n  } else {\n    engine.releaseCanvas();\n  }\n}\nfunction protectUnload(enable) {\n  unload_protected = enable;\n}\n\nfunction onKeyUp(event) {\n  protectUnload(event.ctrlKey);\n  let code = event.keyCode;\n  if (!letEventThrough(event)) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  if (code === KEYS.ESC && pointerLocked()) {\n    pointerLockExit();\n  }\n  // Letting through to our code regardless of no_stop, because we handle things like ESC in INPUT elements\n\n  let ks = key_state_new[code];\n  if (ks && ks.state === DOWN) {\n    ks.keyUp(event);\n  }\n\n  in_event.handle('keyup', event);\n}\n\nfunction onKeyDown(event) {\n  protectUnload(event.ctrlKey);\n  let code = event.keyCode;\n  let no_stop = letEventThrough(event) || code >= KEYS.F5 && code <= KEYS.F12 || // Chrome debug hotkeys\n  code === KEYS.I && (event.altKey && event.metaKey || event.ctrlKey && event.shiftKey); // Safari, alternate Chrome\n  if (!no_stop) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  // console.log(`${event.code} ${event.keyCode}`);\n  soundResume();\n\n  // Letting through to our code regardless of no_stop, because we handle things like ESC in INPUT elements\n  let ks = key_state_new[code];\n  if (!ks) {\n    ks = key_state_new[code] = new KeyData();\n  }\n  if (ks.state !== DOWN) {\n    // not a repeat event\n    ++ks.down_edge;\n    ks.state = DOWN;\n    ks.origin_time = eventTimestamp(event);\n    // ks.down_start = ks.origin_time;\n\n    in_event.handle('keydown', event);\n  }\n}\n\nlet mouse_moved = false;\nlet temp_delta = vec2();\nlet last_abs_move = 0;\nlet last_abs_move_time = 0;\nfunction onMouseMove(event, no_stop) {\n  /// eventlog(event);\n  // Don't block mouse button 3, that's the Back button\n  if (!letEventThrough(event) && !no_stop && event.button !== 3) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (touch_mode) {\n      local_storage.setJSON('touch_mode', false);\n      touch_mode = false;\n    }\n    if (pad_mode) {\n      local_storage.setJSON('pad_mode', false);\n      pad_mode = false;\n    }\n  }\n  mouse_moved = true;\n  // offsetX/layerX return position relative to text-entry boxes, not good!\n  // clientX/clientY do not handle weird scrolling that happens on iOS, but\n  //   should not affect mouse events (but maybe on Safari desktop?)\n  mouse_pos[0] = event.pageX;\n  mouse_pos[1] = event.pageY;\n  // if (event.offsetX !== undefined) {\n  //   mouse_pos[0] = event.offsetX;\n  //   mouse_pos[1] = event.offsetY;\n  // } else {\n  //   mouse_pos[0] = event.layerX;\n  //   mouse_pos[1] = event.layerY;\n  // }\n  mouse_pos_is_touch = false;\n\n  let any_movement = false;\n  if (pointerLocked()) {\n    setMouseToMid();\n    if (event.movementX || event.movementY) {\n      // Smooth out (ignore) large jumps in movement\n      // This is, I believe, just a bug with Chromium on Windows, as it repositions the hidden mouse cursor\n      let ts = event.timeStamp || Date.now();\n      let abs_move = abs(event.movementX) + abs(event.movementY);\n      if (abs_move > 200 && (abs_move > 3 * last_abs_move || ts - last_abs_move_time > 1000)) {\n        console.log(`Ignoring mousemove with sudden large delta: ${event.movementX},${event.movementY}`);\n      } else {\n        v2set(temp_delta, event.movementX || 0, event.movementY || 0);\n        any_movement = true;\n      }\n      last_abs_move = abs_move;\n      last_abs_move_time = ts;\n    }\n  } else {\n    v2sub(temp_delta, mouse_pos, last_mouse_pos);\n    if (temp_delta[0] || temp_delta[1]) {\n      any_movement = true;\n    }\n    v2copy(last_mouse_pos, mouse_pos);\n  }\n  if (any_movement && movement_questionable_frames && v2lengthSq(temp_delta) > 100 * 100) {\n    // giant movement right after entering or exiting pointer lock, ignore (Chrome bug)\n    // We get these unreasonable jumps in both movementXY and the other, presumably\n    // because pointerLocked() is slightly out of sync, though the large .movementX/Y\n    // is clearly erroneous.\n    any_movement = false;\n  }\n  if (any_movement) {\n    for (let button = POINTERLOCK; button < mouse_down.length; ++button) {\n      if (mouse_down[button] || button === POINTERLOCK && pointerLocked()) {\n        let touch_data = touches[`m${button}`];\n        if (touch_data) {\n          v2add(touch_data.delta, touch_data.delta, temp_delta);\n          touch_data.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n          v2copy(touch_data.cur_pos, mouse_pos);\n        }\n      }\n    }\n  }\n}\n\nfunction onMouseDown(event) {\n  if (mouse_log) {\n    eventlog(event);\n  }\n  onMouseMove(event); // update mouse_pos\n  soundResume();\n  let no_click = letEventThrough(event);\n\n  let button = event.button;\n  mouse_down[button] = mouse_pos.slice(0);\n  let touch_id = `m${button}`;\n  if (touches[touch_id]) {\n    v2copy(touches[touch_id].start_pos, mouse_pos);\n  } else {\n    touches[touch_id] = new TouchData(mouse_pos, false, button, event);\n  }\n  touches[touch_id].down(event, !no_click);\n  if (!no_click) {\n    in_event.handle('mousedown', event);\n  }\n  //This solves input bug when game is running as iframe. E.g. Facebook Instant\n  if (window.focus) {\n    window.focus();\n  }\n}\n\nfunction onMouseUp(event) {\n  if (mouse_log) {\n    eventlog(event);\n  }\n  onMouseMove(event); // update mouse_pos\n  let no_click = letEventThrough(event);\n  let button = event.button;\n  if (mouse_down[button]) {\n    let touch_id = `m${button}`;\n    let touch_data = touches[touch_id];\n    if (touch_data) {\n      v2copy(touch_data.cur_pos, mouse_pos);\n      if (!no_click) {\n        touch_data.up_edge++;\n      }\n      touch_data.state = UP;\n      touch_data.down_time += timeDelta(event, touch_data.origin_time);\n    }\n    delete mouse_down[button];\n  }\n  if (!no_click) {\n    in_event.handle('mouseup', event);\n  }\n}\n\nfunction onWheel(event) {\n  onMouseMove(event, true);\n  let delta = -event.deltaY || event.wheelDelta || -event.detail;\n  if (delta > 0) {\n    mouse_wheel++;\n  } else if (delta < 0) {\n    mouse_wheel--;\n  }\n}\n\nlet touch_pos = vec2();\nlet released_touch_id = 0;\nfunction onTouchChange(event) {\n  // eventlog(event);\n  // Using .pageX/Y here because on iOS when a text entry is selected, it scrolls\n  // our canvas offscreen.  Should maybe have the canvas resize and use clientX\n  // instead, but this works well enough.\n  soundResume();\n  if (!touch_mode) {\n    local_storage.set('touch_mode', true);\n    touch_mode = true;\n  }\n  if (pad_mode) {\n    local_storage.set('pad_mode', true);\n    pad_mode = true;\n  }\n  if (event.cancelable !== false) {\n    event.preventDefault();\n  }\n  let ct = event.touches;\n  let seen = {};\n\n  let new_count = ct.length;\n  let old_count = new_count;\n  // Look for press and movement\n  for (let ii = 0; ii < new_count; ++ii) {\n    let touch = ct[ii];\n    let last_touch = touches[touch.identifier];\n    v2set(touch_pos, touch.pageX, touch.pageY);\n    if (!last_touch) {\n      last_touch = touches[touch.identifier] = new TouchData(touch_pos, true, 0, event);\n      last_touch.down(event, true);\n      --old_count;\n      in_event.handle('mousedown', touch);\n    } else {\n      v2sub(temp_delta, touch_pos, last_touch.cur_pos);\n      v2add(last_touch.delta, last_touch.delta, temp_delta);\n      last_touch.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n      v2copy(last_touch.cur_pos, touch_pos);\n    }\n\n    seen[touch.identifier] = true;\n    if (TOUCH_AS_MOUSE && new_count === 1) {\n      // Single touch, treat as mouse movement\n      v2copy(mouse_pos, touch_pos);\n      mouse_pos_is_touch = true;\n    }\n  }\n  // Look for release, if releasing exactly one final touch\n  let released_touch;\n  let released_ids = [];\n  for (let id in touches) {\n    if (!seen[id]) {\n      let touch = touches[id];\n      if (touch.touch && touch.state === DOWN) {\n        ++old_count;\n        released_touch = touch;\n        released_ids.push(id);\n        in_event.handle('mouseup', { pageX: touch.cur_pos[0], pageY: touch.cur_pos[1] });\n        touch.up_edge++;\n        touch.state = UP;\n        touch.down_time += timeDelta(event, touch.origin_time);\n        touch.release = true;\n      }\n    }\n  }\n  for (let ii = 0; ii < released_ids.length; ++ii) {\n    let id = released_ids[ii];\n    let touch = touches[id];\n    // get new id, not overlapping with touch.identifier values,\n    // so that if we get a new touch event before the next tick, we still see the release, etc\n    let new_id = `r${++released_touch_id}`;\n    delete touches[id];\n    touches[new_id] = touch;\n  }\n  if (TOUCH_AS_MOUSE) {\n    if (old_count === 1 && new_count === 0) {\n      delete mouse_down[0];\n      v2copy(mouse_pos, released_touch.cur_pos);\n      mouse_pos_is_touch = true;\n    } else if (new_count === 1) {\n      let touch = ct[0];\n      if (!old_count) {\n        mouse_down[0] = vec2(touch.pageX, touch.pageY);\n      }\n      v2set(mouse_pos, touch.pageX, touch.pageY);\n      mouse_pos_is_touch = true;\n    } else if (new_count > 1) {\n      // multiple touches, release mouse_down without emitting click\n      delete mouse_down[0];\n    }\n  }\n}\n\nfunction onBlurOrFocus(evt) {\n  protectUnload(false);\n  for (let code in key_state_new) {\n    let ks = key_state_new[code];\n    if (ks.state === DOWN) {\n      ks.keyUp(evt);\n    }\n  }\n}\n\nlet ANALOG_MAP = {};\nfunction genAnalogMap() {\n  if (map_analog_to_dpad) {\n    ANALOG_MAP[PAD.LEFT] = PAD.ANALOG_LEFT;\n    ANALOG_MAP[PAD.RIGHT] = PAD.ANALOG_RIGHT;\n    ANALOG_MAP[PAD.UP] = PAD.ANALOG_UP;\n    ANALOG_MAP[PAD.DOWN] = PAD.ANALOG_DOWN;\n  }\n}\n\nexport function startup(_canvas, params) {\n  canvas = _canvas;\n  pointer_lock.startup(canvas, onPointerLockEnter);\n  if (params.map_analog_to_dpad !== undefined) {\n    map_analog_to_dpad = params.map_analog_to_dpad;\n  }\n  pad_to_touch = params.pad_to_touch;\n  genAnalogMap();\n\n  let passive_param = false;\n  try {\n    let opts = Object.defineProperty({}, 'passive', {\n      get: function () {\n        passive_param = { passive: false };\n        return false;\n      }\n    });\n    window.addEventListener('test', null, opts);\n    window.removeEventListener('test', null, opts);\n  } catch (e) {\n    passive_param = false;\n  }\n\n  window.addEventListener('keydown', onKeyDown, false);\n  window.addEventListener('keyup', onKeyUp, false);\n\n  window.addEventListener('click', ignored, false);\n  window.addEventListener('contextmenu', ignored, false);\n  window.addEventListener('mousemove', onMouseMove, false);\n  window.addEventListener('mousedown', onMouseDown, false);\n  window.addEventListener('mouseup', onMouseUp, false);\n  if (window.WheelEvent) {\n    window.addEventListener('wheel', onWheel, passive_param);\n  } else {\n    window.addEventListener('DOMMouseScroll', onWheel, false);\n    window.addEventListener('mousewheel', onWheel, false);\n  }\n\n  window.addEventListener('blur', onBlurOrFocus, false);\n  window.addEventListener('focus', onBlurOrFocus, false);\n\n  canvas.addEventListener('touchstart', onTouchChange, passive_param);\n  canvas.addEventListener('touchmove', onTouchChange, passive_param);\n  canvas.addEventListener('touchend', onTouchChange, passive_param);\n  canvas.addEventListener('touchcancel', onTouchChange, passive_param);\n\n  // For iOS, this is needed in test_fullscreen, but not here, for some reason\n  //window.addEventListener('gesturestart', ignored, false);\n\n  window.addEventListener('beforeunload', beforeUnload, false);\n}\n\nconst DEADZONE = 0.26;\nconst DEADZONE_SQ = DEADZONE * DEADZONE;\nconst NUM_STICKS = 2;\nconst PAD_THRESHOLD = 0.25; // for turning analog motion into digital events\n\nfunction getGamepadData(idx) {\n  let gpd = gamepad_data[idx];\n  if (!gpd) {\n    gpd = gamepad_data[idx] = {\n      id: idx,\n      timestamp: 0,\n      sticks: new Array(NUM_STICKS)\n    };\n    for (let ii = 0; ii < NUM_STICKS; ++ii) {\n      gpd.sticks[ii] = vec2();\n    }\n    pad_states[idx] = {};\n  }\n  return gpd;\n}\n\nfunction updatePadState(gpd, ps, b, padcode) {\n  if (b && !ps[padcode]) {\n    ps[padcode] = DOWN_EDGE;\n    if (!pad_mode) {\n      local_storage.setJSON('pad_mode', true);\n      pad_mode = true;\n    }\n    if (padcode === pad_to_touch) {\n      let touch_id = `g${gpd.id}`;\n      if (touches[touch_id]) {\n        setMouseToMid();\n        v2copy(touches[touch_id].start_pos, mouse_pos);\n      } else {\n        touches[touch_id] = new TouchData(mouse_pos, false, 0, null);\n      }\n      touches[touch_id].down(null, true);\n    }\n  } else if (!b && ps[padcode]) {\n    ps[padcode] = UP_EDGE;\n    if (padcode === pad_to_touch) {\n      let touch_id = `g${gpd.id}`;\n      let touch_data = touches[touch_id];\n      if (touch_data) {\n        setMouseToMid();\n        v2copy(touch_data.cur_pos, mouse_pos);\n        touch_data.up_edge++;\n        touch_data.state = UP;\n        touch_data.down_time += max(engine.hrtime - touch_data.origin_time, MIN_EVENT_TIME_DELTA);\n      }\n    }\n  }\n}\n\nfunction gamepadUpdate() {\n  let gamepads = navigator.gamepads || navigator.webkitGamepads || navigator.getGamepads && navigator.getGamepads() || navigator.webkitGetGamepads && navigator.webkitGetGamepads();\n\n  if (gamepads) {\n    let numGamePads = gamepads.length;\n    for (let ii = 0; ii < numGamePads; ii++) {\n      let gamepad = gamepads[ii];\n      if (!gamepad) {\n        continue;\n      }\n      let gpd = getGamepadData(ii);\n      let ps = pad_states[ii];\n      // Update button states\n      if (gpd.timestamp < gamepad.timestamp) {\n        let buttons = gamepad.buttons;\n        gpd.timestamp = gamepad.timestamp;\n\n        let numButtons = buttons.length;\n        for (let n = 0; n < numButtons; n++) {\n          let value = buttons[n];\n          if (typeof value === 'object') {\n            value = value.value;\n          }\n          value = value > 0.5;\n          updatePadState(gpd, ps, value, n);\n        }\n      }\n\n      // Update axes states\n      let axes = gamepad.axes;\n      if (axes.length >= NUM_STICKS * 2) {\n        for (let n = 0; n < NUM_STICKS; ++n) {\n          let pair = gpd.sticks[n];\n          v2set(pair, axes[n * 2], -axes[n * 2 + 1]);\n          let magnitude = v2lengthSq(pair);\n          if (magnitude > DEADZONE_SQ) {\n            magnitude = sqrt(magnitude);\n\n            // Normalize lX and lY\n            v2scale(pair, pair, 1 / magnitude);\n\n            // Clip the magnitude at its max possible value\n            magnitude = min(magnitude, 1);\n\n            // Adjust magnitude relative to the end of the dead zone\n            magnitude = (magnitude - DEADZONE) / (1 - DEADZONE);\n\n            v2scale(pair, pair, magnitude);\n          } else {\n            v2set(pair, 0, 0);\n          }\n\n          // Apply \"movement\" to drag events\n          if (n <= 1 && pad_to_touch !== undefined) {\n            let touch_data = touches[`g${gpd.id}`];\n            if (touch_data) {\n              v2scale(temp_delta, pair, engine.this_frame_time);\n              v2add(touch_data.delta, touch_data.delta, temp_delta);\n              touch_data.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n              setMouseToMid();\n              v2copy(touch_data.cur_pos, mouse_pos);\n            }\n          }\n        }\n\n        // Calculate virtual directional buttons\n        updatePadState(gpd, ps, gpd.sticks[0][0] < -PAD_THRESHOLD, PAD.ANALOG_LEFT);\n        updatePadState(gpd, ps, gpd.sticks[0][0] > PAD_THRESHOLD, PAD.ANALOG_RIGHT);\n        updatePadState(gpd, ps, gpd.sticks[0][1] < -PAD_THRESHOLD, PAD.ANALOG_DOWN);\n        updatePadState(gpd, ps, gpd.sticks[0][1] > PAD_THRESHOLD, PAD.ANALOG_UP);\n      }\n    }\n  }\n}\n\nexport function tickInput() {\n  // browser frame has occurred since the call to endFrame(),\n  // we should now have `touches` and `key_state` populated with edge events\n  if (movement_questionable_frames) {\n    --movement_questionable_frames;\n  }\n\n  // update timing of key down states\n  let hrtime = engine.hrtime;\n  for (let code in key_state_new) {\n    let ks = key_state_new[code];\n    if (ks.state === DOWN) {\n      ks.down_time += max(hrtime - ks.origin_time, MIN_EVENT_TIME_DELTA);\n      // assert(hrtime >= ks.origin_time); - should be true, but often isn't\n      ks.origin_time = hrtime;\n    }\n  }\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (touch_data.state === DOWN) {\n      touch_data.down_time += max(hrtime - touch_data.origin_time, MIN_EVENT_TIME_DELTA);\n      // assert(hrtime >= touch_data.origin_time); - should be true, but often isn't\n      touch_data.origin_time = hrtime;\n    }\n  }\n\n  mouse_over_captured = false;\n  gamepadUpdate();\n  in_event.topOfFrame();\n  if (touches[pointerlock_touch_id] && !pointerLocked()) {\n    pointerLockExit();\n  }\n}\n\nfunction endFrameTickMap(map) {\n  Object.keys(map).forEach(keycode => {\n    switch (map[keycode]) {\n      case DOWN_EDGE:\n        map[keycode] = DOWN;\n        break;\n      case UP_EDGE:\n        delete map[keycode];\n        break;\n      default:\n    }\n  });\n}\nexport function endFrame(skip_mouse) {\n  for (let code in key_state_new) {\n    let ks = key_state_new[code];\n    if (ks.state === UP) {\n      key_state_new[code] = null;\n      delete key_state_new[code];\n    } else {\n      ks.up_edge = 0;\n      ks.down_edge = 0;\n      ks.down_time = 0;\n    }\n  }\n\n  pad_states.forEach(endFrameTickMap);\n  if (!skip_mouse) {\n    for (let touch_id in touches) {\n      let touch_data = touches[touch_id];\n      if (touch_data.state === UP) {\n        // Manually null out touches[touch_id] - some Chrome optimizer bug causes\n        // callers to later get this old value (instead of the newly added on with\n        // the same ID) unless we null it out (then they seem to get the new one).\n        touches[touch_id] = null;\n        delete touches[touch_id];\n      } else {\n        touch_data.delta[0] = touch_data.delta[1] = 0;\n        touch_data.dispatched = false;\n        touch_data.dispatched_drag_over = false;\n        touch_data.up_edge = 0;\n        touch_data.down_edge = 0;\n        touch_data.down_time = 0;\n      }\n    }\n    mouse_wheel = 0;\n    input_eaten_mouse = false;\n  }\n  input_eaten_kb = false;\n  mouse_moved = false;\n}\n\nexport function eatAllInput(skip_mouse) {\n  // destroy touches, remove all down and up edges\n  endFrame(skip_mouse);\n  if (!skip_mouse) {\n    mouse_over_captured = true;\n    input_eaten_mouse = true;\n  }\n  input_eaten_kb = true;\n}\n\nexport function eatAllKeyboardInput() {\n  eatAllInput(true);\n}\n\n// returns position mapped to current camera view\nexport function mousePos(dst) {\n  dst = dst || vec2();\n  camera2d.domToVirtual(dst, mouse_pos);\n  return dst;\n}\n\nexport function mouseMoved() {\n  return mouse_moved;\n}\n\nexport function mouseWheel() {\n  let ret = mouse_wheel;\n  mouse_wheel = 0;\n  return ret;\n}\n\nfunction mousePosParam(param) {\n  param = param || {};\n  return {\n    x: param.x === undefined ? camera2d.x0Real() : param.x,\n    y: param.y === undefined ? camera2d.y0Real() : param.y,\n    w: param.w === undefined ? camera2d.wReal() : param.w,\n    h: param.h === undefined ? camera2d.hReal() : param.h,\n    button: param.button === undefined ? ANY : param.button\n  };\n}\n\nlet check_pos = vec2();\nfunction checkPos(pos, param) {\n  camera2d.domToVirtual(check_pos, pos);\n  return check_pos[0] >= param.x && (param.w === Infinity || check_pos[0] < param.x + param.w) && check_pos[1] >= param.y && (param.h === Infinity || check_pos[1] < param.y + param.h);\n}\n\nexport function mouseOver(param) {\n  if (mouse_over_captured || pointerLocked()) {\n    return false;\n  }\n  param = param || {};\n  let pos_param = mousePosParam(param);\n\n  // eat mouse up/down/drag events\n  if (!param.peek) {\n    for (let id in touches) {\n      let touch = touches[id];\n      if (checkPos(touch.cur_pos, pos_param)) {\n        touch.down_edge = 0;\n        touch.up_edge = 0;\n        if (!param || !param.drag_target) {\n          touch.dispatched = true;\n        }\n      }\n    }\n  }\n\n  if (checkPos(mouse_pos, pos_param)) {\n    if (!param.peek) {\n      mouse_over_captured = true;\n    }\n    return true;\n  }\n  return false;\n}\n\nexport function mouseDown(button) {\n  if (button === ANY) {\n    return mouseDown(0) || mouseDown(2);\n  }\n  button = button || 0;\n  return !input_eaten_mouse && mouse_down[button];\n}\n\nexport function mousePosIsTouch() {\n  return mouse_pos_is_touch;\n}\n\nexport function isTouchDown(param) {\n  if (input_eaten_mouse) {\n    return false;\n  }\n  let pos_param = mousePosParam(param);\n  for (let id in touches) {\n    let touch = touches[id];\n    if (checkPos(touch.cur_pos, pos_param)) {\n      return check_pos.slice(0);\n    }\n  }\n  return false;\n}\n\nexport function numTouches() {\n  return Object.keys(touches).length;\n}\n\nexport function keyDown(keycode) {\n  if (input_eaten_kb) {\n    return 0;\n  }\n  let ks = key_state_new[keycode];\n  if (!ks) {\n    return 0;\n  }\n  if (ks.state === DOWN) {\n    assert(ks.down_time); // Will fire if we call keyDown() before tickInput()\n  }\n  return ks.down_time;\n}\nexport function keyDownEdge(keycode, opts) {\n  if (opts && opts.in_event_cb && !input_eaten_kb) {\n    in_event.on('keydown', keycode, opts.in_event_cb);\n  }\n\n  let ks = key_state_new[keycode];\n  if (!ks) {\n    return 0;\n  }\n  let r = ks.down_edge;\n  ks.down_edge = 0;\n  return r;\n}\nexport function keyUpEdge(keycode, opts) {\n  if (opts && opts.in_event_cb && !input_eaten_kb) {\n    in_event.on('keyup', keycode, opts.in_event_cb);\n  }\n\n  let ks = key_state_new[keycode];\n  if (!ks) {\n    return 0;\n  }\n  let r = ks.up_edge;\n  ks.up_edge = 0;\n  return r;\n}\n\nexport function padGetAxes(out, stickindex, padindex) {\n  assert(stickindex >= 0 && stickindex < NUM_STICKS);\n  if (padindex === undefined) {\n    let sub = vec2();\n    v2set(out, 0, 0);\n    for (let ii = 0; ii < gamepad_data.length; ++ii) {\n      padGetAxes(sub, stickindex, ii);\n      v2add(out, out, sub);\n    }\n    return;\n  }\n  let sticks = getGamepadData(padindex).sticks;\n  v2copy(out, sticks[stickindex]);\n}\n\nfunction padButtonDownInternal(gpd, ps, padcode) {\n  if (ps[padcode]) {\n    return engine.this_frame_time;\n  }\n  return 0;\n}\nfunction padButtonDownEdgeInternal(gpd, ps, padcode) {\n  if (ps[padcode] === DOWN_EDGE) {\n    ps[padcode] = DOWN;\n    return engine.this_frame_time;\n  }\n  return 0;\n}\nfunction padButtonUpEdgeInternal(gpd, ps, padcode) {\n  if (ps[padcode] === UP_EDGE) {\n    delete ps[padcode];\n    return engine.this_frame_time;\n  }\n  return 0;\n}\n\nfunction padButtonShared(fn, padcode, padindex) {\n  assert(padcode !== undefined);\n  let r = 0;\n  // Handle calling without a specific pad index\n  if (padindex === undefined) {\n    for (let ii = 0; ii < pad_states.length; ++ii) {\n      r += padButtonShared(fn, padcode, ii);\n    }\n    return r;\n  }\n\n  if (input_eaten_mouse) {\n    return 0;\n  }\n  let gpd = gamepad_data[padindex];\n  if (!gpd) {\n    return 0;\n  }\n  let ps = pad_states[padindex];\n\n  r += ANALOG_MAP[padcode] && fn(gpd, ps, ANALOG_MAP[padcode]) || 0;\n  r += fn(gpd, ps, padcode);\n  return r;\n}\nexport function padButtonDown(padcode, padindex) {\n  return padButtonShared(padButtonDownInternal, padcode, padindex);\n}\nexport function padButtonDownEdge(padcode, padindex) {\n  return padButtonShared(padButtonDownEdgeInternal, padcode, padindex);\n}\nexport function padButtonUpEdge(padcode, padindex) {\n  return padButtonShared(padButtonUpEdgeInternal, padcode, padindex);\n}\n\nlet start_pos = vec2();\nlet cur_pos = vec2();\nlet delta = vec2();\n\nexport function mouseUpEdge(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  let max_click_dist = param.max_dist || 50; // TODO: relative to camera distance?\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!touch_data.up_edge || !(button === ANY || button === touch_data.button) || touch_data.total > max_click_dist) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      if (!param.peek) {\n        touch_data.up_edge = 0;\n      }\n      return {\n        button: touch_data.button,\n        pos: check_pos.slice(0),\n        start_time: touch_data.start_time\n      };\n    }\n  }\n\n  if (param.in_event_cb && !input_eaten_mouse && !mouse_over_captured) {\n    // TODO: Maybe need to also pass along earlier exclusions?  Working okay for now though.\n    if (!param.phys) {\n      param.phys = {};\n    }\n    param.phys.button = typeof param.in_event_button === 'number' ? param.in_event_button : button;\n    camera2d.virtualToDomPosParam(param.phys, pos_param);\n    in_event.on('mouseup', param.phys, param.in_event_cb);\n  }\n  return false;\n}\nexports.click = mouseUpEdge;\n\nexport function mouseDownEdge(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!touch_data.down_edge || !(button === ANY || button === touch_data.button)) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      if (!param.peek) {\n        touch_data.down_edge = 0;\n      }\n      return {\n        button: touch_data.button,\n        pos: check_pos.slice(0),\n        start_time: touch_data.start_time\n      };\n    }\n  }\n\n  if (param.in_event_cb && !input_eaten_mouse && !mouse_over_captured) {\n    // TODO: Maybe need to also pass along earlier exclusions?  Working okay for now though.\n    if (!param.phys) {\n      param.phys = {};\n    }\n    param.phys.button = button;\n    camera2d.virtualToDomPosParam(param.phys, pos_param);\n    in_event.on('mousedown', param.phys, param.in_event_cb);\n  }\n  return false;\n}\n\n// Completely consume any clicks or drags coming from a mouse down event in this\n// area - used to catch focus leaving an edit box without wanting to do what\n// a click would normally do.\nexport function mouseConsumeClicks(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button)) {\n      continue;\n    }\n    if (checkPos(touch_data.start_pos, pos_param)) {\n      touch_data.down_edge = 0;\n      // Set start pos so that it will not pass checkPos\n      touch_data.start_pos[0] = touch_data.start_pos[1] = Infinity;\n      // Set .total so that mouseUpEdge will not detect it as a click\n      touch_data.total = Infinity;\n    }\n  }\n}\n\nexport function drag(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  let min_dist = param.min_dist || 0;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched) {\n      continue;\n    }\n    if (checkPos(touch_data.start_pos, pos_param)) {\n      camera2d.domDeltaToVirtual(delta, [touch_data.total / 2, touch_data.total / 2]);\n      let total = delta[0] + delta[1];\n      if (total < min_dist) {\n        continue;\n      }\n      if (!param.peek) {\n        touch_data.dispatched = true;\n      }\n      let is_down_edge = touch_data.down_edge;\n      if (param.eat_clicks) {\n        touch_data.down_edge = touch_data.up_edge = 0;\n      }\n      if (param.payload) {\n        touch_data.drag_payload = param.payload;\n      }\n      camera2d.domToVirtual(start_pos, touch_data.start_pos);\n      camera2d.domToVirtual(cur_pos, touch_data.cur_pos);\n      camera2d.domDeltaToVirtual(delta, touch_data.delta);\n      return {\n        cur_pos,\n        start_pos,\n        delta, // this frame's delta\n        total, // total (linear) distance dragged\n        button: touch_data.button,\n        touch: touch_data.touch,\n        start_time: touch_data.start_time,\n        is_down_edge,\n        down_time: touch_data.down_time\n      };\n    }\n  }\n  return null;\n}\n\n// a lot like drag(), refactor to share more?\nexport function longPress(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  let max_dist = param.max_dist || 0;\n  let min_time = param.min_time || 500;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.long_press_dispatched) {\n      continue;\n    }\n    if (checkPos(touch_data.start_pos, pos_param)) {\n      camera2d.domDeltaToVirtual(delta, [touch_data.total / 2, touch_data.total / 2]);\n      let total = delta[0] + delta[1];\n      if (total > max_dist) {\n        continue;\n      }\n      let time = Date.now() - touch_data.start_time;\n      if (time < min_time) {\n        continue;\n      }\n      if (!param.peek) {\n        // ? touch_data.dispatched = true;\n        touch_data.long_press_dispatched = true;\n      }\n      let is_down_edge = touch_data.down_edge;\n      if (param.eat_clicks) {\n        touch_data.down_edge = touch_data.up_edge = 0;\n      }\n      camera2d.domToVirtual(start_pos, touch_data.start_pos);\n      camera2d.domToVirtual(cur_pos, touch_data.cur_pos);\n      camera2d.domDeltaToVirtual(delta, touch_data.delta);\n      return {\n        long_press: true,\n        cur_pos,\n        start_pos,\n        delta, // this frame's delta\n        total, // total (linear) distance dragged\n        button: touch_data.button,\n        touch: touch_data.touch,\n        start_time: touch_data.start_time,\n        is_down_edge,\n        down_time: touch_data.down_time\n      };\n    }\n  }\n  return null;\n}\n\nexport function dragDrop(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    // Maybe touch_data.dispatched_drag_over instead/as well?\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched || !touch_data.drag_payload) {\n      continue;\n    }\n    if (!touch_data.up_edge) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      if (!param.peek) {\n        // Maybe touch_data.dispatched_drag_over as well?\n        touch_data.dispatched = true;\n      }\n      return { drag_payload: touch_data.drag_payload };\n    }\n  }\n  return null;\n}\n\nexport function dragOver(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched || touch_data.dispatched_drag_over || // Maybe not .dispatched?\n    !touch_data.drag_payload) {\n      continue;\n    }\n    if (touch_data.state !== DOWN) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      // Separate 'dispatched' for dragOver (target) and drag (source) - they both need one dispatch per frame\n      if (!param.peek) {\n        touch_data.dispatched_drag_over = true;\n      }\n      camera2d.domToVirtual(cur_pos, touch_data.cur_pos);\n      return {\n        cur_pos,\n        drag_payload: touch_data.drag_payload\n      };\n    }\n  }\n  return null;\n}","// Portions Copyright 2020 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst engine = require('./engine.js');\nconst camera2d = require('./camera2d.js');\nconst in_event = require('./in_event.js');\nconst input = require('./input.js');\nconst ui = require('./ui.js');\n\nlet state_cache = {};\nlet good_url = /https?:\\/\\//;\n\n// Create an invisible A elem in the DOM so we get all of the good browsery\n// behavior for a link area.\nexport function link(param) {\n  let { x, y, w, h, url, internal, allow_modal } = param;\n  if (!url.match(good_url)) {\n    url = `${document.location.protocol}//${url}`;\n  }\n  let key = `${x}_${y}`;\n  let state = state_cache[key];\n  if (!state) {\n    state = state_cache[key] = { clicked: false };\n  }\n  let elem = ui.getElem(allow_modal, state.elem);\n  state.frame = engine.global_frame_index;\n  if (elem !== state.elem) {\n    state.elem = elem;\n    if (elem) {\n      // new DOM element, initialize\n      elem.textContent = '';\n      let a_elem = document.createElement('a');\n      a_elem.setAttribute('draggable', false);\n      a_elem.textContent = ' ';\n      a_elem.className = 'glovui_link noglov';\n      a_elem.setAttribute('target', '_blank');\n      a_elem.setAttribute('href', url);\n      state.url = url;\n      if (internal) {\n        a_elem.onclick = function (ev) {\n          ev.preventDefault();\n          state.clicked = true;\n          in_event.handle('mouseup', ev);\n        };\n      }\n      elem.appendChild(a_elem);\n      state.a_elem = a_elem;\n    }\n  }\n  if (elem) {\n    if (url !== state.url) {\n      state.a_elem.setAttribute('href', url);\n      state.url = url;\n    }\n\n    let pos = camera2d.htmlPos(x, y);\n    elem.style.left = `${pos[0]}%`;\n    elem.style.top = `${pos[1]}%`;\n    let size = camera2d.htmlSize(w, h);\n    elem.style.width = `${size[0]}%`;\n    elem.style.height = `${size[1]}%`;\n  }\n  let clicked = state.clicked;\n  state.clicked = false;\n  return clicked;\n}\n\nexport function linkText(param) {\n  let { style_link, style_link_hover, x, y, z, font_size, text, url } = param;\n  text = text || url;\n  z = z || Z.UI;\n  font_size = font_size || ui.font_height;\n  // Also: any parameter to link(), e.g. url\n  let w = ui.font.getStringWidth(style_link, font_size, text);\n  let h = font_size;\n  let mouseover = input.mouseOver({ x, y, w, h, peek: true }) && !input.mousePosIsTouch();\n  let style = mouseover ? style_link_hover : style_link;\n  ui.font.drawSized(style, x, y, z, font_size, text);\n  let underline_w = 1;\n  ui.drawLine(x, y + h - underline_w, x + w, y + h - underline_w, z - 0.5, underline_w, 0.99, style.color_vec4);\n  param.w = w;\n  param.h = h;\n  return link(param);\n}\n\nexport function linkTick() {\n  for (let key in state_cache) {\n    let state = state_cache[key];\n    if (state.frame !== engine.global_frame_index - 1) {\n      delete state_cache[key];\n    }\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\nexports.storage_prefix = 'demo';\n\nlet lsd = function () {\n  try {\n    localStorage.test = 'test';\n    return localStorage;\n  } catch (e) {\n    return {};\n  }\n}();\nexport function get(key) {\n  key = `${exports.storage_prefix}_${key}`;\n  let ret = lsd[key];\n  if (ret === 'undefined') {\n    ret = undefined;\n  }\n  return ret;\n}\n\nexport function set(key, value) {\n  key = `${exports.storage_prefix}_${key}`;\n  if (value === undefined || value === null) {\n    delete lsd[key];\n  } else {\n    lsd[key] = value;\n  }\n}\n\nexport function setJSON(key, value) {\n  set(key, JSON.stringify(value));\n}\n\nexport function getJSON(key, def) {\n  let value = get(key);\n  if (value === undefined) {\n    return def;\n  }\n  try {\n    return JSON.parse(value);\n  } catch (e) {\n    // ignore\n  }\n  return def;\n}\n\nexport function clearAll(key_prefix) {\n  let prefix = new RegExp(`^${exports.storage_prefix}_${key_prefix || ''}`, 'u');\n  for (let key in lsd) {\n    if (key.match(prefix)) {\n      delete lsd[key];\n    }\n  }\n}\n\nexport function exportAll() {\n  let obj = {};\n  let prefix = new RegExp(`^${exports.storage_prefix}_(.*)`, 'u');\n  for (let key in lsd) {\n    let m = key.match(prefix);\n    if (m) {\n      let v = lsd[key];\n      if (v && v !== 'undefined') {\n        obj[m[1]] = v;\n      }\n    }\n  }\n  return JSON.stringify(obj);\n}\n\nexport function importAll(serialized) {\n  let obj = JSON.parse(serialized);\n  clearAll();\n  for (let key in obj) {\n    set(key, obj[key]);\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nexport function mat43() {\n  let r = new Float32Array(12);\n  r[0] = r[4] = r[8] = 1;\n  return r;\n}\n\nexport function m43identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  out[9] = 0;\n  out[10] = 0;\n  out[11] = 0;\n}\n\nexport function m43mul(out, a, b) {\n  let a0 = a[0];\n  let a1 = a[1];\n  let a2 = a[2];\n  let a3 = a[3];\n  let a4 = a[4];\n  let a5 = a[5];\n  let a6 = a[6];\n  let a7 = a[7];\n  let a8 = a[8];\n  let a9 = a[9];\n  let a10 = a[10];\n  let a11 = a[11];\n\n  let b0 = b[0];\n  let b1 = b[1];\n  let b2 = b[2];\n  let b3 = b[3];\n  let b4 = b[4];\n  let b5 = b[5];\n  let b6 = b[6];\n  let b7 = b[7];\n  let b8 = b[8];\n\n  out[0] = b0 * a0 + b3 * a1 + b6 * a2;\n  out[1] = b1 * a0 + b4 * a1 + b7 * a2;\n  out[2] = b2 * a0 + b5 * a1 + b8 * a2;\n  out[3] = b0 * a3 + b3 * a4 + b6 * a5;\n  out[4] = b1 * a3 + b4 * a4 + b7 * a5;\n  out[5] = b2 * a3 + b5 * a4 + b8 * a5;\n  out[6] = b0 * a6 + b3 * a7 + b6 * a8;\n  out[7] = b1 * a6 + b4 * a7 + b7 * a8;\n  out[8] = b2 * a6 + b5 * a7 + b8 * a8;\n  out[9] = b0 * a9 + b3 * a10 + b6 * a11 + b[9];\n  out[10] = b1 * a9 + b4 * a10 + b7 * a11 + b[10];\n  out[11] = b2 * a9 + b5 * a10 + b8 * a11 + b[11];\n\n  return out;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\n/*\n  Convert models to GLB with:\n  node_modules\\.bin\\gltf-pipeline.cmd -t -i src/client/models/box.gltf -o src/client/models/box.glb\n  // The -t tells it not to embed the textures, but just leave the URIs\n */\n\nconst assert = require('assert');\n\nconst geom = require('./geom.js');\nconst glb_parser = require('./glb/parser.js');\nconst { ATTRIBUTE_TYPE_TO_COMPONENTS } = require('./glb/gltf-type-utils.js');\nconst renderer = require('./engine.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\nconst { vec4 } = require('./vmath.js');\n\nexport let load_count = 0;\n\nlet box_glb = 'glTF\\x02\\0\\0\\0\\xCC\\b\\0\\0h\\x05\\0\\0JSON{\"asset\":{\"generator\":\"COLLADA2GLTF\",\"version\":\"2.0\"},\"scene\":0,\"scenes\":[{\"nodes\":[0]}],\"nodes\":[{\"children\":[1],\"matrix\":[1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]},{\"mesh\":0}],\"meshes\":[{\"primitives\":[{\"attributes\":{\"NORMAL\":1,\"POSITION\":2,\"TEXCOORD_0\":3},\"indices\":0,\"mode\":4,\"material\":0}],\"name\":\"Mesh\"}],\"accessors\":[{\"bufferView\":0,\"byteOffset\":0,\"componentType\":5123,\"count\":36,\"max\":[23],\"min\":[0],\"type\":\"SCALAR\"},{\"bufferView\":1,\"byteOffset\":0,\"componentType\":5126,\"count\":24,\"max\":[1,1,1],\"min\":[-1,-1,-1],\"type\":\"VEC3\"},{\"bufferView\":1,\"byteOffset\":288,\"componentType\":5126,\"count\":24,\"max\":[0.5,0.5,0.5],\"min\":[-0.5,-0.5,-0.5],\"type\":\"VEC3\"},{\"bufferView\":2,\"byteOffset\":0,\"componentType\":5126,\"count\":24,\"max\":[6,1],\"min\":[0,0],\"type\":\"VEC2\"}],\"materials\":[{\"pbrMetallicRoughness\":{\"baseColorTexture\":{\"index\":0,\"texCoord\":0},\"metallicFactor\":0,\"baseColorFactor\":[1,1,1,1],\"roughnessFactor\":1},\"name\":\"Texture\",\"emissiveFactor\":[0,0,0],\"alphaMode\":\"OPAQUE\",\"doubleSided\":false}],\"textures\":[{\"sampler\":0,\"source\":0}],\"samplers\":[{\"magFilter\":9729,\"minFilter\":9986,\"wrapS\":10497,\"wrapT\":10497}],\"bufferViews\":[{\"buffer\":0,\"byteOffset\":0,\"byteLength\":72,\"target\":34963},{\"buffer\":0,\"byteOffset\":72,\"byteLength\":576,\"byteStride\":12,\"target\":34962},{\"buffer\":0,\"byteOffset\":648,\"byteLength\":192,\"byteStride\":8,\"target\":34962}],\"buffers\":[{\"name\":\"box_textured\",\"byteLength\":840}]}H\\x03\\0\\0BIN\\0\\0\\0\\x01\\0\\x02\\0\\x03\\0\\x02\\0\\x01\\0\\x04\\0\\x05\\0\\x06\\0\\x07\\0\\x06\\0\\x05\\0\\b\\0\\t\\0\\n\\0\\x0B\\0\\n\\0\\t\\0\\f\\0\\r\\0\\x0E\\0\\x0F\\0\\x0E\\0\\r\\0\\x10\\0\\x11\\0\\x12\\0\\x13\\0\\x12\\0\\x11\\0\\x14\\0\\x15\\0\\x16\\0\\x17\\0\\x16\\0\\x15\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\xC0@\\0\\0\\0\\0\\0\\0\\xA0@\\0\\0\\0\\0\\0\\0\\xC0@\\xFE\\xFF\\x7F?\\0\\0\\xA0@\\xFE\\xFF\\x7F?\\0\\0\\x80@\\0\\0\\0\\0\\0\\0\\xA0@\\0\\0\\0\\0\\0\\0\\x80@\\0\\0\\x80?\\0\\0\\xA0@\\0\\0\\x80?\\0\\0\\0@\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0@\\0\\0\\x80?\\0\\0\\x80?\\0\\0\\x80?\\0\\0@@\\0\\0\\0\\0\\0\\0\\x80@\\0\\0\\0\\0\\0\\0@@\\0\\0\\x80?\\0\\0\\x80@\\0\\0\\x80?\\0\\0@@\\0\\0\\0\\0\\0\\0\\0@\\0\\0\\0\\0\\0\\0@@\\0\\0\\x80?\\0\\0\\0@\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\xFE\\xFF\\x7F?\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\x80?\\xFE\\xFF\\x7F?';\n{\n  let arr = new Uint8Array(box_glb.length);\n  for (let ii = 0; ii < box_glb.length; ++ii) {\n    arr[ii] = box_glb.charCodeAt(ii);\n  }\n  box_glb = arr.buffer;\n}\n\nexport let models = {};\n\nexport let default_vshader;\nexport let default_fshader;\n\nfunction initShaders() {\n  default_vshader = shaders.create('glov/shaders/default.vp');\n  default_fshader = shaders.create('glov/shaders/default.fp');\n}\n\nfunction Model(url) {\n  this.url = url;\n  let idx = url.lastIndexOf('/');\n  if (idx !== -1) {\n    this.base_url = url.slice(0, idx + 1);\n  } else {\n    this.base_url = '';\n  }\n}\n\nModel.prototype.load = function () {\n  ++load_count;\n  let xhr = new XMLHttpRequest();\n  xhr.open('GET', this.url, true);\n  xhr.responseType = 'arraybuffer';\n  xhr.onload = () => {\n    --load_count;\n    try {\n      let array_buffer = xhr.response; // Note: not xhr.responseText\n      if ((xhr.status === 200 || xhr.status === 0) && array_buffer) {\n        this.parse(array_buffer);\n      }\n    } catch (e) {\n      window.onerror('Model loading error', 'models.js', 0, 0, e);\n    }\n  };\n  xhr.send(null);\n};\n\nconst skip_attr = {\n  'TANGENT': true\n};\n\nModel.prototype.parse = function (glb_data) {\n  let glb = glb_parser.parse(glb_data);\n  if (!glb) {\n    return;\n  }\n  // Make Geoms for each primitives within each mesh\n  let glb_json = glb.getJSON();\n  let objs = [];\n  for (let ii = 0; ii < glb_json.meshes.length; ++ii) {\n    let mesh = glb_json.meshes[ii];\n    for (let jj = 0; jj < mesh.primitives.length; ++jj) {\n      let primitives = mesh.primitives[jj];\n      let material = glb_json.materials[primitives.material];\n      let texture = null;\n      if (material) {\n        // Just grabbing the base color texture, nothing else\n        let bct = (material.pbrMetallicRoughness || {}).baseColorTexture || {};\n        let texture_def = glb_json.textures && glb_json.textures[bct.index] || {};\n        let sampler_def = glb_json.samplers && glb_json.samplers[texture_def.sampler] || {};\n        let image = glb_json.images && glb_json.images[texture_def.source] || {};\n        if (image.uri) {\n          let params = {\n            url: `${this.base_url}${image.uri}`,\n            filter_mag: sampler_def.magFilter,\n            filter_min: sampler_def.minFilter,\n            wrap_s: sampler_def.wrapS,\n            wrap_t: sampler_def.wrapT\n          };\n          texture = textures.load(params);\n        }\n      }\n      let format = [];\n      let buffers = [];\n      let bidx = [];\n      let total_size = 0;\n      let vert_count = 0;\n      for (let attr in primitives.attributes) {\n        if (skip_attr[attr]) {\n          continue;\n        }\n        assert(shaders.semantic[attr] !== undefined);\n        let accessor = glb_json.accessors[primitives.attributes[attr]];\n        assert.equal(accessor.componentType, 5126); // F32\n        let geom_format = gl.FLOAT;\n        let geom_count = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n        assert(geom_count);\n        let my_vert_count = accessor.count /* / geom_count*/;\n        if (!vert_count) {\n          vert_count = my_vert_count;\n        } else {\n          assert.equal(vert_count, my_vert_count);\n        }\n        format.push([shaders.semantic[attr], geom_format, geom_count]);\n        let buffer = glb.getBuffer(accessor);\n        buffers.push(buffer);\n        bidx.push(0);\n        total_size += buffer.length;\n      }\n      // Interleave\n      let verts = new Float32Array(total_size);\n      let idx = 0;\n      for (let vert = 0; vert < vert_count; ++vert) {\n        for (let attr = 0; attr < format.length; ++attr) {\n          for (let kk = 0; kk < format[attr][2]; ++kk) {\n            verts[idx++] = buffers[attr][bidx[attr]++];\n          }\n        }\n      }\n      // Get indices\n      let accessor = glb_json.accessors[primitives.indices];\n      assert(accessor); // must be an indexed primitive set\n      assert.equal(accessor.type, 'SCALAR');\n      let idxs = glb.getBuffer(accessor);\n      if (accessor.componentType === 5125) {\n        // Uint32\n        assert(vert_count < 65536); // Fits in 16-bits\n        // Just convert to 16-bit\n        idxs = new Uint16Array(idxs);\n      } else {\n        assert.equal(accessor.componentType, 5123); // Uint16\n      }\n      objs.push({\n        geom: geom.create(format, verts, idxs, primitives.mode),\n        texture\n      });\n    }\n  }\n  // TODO: Something with nodes to tie together and position the meshes\n  this.data = {\n    objs\n    // glb, - Don't keep this, release it and any unreferenced data/buffers\n  };\n};\n\nModel.prototype.draw = function (mat) {\n  renderer.updateMatrices(mat); // before setting shader\n  shaders.bind(default_vshader, default_fshader, {\n    color: vec4(1, 1, 1, 1)\n  });\n  let objs = this.data.objs;\n  for (let ii = 0; ii < objs.length; ++ii) {\n    let obj = objs[ii];\n    if (obj.texture) {\n      textures.bind(0, obj.texture);\n    }\n    obj.geom.draw();\n  }\n};\n\n// Just draw the geometry, without any other binding\nModel.prototype.drawGeom = function () {\n  let objs = this.data.objs;\n  for (let ii = 0; ii < objs.length; ++ii) {\n    let obj = objs[ii];\n    obj.geom.draw();\n  }\n};\n\nexport function load(url) {\n  if (models[url]) {\n    return models[url];\n  }\n  let model = models[url] = new Model(url);\n  model.data = models.box.data; // stub until loaded\n  model.load();\n  return model;\n}\n\nexport function startup() {\n  initShaders();\n  let model_box = models.box = new Model('box');\n  model_box.parse(box_glb);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst { filewatchStartup } = require('./filewatch.js');\nconst packet = require('../../common/packet.js');\nconst subscription_manager = require('./subscription_manager.js');\nconst WSClient = require('./wsclient.js').WSClient;\nconst wscommon = require('../../common/wscommon.js');\n\nlet client;\nlet subs;\n\nexport function init(params) {\n  params = params || {};\n  if (params.pver) {\n    wscommon.PROTOCOL_VERSION = params.pver;\n  }\n  if (String(document.location).match(/^https?:\\/\\/localhost/)) {\n    console.log('PacketDebug: ON');\n    packet.default_flags |= packet.PACKET_DEBUG;\n  }\n  client = new WSClient(params.path);\n  subs = subscription_manager.create(client);\n  subs.auto_create_user = Boolean(params.auto_create_user);\n  window.subs = subs; // for debugging\n  exports.subs = subs;\n  exports.client = client;\n  filewatchStartup(client);\n\n  if (params.engine) {\n    params.engine.addTickFunc(dt => {\n      subs.tick(dt);\n    });\n  }\n}\n\nconst build_timestamp_string = new Date(Number(BUILD_TIMESTAMP)).toISOString().replace('T', ' ').slice(0, -8);\nexport function buildString() {\n  return build_timestamp_string;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n//////////////////////////////////////////////////////////////////////////\n// Particle System Spec\n\n/*\n// Definitions\n// value = number or\n// value = [base, add_max] -> generates a number in the range [base, base + add_max)\nlet def_fire = {\n  particles: {\n    fire: {\n      blend: 'additive',\n      texture: 'fire.png',\n      color: [1,1,1,1], // multiplied by animation track, default 1,1,1,1, can be omitted\n      color_track: [ // just values, NOT random range\n        { t: 0.0, v: [1,0.4,0.4,1] },\n        { t: 0.7, v: [1,0,0,1] },\n        { t: 0.9, v: [0.2,0,0,1] },\n        { t: 1.0, v: [0,0,0,1] },\n      ],\n      size: [[32,16], [32,16]], // multiplied by animation track\n      size_track: [ // just values, NOT random range\n        { t: 0.0, v: [1,1] },\n        { t: 0.4, v: [0.5,0.5] },\n        { t: 0.7, v: [1,1] },\n        { t: 1.0, v: [1.5,1.5] },\n      ],\n      accel: [0,0],\n      rot: [0,360], // degrees\n      rot_vel: [10,2], // degrees per second\n      lifespan: [450,0], // milliseconds\n      kill_time_accel: 5,\n    },\n  },\n  emitters: {\n    fire: {\n      particle: 'fire',\n      // Random ranges affect each emitted particle:\n      pos: [[0,28], [0,28]],\n      vel: [0,0],\n      emit_rate: [60,20], // emissions per second\n      // Random ranges only calculated upon instantiation:\n      emit_time: [0,Infinity],\n      emit_initial: 10,\n    },\n  },\n  system_lifespan: Infinity, // must be manually killed\n};\n\n// Usage\nlet system = glov_engine.glov_particles.createSystem(def_fire, [50, 50, Z.PARTICLES]);\nsystem.updatePos(75, 75);\nsystem.killSoft(); // stops emitting and speeds up particles by kill_time_accel\nsystem.killHard(); // immediately stops drawing\n\n*/\n\n//////////////////////////////////////////////////////////////////////////\n// Implementation\n\nconst assert = require('assert');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { vec2, v2copy, v2lerp, v2mul } = require('./vmath.js');\nconst { vec3, vec4, v3add, v4copy, v4lerp, v4mul } = require('./vmath.js');\n\nconst blend_map = {\n  alpha: sprites.BLEND_ALPHA,\n  additive: sprites.BLEND_ADDITIVE\n};\n\nexport function preloadParticleData(particle_data) {\n  // Preload all referenced particle textures\n  for (let key in particle_data.defs) {\n    let def = particle_data.defs[key];\n    for (let part_name in def.particles) {\n      let part_def = def.particles[part_name];\n      textures.load({ url: `img/${part_def.texture}.png` });\n    }\n  }\n}\n\n// Expect all values to be a pair of [base, add_max]\nfunction normalizeValue(v) {\n  if (v instanceof Float32Array && v.length >= 2) {\n    return v;\n  } else if (typeof v === 'number') {\n    return vec2(v, 0);\n  } else if (Array.isArray(v) || v instanceof Float32Array) {\n    // already an array, convert to Vec2\n    return vec2(v[0] || 0, v[1] || 0);\n  } else {\n    return assert(false);\n  }\n}\n\nfunction normalizeValueVec(vec, length) {\n  assert(length);\n  assert(Array.isArray(vec));\n  let ret = new Array(length);\n  for (let ii = 0; ii < length; ++ii) {\n    ret[ii] = normalizeValue(vec[ii]);\n  }\n  return ret;\n}\n\nfunction normalizeParticle(def, particle_manager) {\n  if (!def.normalized) {\n    let norm = def.normalized = {\n      blend: blend_map[def.blend] || sprites.BLEND_ALPHA,\n      texture: textures.load({ url: def.texture ? `img/${def.texture}.png` : 'img/glov/util_circle.png' }),\n      color: normalizeValueVec(def.color || [1, 1, 1, 1], 4),\n      color_track: null,\n      size: normalizeValueVec(def.size || [1, 1], 2),\n      size_track: null,\n      accel: normalizeValueVec(def.accel || [0, 0, 0], 3),\n      rot: normalizeValue(def.rot || 0),\n      rot_vel: normalizeValue(def.rot || 0),\n      lifespan: normalizeValue(def.lifespan || 1000),\n      kill_time_accel: normalizeValue(def.kill_time_accel || 1)\n    };\n    assert(norm.kill_time_accel[0] >= 1); // cannot slow down on kill!\n    if (def.color_track && def.color_track.length) {\n      assert(def.color_track.length > 1);\n      norm.color_track = [];\n      for (let ii = 0; ii < def.color_track.length; ++ii) {\n        let e = def.color_track[ii];\n        assert(typeof e.t === 'number');\n        let arr = new Float32Array(5);\n        arr[0] = e.v[0];\n        arr[1] = e.v[1];\n        arr[2] = e.v[2];\n        arr[3] = e.v[3];\n        arr[4] = e.t;\n        norm.color_track.push(arr);\n      }\n    }\n    if (def.size_track && def.size_track.length) {\n      assert(def.size_track.length > 1);\n      norm.size_track = [];\n      for (let ii = 0; ii < def.size_track.length; ++ii) {\n        let e = def.size_track[ii];\n        assert(typeof e.t === 'number');\n        let arr = new Float32Array(3);\n        arr[0] = e.v[0];\n        arr[1] = e.v[1];\n        arr[2] = e.t;\n        norm.size_track.push(arr);\n      }\n    }\n  }\n  return def.normalized;\n}\n\nfunction findParticle(particles, name) {\n  assert(particles[name] !== undefined);\n  return particles[name];\n}\n\nfunction normalizeEmitter(def, part_map) {\n  if (!def.normalized) {\n    def.normalized = {\n      part_idx: findParticle(part_map, def.particle),\n      pos: normalizeValueVec(def.pos || [0, 0, 0], 3),\n      vel: normalizeValueVec(def.vel || [0, 0, 0], 3),\n      emit_rate: normalizeValue(def.emit_rate || 10),\n      emit_time: normalizeValueVec(def.emit_time || [0, Infinity], 2),\n      emit_initial: normalizeValue(def.emit_initial || 1)\n    };\n    // convert particles per second to ms per emission\n    let min = def.normalized.emit_rate[0];\n    let max = def.normalized.emit_rate[0] + def.normalized.emit_rate[1];\n    def.normalized.emit_rate[0] = 1000 / max;\n    def.normalized.emit_rate[1] = 1000 / min;\n    assert(def.normalized.emit_rate[0] > 1); // Not more than 1000 per second, that's ridic'.\n  }\n  return def.normalized;\n}\n\nfunction normalizeDef(def, particle_manager) {\n  if (!def.normalized) {\n    let norm = def.normalized = {\n      system_lifespan: normalizeValue(def.system_lifespan || Infinity),\n      particles: [],\n      emitters: []\n    };\n    let part_map = {};\n    for (let key in def.particles) {\n      part_map[key] = norm.particles.length;\n      norm.particles.push(normalizeParticle(def.particles[key], particle_manager));\n    }\n    for (let key in def.emitters) {\n      norm.emitters.push(normalizeEmitter(def.emitters[key], part_map));\n    }\n  }\n  return def.normalized;\n}\n\nfunction instValue(v) {\n  return v[0] + Math.random() * v[1];\n}\nfunction instValueVec(v) {\n  let ret = new Float32Array(v.length);\n  for (let ii = 0; ii < v.length; ++ii) {\n    ret[ii] = instValue(v[ii]);\n  }\n  return ret;\n}\n\nlet temp_color = vec4();\nlet temp_color2 = vec4();\nlet temp_size = vec2();\nlet temp_size2 = vec2();\n// let temp_pos = v3allocZero();\n\nclass ParticleSystem {\n  constructor(parent, def_in, pos) {\n    assert(pos.length === 3);\n    this.parent = parent;\n    this.def = normalizeDef(def_in, parent);\n    this.system_lifespan = instValue(this.def.system_lifespan);\n    assert(this.system_lifespan > 0);\n    this.age = 0;\n    this.kill_hard = false;\n    this.kill_soft = false;\n    this.pos = vec3(pos[0], pos[1], pos[2]);\n    this.part_sets = [];\n    for (let ii = 0; ii < this.def.particles.length; ++ii) {\n      let def = this.def.particles[ii];\n      let part_set = {\n        def,\n        parts: []\n      };\n      this.part_sets.push(part_set);\n    }\n    this.emitters = [];\n    // Instantiate emitters\n    for (let ii = 0; ii < this.def.emitters.length; ++ii) {\n      let def = this.def.emitters[ii];\n      let emitter = {\n        def,\n        emit_time: instValueVec(def.emit_time),\n        countdown: 0,\n        started: false,\n        stopped: false\n      };\n      this.emitters.push(emitter);\n    }\n    // do initial tick for things that have an emit_time[0] of 0 and have an emit_initial\n    this.tick(0);\n  }\n\n  tickParticle(part, dt) {\n    // eslint-disable-line class-methods-use-this\n    let def = part.def;\n    part.age += dt;\n    let age_norm = part.age / part.lifespan;\n    if (age_norm >= 1) {\n      return true;\n    }\n\n    // Pos, vel - incrementally computed\n    let dts = dt / 1000;\n    part.pos[0] += part.vel[0] * dts;\n    part.pos[1] += part.vel[1] * dts;\n    part.pos[2] += part.vel[2] * dts;\n    part.vel[0] += part.accel[0] * dts;\n    part.vel[1] += part.accel[1] * dts;\n    part.vel[2] += part.accel[2] * dts;\n\n    // Color, size, rot - explicitly computed\n    v4copy(temp_color, part.color, temp_color);\n    if (def.color_track) {\n      if (age_norm < def.color_track[0][4]) {\n        v4mul(temp_color, temp_color, def.color_track[0]);\n      } else if (age_norm >= def.color_track[def.color_track.length - 1][4]) {\n        v4mul(temp_color, temp_color, def.color_track[def.color_track.length - 1]);\n      } else {\n        for (let ii = 0; ii < def.color_track.length - 1; ++ii) {\n          if (age_norm >= def.color_track[ii][4] && age_norm < def.color_track[ii + 1][4]) {\n            let weight = (age_norm - def.color_track[ii][4]) / (def.color_track[ii + 1][4] - def.color_track[ii][4]);\n            v4lerp(temp_color2, weight, def.color_track[ii], def.color_track[ii + 1]);\n            v4mul(temp_color, temp_color, temp_color2);\n            break;\n          }\n        }\n      }\n    }\n\n    v2copy(temp_size, part.size);\n    if (def.size_track) {\n      if (age_norm < def.size_track[0][4]) {\n        v2mul(temp_size, temp_size, def.size_track[0]);\n      } else if (age_norm >= def.size_track[def.size_track.length - 1][4]) {\n        v2mul(temp_size, temp_size, def.size_track[def.size_track.length - 1]);\n      } else {\n        for (let ii = 0; ii < def.size_track.length - 1; ++ii) {\n          if (age_norm >= def.size_track[ii][4] && age_norm < def.size_track[ii + 1][4]) {\n            let weight = (age_norm - def.size_track[ii][4]) / (def.size_track[ii + 1][4] - def.size_track[ii][4]);\n            v2lerp(temp_size2, weight, def.size_track[ii], def.size_track[ii + 1]);\n            v2mul(temp_size, temp_size, temp_size2);\n            break;\n          }\n        }\n      }\n    }\n\n    // TODO: let rot = part.rot + part.age * part.rot_vel;\n\n    // TODO: draw using:\n    //   rot\n    let w = part.size[0];\n    let h = part.size[1];\n    let x = part.pos[0] - w / 2;\n    let y = part.pos[1] - h / 2;\n    let z = part.pos[2];\n    sprites.queueraw4([def.texture], x, y, x, y + h, x + w, y + h, x + w, y, z, 0, 0, 1, 1, temp_color, null, null, def.blend);\n\n    return false;\n  }\n\n  tickPartSet(dt_orig, part_set) {\n    //let def = part_set.def;\n    let parts = part_set.parts;\n    for (let ii = parts.length - 1; ii >= 0; --ii) {\n      let part = parts[ii];\n      let dt = this.kill_soft ? dt_orig * part.kill_time_accel : dt_orig;\n      if (this.tickParticle(part, dt)) {\n        parts[ii] = parts[parts.length - 1];\n        parts.pop();\n      }\n    }\n  }\n\n  emitParticle(init_dt, emitter) {\n    let emitter_def = emitter.def;\n    let part_set = this.part_sets[emitter_def.part_idx];\n    let def = part_set.def;\n    let pos = instValueVec(emitter_def.pos, 3);\n    v3add(pos, pos, this.pos);\n    // PERFTODO: Make the whole Particle just a data[] Float32Array\n    let part = {\n      def,\n      pos,\n      color: instValueVec(def.color, 4),\n      size: instValueVec(def.size, 4),\n      vel: instValueVec(emitter_def.vel, 3),\n      accel: instValueVec(def.accel, 3),\n      rot: instValue(def.rot),\n      rot_vel: instValue(def.rot_vel),\n      lifespan: instValue(def.lifespan),\n      kill_time_accel: instValue(def.kill_time_accel),\n      age: 0\n    };\n    if (!this.tickParticle(part, init_dt)) {\n      part_set.parts.push(part);\n    }\n  }\n\n  tickEmitter(dt, emitter) {\n    let def = emitter.def;\n    // check for initial emission\n    if (!emitter.started && this.age >= emitter.emit_time[0]) {\n      emitter.started = true;\n      // ignore time before we started emitting\n      dt = this.age - emitter.emit_time[0];\n      let num = instValue(def.emit_initial);\n      for (let ii = 0; ii < num; ++ii) {\n        this.emitParticle(dt, emitter);\n      }\n      emitter.countdown = instValue(def.emit_rate);\n    }\n    if (emitter.started && !emitter.stopped) {\n      // should we stop?\n      let remaining_dt = dt;\n      let emit_dt = dt;\n      if (this.age >= emitter.emit_time[1]) {\n        emitter.stopped = true;\n        // Do not emit during time after we stopped\n        emit_dt -= this.age - emitter.emit_time[1];\n      }\n      // Emit dt's worth of particles\n      while (emit_dt >= emitter.countdown) {\n        emit_dt -= emitter.countdown;\n        remaining_dt -= emitter.countdown;\n        emitter.countdown = instValue(def.emit_rate);\n        this.emitParticle(remaining_dt, emitter);\n      }\n      emitter.countdown -= emit_dt;\n    }\n  }\n\n  tick(dt) {\n    if (this.kill_hard) {\n      return true;\n    }\n    // tick existing particles\n    for (let ii = this.part_sets.length - 1; ii >= 0; --ii) {\n      this.tickPartSet(dt, this.part_sets[ii]);\n    }\n    // advance time and spawn new ones (with partial ticks)\n    this.age += dt;\n    for (let ii = 0; ii < this.emitters.length; ++ii) {\n      this.tickEmitter(dt, this.emitters[ii]);\n    }\n\n    return this.age >= this.system_lifespan; // kill if past lifespan\n  }\n}\n\nclass ParticleManager {\n  constructor() {\n    this.systems = [];\n  }\n\n  createSystem(def, pos) {\n    let system = new ParticleSystem(this, def, pos);\n    this.systems.push(system);\n    return system;\n  }\n\n  tick(dt) {\n    for (let ii = this.systems.length - 1; ii >= 0; --ii) {\n      if (this.systems[ii].tick(dt)) {\n        this.systems[ii] = this.systems[this.systems.length - 1];\n        this.systems.pop();\n      }\n    }\n  }\n}\n\nexport function create(...args) {\n  return new ParticleManager(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst camera2d = require('./camera2d.js');\nconst { cmd_parse } = require('./cmds.js');\nconst engine = require('./engine.js');\nconst glov_font = require('./font.js');\nconst input = require('./input.js');\nconst { max } = Math;\nconst settings = require('./settings.js');\nconst ui = require('./ui.js');\nconst { vec4, v3copy } = require('./vmath.js');\n\nlet metrics = [];\n\nconst METRIC_PAD = 2;\n\nlet bg_default = vec4(0, 0, 0, 0.5);\nlet bg_mouse_over = vec4(0, 0, 0, 0.75);\nlet bg_fade = vec4();\n\n// referenced in engine.js\nsettings.register({\n  show_metrics: {\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  },\n  show_fps: {\n    label: 'Show FPS',\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 3]\n  },\n  fps_graph: {\n    label: 'FPS Graph',\n    default_value: 0,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  }\n});\n\nlet fps_style = glov_font.style({\n  outline_width: 2, outline_color: 0x00000080,\n  color: 0xFFFFFFff\n});\n\nexport function addMetric(metric) {\n  if (metric.show_graph) {\n    metric.num_lines = metric.colors.length;\n    metric.history_size = metric.data.history.length / metric.num_lines;\n  }\n  metric.num_labels = Object.keys(metric.labels).length;\n  if (metric.interactable === undefined) {\n    metric.interactable = metric.num_labels > 1 || metric.show_graph;\n  }\n  metrics.push(metric);\n}\n\nfunction showMetric(y, metric) {\n  let font = engine.font;\n  let pad = METRIC_PAD;\n  let METRIC_VALUE_WIDTH = ui.font_height * 2.5;\n  let x = camera2d.x1Real() - METRIC_VALUE_WIDTH - pad;\n  let y0 = y;\n  y += pad;\n  let line_height = ui.font_height;\n  let max_label_w = 0;\n  let max_labels = settings[metric.show_stat];\n  let drew_any = false;\n  let alpha = 1;\n  for (let label in metric.labels) {\n    let value = metric.labels[label]();\n    if (value) {\n      let style = fps_style;\n      if (value.alpha) {\n        alpha = value.alpha;\n        value = value.value;\n        style = glov_font.styleAlpha(fps_style, alpha);\n      }\n      let label_w = font.drawSizedAligned(style, x, y, Z.FPSMETER + 1, line_height, glov_font.ALIGN.HRIGHT, 0, 0, label);\n      max_label_w = max(max_label_w, label_w);\n      font.drawSizedAligned(style, x, y, Z.FPSMETER + 1, line_height, glov_font.ALIGN.HFIT, METRIC_VALUE_WIDTH, 0, value);\n      y += line_height;\n      drew_any = true;\n    }\n    if (! --max_labels) {\n      break;\n    }\n  }\n  let w = METRIC_VALUE_WIDTH + max_label_w + METRIC_PAD;\n  x -= max_label_w + METRIC_PAD;\n\n  if (!drew_any) {\n    return y - pad;\n  }\n\n  y += pad;\n  let bg = bg_default;\n  let pos_param = {\n    x: x - pad,\n    y: y0,\n    w: w + pad * 2,\n    h: y - y0\n  };\n  if (metric.interactable) {\n    if (input.mouseUpEdge(pos_param)) {\n      if (metric.num_labels > 1 && settings[metric.show_stat] <= 1) {\n        settings.set(metric.show_stat, metric.num_labels);\n      } else if (metric.show_graph && !settings[metric.show_graph]) {\n        settings.set(metric.show_graph, 1);\n      } else {\n        if (metric.show_graph) {\n          settings.set(metric.show_graph, 0);\n        }\n        settings.set(metric.show_stat, 1);\n      }\n    }\n    if (input.mouseOver(pos_param)) {\n      bg = bg_mouse_over;\n    }\n  }\n  if (alpha !== 1) {\n    bg_fade[3] = bg[3] * alpha;\n    bg = v3copy(bg_fade, bg);\n  }\n  ui.drawRect(pos_param.x, pos_param.y, pos_param.x + pos_param.w, y, Z.FPSMETER, bg);\n  return y;\n}\n\nfunction showMetricGraph(y, metric) {\n  const small = engine.game_height < 300;\n  const LINE_WIDTH = small ? 1 : 3;\n  const LINE_PAD = small ? 0 : 1;\n  const LINE_HEIGHT = small ? 64 : 128;\n  const NUM_LINES = metric.history_size - 1;\n  let w = (LINE_WIDTH + LINE_PAD) * NUM_LINES;\n  let x = camera2d.x1Real() - w;\n  let h = LINE_HEIGHT + LINE_PAD * 2;\n  let z = Z.FPSMETER;\n  ui.drawRect(x, y - h, x + w, y, z++, bg_default);\n  x += LINE_PAD;\n  y -= LINE_PAD;\n  let history_index = metric.data.index;\n  let line_scale = LINE_HEIGHT / metric.line_scale_top;\n  for (let ii = 0; ii < NUM_LINES; ii++) {\n    let line_index = (ii + history_index + 1) % metric.history_size * metric.num_lines;\n    let data = metric.data.history;\n    let bar_max = 0;\n    for (let jj = 0; jj < metric.num_lines; jj++) {\n      let line_jj = data[line_index + jj];\n      let bar_min;\n      if (metric.bars_stack) {\n        bar_min = bar_max;\n        bar_max += line_jj;\n      } else {\n        // bars overlap, figure out how big this bar should be relative to next smallest\n        let lesser = 0;\n        for (let kk = 0; kk < metric.num_lines; kk++) {\n          if (kk === jj) {\n            continue;\n          }\n          let line_kk = data[line_index + kk];\n          if ((line_kk < line_jj || line_kk === line_jj && kk < jj) && line_kk > lesser) {\n            lesser = line_kk;\n          }\n        }\n        bar_min = lesser;\n        bar_max = line_jj;\n      }\n      let color = metric.colors[jj];\n      ui.drawRect(x, y - bar_max * line_scale, x + LINE_WIDTH, y - bar_min * line_scale, z, color);\n    }\n    x += LINE_WIDTH + LINE_PAD;\n  }\n  z += NUM_LINES;\n  y -= LINE_HEIGHT + LINE_PAD;\n  return y;\n}\n\nexport function draw() {\n  camera2d.setAspectFixed(engine.game_width, engine.game_height);\n  let y = camera2d.y0Real();\n  let y_graph = camera2d.y1Real();\n  for (let ii = 0; ii < metrics.length; ++ii) {\n    let metric = metrics[ii];\n    if (settings[metric.show_stat]) {\n      y = showMetric(y, metric);\n      y += METRIC_PAD;\n    }\n    if (settings[metric.show_graph]) {\n      y_graph = showMetricGraph(y_graph, metric);\n      y_graph -= METRIC_PAD;\n    }\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nlet user_want_locked = false;\nlet elem;\nlet on_ptr_lock;\n\nexport function isLocked() {\n  return user_want_locked; // Either it's locked, or there's an async attempt to lock it outstanding\n}\n\nfunction pointerLog(msg) {\n  console.log(`PointerLock: ${msg}`); // TODO: Disable this after things settle\n}\n\nexport function exit() {\n  pointerLog('Lock exit requested');\n  user_want_locked = false;\n  document.exitPointerLock();\n}\n\nexport function enter(when) {\n  user_want_locked = true;\n  on_ptr_lock();\n  pointerLog(`Trying pointer lock in response to ${when}`);\n  elem.requestPointerLock();\n}\n\nfunction onPointerLockChange() {\n  if (document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement) {\n    pointerLog('Lock successful');\n    if (!user_want_locked) {\n      pointerLog('User canceled lock');\n      document.exitPointerLock();\n    }\n  } else {\n    if (user_want_locked) {\n      pointerLog('Lock lost');\n      user_want_locked = false;\n    }\n  }\n}\n\nfunction onPointerLockError(e) {\n  pointerLog('Error');\n  user_want_locked = false;\n}\n\nexport function startup(_elem, _on_ptr_lock) {\n  elem = _elem;\n  on_ptr_lock = _on_ptr_lock;\n\n  elem.requestPointerLock = elem.requestPointerLock || elem.mozRequestPointerLock || elem.webkitRequestPointerLock || function () {/* nop */};\n  document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock || function () {/* nop */};\n\n  document.addEventListener('pointerlockchange', onPointerLockChange, false);\n  document.addEventListener('mozpointerlockchange', onPointerLockChange, false);\n  document.addEventListener('webkitpointerlockchange', onPointerLockChange, false);\n\n  document.addEventListener('pointerlockerror', onPointerLockError, false);\n  document.addEventListener('mozpointerlockerror', onPointerLockError, false);\n  document.addEventListener('webkitpointerlockerror', onPointerLockError, false);\n}","/* eslint no-extend-native:off,no-var:off,func-style:off,no-invalid-this:off */\n\n// TypedArray.slice - not supported on IE, some older Safari\nif (!Uint8Array.prototype.slice) {\n  Object.defineProperty(Uint8Array.prototype, 'slice', {\n    value: function (begin, end) {\n      // PERFTODO: If we use this on any significant audience, this can be likely\n      // way faster by not making a temporary Array in the middle\n      return new Uint8Array(Array.prototype.slice.call(this, begin, end));\n    }\n  });\n  Object.defineProperty(Int8Array.prototype, 'slice', {\n    value: function (begin, end) {\n      return new Int8Array(Array.prototype.slice.call(this, begin, end));\n    }\n  });\n  Object.defineProperty(Int32Array.prototype, 'slice', {\n    value: function (begin, end) {\n      return new Int32Array(Array.prototype.slice.call(this, begin, end));\n    }\n  });\n  Object.defineProperty(Float32Array.prototype, 'slice', {\n    value: function (begin, end) {\n      return new Float32Array(Array.prototype.slice.call(this, begin, end));\n    }\n  });\n}\n\nif (!Int32Array.prototype.join) {\n  Object.defineProperty(Int32Array.prototype, 'join', {\n    value: function (delim) {\n      return Array.prototype.join.call(this, delim);\n    }\n  });\n}\n\nif (!Uint8Array.prototype.fill) {\n  var fill = function (value, begin, end) {\n    if (end === undefined) {\n      end = this.length;\n    }\n    for (var ii = begin || 0; ii < end; ++ii) {\n      this[ii] = value;\n    }\n    return this;\n  };\n  Object.defineProperty(Uint8Array.prototype, 'fill', {\n    value: fill\n  });\n  Object.defineProperty(Int16Array.prototype, 'fill', {\n    value: fill\n  });\n  Object.defineProperty(Int32Array.prototype, 'fill', {\n    value: fill\n  });\n  Object.defineProperty(Uint32Array.prototype, 'fill', {\n    value: fill\n  });\n}\n\nif (!Int16Array.prototype.sort) {\n  var cmpDefault = function (a, b) {\n    return a - b;\n  };\n  var sort = function (cmp) {\n    Array.prototype.sort.call(this, cmp || cmpDefault);\n  };\n  Object.defineProperty(Int16Array.prototype, 'sort', {\n    value: sort\n  });\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n// Alea PRNG\n// Based on code from Johannes BaagÃ¸e <baagoe@baagoe.com>, 2010\n// From https://github.com/coverslide/node-alea/blob/master/alea.js, MIT Licensed\n// From http://baagoe.com/en/RandomMusings/javascript/\n\nexport function mashString(data) {\n  let n = 0xefc8249d;\n  for (let i = 0; i < data.length; i++) {\n    n += data.charCodeAt(i);\n    let h = 0.02519603282416938 * n;\n    n = h >>> 0;\n    h -= n;\n    h *= n;\n    n = h >>> 0;\n    h -= n;\n    n += h * 0x100000000; // 2^32\n  }\n  return n >>> 0;\n  // return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n}\n\nfunction Mash() {\n  this.n = 0xc06c5fc8; // 0xefc8249d;\n}\nMash.prototype.mash = function (data) {\n  let n = this.n + data;\n  let h = 0.02519603282416938 * n;\n  n = h >>> 0;\n  h -= n;\n  h *= n;\n  n = h >>> 0;\n  h -= n;\n  n += h * 0x100000000; // 2^32\n  this.n = n;\n  return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n};\n\nfunction Alea(seed) {\n  this.reseed(seed);\n}\nAlea.prototype.reseed = function (seed) {\n  // this.s0/s1/s2 are floating point between 0 and 1\n  // this.c is a 32-bit int\n  this.c = 1;\n  let mash = new Mash();\n  // Hard-coded results of initial mash(' ') found in original implementation\n  this.s0 = 0.3014581324532628;\n  this.s1 = 0.2643220406025648;\n  this.s2 = 0.7516536582261324;\n\n  this.s0 -= mash.mash(seed);\n  if (this.s0 < 0) {\n    this.s0 += 1;\n  }\n  this.s1 -= mash.mash(seed);\n  if (this.s1 < 0) {\n    this.s1 += 1;\n  }\n  this.s2 -= mash.mash(seed);\n  if (this.s2 < 0) {\n    this.s2 += 1;\n  }\n};\nAlea.prototype.step = function () {\n  let t = 2091639 * this.s0 + this.c * 2.3283064365386963e-10; // 2^-32\n  this.s0 = this.s1;\n  this.s1 = this.s2;\n  return this.s2 = t - (this.c = t | 0);\n};\nAlea.prototype.uint32 = function () {\n  return this.step() * 0x100000000; // 2^32\n};\nAlea.prototype.fract53 = function () {\n  return this.step() + (this.step() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n};\nAlea.prototype.random = Alea.prototype.step;\nAlea.prototype.range = function (range) {\n  return this.step() * range | 0;\n};\nAlea.prototype.floatBetween = function (a, b) {\n  return a + (b - a) * this.random();\n};\n\n// Note: import/export probably needs more precision than F32 or JSON provide\n// Alea.prototype.exportState = function () {\n//   return [this.s0, this.s1, this.s2, this.c];\n// };\n// Alea.prototype.importState = function (i) {\n//   this.s0 = i[0];\n//   this.s1 = i[1];\n//   this.s2 = i[2];\n//   this.c = i[3];\n// };\n\nexport function randCreate(seed) {\n  return new Alea(seed);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst { titleCase } = require('../../common/util.js');\nconst { cmd_parse } = require('./cmds.js');\n\nexports.true = true; // for perf.js\n\nexport function get(key) {\n  return exports[key];\n}\n\nexport function set(key, value) {\n  if (exports[key] !== value) {\n    cmd_parse.handle(null, `${key} ${value}`, null); // uses default cmd_parse handler\n  }\n}\n\nexport function register(defs) {\n  Object.keys(defs).forEach(function (key) {\n    let def = defs[key];\n    exports[key] = def.default_value;\n    cmd_parse.registerValue(key, {\n      type: def.type,\n      label: def.label || titleCase(key.replace(/_/g, ' ')),\n      range: def.range,\n      get: () => exports[key],\n      set: v => exports[key] = v,\n      store: true,\n      ver: def.ver,\n      help: def.help,\n      usage: def.usage\n    });\n  });\n}\n\nregister({\n  show_metrics: {\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  },\n  max_fps: {\n    label: 'Max FPS',\n    default_value: 0,\n    type: cmd_parse.TYPE_FLOAT\n  }\n});","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst engine = require('./engine.js');\nconst { filewatchOn } = require('./filewatch.js');\nconst { matchAll } = require('../../common/util.js');\nconst { texturesUnloadDynamic } = require('./textures.js');\nconst { webFSGetFile } = require('./webfs.js');\n\nlet last_id = 0;\n\nlet bound_prog = null;\n\nexport const semantic = {\n  'ATTR0': 0,\n  'POSITION': 0,\n  'ATTR1': 1,\n  'COLOR': 1,\n  'COLOR_0': 1,\n  'ATTR2': 2,\n  'TEXCOORD': 2,\n  'TEXCOORD_0': 2,\n  'ATTR3': 3,\n  'NORMAL': 3,\n  'ATTR4': 4,\n  'TEXCOORD_1': 4\n};\n\nexport let globals;\nlet defines;\n\nlet error_fp;\nlet error_vp;\n\nlet shaders = [];\n\nconst vp_attr_regex = /attribute [^ ]+ ([^ ;]+);/g;\nconst uniform_regex = /uniform (?:(?:low|medium|high)p )?((?:(?:vec|mat)\\d(?:x\\d)?|float) [^ ;]+);/g;\nconst sampler_regex = /uniform sampler(?:2D|Cube) ([^ ;]+);/g;\nconst include_regex = /\\n#include \"([^\"]+)\"/g;\n\nconst type_size = {\n  float: 1,\n  vec2: 2 * 1,\n  vec3: 3 * 1,\n  vec4: 4 * 1,\n  mat3: 3 * 3,\n  mat4: 4 * 4\n};\n\nlet includes = {};\n\nfunction loadInclude(key) {\n  let text = webFSGetFile(includes[key].filename, 'text');\n  includes[key].text = `\\n// from include \"${key}\":\\n${text}\\n`;\n}\n\nexport function addInclude(key, filename) {\n  assert(!includes[key]);\n  includes[key] = { filename };\n  loadInclude(key);\n}\n\nlet report_queued = false;\nlet shader_errors;\nfunction reportShaderError(err) {\n  function doReport() {\n    assert(false, `Shader error(s):\\n    ${shader_errors.join('\\n    ')}`);\n    shader_errors = null;\n  }\n  if (!report_queued) {\n    setTimeout(doReport, 1000);\n    report_queued = true;\n    shader_errors = [];\n  }\n  shader_errors.push(err);\n}\n\nfunction parseIncludes(text) {\n  let supplied_uniforms = {};\n  text.replace(uniform_regex, function (str, key) {\n    supplied_uniforms[key] = true;\n  });\n  text = text.replace(include_regex, function (str, filename) {\n    let replacement = includes[filename];\n    if (!replacement) {\n      console.error(`Could not evaluate ${str}`);\n      return str;\n    }\n    replacement = replacement.text;\n    // Remove duplicate uniforms\n    replacement = replacement.replace(uniform_regex, function (str2, key) {\n      if (supplied_uniforms[key]) {\n        return `// [removed ${key}]`;\n      }\n      supplied_uniforms[key] = true;\n      return str2;\n    });\n    return replacement;\n  });\n  return text;\n}\n\nconst webgl2_header = ['#version 300 es', '#define WEBGL2'].join('\\n');\nconst webgl2_header_fp = [webgl2_header, '#define varying in', 'out lowp vec4 fragColor;', '#define gl_FragColor fragColor', '#define texture2D texture', '#define textureCube texture', ''].join('\\n');\nconst webgl2_header_vp = [webgl2_header, '#define varying out', '#define attribute in', ''].join('\\n');\n\nfunction Shader(params) {\n  let { filename } = params;\n  assert.equal(typeof filename, 'string');\n  let type = filename.endsWith('.fp') ? gl.FRAGMENT_SHADER : filename.endsWith('.vp') ? gl.VERTEX_SHADER : 0;\n  assert(type);\n  this.type = type;\n  this.filename = filename;\n  this.shader = gl.createShader(type);\n  this.id = ++last_id;\n  if (type === gl.VERTEX_SHADER) {\n    this.programs = {};\n  }\n  shaders.push(this);\n  this.compile();\n}\n\nShader.prototype.compile = function () {\n  let { type, filename } = this;\n  let header = '';\n  let text = webFSGetFile(filename, 'text');\n  if (engine.webgl2 && text.indexOf('#pragma WebGL2') !== -1) {\n    header = type === gl.VERTEX_SHADER ? webgl2_header_vp : webgl2_header_fp;\n  }\n  text = `${header}${defines}${text}`;\n  text = parseIncludes(text);\n  text = text.replace(/#pragma WebGL2?/g, '');\n  if (type === gl.VERTEX_SHADER) {\n    this.attributes = matchAll(text, vp_attr_regex);\n    // Ensure they are known names so we can give them indices\n    // Add to semantic[] above as needed\n    this.attributes.forEach(v => assert(semantic[v] !== undefined));\n  } else {\n    this.samplers = matchAll(text, sampler_regex);\n    // Ensure all samplers end in a unique number\n    let found = [];\n    this.samplers.forEach(v => {\n      let num = Number(v.slice(-1));\n      assert(!isNaN(num));\n      assert(!found[num]);\n      found[num] = true;\n    });\n  }\n  this.uniforms = matchAll(text, uniform_regex);\n  // Ensure a known type\n  this.uniforms.forEach(v => {\n    let type_name = v.split(' ')[0];\n    assert(type_size[type_name]);\n  });\n  gl.shaderSource(this.shader, text);\n  gl.compileShader(this.shader);\n\n  if (!gl.getShaderParameter(this.shader, gl.COMPILE_STATUS)) {\n    let error_text = gl.getShaderInfoLog(this.shader);\n    if (error_text) {\n      // sometimes null on iOS\n      error_text = error_text.replace(/\\0/g, '').trim();\n    }\n    console.error(`Error compiling ${filename}: ${error_text}`);\n    reportShaderError(`${filename}: ${error_text}`);\n    // eslint-disable-next-line newline-per-chained-call\n    console.log(text.split('\\n').map((line, idx) => `${idx + 1}: ${line}`).join('\\n'));\n  }\n};\n\nexport function create(filename) {\n  if (typeof filename === 'object') {\n    return new Shader(filename);\n  }\n  return new Shader({ filename });\n}\n\nfunction uniformSetValue(unif) {\n  switch (unif.width) {// eslint-disable-line default-case\n    case 1:\n      gl.uniform1fv(unif.location, unif.value);\n      break;\n    case 2:\n      gl.uniform2fv(unif.location, unif.value);\n      break;\n    case 3:\n      gl.uniform3fv(unif.location, unif.value);\n      break;\n    case 4:\n      gl.uniform4fv(unif.location, unif.value);\n      break;\n    case 9:\n      gl.uniformMatrix3fv(unif.location, false, unif.value);\n      break;\n    case 16:\n      gl.uniformMatrix4fv(unif.location, false, unif.value);\n      break;\n  }\n}\n\nfunction link(vp, fp) {\n  let prog = vp.programs[fp.id] = {\n    handle: gl.createProgram(),\n    uniforms: null\n  };\n  gl.attachShader(prog.handle, vp.shader);\n  gl.attachShader(prog.handle, fp.shader);\n  // call this for all relevant semantic\n  for (let ii = 0; ii < vp.attributes.length; ++ii) {\n    gl.bindAttribLocation(prog.handle, semantic[vp.attributes[ii]], vp.attributes[ii]);\n  }\n  gl.linkProgram(prog.handle);\n\n  prog.valid = gl.getProgramParameter(prog.handle, gl.LINK_STATUS);\n  if (!prog.valid) {\n    reportShaderError(`Shader link error (${vp.filename} & ${fp.filename}): ${gl.getProgramInfoLog(prog.handle)}`);\n    console.error(`Shader link error: ${gl.getProgramInfoLog(prog.handle)}`);\n  }\n\n  gl.useProgram(prog.handle);\n  bound_prog = prog;\n\n  let uniforms = vp.uniforms.slice(0);\n  for (let ii = 0; ii < fp.uniforms.length; ++ii) {\n    let name = fp.uniforms[ii];\n    if (uniforms.indexOf(name) === -1) {\n      uniforms.push(name);\n    }\n  }\n  prog.uniforms = uniforms.map(v => {\n    v = v.split(' ');\n    let type = v[0];\n    let name = v[1];\n    let count = 1;\n    let m = name.match(/([^[]+)\\[(\\d+)\\]/);\n    if (m) {\n      name = m[1];\n      count = Number(m[2]);\n    }\n    let location = gl.getUniformLocation(prog.handle, name);\n    if (location === null) {\n      // Not in either shader, (commented out?), remove (via filter below)\n      return null;\n    }\n    let width = type_size[type];\n    let size = width * count;\n    let glob = globals[name];\n    let value = new Float32Array(size);\n    // set initial value\n    let unif = {\n      name,\n      size,\n      width,\n      count,\n      value,\n      location,\n      glob\n    };\n    uniformSetValue(unif);\n    return unif;\n  }).filter(v => v);\n\n  for (let ii = 0; ii < fp.samplers.length; ++ii) {\n    let name = fp.samplers[ii];\n    let num = Number(name.slice(-1));\n    let location = gl.getUniformLocation(prog.handle, name);\n    if (location !== null) {\n      gl.uniform1i(location, num);\n    }\n  }\n  return prog;\n}\n\nexport function bind(vp, fp, params) {\n  let prog = vp.programs[fp.id];\n  if (!prog) {\n    prog = link(vp, fp);\n  }\n  if (!prog.valid) {\n    prog = link(vp, error_fp);\n    if (!prog.valid) {\n      prog = link(error_vp, error_fp);\n    }\n    vp.programs[fp.id] = prog;\n  }\n  if (prog !== bound_prog) {\n    bound_prog = prog;\n    gl.useProgram(prog.handle);\n  }\n  for (let ii = 0; ii < prog.uniforms.length; ++ii) {\n    let unif = prog.uniforms[ii];\n    let value = params[unif.name] || unif.glob;\n    if (!value) {\n      continue;\n    }\n    let diff = false;\n    for (let jj = 0; jj < unif.size; ++jj) {\n      if (value[jj] !== unif.value[jj]) {\n        diff = true;\n        break;\n      }\n    }\n    if (diff) {\n      for (let jj = 0; jj < unif.size; ++jj) {\n        unif.value[jj] = value[jj];\n      }\n      uniformSetValue(unif);\n    }\n  }\n}\n\nconst reserved = { WEBGL2: 1 };\nexport function addReservedDefine(key) {\n  reserved[key] = 1;\n}\nlet internal_defines = {};\nfunction applyDefines() {\n  defines = Object.keys(engine.defines).filter(v => !reserved[v]).concat(Object.keys(internal_defines)).map(v => `#define ${v}\\n`).join('');\n}\n\nfunction shaderReload() {\n  if (shaders.length) {\n    window.debugmsg('', true);\n    gl.useProgram(null);\n    for (let ii = 0; ii < shaders.length; ++ii) {\n      let programs = shaders[ii].programs;\n      if (programs) {\n        for (let id in programs) {\n          gl.deleteProgram(programs[id].handle);\n        }\n        shaders[ii].programs = {};\n      }\n    }\n    for (let ii = 0; ii < shaders.length; ++ii) {\n      shaders[ii].compile();\n    }\n    texturesUnloadDynamic();\n  }\n}\n\nexport function handleDefinesChanged() {\n  applyDefines();\n  shaderReload();\n}\n\nexport function setInternalDefines(new_values) {\n  for (let key in new_values) {\n    if (new_values[key]) {\n      internal_defines[key] = new_values[key];\n    } else {\n      delete internal_defines[key];\n    }\n  }\n  handleDefinesChanged();\n}\n\nfunction onShaderChange(filename) {\n  for (let key in includes) {\n    loadInclude(key);\n  }\n  shaderReload();\n}\n\nexport function startup(_globals) {\n  applyDefines();\n  globals = _globals;\n\n  error_fp = create('glov/shaders/error.fp');\n  error_vp = create('glov/shaders/error.vp');\n\n  filewatchOn('.fp', onShaderChange);\n  filewatchOn('.vp', onShaderChange);\n}\n\nexport function addGlobal(key, vec) {\n  assert(!globals[key]);\n  globals[key] = vec;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint callback-return:off */\n\nexport const FADE_DEFAULT = 0;\nexport const FADE_OUT = 1;\nexport const FADE_IN = 2;\nexport const FADE = FADE_OUT + FADE_IN;\n\nconst assert = require('assert');\nconst { cmd_parse } = require('./cmds.js');\nconst { filewatchOn } = require('./filewatch.js');\nconst { Howl, Howler } = require('@jimbly/howler/src/howler.core.js');\nconst { abs, floor, max, min, random } = Math;\nconst settings = require('./settings.js');\nconst urlhash = require('./urlhash.js');\nconst { defaults, ridx } = require('../../common/util.js');\n\nconst DEFAULT_FADE_RATE = 0.001;\n\nlet sounds = {};\nlet num_loading = 0;\n\n// Howler.usingWebAudio = false; // Disable WebAudio for testing HTML5 fallbacks\n\nconst default_params = {\n  ext_list: ['mp3', 'wav'], // (recommended) try loading .mp3 versions first, then fallback to .wav\n  //  also covers all browsers: ['webm', 'mp3']\n  fade_rate: DEFAULT_FADE_RATE\n};\nlet sound_params;\n\nlet last_played = {};\nlet global_timer = 0;\nlet fades = [];\nlet music;\n\nsettings.register({\n  volume: {\n    default_value: 1,\n    type: cmd_parse.TYPE_FLOAT,\n    range: [0, 1]\n  }\n});\n\nsettings.register({\n  sound: {\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  }\n});\n\nsettings.register({\n  music: {\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  }\n});\n\nexport function soundLoad(base, opts, cb) {\n  opts = opts || {};\n  if (Array.isArray(base)) {\n    assert(!cb);\n    for (let ii = 0; ii < base.length; ++ii) {\n      soundLoad(base[ii], opts);\n    }\n    return;\n  }\n  let key = base;\n  if (sounds[key]) {\n    if (cb) {\n      cb();\n    }\n    return;\n  }\n  let m = base.match(/^(.*)\\.(mp3|ogg|wav|webm)$/u);\n  let preferred_ext;\n  if (m) {\n    base = m[1];\n    preferred_ext = m[2];\n  }\n  let src = `sounds/${base}`;\n  let srcs = [];\n  let suffix = '';\n  if (opts.for_reload) {\n    suffix = `?rl=${Date.now()}`;\n  }\n  if (preferred_ext) {\n    srcs.push(`${urlhash.getURLBase()}${src}.${preferred_ext}${suffix}`);\n  }\n  for (let ii = 0; ii < sound_params.ext_list.length; ++ii) {\n    let ext = sound_params.ext_list[ii];\n    if (ext !== preferred_ext) {\n      srcs.push(`${urlhash.getURLBase()}${src}.${ext}${suffix}`);\n    }\n  }\n  // Try loading desired sound types one at a time.\n  // Cannot rely on Howler's built-in support for this because it only continues\n  //   through the list on *some* load errors, not all :(.\n  function tryLoad(idx) {\n    if (idx === srcs.length) {\n      console.error(`Error loading sound ${base}: All fallbacks exhausted, giving up`);\n      if (cb) {\n        cb('Error loading sound');\n      }\n      return;\n    }\n    ++num_loading;\n    let once = false;\n    let sound = new Howl({\n      src: srcs.slice(idx),\n      html5: Boolean(opts.streaming),\n      loop: Boolean(opts.loop),\n      volume: 0,\n      onload: function () {\n        if (!once) {\n          --num_loading;\n          once = true;\n          sound.glov_load_opts = opts;\n          sounds[key] = sound;\n          if (cb) {\n            cb(null);\n          }\n        }\n      },\n      onloaderror: function (id, err, extra) {\n        if (idx === srcs.length - 1) {\n          console.error(`Error loading sound ${srcs[idx]}: ${err}`);\n        } else {\n          console.log(`Error loading sound ${srcs[idx]}: ${err}, trying fallback...`);\n        }\n        if (!once) {\n          --num_loading;\n          once = true;\n          tryLoad(idx + 1);\n        }\n      }\n    });\n  }\n  tryLoad(0);\n}\n\nfunction soundReload(filename) {\n  let sound_name = filename.match(/^sounds\\/([^.]+)\\.\\w+$/);\n  sound_name = sound_name && sound_name[1];\n  if (!sound_name) {\n    return;\n  }\n  if (!sounds[sound_name]) {\n    console.log(`Reload trigged for non-existent sound: ${filename}`);\n    return;\n  }\n  let opts = sounds[sound_name].glov_load_opts;\n  opts.for_reload = true;\n  delete sounds[sound_name];\n  soundLoad(sound_name, opts);\n}\n\nexport function soundStartup(params) {\n  sound_params = defaults(params || {}, default_params);\n\n  // Music\n  music = []; // 0 is current, 1 is previous (fading out)\n  for (let ii = 0; ii < 2; ++ii) {\n    music.push({\n      sound: null,\n      id: 0,\n      current_volume: 0,\n      target_volume: 0,\n      sys_volume: 0,\n      need_play: false\n    });\n  }\n  filewatchOn('.mp3', soundReload);\n  filewatchOn('.ogg', soundReload);\n  filewatchOn('.wav', soundReload);\n  filewatchOn('.webm', soundReload);\n}\n\nexport function soundResume() {\n  // Handled internally by Howler, leaving hooks in for now, though\n  // Maybe more reliable than `Howler.safeToPlay`...\n}\n\nexport function soundResumed() {\n  return !Howler.noAudio && Howler.safeToPlay;\n}\n\nexport function soundTick(dt) {\n  global_timer += dt;\n  if (!soundResumed()) {\n    return;\n  }\n  // Do music fading\n  // Cannot rely on Howler's fading because starting a fade when one is in progress\n  //   messes things up, as well causes snaps in volume :(\n  let max_fade = dt * sound_params.fade_rate;\n  for (let ii = 0; ii < music.length; ++ii) {\n    let mus = music[ii];\n    if (!mus.sound) {\n      continue;\n    }\n    let target = settings.music ? mus.target_volume : 0;\n    if (mus.current_volume !== target) {\n      let delta = target - mus.current_volume;\n      let fade_amt = min(abs(delta), max_fade);\n      if (delta < 0) {\n        mus.current_volume = max(target, mus.current_volume - fade_amt);\n      } else {\n        mus.current_volume = min(target, mus.current_volume + fade_amt);\n      }\n      if (!mus.target_volume && !mus.current_volume) {\n        if (!mus.need_play) {\n          mus.sound.stop(mus.id);\n        }\n        mus.sound = null;\n      }\n    }\n    if (mus.sound) {\n      let sys_volume = mus.current_volume * settings.volume;\n      if (mus.need_play) {\n        mus.need_play = false;\n        mus.id = mus.sound.play();\n        mus.sys_volume = -1;\n      }\n      if (mus.sys_volume !== sys_volume) {\n        mus.sound.volume(sys_volume, mus.id);\n        mus.sys_volume = sys_volume;\n      }\n    }\n  }\n\n  for (let ii = fades.length - 1; ii >= 0; --ii) {\n    let fade = fades[ii];\n    fade.volume = max(0, fade.volume - max_fade);\n    fade.sound.volume(fade.volume * settings.volume, fade.id);\n    if (!fade.volume) {\n      fade.sound.stop(fade.id);\n      ridx(fades, ii);\n    }\n  }\n}\n\nexport function soundPlay(soundname, volume, as_music) {\n  volume = volume || 1;\n  if (!as_music && !settings.sound || as_music && !settings.music) {\n    return null;\n  }\n  if (!soundResumed()) {\n    return null;\n  }\n  if (Array.isArray(soundname)) {\n    soundname = soundname[floor(random() * soundname.length)];\n  }\n  let sound = sounds[soundname];\n  if (!sound) {\n    return null;\n  }\n  let last_played_time = last_played[soundname] || -9e9;\n  if (global_timer - last_played_time < 45) {\n    return null;\n  }\n\n  let id = sound.play(undefined, volume * settings.volume);\n  // sound.volume(volume * settings.volume, id);\n  last_played[soundname] = global_timer;\n  return {\n    stop: sound.stop.bind(sound, id),\n    playing: sound.playing.bind(sound, id), // not reliable if it hasn't started yet? :(\n    fadeOut: time => {\n      fades.push({\n        volume,\n        sound,\n        id,\n        time\n      });\n    }\n  };\n}\n\nexport function soundPlayMusic(soundname, volume, transition) {\n  if (!settings.music) {\n    return;\n  }\n  if (volume === undefined) {\n    volume = 1;\n  }\n  transition = transition || FADE_DEFAULT;\n  soundLoad(soundname, { streaming: true, loop: true }, err => {\n    assert(!err);\n    let sound = sounds[soundname];\n    assert(sound);\n    if (music[0].sound === sound) {\n      // Same sound, just adjust volume, if required\n      music[0].target_volume = volume;\n      if (!transition) {\n        if (!volume) {\n          sound.stop(music[0].id);\n          music[0].sound = null;\n        } else {\n          let sys_volume = music[0].sys_volume = volume * settings.volume;\n          sound.volume(sys_volume, music[0].id);\n        }\n      }\n      return;\n    }\n    // fade out previous music, if any\n    if (music[0].current_volume) {\n      if (transition & FADE_OUT) {\n        // swap to position 1, start fadeout\n        let temp = music[1];\n        music[1] = music[0];\n        music[0] = temp;\n        music[1].target_volume = 0;\n      }\n    }\n    if (music[0].sound) {\n      music[0].sound.stop(music[0].id);\n    }\n    music[0].sound = sound;\n    music[0].target_volume = volume;\n    let start_vol = transition & FADE_IN ? 0 : volume;\n    music[0].current_volume = start_vol;\n    if (soundResumed()) {\n      let sys_volume = start_vol * settings.volume;\n      music[0].id = sound.play(undefined, sys_volume);\n      // sound.volume(sys_volume, music[0].id);\n      music[0].sys_volume = sys_volume;\n      music[0].need_play = false;\n    } else {\n      music[0].need_play = true;\n    }\n  });\n}\n\nexport function soundLoading() {\n  return num_loading;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst engine = require('./engine.js');\nconst geom = require('./geom.js');\nconst { cos, max, min, round, sin } = Math;\nconst textures = require('./textures.js');\nconst shaders = require('./shaders.js');\nconst { nextHighestPowerOfTwo } = require('../../common/util.js');\nconst { vec2, vec4 } = require('./vmath.js');\n\nexport const BLEND_ALPHA = 0;\nexport const BLEND_ADDITIVE = 1;\n\nlet sprite_vshader;\nlet sprite_fshader;\nlet sprite_dual_fshader;\nlet clip_space = vec4();\nlet sprite_shader_params = {\n  clip_space\n};\nlet last_uid = 0;\n\nlet sprite_queue = [];\n\nlet sprite_freelist = [];\n\nlet sprite_queue_stack = null;\nexport function spriteQueuePush() {\n  assert(!sprite_queue_stack);\n  sprite_queue_stack = sprite_queue;\n  sprite_queue = [];\n}\nexport function spriteQueuePop() {\n  assert(sprite_queue_stack);\n  assert(!sprite_queue.length);\n  sprite_queue = sprite_queue_stack;\n  sprite_queue_stack = null;\n}\n\nfunction SpriteData() {\n  // x1 y1 x2 y2 x3 y3 x4 y4 - vertices [0,8)\n  // cr cg cb ca u1 v1 u2 v2 - normalized color + texture [8,16)\n  // data for GL queuing\n  this.data = new Float32Array(16);\n  // data for sorting/binding/etc\n  this.texs = null;\n  this.shader = null;\n  this.shader_params = null;\n  this.x = 0;\n  this.y = 0;\n  this.z = 0;\n  this.blend = 0; // BLEND_ALPHA\n  this.uid = 0;\n}\n\nfunction spriteDataAlloc() {\n  if (sprite_freelist.length) {\n    return sprite_freelist.pop();\n  }\n  return new SpriteData();\n}\n\nfunction cmpSprite(a, b) {\n  if (a.z !== b.z) {\n    return a.z - b.z;\n  }\n  if (a.y !== b.y) {\n    return a.y - b.y;\n  }\n  if (a.x !== b.x) {\n    return a.x - b.x;\n  }\n  return a.uid - b.uid;\n}\n\nexport function queuefn(z, fn) {\n  assert(isFinite(z));\n  sprite_queue.push({\n    fn,\n    x: 0,\n    y: 0,\n    z,\n    uid: ++last_uid\n  });\n}\n\n// coordinates must be in counter-clockwise winding order\nexport function queueraw4(texs, x0, y0, x1, y1, x2, y2, x3, y3, z, u0, v0, u1, v1, color, shader, shader_params, blend) {\n  assert(isFinite(z));\n  let elem = spriteDataAlloc();\n  let data = elem.data;\n  // x1 y1 x2 y2 x3 y3 x4 y4 - vertices [0,8)\n  // cr cg cb ca u1 v1 u2 v2 - normalized color + texture [8,16)\n  // Minor perf improvement: convert by clip_space here (still just a single MAD\n  //   if pre-calculated in the camera) and remove it from the shader.\n  data[0] = (x0 - camera2d.data[0]) * camera2d.data[4];\n  data[1] = (y0 - camera2d.data[1]) * camera2d.data[5];\n  data[2] = (x1 - camera2d.data[0]) * camera2d.data[4];\n  data[3] = (y1 - camera2d.data[1]) * camera2d.data[5];\n  data[4] = (x2 - camera2d.data[0]) * camera2d.data[4];\n  data[5] = (y2 - camera2d.data[1]) * camera2d.data[5];\n  data[6] = (x3 - camera2d.data[0]) * camera2d.data[4];\n  data[7] = (y3 - camera2d.data[1]) * camera2d.data[5];\n  data[8] = color[0];\n  data[9] = color[1];\n  data[10] = color[2];\n  data[11] = color[3];\n  data[12] = u0;\n  data[13] = v0;\n  data[14] = u1;\n  data[15] = v1;\n\n  elem.texs = texs;\n  elem.x = data[0];\n  elem.y = data[1];\n  elem.z = z;\n  elem.shader = shader || null;\n  if (shader_params) {\n    shader_params.clip_space = sprite_shader_params.clip_space;\n    elem.shader_params = shader_params;\n  } else {\n    elem.shader_params = null;\n  }\n  elem.blend = blend || 0; // BLEND_ALPHA\n  //elem.bucket = bucket || this.default_bucket;\n  //elem.tech_params = tech_params || null;\n  elem.uid = ++last_uid;\n  sprite_queue.push(elem);\n  return elem;\n}\n\nexport function queueraw(texs, x, y, z, w, h, u0, v0, u1, v1, color, shader, shader_params, blend) {\n  return queueraw4(texs, x, y, x, y + h, x + w, y + h, x + w, y, z, u0, v0, u1, v1, color, shader, shader_params, blend);\n}\n\nexport function queuesprite(sprite, x, y, z, w, h, rot, uvs, color, shader, shader_params, nozoom, pixel_perfect) {\n  assert(isFinite(z));\n  let elem = spriteDataAlloc();\n  elem.texs = sprite.texs;\n  x = (x - camera2d.data[0]) * camera2d.data[4];\n  y = (y - camera2d.data[1]) * camera2d.data[5];\n  elem.z = z;\n  w *= camera2d.data[4];\n  h *= camera2d.data[5];\n  if (pixel_perfect) {\n    x |= 0;\n    y |= 0;\n    w |= 0;\n    h |= 0;\n  }\n  elem.x = x;\n  elem.y = y;\n  color = color || sprite.color;\n  let data = elem.data;\n  if (!rot) {\n    let x1 = x - sprite.origin[0] * w;\n    let y1 = y - sprite.origin[1] * h;\n    let x2 = x1 + w;\n    let y2 = y1 + h;\n    data[0] = x1;\n    data[1] = y1;\n    data[2] = x1;\n    data[3] = y2;\n    data[4] = x2;\n    data[5] = y2;\n    data[6] = x2;\n    data[7] = y1;\n  } else {\n    let dx = sprite.origin[0] * w;\n    let dy = sprite.origin[1] * h;\n\n    let cosr = cos(rot);\n    let sinr = sin(rot);\n\n    let x1 = x - cosr * dx + sinr * dy;\n    let y1 = y - sinr * dx - cosr * dy;\n    let ch = cosr * h;\n    let cw = cosr * w;\n    let sh = sinr * h;\n    let sw = sinr * w;\n\n    data[0] = x1;\n    data[1] = y1;\n    data[2] = x1 - sh;\n    data[3] = y1 + ch;\n    data[4] = x1 + cw - sh;\n    data[5] = y1 + sw + ch;\n    data[6] = x1 + cw;\n    data[7] = y1 + sw;\n  }\n\n  data[8] = color[0];\n  data[9] = color[1];\n  data[10] = color[2];\n  data[11] = color[3];\n\n  let ubias = 0;\n  let vbias = 0;\n  let tex = elem.texs[0];\n  if (!nozoom && !tex.nozoom) {\n    // Bias the texture coordinates depending on the minification/magnification\n    //   level so we do not get pixels from neighboring frames bleeding in\n    // Use min here (was max in libGlov), to solve tooltip edges being wrong in strict pixely\n    // Use max here to solve box buttons not lining up, but instead using nozoom in drawBox/drawHBox,\n    //   but, that only works for magnification - need the max here for minification!\n    let zoom_level = max((uvs[2] - uvs[0]) * tex.width / w, (uvs[3] - uvs[1]) * tex.height / h); // in texels per pixel\n    if (zoom_level < 1) {\n      // magnification\n      if (tex.filter_mag === gl.LINEAR) {\n        // Need to bias by half a texel, so we're doing absolutely no blending with the neighboring texel\n        ubias = vbias = 0.5;\n      } else if (tex.filter_mag === gl.NEAREST && engine.antialias) {\n        // When antialiasing is on, even nearest sampling samples from adjacent texels, do slight bias\n        // Want to bias by one *pixel's* worth\n        ubias = vbias = zoom_level / 2;\n      }\n    } else if (zoom_level > 1) {\n      // minification\n      // need to apply this bias even with nearest filtering, not exactly sure why\n      let mipped_texels = zoom_level / 2;\n      ubias = vbias = 0.5 + mipped_texels;\n    }\n    if (uvs[0] > uvs[2]) {\n      ubias *= -1;\n    }\n    if (uvs[1] > uvs[3]) {\n      vbias *= -1;\n    }\n  }\n\n  data[12] = uvs[0] + ubias / tex.width;\n  data[13] = uvs[1] + vbias / tex.height;\n  data[14] = uvs[2] - ubias / tex.width;\n  data[15] = uvs[3] - vbias / tex.height;\n\n  elem.uid = ++last_uid;\n  elem.shader = shader || null;\n  elem.blend = 0; // BLEND_ALPHA\n\n  if (shader_params) {\n    shader_params.clip_space = sprite_shader_params.clip_space;\n    elem.shader_params = shader_params;\n  } else {\n    elem.shader_params = null;\n  }\n  sprite_queue.push(elem);\n}\n\nexport function clip(z_start, z_end, x, y, w, h) {\n  let xy = vec2();\n  camera2d.virtualToCanvas(xy, [x, y]);\n  let wh = vec2();\n  camera2d.virtualToCanvas(wh, [x + w, y + h]);\n  xy[0] = round(xy[0]);\n  xy[1] = round(xy[1]);\n  wh[0] = round(wh[0]) - xy[0];\n  wh[1] = round(wh[1]) - xy[1];\n\n  // let gd_w = engine.render_width || engine.width;\n  let gd_h = engine.render_height || engine.height;\n  let scissor = [xy[0], gd_h - (xy[1] + wh[1]), wh[0], wh[1]];\n  queuefn(z_start - 0.01, () => {\n    gl.enable(gl.SCISSOR_TEST);\n    gl.scissor(scissor[0], scissor[1], scissor[2], scissor[3]);\n  });\n  queuefn(z_end - 0.01, () => {\n    gl.disable(gl.SCISSOR_TEST);\n  });\n}\n\nfunction diffTextures(texsa, texsb) {\n  if (texsa.length !== texsb.length) {\n    return true;\n  }\n  for (let ii = 0; ii < texsa.length; ++ii) {\n    if (texsa[ii] !== texsb[ii]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nlet batch_state;\nlet sprite_geom;\nlet sprite_buffer; // Float32Array with 8 entries per vert\nlet sprite_buffer_len = 0; // in verts\nlet sprite_buffer_batch_start = 0;\nlet sprite_buffer_idx = 0; // in verts\nlet last_blend_mode;\nlet last_bound_shader;\nconst MAX_VERT_COUNT = 65536;\nlet batches = [];\n\nfunction commit() {\n  if (sprite_buffer_idx === sprite_buffer_batch_start) {\n    return;\n  }\n  batches.push({\n    state: batch_state,\n    start: sprite_buffer_batch_start,\n    end: sprite_buffer_idx\n  });\n  sprite_buffer_batch_start = sprite_buffer_idx;\n}\n\nfunction commitAndFlush() {\n  commit();\n  if (!batches.length) {\n    return;\n  }\n  assert(sprite_buffer_idx);\n  sprite_geom.update(sprite_buffer, sprite_buffer_idx);\n  sprite_geom.bind();\n\n  for (let ii = 0; ii < batches.length; ++ii) {\n    let batch = batches[ii];\n    let { state, start, end } = batch;\n    if (last_bound_shader !== state.shader || state.shader_params) {\n      shaders.bind(sprite_vshader, state.shader || sprite_fshader, state.shader_params || sprite_shader_params);\n      last_bound_shader = state.shader;\n    }\n    if (last_blend_mode !== state.blend) {\n      last_blend_mode = state.blend;\n      if (last_blend_mode === BLEND_ADDITIVE) {\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n      } else {\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n      }\n    }\n    textures.bindArray(state.texs);\n    gl.drawElements(sprite_geom.mode, (end - start) * 3 / 2, gl.UNSIGNED_SHORT, start * 3);\n  }\n\n  batches.length = 0;\n  sprite_buffer_idx = 0;\n  sprite_buffer_batch_start = 0;\n}\n\nfunction bufferSpriteData(data) {\n  let index = sprite_buffer_idx * 8;\n  sprite_buffer_idx += 4;\n\n  let c1 = data[8];\n  let c2 = data[9];\n  let c3 = data[10];\n  let c4 = data[11];\n  let u1 = data[12];\n  let v1 = data[13];\n  let u2 = data[14];\n  let v2 = data[15];\n\n  sprite_buffer[index] = data[0];\n  sprite_buffer[index + 1] = data[1];\n  sprite_buffer[index + 2] = c1;\n  sprite_buffer[index + 3] = c2;\n  sprite_buffer[index + 4] = c3;\n  sprite_buffer[index + 5] = c4;\n  sprite_buffer[index + 6] = u1;\n  sprite_buffer[index + 7] = v1;\n\n  sprite_buffer[index + 8] = data[2];\n  sprite_buffer[index + 9] = data[3];\n  sprite_buffer[index + 10] = c1;\n  sprite_buffer[index + 11] = c2;\n  sprite_buffer[index + 12] = c3;\n  sprite_buffer[index + 13] = c4;\n  sprite_buffer[index + 14] = u1;\n  sprite_buffer[index + 15] = v2;\n\n  sprite_buffer[index + 16] = data[4];\n  sprite_buffer[index + 17] = data[5];\n  sprite_buffer[index + 18] = c1;\n  sprite_buffer[index + 19] = c2;\n  sprite_buffer[index + 20] = c3;\n  sprite_buffer[index + 21] = c4;\n  sprite_buffer[index + 22] = u2;\n  sprite_buffer[index + 23] = v2;\n\n  sprite_buffer[index + 24] = data[6];\n  sprite_buffer[index + 25] = data[7];\n  sprite_buffer[index + 26] = c1;\n  sprite_buffer[index + 27] = c2;\n  sprite_buffer[index + 28] = c3;\n  sprite_buffer[index + 29] = c4;\n  sprite_buffer[index + 30] = u2;\n  sprite_buffer[index + 31] = v1;\n}\n\nexport function draw() {\n  if (!sprite_queue.length) {\n    return;\n  }\n  gl.disable(gl.DEPTH_TEST);\n  gl.depthMask(false);\n  gl.enable(gl.BLEND);\n\n  clip_space[0] = 2 / engine.viewport[2];\n  clip_space[1] = -2 / engine.viewport[3];\n\n  last_blend_mode = -1;\n  last_bound_shader = -1;\n\n  if (!sprite_geom) {\n    sprite_geom = geom.create([[shaders.semantic.POSITION, gl.FLOAT, 2, false], [shaders.semantic.COLOR, gl.FLOAT, 4, false], [shaders.semantic.TEXCOORD, gl.FLOAT, 2, false]], [], null, geom.QUADS);\n    sprite_buffer = new Float32Array(1024);\n    sprite_buffer_len = sprite_buffer.length / 8;\n  }\n\n  sprite_queue.sort(cmpSprite);\n\n  batch_state = null;\n  assert.equal(sprite_buffer_idx, 0);\n  assert.equal(sprite_buffer_batch_start, 0);\n  assert.equal(batches.length, 0);\n  for (let ii = 0; ii < sprite_queue.length; ++ii) {\n    let elem = sprite_queue[ii];\n    if (elem.fn) {\n      commitAndFlush();\n      batch_state = null;\n      last_bound_shader = -1;\n      elem.fn();\n    } else {\n      if (!batch_state || diffTextures(elem.texs, batch_state.texs) || elem.shader !== batch_state.shader || elem.shader_params !== batch_state.shader_params || elem.blend !== batch_state.blend) {\n        commit();\n        batch_state = elem;\n      }\n      if (sprite_buffer_idx + 4 > sprite_buffer_len) {\n        commitAndFlush();\n        // batch_state left alone\n        if (sprite_buffer_len !== MAX_VERT_COUNT) {\n          let new_length = min(sprite_buffer_len * 1.25 + 3 & ~3, MAX_VERT_COUNT); // eslint-disable-line no-bitwise\n          sprite_buffer_len = new_length;\n          sprite_buffer = new Float32Array(new_length * 8);\n        }\n      }\n\n      bufferSpriteData(elem.data);\n      sprite_freelist.push(elem);\n    }\n  }\n  commitAndFlush();\n\n  sprite_queue.length = 0;\n  if (last_blend_mode !== BLEND_ALPHA) {\n    // always reset to this\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n  }\n}\n\nexport function buildRects(ws, hs) {\n  let rects = [];\n  let total_w = 0;\n  for (let ii = 0; ii < ws.length; ++ii) {\n    total_w += ws[ii];\n  }\n  let total_h = 0;\n  for (let ii = 0; ii < hs.length; ++ii) {\n    total_h += hs[ii];\n  }\n  let tex_w = nextHighestPowerOfTwo(total_w);\n  let tex_h = nextHighestPowerOfTwo(total_h);\n  let wh = [];\n  for (let ii = 0; ii < ws.length; ++ii) {\n    wh.push(ws[ii] / total_h);\n  }\n  let hw = [];\n  for (let ii = 0; ii < hs.length; ++ii) {\n    hw.push(hs[ii] / total_w);\n  }\n  let aspect = [];\n  let non_square = false;\n  let y = 0;\n  for (let jj = 0; jj < hs.length; ++jj) {\n    let x = 0;\n    for (let ii = 0; ii < ws.length; ++ii) {\n      let r = vec4(x / tex_w, y / tex_h, (x + ws[ii]) / tex_w, (y + hs[jj]) / tex_h);\n      rects.push(r);\n      let asp = ws[ii] / hs[jj];\n      if (asp !== 1) {\n        non_square = true;\n      }\n      aspect.push(asp);\n      x += ws[ii];\n    }\n    y += hs[jj];\n  }\n  return {\n    widths: ws,\n    heights: hs,\n    wh,\n    hw,\n    rects,\n    aspect: non_square ? aspect : null,\n    total_w,\n    total_h\n  };\n}\n\nfunction Sprite(params) {\n  if (params.texs) {\n    this.texs = params.texs;\n  } else {\n    this.texs = [];\n    if (params.tex) {\n      this.texs.push(params.tex);\n    } else if (params.layers) {\n      assert(params.name);\n      this.texs = [];\n      for (let ii = 0; ii < params.layers; ++ii) {\n        this.texs.push(textures.load({\n          url: `img/${params.name}_${ii}.png`,\n          filter_min: params.filter_min,\n          filter_mag: params.filter_mag,\n          wrap_s: params.wrap_s,\n          wrap_t: params.wrap_t\n        }));\n      }\n    } else if (params.name) {\n      this.texs.push(textures.load({\n        url: `img/${params.name}.png`,\n        filter_min: params.filter_min,\n        filter_mag: params.filter_mag,\n        wrap_s: params.wrap_s,\n        wrap_t: params.wrap_t\n      }));\n    } else {\n      assert(params.url);\n      this.texs.push(textures.load(params));\n    }\n  }\n\n  this.origin = params.origin || vec2(0, 0); // [0,1] range\n  this.size = params.size || vec2(1, 1);\n  this.color = params.color || vec4(1, 1, 1, 1);\n  this.uvs = params.uvs || vec4(0, 0, 1, 1);\n  if (!params.uvs) {\n    // Fix up non-power-of-two textures\n    this.texs[0].onLoad(tex => {\n      this.uvs[2] = tex.src_width / tex.width;\n      this.uvs[3] = tex.src_height / tex.height;\n    });\n  }\n\n  if (params.ws) {\n    this.uidata = buildRects(params.ws, params.hs);\n  }\n  this.shader = params.shader || null;\n}\n\n// params:\n//   required: x, y\n//   optional: z, w, h, uvs, color, nozoom, pixel_perfect\nSprite.prototype.draw = function (params) {\n  if (params.w === 0 || params.h === 0) {\n    return;\n  }\n  let w = (params.w || 1) * this.size[0];\n  let h = (params.h || 1) * this.size[1];\n  let uvs = typeof params.frame === 'number' ? this.uidata.rects[params.frame] : params.uvs || this.uvs;\n  queuesprite(this, params.x, params.y, params.z || Z.UI, w, h, params.rot, uvs, params.color || this.color, params.shader || this.shader, params.shader_params, params.nozoom, params.pixel_perfect);\n};\n\nSprite.prototype.drawDualTint = function (params) {\n  params.shader = sprite_dual_fshader;\n  params.shader_params = {\n    color1: params.color1\n  };\n  this.draw(params);\n};\n\nexport function create(params) {\n  return new Sprite(params);\n}\n\nexport function startup() {\n  clip_space[2] = -1;\n  clip_space[3] = 1;\n  sprite_vshader = shaders.create('glov/shaders/sprite.vp');\n  sprite_fshader = shaders.create('glov/shaders/sprite.fp');\n  sprite_dual_fshader = shaders.create('glov/shaders/sprite_dual.fp');\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst { cmd_parse } = require('./cmds.js');\nconst dot_prop = require('dot-prop');\nconst EventEmitter = require('../../common/tiny-events.js');\nconst local_storage = require('./local_storage.js');\nconst md5 = require('../../common/md5.js');\nconst { isPacket } = require('../../common/packet.js');\nconst util = require('../../common/util.js');\n\n// relevant events:\n//   .on('channel_data', cb(data [, mod_key, mod_value]));\n\nfunction ClientChannelWorker(subs, channel_id) {\n  EventEmitter.call(this);\n  this.subs = subs;\n  this.channel_id = channel_id;\n  this.subscriptions = 0;\n  this.subscribe_failed = false;\n  this.got_subscribe = false;\n  this.handlers = {};\n  this.data = {};\n  this.onMsg('channel_data', this.handleChannelData.bind(this));\n  this.onMsg('apply_channel_data', this.handleApplyChannelData.bind(this));\n}\nutil.inherits(ClientChannelWorker, EventEmitter);\n\n// cb(data)\nClientChannelWorker.prototype.onSubscribe = function (cb) {\n  assert(this.subscriptions || this.autosubscribed);\n  this.on('subscribe', cb);\n  if (this.got_subscribe) {\n    cb(this.data); // eslint-disable-line callback-return\n  }\n};\n\n// cb(data)\nClientChannelWorker.prototype.onceSubscribe = function (cb) {\n  assert(this.subscriptions || this.autosubscribed);\n  if (this.got_subscribe) {\n    cb(this.data); // eslint-disable-line callback-return\n  } else {\n    this.once('subscribe', cb);\n  }\n};\n\nClientChannelWorker.prototype.handleChannelData = function (data, resp_func) {\n  console.log(`got channel_data(${this.channel_id}):  ${JSON.stringify(data)}`);\n  this.data = data;\n  this.emit('channel_data', this.data);\n  this.got_subscribe = true;\n  this.emit('subscribe', this.data);\n\n  // Get command list upon first connect\n  let channel_type = this.channel_id.split('.')[0];\n  let cmd_list = this.subs.cmds_list_by_worker;\n  if (!cmd_list[channel_type]) {\n    cmd_list[channel_type] = {};\n    this.send('cmdparse', 'cmd_list', {}, function (err, resp) {\n      if (err) {\n        // already unsubscribed?\n        console.error(`Error getting cmd_list for ${channel_type}`);\n        delete cmd_list[channel_type];\n      } else if (resp.found) {\n        cmd_list[channel_type] = resp;\n        cmd_parse.addServerCommands(resp.resp);\n      }\n    });\n  }\n\n  resp_func();\n};\n\nClientChannelWorker.prototype.handleApplyChannelData = function (data, resp_func) {\n  // already logged in handleChannelMessage\n  // if (!data.q) {\n  //   console.log(`got channel data mod: ${JSON.stringify(data)}`);\n  // }\n  if (data.value === undefined) {\n    dot_prop.delete(this.data, data.key);\n  } else {\n    dot_prop.set(this.data, data.key, data.value);\n  }\n  this.emit('channel_data', this.data, data.key, data.value);\n  resp_func();\n};\n\nClientChannelWorker.prototype.getChannelData = function (key, default_value) {\n  return dot_prop.get(this.data, key, default_value);\n};\n\nClientChannelWorker.prototype.setChannelData = function (key, value, skip_predict, resp_func) {\n  if (!skip_predict) {\n    dot_prop.set(this.data, key, value);\n  }\n  let q = value && value.q || undefined;\n  let pak = this.subs.client.wsPak('set_channel_data');\n  pak.writeAnsiString(this.channel_id);\n  pak.writeBool(q);\n  pak.writeAnsiString(key);\n  pak.writeJSON(value);\n  pak.send(resp_func);\n};\n\nClientChannelWorker.prototype.removeMsgHandler = function (msg, cb) {\n  assert(this.handlers[msg] === cb);\n  delete this.handlers[msg];\n};\n\nClientChannelWorker.prototype.onMsg = function (msg, cb) {\n  assert(!this.handlers[msg] || this.handlers[msg] === cb);\n  this.handlers[msg] = cb;\n};\n\nClientChannelWorker.prototype.pak = function (msg) {\n  let pak = this.subs.client.wsPak('channel_msg');\n  pak.writeAnsiString(this.channel_id);\n  pak.writeAnsiString(msg);\n  // pak.writeInt(flags);\n  return pak;\n};\n\nClientChannelWorker.prototype.send = function (msg, data, opts, resp_func) {\n  assert(typeof opts !== 'function');\n  this.subs.client.send('channel_msg', {\n    channel_id: this.channel_id,\n    msg, data,\n    broadcast: opts && opts.broadcast || undefined,\n    silent_error: opts && opts.silent_error ? 1 : undefined\n  }, resp_func);\n};\n\nfunction SubscriptionManager(client) {\n  EventEmitter.call(this);\n  this.client = client;\n  this.channels = {};\n  this.logged_in = false;\n  this.login_credentials = null;\n  this.logged_in_username = null;\n  this.was_logged_in = false;\n  this.logging_in = false;\n  this.logging_out = false;\n  this.auto_create_user = false;\n  this.cmds_list_by_worker = {};\n\n  this.first_connect = true;\n  this.server_time = 0;\n  this.server_time_interp = 0;\n  client.onMsg('connect', this.handleConnect.bind(this));\n  client.onMsg('channel_msg', this.handleChannelMessage.bind(this));\n  client.onMsg('server_time', this.handleServerTime.bind(this));\n  client.onMsg('admin_msg', this.handleAdminMsg.bind(this));\n}\nutil.inherits(SubscriptionManager, EventEmitter);\n\nSubscriptionManager.prototype.onceConnected = function (cb) {\n  if (this.client.connected) {\n    return void cb();\n  }\n  this.once('connect', cb);\n};\n\nSubscriptionManager.prototype.handleAdminMsg = function (data) {\n  console.error(data);\n  this.emit('admin_msg', data);\n};\n\nSubscriptionManager.prototype.handleConnect = function () {\n  let reconnect = false;\n  if (this.first_connect) {\n    this.first_connect = false;\n  } else {\n    reconnect = true;\n  }\n\n  if (!this.client.connected || this.client.socket.readyState !== 1) {\n    // WebSocket.OPEN\n    // we got disconnected while trying to log in, we'll retry after reconnection\n    return;\n  }\n\n  let subs = this;\n  function resub() {\n    // (re-)subscribe to all channels\n    for (let channel_id in subs.channels) {\n      let channel = subs.channels[channel_id];\n      if (channel.subscriptions) {\n        subs.client.send('subscribe', channel_id, function (err) {\n          if (err) {\n            channel.subscribe_failed = true;\n            console.error(`Error subscribing to ${channel_id}: ${err}`);\n            channel.emit('subscribe_fail', err);\n          }\n        });\n      }\n    }\n    subs.emit('connect', reconnect);\n  }\n\n  if (this.was_logged_in) {\n    // Try to re-connect to existing login\n    this.loginInternal(this.login_credentials, function (err) {\n      if (err && err === 'ERR_DISCONNECTED') {\n        // we got disconnected while trying to log in, we'll retry after reconnection\n      } else if (err) {\n        // Error logging in upon re-connection, no good way to handle this?\n        // TODO: Show some message to the user and prompt them to refresh?  Stay in \"disconnected\" state?\n        assert(false);\n      } else {\n        resub();\n      }\n    });\n  } else {\n    // Try auto-login\n    if (local_storage.get('name') && local_storage.get('password')) {\n      this.login(local_storage.get('name'), local_storage.get('password'), function () {\n        // ignore error on auto-login\n      });\n    }\n\n    resub();\n  }\n};\n\nSubscriptionManager.prototype.handleChannelMessage = function (pak, resp_func) {\n  assert(isPacket(pak));\n  let channel_id = pak.readAnsiString();\n  let msg = pak.readAnsiString();\n  let is_packet = pak.readBool();\n  let data = is_packet ? pak : pak.readJSON();\n  if (!data || !data.q) {\n    let debug_msg;\n    if (!is_packet) {\n      debug_msg = JSON.stringify(data);\n    } else if (typeof data.contents === 'function') {\n      debug_msg = data.contents();\n    } else {\n      debug_msg = '(pak)';\n    }\n    console.log(`got channel_msg(${channel_id}) ${msg}: ${debug_msg}`);\n  }\n  let channel = this.getChannel(channel_id);\n  if (!channel.handlers[msg]) {\n    console.error(`no handler for channel_msg(${channel_id}) ${msg}: ${JSON.stringify(data)}`);\n    return;\n  }\n  channel.handlers[msg](data, resp_func);\n};\n\nSubscriptionManager.prototype.handleServerTime = function (pak) {\n  this.server_time = pak.readInt();\n  if (this.server_time < this.server_time_interp && this.server_time > this.server_time_interp - 250) {\n    // slight time travel backwards, this one packet must have been delayed,\n    // since we once got a packet quicker. Just ignore this, interpolate from\n    // where we were before\n    // TODO: If the server had a short stall (less than 250ms) we might be\n    // ahead from now on!  Slowly interp back to the specified time\n    // (run speed at 90% until it matches?, same thing for catching up to\n    // small jumps ahead)\n  } else {\n    this.server_time_interp = this.server_time;\n  }\n};\n\nSubscriptionManager.prototype.getServerTime = function () {\n  // Interpolated server time as of start of last tick\n  return this.server_time_interp;\n};\n\nSubscriptionManager.prototype.tick = function (dt) {\n  this.server_time_interp += dt;\n};\n\nSubscriptionManager.prototype.subscribe = function (channel_id) {\n  this.getChannel(channel_id, true);\n};\n\nSubscriptionManager.prototype.getChannel = function (channel_id, do_subscribe) {\n  let channel = this.channels[channel_id];\n  if (!channel) {\n    channel = this.channels[channel_id] = new ClientChannelWorker(this, channel_id);\n  }\n  if (do_subscribe) {\n    channel.subscriptions++;\n    if (this.client.connected && channel.subscriptions === 1) {\n      channel.subscribe_failed = false;\n      this.client.send('subscribe', channel_id, function (err) {\n        if (err) {\n          channel.subscribe_failed = true;\n          console.error(`Error subscribing to ${channel_id}: ${err}`);\n          channel.emit('subscribe_fail', err);\n        }\n      });\n    }\n  }\n  return channel;\n};\n\nSubscriptionManager.prototype.getUserId = function () {\n  return this.loggedIn();\n};\n\nSubscriptionManager.prototype.getMyUserChannel = function () {\n  let user_id = this.loggedIn();\n  if (!user_id) {\n    return null;\n  }\n  let channel = this.getChannel(`user.${user_id}`);\n  if (!this.logging_out) {\n    channel.autosubscribed = true;\n  }\n  return channel;\n};\n\nSubscriptionManager.prototype.unsubscribe = function (channel_id) {\n  let channel = this.channels[channel_id];\n  assert(channel);\n  assert(channel.subscriptions);\n  channel.subscriptions--;\n  if (!channel.subscriptions) {\n    channel.got_subscribe = false;\n  }\n  if (this.client.connected && !channel.subscriptions && !channel.subscribe_failed) {\n    this.client.send('unsubscribe', channel_id);\n  }\n};\n\nSubscriptionManager.prototype.onLogin = function (cb) {\n  this.getMyUserChannel();\n  this.on('login', cb);\n  if (this.logged_in) {\n    return void cb();\n  }\n};\n\nSubscriptionManager.prototype.loggedIn = function () {\n  return this.logged_in ? this.logged_in_username || 'missing_name' : false;\n};\n\nSubscriptionManager.prototype.handleLoginResponse = function (resp_func, err, resp) {\n  this.logging_in = false;\n  if (!err) {\n    this.logged_in_username = resp.user_id;\n    this.logged_in_display_name = resp.display_name;\n    this.logged_in = true;\n    this.was_logged_in = true;\n    this.getMyUserChannel();\n    this.emit('login');\n  } else {\n    this.emit('login_fail', err);\n  }\n  resp_func(err);\n};\n\nSubscriptionManager.prototype.loginInternal = function (login_credentials, resp_func) {\n  if (this.logging_in) {\n    return void resp_func('Login already in progress');\n  }\n  this.logging_in = true;\n  this.logged_in = false;\n  this.client.send('login', {\n    user_id: login_credentials.user_id,\n    password: md5(this.client.secret + login_credentials.password)\n  }, this.handleLoginResponse.bind(this, resp_func));\n};\n\nSubscriptionManager.prototype.userCreateInternal = function (params, resp_func) {\n  if (this.logging_in) {\n    return resp_func('Login already in progress');\n  }\n  this.logging_in = true;\n  this.logged_in = false;\n  return this.client.send('user_create', params, this.handleLoginResponse.bind(this, resp_func));\n};\n\nfunction hashedPassword(user_id, password) {\n  if (password.split('$$')[0] === 'prehashed') {\n    password = password.split('$$')[1];\n  } else {\n    password = md5(md5(user_id.toLowerCase()) + password);\n  }\n  return password;\n}\n\nSubscriptionManager.prototype.login = function (username, password, resp_func) {\n  username = (username || '').trim();\n  if (!username) {\n    return resp_func('Missing username');\n  }\n  password = (password || '').trim();\n  if (!password) {\n    return resp_func('Missing password');\n  }\n  let hashed_password = hashedPassword(username, password);\n  if (hashed_password !== password) {\n    local_storage.set('password', `prehashed$$${hashed_password}`);\n  }\n  this.login_credentials = { user_id: username, password: hashed_password };\n  if (!this.auto_create_user) {\n    // Just return result directly\n    return this.loginInternal(this.login_credentials, resp_func);\n  }\n  return this.loginInternal(this.login_credentials, (err, data) => {\n    if (!err || err !== 'ERR_USER_NOT_FOUND') {\n      return void resp_func(err, data);\n    }\n    // user not found, auto-create\n    this.userCreate({\n      user_id: username,\n      password,\n      password_confirm: password,\n      email: 'autocreate@glovjs.org'\n    }, resp_func);\n  });\n};\n\nSubscriptionManager.prototype.userCreate = function (params, resp_func) {\n  params.user_id = (params.user_id || '').trim();\n  if (!params.user_id) {\n    return resp_func('Missing username');\n  }\n  params.password = (params.password || '').trim();\n  if (!params.password) {\n    return resp_func('Missing password');\n  }\n  params.password_confirm = (params.password_confirm || '').trim();\n  if (!this.auto_create_user && !params.password_confirm) {\n    return resp_func('Missing password confirmation');\n  }\n  params.email = (params.email || '').trim();\n  if (!this.auto_create_user && !params.email) {\n    return resp_func('Missing email');\n  }\n  params.display_name = (params.display_name || '').trim();\n  let hashed_password = hashedPassword(params.user_id, params.password);\n  if (hashed_password !== params.password) {\n    local_storage.set('password', `prehashed$$${hashed_password}`);\n  }\n  let hashed_password_confirm = hashedPassword(params.user_id, params.password_confirm);\n  if (hashed_password !== hashed_password_confirm) {\n    return resp_func('Passwords do not match');\n  }\n  this.login_credentials = { user_id: params.user_id, password: hashed_password };\n  return this.userCreateInternal({\n    display_name: params.display_name || params.user_id,\n    user_id: params.user_id,\n    email: params.email,\n    password: hashed_password\n  }, resp_func);\n};\n\nSubscriptionManager.prototype.logout = function () {\n  assert(this.logged_in);\n  assert(!this.logging_in);\n  assert(!this.logging_out);\n  // Don't know how to gracefully handle logging out with subscriptions currently, assert we have none\n  for (let channel_id in this.channels) {\n    let channel = this.channels[channel_id];\n    assert(!channel.subscriptions, `Remaining active subscription for ${channel_id}`);\n    if (channel.autosubscribed) {\n      channel.autosubscribed = false;\n    }\n  }\n\n  this.logging_out = true;\n  this.client.send('logout', null, err => {\n    this.logging_out = false;\n    if (!err) {\n      local_storage.set('password', undefined);\n      this.logged_in = false;\n      this.logged_in_username = null;\n      this.was_logged_in = false;\n      this.login_credentials = null;\n      this.emit('logout');\n    }\n  });\n};\n\nSubscriptionManager.prototype.sendCmdParse = function (command, resp_func) {\n  let self = this;\n  let channel_ids = Object.keys(self.channels);\n  let idx = 0;\n  let last_error = 'Unknown command';\n  function tryNext() {\n    let channel_id;\n    let channel;\n    do {\n      channel_id = channel_ids[idx++];\n      channel = self.channels[channel_id];\n    } while (channel_id && (!channel || !(channel.subscriptions || channel.autosubscribed)));\n    if (!channel_id) {\n      return resp_func(last_error);\n    }\n    return channel.send('cmdparse', command, { silent_error: 1 }, function (err, resp) {\n      if (err || resp && resp.found) {\n        return resp_func(err, resp ? resp.resp : null);\n      }\n      // otherwise, was not found\n      if (resp && resp.err) {\n        last_error = resp.err;\n      }\n      return self.onceConnected(tryNext);\n    });\n  }\n  self.onceConnected(tryNext);\n};\n\nexport function create(client) {\n  return new SubscriptionManager(client);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\nconst assert = require('assert');\nconst engine = require('./engine.js');\nconst { filewatchOn } = require('./filewatch.js');\nconst local_storage = require('./local_storage.js');\nconst urlhash = require('./urlhash.js');\nconst { callEach, isPowerOfTwo, nextHighestPowerOfTwo, ridx } = require('../../common/util.js');\n\nconst TEX_UNLOAD_TIME = 5 * 60 * 1000; // for textures loaded (each frame) with auto_unload: true\n\nexport let textures = {};\nexport let load_count = 0;\nlet aniso = 4;\nlet max_aniso = 0;\nlet aniso_enum;\n\nlet default_filter_min;\nlet default_filter_mag;\n\nconst cube_faces = [{ target: 'TEXTURE_CUBE_MAP_NEGATIVE_X', pos: [0, 1] }, { target: 'TEXTURE_CUBE_MAP_POSITIVE_X', pos: [0, 0] }, { target: 'TEXTURE_CUBE_MAP_NEGATIVE_Y', pos: [1, 0] }, { target: 'TEXTURE_CUBE_MAP_POSITIVE_Y', pos: [1, 1] }, { target: 'TEXTURE_CUBE_MAP_NEGATIVE_Z', pos: [2, 0] }, { target: 'TEXTURE_CUBE_MAP_POSITIVE_Z', pos: [2, 1] }];\n\nexport const format = {\n  R8: { count: 1 },\n  RGB8: { count: 3 },\n  RGBA8: { count: 4 }\n};\n\nexport function defaultFilters(min, mag) {\n  default_filter_min = min;\n  default_filter_mag = mag;\n}\n\nlet bound_unit = null;\nlet bound_tex = [];\n\nlet handle_loading;\nlet handle_error;\n\nlet global_timer;\n\nfunction setUnit(unit) {\n  if (unit !== bound_unit) {\n    gl.activeTexture(gl.TEXTURE0 + unit);\n    bound_unit = unit;\n  }\n}\n\nfunction bindHandle(unit, target, handle) {\n  if (bound_tex[unit] !== handle) {\n    setUnit(unit);\n    gl.bindTexture(target, handle);\n    bound_tex[unit] = handle;\n  }\n}\n\nfunction unbindAll(target) {\n  for (let unit = 0; unit < bound_tex.length; ++unit) {\n    setUnit(unit);\n    gl.bindTexture(target, target === gl.TEXTURE_2D ? handle_loading : null);\n    bound_tex[unit] = null;\n  }\n}\n\nexport function bind(unit, tex) {\n  tex.last_use = global_timer;\n  // May or may not change the unit\n  bindHandle(unit, tex.target, tex.eff_handle);\n}\n\n// hot path inlined for perf\nexport function bindArray(texs) {\n  for (let ii = 0; ii < texs.length; ++ii) {\n    let tex = texs[ii];\n    tex.last_use = global_timer;\n    let handle = tex.eff_handle;\n    if (bound_tex[ii] !== handle) {\n      if (ii !== bound_unit) {\n        gl.activeTexture(gl.TEXTURE0 + ii);\n        bound_unit = ii;\n      }\n      gl.bindTexture(tex.target, handle);\n      bound_tex[ii] = handle;\n    }\n  }\n}\n\nexport function isArrayBound(texs) {\n  for (let ii = 0; ii < texs.length; ++ii) {\n    let tex = texs[ii];\n    let handle = tex.eff_handle;\n    if (bound_tex[ii] !== handle) {\n      return false;\n    }\n  }\n  return true;\n}\n\nlet auto_unload_textures = [];\n\nfunction Texture(params) {\n  this.name = params.name;\n  this.loaded = false;\n  this.load_fail = false;\n  this.target = params.target || gl.TEXTURE_2D;\n  this.is_array = this.target === gl.TEXTURE_2D_ARRAY;\n  this.is_cube = this.target === gl.TEXTURE_CUBE_MAP;\n  this.handle = gl.createTexture();\n  this.eff_handle = handle_loading;\n  this.setSamplerState(params);\n  this.src_width = this.src_height = 1;\n  this.width = this.height = 1;\n  this.nozoom = params.nozoom || false;\n  this.on_load = [];\n  this.gpu_mem = 0;\n  this.soft_error = params.soft_error || false;\n  this.last_use = global_timer;\n  this.auto_unload = params.auto_unload || false;\n  if (this.auto_unload) {\n    auto_unload_textures.push(this);\n  }\n\n  this.format = params.format || format.RGBA8;\n\n  if (params.data) {\n    let err = this.updateData(params.width, params.height, params.data);\n    assert(!err, err);\n  } else {\n    // texture is not valid, do not leave bound\n    unbindAll(this.target);\n    if (params.url) {\n      this.url = params.url;\n      this.loadURL(params.url);\n    }\n  }\n}\n\nTexture.prototype.updateGPUMem = function () {\n  let new_size = this.width * this.height * this.format.count;\n  if (this.mipmaps) {\n    new_size *= 1.5;\n  }\n  let diff = new_size - this.gpu_mem;\n  engine.perf_state.gpu_mem.tex += diff;\n  this.gpu_mem = diff;\n};\n\nTexture.prototype.setSamplerState = function (params) {\n  let target = this.target;\n  setUnit(0);\n  bound_tex[0] = null; // Force a re-bind, no matter what\n  bindHandle(0, target, this.handle);\n\n  this.filter_min = params.filter_min || default_filter_min;\n  this.filter_mag = params.filter_mag || default_filter_mag;\n  gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, this.filter_min);\n  gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, this.filter_mag);\n  this.wrap_s = params.wrap_s || gl.REPEAT;\n  this.wrap_t = params.wrap_t || gl.REPEAT;\n  gl.texParameteri(target, gl.TEXTURE_WRAP_S, this.wrap_s);\n  gl.texParameteri(target, gl.TEXTURE_WRAP_T, this.wrap_t);\n\n  this.mipmaps = this.filter_min >= 0x2700 && this.filter_min <= 0x2703; // Probably gl.LINEAR_MIPMAP_LINEAR\n\n  if (max_aniso) {\n    if (this.mipmaps && params.filter_mag !== gl.NEAREST) {\n      gl.texParameterf(gl.TEXTURE_2D, aniso_enum, aniso);\n    } else {\n      gl.texParameterf(gl.TEXTURE_2D, aniso_enum, 1);\n    }\n  }\n};\n\nTexture.prototype.updateData = function updateData(w, h, data) {\n  assert(!this.destroyed);\n  setUnit(0);\n  bound_tex[0] = null; // Force a re-bind, no matter what\n  bindHandle(0, this.target, this.handle);\n  this.last_use = global_timer;\n  this.src_width = w;\n  this.src_height = h;\n  this.width = w;\n  this.height = h;\n  gl.getError(); // clear the error flag if there is one\n  // Resize NP2 if this is not being used for a texture array, and it is not explicitly allowed (non-mipmapped, wrapped)\n  let np2 = (!isPowerOfTwo(w) || !isPowerOfTwo(h)) && !this.is_array && !this.is_cube && !(!this.mipmaps && this.wrap_s === gl.CLAMP_TO_EDGE && this.wrap_t === gl.CLAMP_TO_EDGE);\n  if (np2) {\n    this.width = nextHighestPowerOfTwo(w);\n    this.height = nextHighestPowerOfTwo(h);\n    gl.texImage2D(this.target, 0, this.format.internal_type, this.width, this.height, 0, this.format.internal_type, this.format.gl_type, null);\n  }\n  if (data instanceof Uint8Array) {\n    assert(data.length >= w * h * this.format.count);\n    assert(!this.is_cube);\n    if (this.is_array) {\n      let num_images = h / w; // assume square\n      gl.texImage3D(this.target, 0, this.format.internal_type, w, w, num_images, 0, this.format.internal_type, this.format.gl_type, data);\n    } else if (np2) {\n      // Could do multiple upload thing like below, but smarter, but we really shouldn't be doing this for\n      // in-process generated images!\n      gl.texSubImage2D(this.target, 0, 0, 0, w, h, this.format.internal_type, this.format.gl_type, data);\n    } else {\n      gl.texImage2D(this.target, 0, this.format.internal_type, w, h, 0, this.format.internal_type, this.format.gl_type, data);\n    }\n  } else {\n    assert(data.width); // instanceof Image fails with ublock AdBlocker; also, this is either an Image or Canvas\n    if (this.is_cube) {\n      assert.equal(w * 2, h * 3);\n      let tex_size = h / 2;\n      let canvas = document.createElement('canvas');\n      canvas.width = tex_size;\n      canvas.height = tex_size;\n      let ctx = canvas.getContext('2d');\n      for (let ii = 0; ii < cube_faces.length; ++ii) {\n        let face = cube_faces[ii];\n        ctx.drawImage(data, face.pos[0] * tex_size, face.pos[1] * tex_size, tex_size, tex_size, 0, 0, tex_size, tex_size);\n        gl.texImage2D(gl[face.target], 0, this.format.internal_type, this.format.internal_type, this.format.gl_type, canvas);\n      }\n    } else if (this.is_array) {\n      let num_images = h / w;\n      gl.texImage3D(this.target, 0, this.format.internal_type, w, w, num_images, 0, this.format.internal_type, this.format.gl_type, data);\n\n      if (gl.getError()) {\n        // Fix for Samsung devices (Chris's and Galaxy S8 on CrossBrowserTesting)\n        // Try drawing to canvas first\n        let canvas = document.createElement('canvas');\n        canvas.width = w;\n        canvas.height = h;\n        let ctx = canvas.getContext('2d');\n        ctx.drawImage(data, 0, 0);\n        gl.texImage3D(this.target, 0, this.format.internal_type, w, w, num_images, 0, this.format.internal_type, this.format.gl_type, canvas);\n      }\n    } else if (np2) {\n      // Pad up to power of two\n      // Duplicate right and bottom pixel row by sending image 3 times\n      if (w !== this.width) {\n        gl.texSubImage2D(this.target, 0, 1, 0, this.format.internal_type, this.format.gl_type, data);\n      }\n      if (h !== this.height) {\n        gl.texSubImage2D(this.target, 0, 0, 1, this.format.internal_type, this.format.gl_type, data);\n      }\n      gl.texSubImage2D(this.target, 0, 0, 0, this.format.internal_type, this.format.gl_type, data);\n    } else {\n      gl.texImage2D(this.target, 0, this.format.internal_type, this.format.internal_type, this.format.gl_type, data);\n    }\n  }\n  let gl_err = gl.getError();\n  if (gl_err) {\n    return gl_err;\n  }\n  if (this.mipmaps) {\n    gl.generateMipmap(this.target);\n    assert(!gl.getError());\n  }\n  this.updateGPUMem();\n  this.eff_handle = this.handle;\n  this.loaded = true;\n\n  callEach(this.on_load, this.on_load = null, this);\n\n  return 0;\n};\n\nTexture.prototype.onLoad = function (cb) {\n  if (this.loaded) {\n    cb(this); // eslint-disable-line callback-return\n  } else {\n    this.on_load.push(cb);\n  }\n};\n\nlet texture_base_url = '';\nexport function getExternalTextureURL(url) {\n  if (!url.match(/^.{2,7}:/)) {\n    url = `${texture_base_url || urlhash.getURLBase()}${url}`;\n  }\n  return url;\n}\nexport function setExternalTextureBaseURL(base_url) {\n  texture_base_url = base_url;\n}\n\nconst TEX_RETRY_COUNT = 4;\nTexture.prototype.loadURL = function loadURL(url, filter) {\n  let tex = this;\n  assert(!tex.destroyed);\n\n  // When our browser's location has been changed from 'site.com/foo/' to\n  //  'site.com/foo/bar/7' our relative image URLs are still relative to the\n  //  base.  Maybe should set some meta tag to do this instead?\n  if (!url.match(/^.{2,7}:/)) {\n    url = `${urlhash.getURLBase()}${url}`;\n  }\n\n  function tryLoad(next) {\n    let did_next = false;\n    function done(img) {\n      if (!did_next) {\n        did_next = true;\n        return void next(img);\n      }\n    }\n\n    let img = new Image();\n    img.onload = function () {\n      done(img);\n    };\n    function fail() {\n      done(null);\n    }\n    img.onerror = fail;\n    img.crossOrigin = 'anonymous';\n    img.src = url;\n  }\n\n  ++load_count;\n  let retries = 0;\n  function handleLoad(img) {\n    let err_details = '';\n    if (img) {\n      tex.format = format.RGBA8;\n      if (filter) {\n        img = filter(tex, img);\n      }\n      let err = tex.updateData(img.width, img.height, img);\n      if (err) {\n        err_details = `: GLError(${err})`;\n        // Samsung TV gets 1282 on texture arrays\n        // Samsung Galaxy S6 gets 1281 on texture arrays\n        if (tex.is_array && (String(err) === '1282' || String(err) === '1281') && engine.webgl2 && !engine.DEBUG) {\n          local_storage.setJSON('webgl2_disable', {\n            ua: navigator.userAgent,\n            ts: Date.now()\n          });\n          console.error(`Error loading array texture \"${url}\"${err_details}, reloading without WebGL2..`);\n          engine.reloadSafe();\n          return;\n        }\n        retries = TEX_RETRY_COUNT; // do not retry this\n      } else {\n        --load_count;\n        return;\n      }\n    }\n    let err = `Error loading texture \"${url}\"${err_details}`;\n    retries++;\n    if (retries > TEX_RETRY_COUNT) {\n      --load_count;\n      tex.eff_handle = handle_error;\n      tex.load_fail = true;\n      console.error(`${err}${err_details ? '' : ', retries failed'}`);\n      if (tex.soft_error) {\n        tex.err = 'Load failed';\n      } else {\n        assert(false, err);\n      }\n      return;\n    }\n    console.error(`${err}, retrying... `);\n    setTimeout(tryLoad.bind(null, handleLoad), 100 * retries * retries);\n  }\n  tryLoad(handleLoad);\n};\n\nTexture.prototype.copyTexImage = function (x, y, w, h) {\n  assert(!this.destroyed);\n  assert(w && h);\n  bindHandle(0, this.target, this.handle);\n  gl.copyTexImage2D(this.target, 0, gl.RGB, x, y, w, h, 0);\n  this.last_use = global_timer;\n  this.src_width = this.width = w;\n  this.src_height = this.height = h;\n  this.updateGPUMem();\n};\n\nTexture.prototype.destroy = function () {\n  if (this.destroyed) {\n    return;\n  }\n  assert(this.name);\n  let auto_unload = this.auto_unload;\n  if (auto_unload) {\n    this.auto_unload = null;\n    let idx = auto_unload_textures.indexOf(this);\n    assert(idx !== -1);\n    ridx(auto_unload_textures, idx);\n  }\n  delete textures[this.name];\n  unbindAll(this.target);\n  gl.deleteTexture(this.handle);\n  this.width = this.height = 0;\n  this.updateGPUMem();\n  this.destroyed = true;\n  if (typeof auto_unload === 'function') {\n    auto_unload();\n  }\n};\n\nfunction create(params) {\n  assert(params.name);\n  let texture = new Texture(params);\n  textures[params.name] = texture;\n  return texture;\n}\n\nlet last_temporary_id = 0;\nexport function createForCapture(unique_name, auto_unload) {\n  let name = unique_name || `screen_temporary_tex_${++last_temporary_id}`;\n  assert(!textures[name]);\n  let texture = create({\n    filter_min: gl.NEAREST,\n    filter_mag: gl.NEAREST,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE,\n    format: format.RGB8,\n    name,\n    auto_unload\n  });\n  texture.loaded = true;\n  texture.eff_handle = texture.handle;\n  return texture;\n}\n\nexport function load(params) {\n  let key = params.name = params.name || params.url;\n  assert(key);\n  let tex = textures[key];\n  if (!tex) {\n    tex = create(params);\n  }\n  tex.last_use = global_timer;\n  return tex;\n}\n\nexport function cname(key) {\n  let idx = key.lastIndexOf('/');\n  if (idx !== -1) {\n    key = key.slice(idx + 1);\n  }\n  idx = key.indexOf('.');\n  if (idx !== -1) {\n    key = key.slice(0, idx);\n  }\n  return key.toLowerCase();\n}\nexport function findTexForReplacement(search_key) {\n  search_key = cname(search_key);\n  for (let key in textures) {\n    let compare_key = cname(key);\n    if (compare_key === search_key) {\n      return textures[key];\n    }\n  }\n  return null;\n}\n\nlet tick_next_tex = 0;\nexport function texturesTick() {\n  global_timer = engine.global_timer;\n  let len = auto_unload_textures.length;\n  if (!len) {\n    return;\n  }\n  if (tick_next_tex >= len) {\n    tick_next_tex = 0;\n  }\n  let tex = auto_unload_textures[tick_next_tex];\n  if (tex.last_use < global_timer - TEX_UNLOAD_TIME) {\n    console.log(`Unloading texture ${tex.name}`);\n    tex.destroy();\n  } else {\n    ++tick_next_tex;\n  }\n}\n\nexport function texturesUnloadDynamic() {\n  while (auto_unload_textures.length) {\n    auto_unload_textures[0].destroy();\n  }\n}\n\nfunction textureReload(filename) {\n  let tex = textures[filename];\n  if (tex && tex.url) {\n    tex.loadURL(`${tex.url}?rl=${Date.now()}`);\n  }\n}\n\nexport function startup() {\n\n  default_filter_min = gl.LINEAR_MIPMAP_LINEAR;\n  default_filter_mag = gl.LINEAR;\n\n  format.R8.internal_type = gl.LUMINANCE;\n  format.R8.gl_type = gl.UNSIGNED_BYTE;\n  format.RGB8.internal_type = gl.RGB;\n  format.RGB8.gl_type = gl.UNSIGNED_BYTE;\n  format.RGBA8.internal_type = gl.RGBA;\n  format.RGBA8.gl_type = gl.UNSIGNED_BYTE;\n\n  let ext_anisotropic = gl.getExtension('EXT_texture_filter_anisotropic') || gl.getExtension('MOZ_EXT_texture_filter_anisotropic') || gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');\n  if (ext_anisotropic) {\n    aniso_enum = ext_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT;\n    aniso = max_aniso = gl.getParameter(ext_anisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT);\n  }\n\n  handle_error = load({\n    name: 'error',\n    width: 2, height: 2,\n    nozoom: true,\n    format: format.RGBA8,\n    filter_mag: gl.NEAREST,\n    data: new Uint8Array([255, 20, 147, 255, 255, 0, 0, 255, 255, 255, 255, 255, 255, 20, 147, 255])\n  }).handle;\n\n  handle_loading = load({\n    name: 'loading',\n    width: 2, height: 2,\n    nozoom: true,\n    format: format.RGBA8,\n    data: new Uint8Array([127, 127, 127, 255, 0, 0, 0, 255, 64, 64, 64, 255, 127, 127, 127, 255])\n  }).handle;\n\n  load({\n    name: 'white',\n    width: 2, height: 2,\n    nozoom: true,\n    format: format.RGBA8,\n    data: new Uint8Array([255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255])\n  });\n\n  load({\n    name: 'invisible',\n    width: 2, height: 2,\n    nozoom: true,\n    format: format.RGBA8,\n    data: new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n  });\n\n  filewatchOn('.png', textureReload);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_engine = require('./engine.js');\nconst { floor, min, pow, random } = Math;\nconst sprites = require('./sprites.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\nconst glov_ui = require('./ui.js');\nconst { easeOut } = require('../../common/util.js');\nconst { unit_vec, vec4 } = require('./vmath.js');\n\nlet transitions = [];\n\nexport const IMMEDIATE = 'immediate';\n\nexport const REMOVE = 'remove';\nexport const CONTINUE = 'continue';\n\nconst shader_data = {\n  transition_pixelate: {\n    fp: 'glov/shaders/transition_pixelate.fp'\n  }\n};\n\nfunction getShader(key) {\n  let elem = shader_data[key];\n  if (!elem.shader) {\n    elem.shader = shaders.create(elem.fp);\n  }\n  return elem.shader;\n}\n\nclass GlovTransition {\n  constructor(z, func) {\n    this.z = z;\n    this.capture = null;\n    this.func = func;\n    this.accum_time = 0;\n  }\n}\n\nfunction transitionCapture(trans) {\n  assert(!trans.capture);\n  trans.capture = textures.createForCapture();\n  glov_engine.captureFramebuffer(trans.capture);\n}\n\nexport function queue(z, fn) {\n  let immediate = false;\n  if (z === IMMEDIATE) {\n    immediate = true;\n    z = Z.TRANSITION_FINAL;\n  }\n\n  for (let ii = 0; ii < transitions.length; ++ii) {\n    let trans = transitions[ii];\n    if (trans.z === z) {\n      // same Z\n      assert(trans.capture);\n      if (!trans.capture) {\n        // two transitions at the same Z on one frame!  ignore second\n        return false;\n      }\n    }\n  }\n  let trans = new GlovTransition(z, fn);\n  transitions.push(trans);\n\n  if (immediate) {\n    transitionCapture(trans);\n  }\n  return true;\n}\n\nfunction destroyTexture(tex) {\n  tex.destroy();\n}\n\nexport function render(dt) {\n  dt = min(dt, 100); // debug: clamp frame times\n  for (let trans_idx = 0; trans_idx < transitions.length; ++trans_idx) {\n    let trans = transitions[trans_idx];\n    trans.accum_time += dt;\n    if (!trans.capture) {\n      // queue up a capture past the specified Z, so transitions rendering at that Z (plus a handful) get captured\n      sprites.queuefn(trans.z + Z.TRANSITION_RANGE, transitionCapture.bind(null, trans));\n    } else if (trans.capture) {\n      // call the function and give them the Z\n      // If not the last one, want it to end now!\n      let force_end = trans_idx < transitions.length - 1;\n      let ret = trans.func(trans.z, trans.capture, trans.accum_time, force_end);\n      if (ret === REMOVE) {\n        setTimeout(destroyTexture.bind(null, trans.capture), 0);\n        transitions.splice(trans_idx, 1);\n        trans_idx--;\n      }\n    }\n  }\n}\n\nexport function active() {\n  return transitions.length;\n}\n\nfunction glovTransitionFadeFunc(fade_time, z, initial, ms_since_start, force_end) {\n  let progress = min(ms_since_start / fade_time, 1);\n  let alpha = 1 - easeOut(progress, 2);\n  let color = vec4(1, 1, 1, alpha);\n  camera2d.setNormalized();\n  sprites.queueraw4([initial], 0, 0, 0, 1, 1, 1, 1, 0, z, 0, 1, 1, 0, color);\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\n/*\n  // Doesn't work because we need more than just 2 UV values in the queue call\nfunction glovTransitionWipeFunc(wipe_time, wipe_angle, z, tex, ms_since_start, force_end) {\n  let progress = min(ms_since_start / wipe_time, 1);\n\n  camera2d.setNormalized();\n\n  let uvs = [[0,1], [1,0]];\n\n  let points = [{}, {}, {}, {}];\n  for (let ii = 0; ii < 4; ii++) {\n    let x = (ii === 1 || ii === 2) ? 1 : 0;\n    let y = (ii >= 2) ? 1 : 0;\n    points[ii].x = x;\n    points[ii].y = y;\n  }\n\n  while (wipe_angle > PI) {\n    wipe_angle -= (2 * PI);\n  }\n  while (wipe_angle < -PI) {\n    wipe_angle += (2 * PI);\n  }\n\n  // TODO: if anyone ever uses this, change 0 degrees to be up, not right, to match other things?\n  if (wipe_angle >= -PI_4 && wipe_angle <= PI_4) {\n    // horizontal wipe from left to right\n    let x0 = progress * 2; // rightmost x\n    let x1 = x0 - sin(abs(wipe_angle)) / SQRT1_2; // leftmost x\n    if (wipe_angle < 0) {\n      points[0].x = x1;\n      points[3].x = x0;\n    } else {\n      points[0].x = x0;\n      points[3].x = x1;\n    }\n    points[1].x = points[2].x = 2;\n  } else if (wipe_angle >= PI_2 + PI_4 || wipe_angle <= -PI_2 - PI_4) {\n    // horizontal wipe from right to left\n    let x0 = 1 - progress * 2; // leftmost x\n    let x1 = x0 + sin(abs(wipe_angle)) / SQRT1_2; // rightmost x,\n    if (wipe_angle < 0) {\n      points[1].x = x1;\n      points[2].x = x0;\n    } else {\n      points[1].x = x0;\n      points[2].x = x1;\n    }\n    points[0].x = points[3].x = -1;\n  } else if (wipe_angle > PI_4 && wipe_angle <= PI_2 + PI_4) {\n    // vertical wipe, top to bottom\n    let y0 = progress * 2; // bottommost y\n    let offs = cos(wipe_angle) / SQRT1_2;\n    let y1 = y0 - abs(offs); // topmost y,\n    if (offs > 0) {\n      points[0].y = y0;\n      points[1].y = y1;\n    } else {\n      points[0].y = y1;\n      points[1].y = y0;\n    }\n    points[2].y = points[3].y = 2;\n  } else {\n    // vertical wipe, bottom to top\n    let y0 = 1 - progress * 2; // topmost y\n    let offs = cos(wipe_angle) / SQRT1_2;\n    let y1 = y0 + abs(offs); // bottommost y,\n    if (offs > 0) {\n      points[2].y = y1;\n      points[3].y = y0;\n    } else {\n      points[2].y = y0;\n      points[3].y = y1;\n    }\n    points[0].y = points[1].y = -1;\n  }\n  // interp UVs based on points\n  points[0].u = lerp(points[0].x, uvs[0][0], uvs[1][0]);\n  points[1].u = lerp(points[1].x, uvs[0][0], uvs[1][0]);\n  points[2].u = lerp(points[2].x, uvs[0][0], uvs[1][0]);\n  points[3].u = lerp(points[3].x, uvs[0][0], uvs[1][0]);\n  points[0].v = lerp(points[0].y, uvs[0][1], uvs[1][1]);\n  points[1].v = lerp(points[1].y, uvs[0][1], uvs[1][1]);\n  points[2].v = lerp(points[2].y, uvs[0][1], uvs[1][1]);\n  points[3].v = lerp(points[3].y, uvs[0][1], uvs[1][1]);\n\n  sprites.queueraw4([tex],\n    points[0].x, points[0].y, points[3].x, points[3].y,\n    points[2].x, points[2].y, points[1].x, points[1].y,\n    z,\n    points[0].u, points[0].v, points[2].u, points[2].v,\n    unit_vec, 'alpha_nearest');\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\n*/\n\nfunction glovTransitionSplitScreenFunc(time, border_width, slide_window, z, tex, ms_since_start, force_end) {\n  let border_color = vec4(1, 1, 1, 1);\n  let progress = easeOut(min(ms_since_start / time, 1), 2);\n  camera2d.setNormalized();\n\n  let uvs = [[0, 1], [1, 0]];\n\n  let xoffs = progress;\n  let v_half = uvs[0][1] + (uvs[1][1] - uvs[0][1]) / 2;\n  if (slide_window) {\n    // slide window\n    sprites.queueraw([tex], 0, 0, z, 1 - xoffs, 1 / 2, 0, uvs[0][1], uvs[1][0] * (1 - progress), v_half, unit_vec);\n    sprites.queueraw([tex], 0 + xoffs, 1 / 2, z, 1 - xoffs, 1 / 2, uvs[1][0] * progress, v_half, uvs[1][0], uvs[1][1], unit_vec);\n  } else {\n    // slide image\n    sprites.queueraw([tex], 0 - xoffs, 0, z, 1, 1 / 2, uvs[0][0], uvs[0][1], uvs[1][0], v_half, unit_vec);\n    sprites.queueraw([tex], 0 + xoffs, 1 / 2, z, 1, 1 / 2, uvs[0][0], v_half, uvs[1][0], uvs[1][1], unit_vec);\n  }\n  let border_grow_progress = min(progress * 4, 1);\n  border_color[3] = border_grow_progress;\n  border_width *= border_grow_progress;\n  // TODO: Would look better if the horizontal border grew from the middle out, so the overlapping bit is identical\n  // on both sides\n  glov_ui.drawRect(0, 0.5 - border_width, 1 - xoffs, 0.5, z + 1, border_color);\n  glov_ui.drawRect(1 - xoffs - border_width, 0, 1 - xoffs, 0.5, z + 1, border_color);\n  glov_ui.drawRect(xoffs, 0.5, 1, 0.5 + border_width, z + 1, border_color);\n  glov_ui.drawRect(xoffs, 0.5, xoffs + border_width, 1, z + 1, border_color);\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\nconst render_scale = 1;\nlet transition_pixelate_texture;\n\nfunction transitionPixelateCapture() {\n  if (!transition_pixelate_texture) {\n    transition_pixelate_texture = textures.createForCapture();\n  }\n  glov_engine.captureFramebuffer(transition_pixelate_texture);\n}\n\nfunction glovTransitionPixelateFunc(time, z, tex, ms_since_start, force_end) {\n  //ms_since_start %= time;\n  //let viewport = glov_engine.graphics_device.getViewport();\n  //let gd_width = viewport[2];\n  let gd_width = glov_engine.width;\n  let progress = min(ms_since_start / time, 1);\n  camera2d.setNormalized();\n\n  if (progress > 0.5) {\n    sprites.queuefn(z, transitionPixelateCapture);\n    if (transition_pixelate_texture) {\n      tex = transition_pixelate_texture;\n    }\n  }\n\n  let partial_progress = (progress > 0.5 ? 1 - progress : progress) * 2;\n  // Use power of two scalings, but then scale relative to a 1024px virtual screen, so the biggest\n  //  pixel is about the same percentage of the screen regardless of resolution.\n  let pixel_scale = pow(2, floor(partial_progress * 8.9)) / 1024 * gd_width * render_scale;\n\n  let param0 = vec4(tex.width / pixel_scale, tex.height / pixel_scale, pixel_scale / tex.width, pixel_scale / tex.height);\n  let param1 = vec4(0.5 / tex.width, 0.5 / tex.height, (tex.texSizeX - 1) / tex.width, (tex.texSizeY - 1) / tex.height);\n\n  sprites.queueraw([tex], 0, 0, z + 1, 1, 1, 0, 1, 1, 0, unit_vec, getShader('transition_pixelate'), {\n    param0,\n    param1\n  });\n\n  if (force_end || progress === 1) {\n    if (transition_pixelate_texture) {\n      setTimeout(destroyTexture.bind(null, transition_pixelate_texture), 0);\n    }\n    transition_pixelate_texture = null;\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\nexport function fade(fade_time) {\n  return glovTransitionFadeFunc.bind(null, fade_time);\n}\n\n// export function wipe(wipe_time, wipe_angle) {\n//   return glovTransitionWipeFunc.bind(null, wipe_time, wipe_angle);\n// }\n\n// border_width in camera-relative size\nexport function splitScreen(time, border_width, slide_window) {\n  border_width /= camera2d.w(); // convert to normalized units\n  return glovTransitionSplitScreenFunc.bind(null, time, border_width, slide_window);\n}\n\nexport function pixelate(fade_time) {\n  return glovTransitionPixelateFunc.bind(null, fade_time);\n}\n\n// export function logoZoom(time, logo) {\n//   return glovTransitionLogoZoomFunc.bind(null, time, logo);\n// }\n\nexport function randomTransition(fade_time_scale) {\n  fade_time_scale = fade_time_scale || 1;\n  let idx = floor(random() * 3);\n  switch (idx) {\n    case 0:\n      return fade(500 * fade_time_scale);\n    case 1:\n      return splitScreen(250 * fade_time_scale, 2, false);\n    case 2:\n      return pixelate(750 * fade_time_scale);\n    // case 3:\n    //   return wipe(250 * fade_time_scale, random() * 2 * PI);\n    // case 4:\n    //   if (!logo) {\n    //     GlovTextureLoadOptions options;\n    //     options.clamp_s = options.clamp_t = true;\n    //     logo = GlovTextures::loadtex(\"data/SampleLogoTransition.png\", &options);\n    //   }\n    //   glovTransitionQueue(Z_TRANSITION_FINAL, glovTransitionLogoZoom(500, logo));\n    //   break;\n    default:\n      assert(0);\n  }\n  return null;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-underscore-dangle:off */\n\nwindow.Z = window.Z || {};\nZ.BORDERS = Z.BORDERS || 90;\nZ.UI = Z.UI || 100;\nZ.MODAL = Z.MODAL || 1000;\nZ.TOOLTIP = Z.TOOLTIP || 2000;\nZ.DEBUG = Z.DEBUG || 9800;\n\n// very high, but can still add integers\nZ.TRANSITION_FINAL = Z.TRANSITION_FINAL || 9900;\n// how much Z range can be used for rendering transitions - the capture happens at z + Z_TRANSITION_RANGE\nZ.TRANSITION_RANGE = Z.TRANSITION_RANGE || 10;\n\nZ.FPSMETER = Z.FPSMETER || 10000;\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_edit_box = require('./edit_box.js');\nconst effects = require('./effects.js');\nconst glov_engine = require('./engine.js');\nconst glov_font = require('./font.js');\nconst glov_input = require('./input.js');\nconst { linkTick } = require('./link.js');\nconst { abs, max, min, round, sqrt } = Math;\nconst { soundLoad, soundPlay } = require('./sound.js');\nconst glov_sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { clamp, clone, lerp, merge } = require('../../common/util.js');\nconst { mat43, m43identity, m43mul } = require('./mat43.js');\nconst { vec2, vec4, v4scale } = require('./vmath.js');\n\nconst MODAL_DARKEN = 0.75;\nlet KEYS;\nlet PAD;\n\nconst menu_fade_params_default = {\n  blur: [0.125, 0.865],\n  saturation: [0.5, 0.1],\n  brightness: [1, 1 - MODAL_DARKEN],\n  fallback_darken: vec4(0, 0, 0, MODAL_DARKEN),\n  z: Z.MODAL\n};\n\nexport function focuslog(...args) {\n  // console.log(`focuslog(${glov_engine.global_frame_index}): `, ...args);\n}\n\nexport function makeColorSet(color) {\n  let ret = {\n    regular: vec4(),\n    rollover: vec4(),\n    down: vec4(),\n    disabled: vec4()\n  };\n  v4scale(ret.regular, color, 1);\n  v4scale(ret.rollover, color, 0.8); // because we do not have specific graphics\n  v4scale(ret.down, color, 0.7);\n  v4scale(ret.disabled, color, 0.4);\n  for (let field in ret) {\n    ret[field][3] = color[3];\n  }\n  return ret;\n}\n\nfunction doBlurEffect(factor, params) {\n  factor = lerp(factor, params.blur[0], params.blur[1]);\n  if (factor) {\n    effects.applyGaussianBlur({\n      source: glov_engine.captureFramebuffer(),\n      blur: factor\n      // min_size: 128,\n    });\n  }\n}\n\nlet desaturate_xform = mat43();\nlet desaturate_tmp = mat43();\nfunction doDesaturateEffect(factor, params) {\n  let saturation = lerp(factor, params.saturation[0], params.saturation[1]);\n  let brightness = lerp(factor, params.brightness[0], params.brightness[1]);\n  if (saturation === 1 && brightness === 1) {\n    return;\n  }\n  m43identity(desaturate_xform);\n\n  effects.saturationMatrix(desaturate_tmp, saturation);\n  m43mul(desaturate_xform, desaturate_xform, desaturate_tmp);\n\n  effects.brightnessScaleMatrix(desaturate_tmp, brightness);\n  m43mul(desaturate_xform, desaturate_xform, desaturate_tmp);\n\n  // if ((hue % (Math.PI * 2)) !== 0) {\n  //   effects.hueMatrix(tmp, hue);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (contrast !== 1) {\n  //   effects.contrastMatrix(tmp, contrast);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (brightness !== 0) {\n  //   effects.brightnessMatrix(tmp, brightness);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (additiveRGB[0] !== 0 || additiveRGB[1] !== 0 || additiveRGB[2] !== 0) {\n  //   effects.additiveMatrix(tmp, additiveRGB);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (grayscale) {\n  //   effects.grayScaleMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (negative) {\n  //   effects.negativeMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (sepia) {\n  //   effects.sepiaMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  effects.applyColorMatrix({\n    colorMatrix: desaturate_xform,\n    source: glov_engine.captureFramebuffer()\n  });\n}\n\n// overrideable default parameters\nexport let button_height = 32;\nexport let font_height = 24;\nexport let button_width = 200;\nexport let modal_button_width = 100;\nexport let button_img_size = button_height;\nexport let modal_width = 600;\nexport let modal_y0 = 200;\nexport let modal_title_scale = 1.2;\nexport let modal_pad = 16;\nexport let panel_pixel_scale = 32 / 13; // button_height / button pixel resolution\nexport let tooltip_panel_pixel_scale = panel_pixel_scale;\nexport let tooltip_width = 400;\nexport let tooltip_pad = 8;\n\nexport let font_style_focused = glov_font.style(null, {\n  color: 0x000000ff,\n  outline_width: 2,\n  outline_color: 0xFFFFFFff\n});\nexport let font_style_normal = glov_font.styleColored(null, 0x000000ff);\n\nexport let font;\nexport let sprites = {};\n\nexport let color_button = makeColorSet([1, 1, 1, 1]);\nexport let color_panel = vec4(1, 1, 0.75, 1);\nexport let modal_font_style = glov_font.styleColored(null, 0x000000ff);\n\nlet sounds = {};\nexport let button_mouseover = false; // for callers to poll the very last button\nexport let button_focused = false; // for callers to poll the very last button\nexport let button_click = null; // on click, for callers to poll which mouse button, etc\nexport let touch_changed_focus = false; // did a touch even this frame change focus?\n// For tracking global mouseover state\nlet last_frame_button_mouseover = false;\nlet frame_button_mouseover = false;\n\nlet modal_dialog = null;\nlet modal_stealing_focus = false;\nexport let menu_up = false; // Boolean to be set by app to impact behavior, similar to a modal\nlet menu_fade_params = merge({}, menu_fade_params_default);\nlet menu_up_time = 0;\n\nexports.this_frame_edit_boxes = [];\nlet last_frame_edit_boxes = [];\nlet dom_elems = [];\nlet dom_elems_issued = 0;\n\n// for modal dialogs\nlet button_keys;\n\nlet focused_last_frame;\nlet focused_this_frame;\nlet focused_key_not;\nlet focused_key;\nlet focused_key_prev1;\nlet focused_key_prev2;\n\nlet pad_focus_left;\nlet pad_focus_right;\n\nexport function loadUISprite(name, ws, hs, overrides, only_override) {\n  let override = overrides && overrides[name];\n  if (override === null) {\n    // skip it, assume not used\n  } else if (override) {\n    sprites[name] = glov_sprites.create({\n      name: override[0],\n      ws: override[1],\n      hs: override[2]\n    });\n  } else if (!only_override) {\n    sprites[name] = glov_sprites.create({\n      name: `ui/${name}`,\n      ws,\n      hs\n    });\n  }\n}\n\nexport function startup(param) {\n  font = param.font;\n  let overrides = param.ui_sprites;\n  KEYS = glov_input.KEYS;\n  PAD = glov_input.PAD;\n  if (param.pad_focus_dpad) {\n    pad_focus_left = PAD.LEFT;\n    pad_focus_right = PAD.RIGHT;\n  } else {\n    pad_focus_left = PAD.LEFT_BUMPER;\n    pad_focus_right = PAD.RIGHT_BUMPER;\n  }\n\n  loadUISprite('button', [4, 5, 4], [13], overrides);\n  sprites.button_regular = sprites.button;\n  loadUISprite('button_rollover', [4, 5, 4], [13], overrides, true);\n  loadUISprite('button_down', [4, 5, 4], [13], overrides);\n  loadUISprite('button_disabled', [4, 5, 4], [13], overrides);\n  loadUISprite('panel', [3, 2, 3], [3, 10, 3], overrides);\n  loadUISprite('menu_entry', [4, 5, 4], [13], overrides);\n  loadUISprite('menu_selected', [4, 5, 4], [13], overrides);\n  loadUISprite('menu_down', [4, 5, 4], [13], overrides);\n  loadUISprite('menu_header', [4, 5, 12], [13], overrides);\n  loadUISprite('slider', [6, 2, 6], [13], overrides);\n  // loadUISprite('slider_notch', [3], [13], overrides);\n  loadUISprite('slider_handle', [9], [13], overrides);\n\n  sprites.white = glov_sprites.create({ url: 'white' });\n\n  button_keys = {\n    ok: { key: [KEYS.O], pad: [PAD.X] },\n    cancel: { key: [KEYS.ESC], pad: [PAD.B, PAD.Y] }\n  };\n  button_keys.yes = clone(button_keys.ok);\n  button_keys.yes.key.push(KEYS.Y);\n  button_keys.no = clone(button_keys.cancel);\n  button_keys.no.key.push(KEYS.N);\n}\n\nlet dynamic_text_elem;\nlet per_frame_dom_alloc = [0, 0, 0, 0, 0, 0, 0];\nexport function getElem(allow_modal, last_elem) {\n  if (modal_dialog && !allow_modal) {\n    return null;\n  }\n  if (dom_elems_issued >= dom_elems.length || !last_elem) {\n    let elem = document.createElement('div');\n    if (glov_engine.DEBUG && !glov_engine.resizing()) {\n      per_frame_dom_alloc[glov_engine.global_frame_index % per_frame_dom_alloc.length] = 1;\n      let sum = 0;\n      for (let ii = 0; ii < per_frame_dom_alloc.length; ++ii) {\n        sum += per_frame_dom_alloc[ii];\n      }\n      assert(sum < per_frame_dom_alloc.length);\n    }\n    elem.setAttribute('class', 'glovui_dynamic');\n    if (!dynamic_text_elem) {\n      dynamic_text_elem = document.getElementById('dynamic_text');\n    }\n    dynamic_text_elem.appendChild(elem);\n    dom_elems.push(elem);\n    last_elem = elem;\n  }\n  if (dom_elems[dom_elems_issued] !== last_elem) {\n    for (let ii = dom_elems_issued + 1; ii < dom_elems.length; ++ii) {\n      if (dom_elems[ii] === last_elem) {\n        dom_elems[ii] = dom_elems[dom_elems_issued];\n        dom_elems[dom_elems_issued] = last_elem;\n      }\n    }\n  }\n  let elem = dom_elems[dom_elems_issued];\n  dom_elems_issued++;\n  return elem;\n}\n\nexport function bindSounds(_sounds) {\n  sounds = _sounds;\n  for (let key in sounds) {\n    soundLoad(sounds[key]);\n  }\n}\n\nexport function drawHBox(coords, s, color) {\n  let uidata = s.uidata;\n  let ws = [uidata.wh[0] * coords.h, 0, uidata.wh[2] * coords.h];\n  let x = coords.x;\n  ws[1] = max(0, coords.w - ws[0] - ws[2]);\n  for (let ii = 0; ii < ws.length; ++ii) {\n    let my_w = ws[ii];\n    s.draw({\n      x,\n      y: coords.y,\n      z: coords.z,\n      color,\n      w: my_w,\n      h: coords.h,\n      uvs: uidata.rects[ii]\n      // nozoom: true, // nozoom since different parts of the box get zoomed differently\n    });\n    x += my_w;\n  }\n}\n\nexport function drawVBox(coords, s, color) {\n  let uidata = s.uidata;\n  let hs = [uidata.hw[0] * coords.w, 0, uidata.hw[2] * coords.w];\n  let y = coords.y;\n  hs[1] = max(0, coords.h - hs[0] - hs[2]);\n  for (let ii = 0; ii < hs.length; ++ii) {\n    let my_h = hs[ii];\n    s.draw({\n      x: coords.x,\n      y,\n      z: coords.z,\n      color,\n      w: coords.w,\n      h: my_h,\n      uvs: uidata.rects[ii]\n      // nozoom: true, // nozoom since different parts of the box get zoomed differently\n    });\n    y += my_h;\n  }\n}\n\nexport function drawBox(coords, s, pixel_scale, color) {\n  let uidata = s.uidata;\n  let scale = pixel_scale;\n  let ws = [uidata.widths[0] * scale, 0, uidata.widths[2] * scale];\n  ws[1] = max(0, coords.w - ws[0] - ws[2]);\n  let hs = [uidata.heights[0] * scale, 0, uidata.heights[2] * scale];\n  hs[1] = max(0, coords.h - hs[0] - hs[2]);\n  let x = coords.x;\n  for (let ii = 0; ii < ws.length; ++ii) {\n    let my_w = ws[ii];\n    if (my_w) {\n      let y = coords.y;\n      for (let jj = 0; jj < hs.length; ++jj) {\n        let my_h = hs[jj];\n        if (my_h) {\n          s.draw({\n            x, y, z: coords.z,\n            color,\n            w: my_w,\n            h: my_h,\n            uvs: uidata.rects[jj * 3 + ii],\n            nozoom: true // nozoom since different parts of the box get zoomed differently\n          });\n          y += my_h;\n        }\n      }\n      x += my_w;\n    }\n  }\n}\n\nexport function playUISound(name, volume) {\n  if (name === 'select') {\n    name = 'button_click';\n  }\n  if (sounds[name]) {\n    soundPlay(sounds[name], volume);\n  }\n}\n\nexport function setMouseOver(key, quiet) {\n  if (last_frame_button_mouseover !== key && frame_button_mouseover !== key && !quiet) {\n    playUISound('rollover');\n  }\n  frame_button_mouseover = key;\n  button_mouseover = true;\n}\n\nexport function focusSteal(key) {\n  if (key !== focused_key) {\n    focuslog('focusSteal ', key);\n  }\n  focused_this_frame = true;\n  focused_key = key;\n}\n\nexport function focusCanvas() {\n  focusSteal('canvas');\n}\n\nexport function isFocusedPeek(key) {\n  return focused_key === key;\n}\nexport function isFocused(key) {\n  if (key !== focused_key_prev2) {\n    focused_key_prev1 = focused_key_prev2;\n    focused_key_prev2 = key;\n  }\n  if (key === focused_key || key !== focused_key_not && !focused_this_frame && !focused_last_frame) {\n    if (key !== focused_key) {\n      focuslog('isFocused->focusSteal');\n    }\n    focusSteal(key);\n    return true;\n  }\n  return false;\n}\n\nexport function focusNext(key) {\n  focuslog('focusNext ', key);\n  playUISound('rollover');\n  focused_key = null;\n  focused_last_frame = focused_this_frame = false;\n  focused_key_not = key;\n  // Eat input events so a pair of keys (e.g. SDLK_DOWN and SDLK_CONTROLLER_DOWN)\n  // don't get consumed by two separate widgets\n  glov_input.eatAllInput();\n}\n\nexport function focusPrev(key) {\n  focuslog('focusPrev ', key);\n  playUISound('rollover');\n  if (key === focused_key_prev2) {\n    focusSteal(focused_key_prev1);\n  } else {\n    focusSteal(focused_key_prev2);\n  }\n  glov_input.eatAllInput();\n}\n\nexport function focusCheck(key) {\n  if (modal_stealing_focus) {\n    // hidden by modal, etc\n    return false;\n  }\n  // Returns true even if focusing previous element, since for this frame, we are still effectively focused!\n  let focused = isFocused(key);\n  if (focused) {\n    if (glov_input.keyDownEdge(KEYS.TAB)) {\n      if (glov_input.keyDown(KEYS.SHIFT)) {\n        focusPrev(key);\n      } else {\n        focusNext(key);\n        focused = false;\n      }\n    }\n    if (glov_input.padButtonDownEdge(pad_focus_right)) {\n      focusNext(key);\n      focused = false;\n    }\n    if (glov_input.padButtonDownEdge(pad_focus_left)) {\n      focusPrev(key);\n    }\n  }\n  return focused;\n}\n\nexport function panel(param) {\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.w === 'number');\n  assert(typeof param.h === 'number');\n  param.z = param.z || Z.UI - 1;\n  let color = param.color || color_panel;\n  drawBox(param, sprites.panel, param.pixel_scale || panel_pixel_scale, color);\n  glov_input.click(param);\n  glov_input.mouseOver(param);\n}\n\nexport function drawTooltip(param) {\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.tooltip === 'string');\n\n  let tooltip_w = param.tooltip_width || tooltip_width;\n  let x = param.x;\n  if (x + tooltip_w > camera2d.x1()) {\n    x = camera2d.x1() - tooltip_w;\n  }\n  let z = param.z || Z.TOOLTIP;\n  let tooltip_y0 = param.y;\n  let eff_tooltip_pad = param.tooltip_pad || tooltip_pad;\n  let w = tooltip_w - eff_tooltip_pad * 2;\n  if (param.tooltip_above) {\n    tooltip_y0 -= font_height * font.numLines(modal_font_style, w, 0, font_height, param.tooltip) + eff_tooltip_pad * 2;\n  }\n  let y = tooltip_y0 + eff_tooltip_pad;\n  y += font.drawSizedWrapped(modal_font_style, x + eff_tooltip_pad, y, z + 1, w, 0, font_height, param.tooltip);\n  y += eff_tooltip_pad;\n  let pixel_scale = param.pixel_scale || tooltip_panel_pixel_scale;\n\n  panel({\n    x,\n    y: tooltip_y0,\n    z,\n    w: tooltip_w,\n    h: y - tooltip_y0,\n    pixel_scale\n  });\n}\n\n// eslint-disable-next-line complexity\nexport function buttonShared(param) {\n  let state = 'regular';\n  let ret = false;\n  if (param.draw_only) {\n    return { ret, state };\n  }\n  let key = param.key || `${param.x}_${param.y}`;\n  let rollover_quiet = param.rollover_quiet;\n  let focused = !param.disabled && !param.no_focus && focusCheck(key);\n  let key_opts = param.in_event_cb ? { in_event_cb: param.in_event_cb } : null;\n  button_mouseover = false;\n  if (param.disabled) {\n    glov_input.mouseOver(param); // Still eat mouse events\n    state = 'disabled';\n  } else if (param.drag_target && (ret = glov_input.dragDrop(param))) {\n    console.log('dragDrop');\n    if (!param.no_touch_mouseover || !glov_input.mousePosIsTouch()) {\n      setMouseOver(key, rollover_quiet);\n    }\n    if (!param.no_focus) {\n      focusSteal(key);\n      focused = true;\n    }\n  } else if ((button_click = glov_input.click(param)) || param.long_press && (button_click = glov_input.longPress(param))) {\n    if (!param.no_touch_mouseover || !glov_input.mousePosIsTouch()) {\n      setMouseOver(key, rollover_quiet);\n    }\n    if (param.touch_twice && glov_input.mousePosIsTouch() && !focused) {\n      // Just focus, show tooltip\n      touch_changed_focus = true;\n    } else {\n      ret = true;\n    }\n    if (!param.no_focus) {\n      focusSteal(key);\n      focused = true;\n    }\n  } else if (param.drag_target && glov_input.dragOver(param)) {\n    // Set this even if param.no_touch_mouse_over is set\n    setMouseOver(key, rollover_quiet);\n    state = glov_input.mouseDown() ? 'down' : 'rollover';\n  } else if (param.drag_over && glov_input.dragOver(param)) {\n    // do nothing\n  } else if (glov_input.mouseOver(param)) {\n    if (param.no_touch_mouseover && glov_input.mousePosIsTouch()) {\n      // do not set mouseover\n    } else if (param.touch_twice && !focused && glov_input.mousePosIsTouch()) {\n      // do not set mouseover\n    } else {\n      setMouseOver(key, rollover_quiet);\n      state = glov_input.mouseDown() ? 'down' : 'rollover';\n    }\n  }\n  button_focused = focused;\n  if (focused) {\n    if (glov_input.keyDownEdge(KEYS.SPACE, key_opts) || glov_input.keyDownEdge(KEYS.RETURN, key_opts) || glov_input.padButtonDownEdge(PAD.A)) {\n      ret = true;\n    }\n  }\n  if (ret) {\n    state = 'down';\n    playUISound('button_click');\n  }\n  if (button_mouseover && param.tooltip) {\n    drawTooltip({\n      x: param.x,\n      y: param.tooltip_above ? param.y - 2 : param.y + param.h + 2,\n      tooltip_above: param.tooltip_above,\n      tooltip: param.tooltip,\n      tooltip_width: param.tooltip_width\n    });\n  }\n  param.z += param.z_bias && param.z_bias[state] || 0;\n  return { ret, state, focused };\n}\n\nexport let button_last_color;\nexport function buttonTextDraw(param, state, focused) {\n  let colors = param.colors || color_button;\n  let color = button_last_color = colors[state];\n  let base_name = param.base_name || 'button';\n  let sprite_name = `${base_name}_${state}`;\n  let sprite = sprites[sprite_name];\n  // Note: was if (sprite) color = colors.regular for specific-sprite matches\n  if (!sprite) {\n    sprite = sprites[base_name];\n  }\n\n  drawHBox(param, sprite, color);\n  let hpad = min(param.font_height * 0.25, param.w * 0.1);\n  font.drawSizedAligned(focused ? font_style_focused : font_style_normal, param.x + hpad, param.y, param.z + 0.1,\n  // eslint-disable-next-line no-bitwise\n  param.font_height, glov_font.ALIGN.HCENTERFIT | glov_font.ALIGN.VCENTER, param.w - hpad * 2, param.h, param.text);\n}\n\nexport function buttonText(param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.text === 'string');\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_width;\n  param.h = param.h || button_height;\n  param.font_height = param.font_height || font_height;\n\n  let { ret, state, focused } = buttonShared(param);\n  buttonTextDraw(param, state, focused);\n  return ret;\n}\n\nexport function buttonImage(param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(param.img && param.img.draw); // should be a sprite\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_img_size;\n  param.h = param.h || param.w || button_img_size;\n  param.shrink = param.shrink || 0.75;\n  //param.img_rect; null -> full image\n  let uvs = param.img_rect;\n  if (typeof param.frame === 'number') {\n    uvs = param.img.uidata.rects[param.frame];\n  }\n\n  let { ret, state } = buttonShared(param);\n  let colors = param.colors || color_button;\n  let color = button_last_color = colors[state];\n  if (!param.no_bg) {\n    let base_name = param.base_name || 'button';\n    let sprite_name = `${base_name}_${state}`;\n    let sprite = sprites[sprite_name];\n    if (!sprite) {\n      sprite = sprites[base_name];\n    }\n\n    drawHBox(param, sprite, color);\n  }\n  let img_origin = param.img.origin;\n  let img_w = param.img.size[0];\n  let img_h = param.img.size[1];\n  let aspect = img_w / img_h;\n  if (typeof param.frame === 'number') {\n    aspect = param.img.uidata.aspect ? param.img.uidata.aspect[param.frame] : 1;\n  }\n  let largest_w_horiz = param.w * param.shrink;\n  let largest_w_vert = param.h * param.shrink * aspect;\n  img_w = min(largest_w_horiz, largest_w_vert);\n  img_h = img_w / aspect;\n  let pad_top = (param.h - img_h) / 2;\n  let draw_param = {\n    x: param.x + (param.left_align ? pad_top : (param.w - img_w) / 2) + img_origin[0] * img_w,\n    y: param.y + pad_top + img_origin[1] * img_h,\n    z: param.z + 0.1,\n    color: param.color1 && param.color ? param.color : color, // use explicit tint if doing dual-tinting\n    color1: param.color1,\n    w: img_w / param.img.size[0],\n    h: img_h / param.img.size[1],\n    uvs,\n    rot: param.rotation\n  };\n  if (param.flip) {\n    let { x, w } = draw_param;\n    draw_param.x = x + w;\n    draw_param.w = -w;\n  }\n  if (param.color1) {\n    param.img.drawDualTint(draw_param);\n  } else {\n    param.img.draw(draw_param);\n  }\n  return ret;\n}\n\nexport function print(style, x, y, z, text) {\n  return font.drawSized(style, x, y, z, font_height, text);\n}\n\n// Note: modal dialogs not really compatible with HTML overlay on top of the canvas!\nexport function modalDialog(param) {\n  assert(!param.title || typeof param.title === 'string');\n  assert(!param.text || typeof param.text === 'string');\n  assert(!param.buttons || typeof param.buttons === 'object');\n  // assert(Object.keys(param.buttons).length);\n\n  modal_dialog = param;\n}\n\nexport function modalDialogClear() {\n  modal_dialog = null;\n}\n\nlet dom_requirement = vec2(24, 24);\nlet virtual_size = vec2();\nfunction modalDialogRun() {\n  camera2d.domDeltaToVirtual(virtual_size, dom_requirement);\n  let fullscreen_mode = false;\n  let eff_font_height = modal_dialog.font_height || font_height;\n  let eff_button_height = button_height;\n  let pad = modal_pad;\n  let vpad = modal_pad * 0.5;\n  let general_scale = 1;\n  if (virtual_size[0] > 0.1 * camera2d.h() && camera2d.w() > camera2d.h() * 2) {\n    // If a 24-pt font is more than 10% of the camera height, we're probably super-wide-screen\n    // on a mobile device due to keyboard being visible\n    fullscreen_mode = true;\n    eff_button_height = eff_font_height;\n    vpad = pad = 4;\n\n    let old_h = camera2d.h();\n    camera2d.push();\n    camera2d.setAspectFixed2(1, eff_font_height * (modal_title_scale + 2) + pad * 4.5);\n    general_scale = camera2d.h() / old_h;\n  }\n\n  let { buttons, click_anywhere } = modal_dialog;\n  let keys = Object.keys(buttons || {});\n\n  const game_width = camera2d.x1() - camera2d.x0();\n  const eff_modal_width = fullscreen_mode ? game_width : modal_dialog.width || modal_width;\n  let eff_button_width = modal_dialog.button_width || modal_button_width;\n  let max_total_button_width = eff_modal_width * 2 / 3;\n  eff_button_width = min(eff_button_width, max_total_button_width / keys.length);\n  const text_w = eff_modal_width - pad * 2;\n  const x0 = camera2d.x0() + round((game_width - eff_modal_width) / 2);\n  let x = x0 + pad;\n  const y0 = fullscreen_mode ? 0 : modal_dialog.y0 || modal_y0;\n  let y = y0 + pad;\n\n  if (glov_input.pointerLocked()) {\n    glov_input.pointerLockExit();\n  }\n\n  if (modal_dialog.title) {\n    if (fullscreen_mode) {\n      font.drawSizedAligned(modal_font_style, x, y, Z.MODAL, eff_font_height * modal_title_scale, glov_font.ALIGN.HFIT, text_w, 0, modal_dialog.title);\n      y += eff_font_height * modal_title_scale;\n    } else {\n      y += font.drawSizedWrapped(modal_font_style, x, y, Z.MODAL, text_w, 0, eff_font_height * modal_title_scale, modal_dialog.title);\n    }\n    y += round(vpad * 1.5);\n  }\n\n  if (modal_dialog.text) {\n    if (fullscreen_mode) {\n      font.drawSizedAligned(modal_font_style, x, y, Z.MODAL, eff_font_height, glov_font.ALIGN.HFIT, text_w, 0, modal_dialog.text);\n      y += eff_font_height;\n    } else {\n      y += font.drawSizedWrapped(modal_font_style, x, y, Z.MODAL, text_w, 0, eff_font_height, modal_dialog.text);\n    }\n    y += vpad;\n  }\n\n  let tick_key;\n  if (modal_dialog.tick) {\n    let avail_width = eff_modal_width - pad * 2;\n    if (fullscreen_mode) {\n      avail_width -= (pad + eff_button_width) * keys.length;\n    }\n    let param = {\n      x, y,\n      modal_width: eff_modal_width,\n      avail_width,\n      font_height: eff_font_height,\n      fullscreen_mode\n    };\n    tick_key = modal_dialog.tick(param);\n    y = param.y;\n  }\n\n  x = x0 + eff_modal_width - (pad + eff_button_width) * keys.length;\n  for (let ii = 0; ii < keys.length; ++ii) {\n    let key = keys[ii];\n    let eff_button_keys = button_keys[key.toLowerCase()];\n    let pressed = 0;\n    if (eff_button_keys) {\n      for (let jj = 0; jj < eff_button_keys.key.length; ++jj) {\n        pressed += glov_input.keyDownEdge(eff_button_keys.key[jj]);\n        if (eff_button_keys.key[jj] === tick_key) {\n          pressed++;\n        }\n      }\n      for (let jj = 0; jj < eff_button_keys.pad.length; ++jj) {\n        pressed += glov_input.padButtonDownEdge(eff_button_keys.pad[jj]);\n      }\n    }\n    if (click_anywhere && ii === 0 && glov_input.click()) {\n      ++pressed;\n    }\n    if (pressed) {\n      playUISound('button_click');\n    }\n    if (buttonText({\n      x: x,\n      y,\n      z: Z.MODAL,\n      w: eff_button_width,\n      h: eff_button_height,\n      text: key\n    }) || pressed) {\n      modal_dialog = null;\n      if (buttons[key]) {\n        buttons[key]();\n      }\n    }\n    x += pad + eff_button_width;\n  }\n  y += eff_button_height;\n  y += vpad + pad;\n  panel({\n    x: x0,\n    y: y0,\n    z: Z.MODAL - 1,\n    w: eff_modal_width,\n    h: (fullscreen_mode ? camera2d.y1() : y) - y0,\n    pixel_scale: panel_pixel_scale * general_scale\n  });\n\n  glov_input.eatAllInput();\n  modal_stealing_focus = true;\n  if (fullscreen_mode) {\n    camera2d.pop();\n  }\n}\n\nexport function modalTextEntry(param) {\n  let eb = glov_edit_box.create({\n    allow_modal: true,\n    initial_focus: true,\n    spellcheck: false,\n    initial_select: true,\n    text: param.edit_text,\n    max_len: param.max_len\n  });\n  let buttons = {};\n  for (let key in param.buttons) {\n    let val = param.buttons[key];\n    if (typeof val === 'function') {\n      val = function (old_fn) {\n        return function () {\n          old_fn(eb.getText());\n        };\n      }(val);\n    }\n    buttons[key] = val;\n  }\n  param.buttons = buttons;\n  param.text = `${param.text || ''}`;\n  let old_tick = param.tick;\n  param.tick = function (params) {\n    let eb_ret = eb.run({\n      x: params.x,\n      y: params.y,\n      w: params.avail_width || param.edit_w,\n      font_height: params.font_height\n    });\n    if (!params.fullscreen_mode) {\n      params.y += params.font_height + modal_pad;\n    }\n    let ret;\n    if (eb_ret === eb.SUBMIT) {\n      ret = KEYS.O; // Do OK, Yes\n    } else if (eb_ret === eb.CANCEL) {\n      ret = KEYS.ESC; // Do Cancel, No\n    }\n    if (old_tick) {\n      ret = old_tick(params) || ret;\n    }\n    return ret;\n  };\n  modalDialog(param);\n}\n\nexport function createEditBox(param) {\n  return glov_edit_box.create(param);\n}\n\nconst color_slider_handle = vec4(1, 1, 1, 1);\nconst color_slider_handle_grab = vec4(0.5, 0.5, 0.5, 1);\nconst color_slider_handle_over = vec4(0.75, 0.75, 0.75, 1);\nexport let slider_dragging = false; // for caller polling\n// Returns new value\nexport function slider(value, param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(param.min < param.max); // also must be numbers\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_width;\n  param.h = param.h || button_height;\n  let disabled = param.disabled || false;\n\n  slider_dragging = false;\n\n  drawHBox(param, sprites.slider, param.color);\n\n  let xoffs = round(sprites.slider.uidata.wh[0] * param.h / 2);\n  let draggable_width = param.w - xoffs * 2;\n\n  // Draw notches - would also need to quantize the values below\n  // if (!slider->no_notches) {\n  //   float space_for_notches = width - xoffs * 4;\n  //   int num_notches = max - 1;\n  //   float notch_w = tile_scale * glov_ui_slider_notch->GetTileWidth();\n  //   float notch_h = tile_scale * glov_ui_slider_notch->GetTileHeight();\n  //   float max_notches = space_for_notches / (notch_w + 2);\n  //   int notch_inc = 1;\n  //   if (num_notches > max_notches)\n  //     notch_inc = ceil(num_notches / floor(max_notches));\n\n  //   for (int ii = 1; ii*notch_inc <= num_notches; ii++) {\n  //     float notch_x_mid = x + xoffs + draggable_width * ii * notch_inc / (float)max;\n  //     if (notch_x_mid - notch_w/2 < x + xoffs * 2)\n  //       continue;\n  //     if (notch_x_mid + notch_w/2 > x + width - xoffs * 2)\n  //       continue;\n  //     glov_ui_slider_notch->DrawStretchedColor(notch_x_mid - notch_w / 2, y + yoffs,\n  //       z + 0.25, notch_w, notch_h, 0, color);\n  //   }\n  // }\n\n  // Handle\n  let drag = !disabled && glov_input.drag(param);\n  let grabbed = Boolean(drag);\n  let click = glov_input.click(param);\n  if (click) {\n    grabbed = false;\n    // update pos\n    value = (click.pos[0] - (param.x + xoffs)) / draggable_width;\n    value = param.min + (param.max - param.min) * clamp(value, 0, 1);\n    playUISound('button_click');\n  } else if (grabbed) {\n    // update pos\n    value = (drag.cur_pos[0] - (param.x + xoffs)) / draggable_width;\n    value = param.min + (param.max - param.min) * clamp(value, 0, 1);\n    // Eat all mouseovers while dragging\n    glov_input.mouseOver();\n    slider_dragging = true;\n  }\n  let rollover = !disabled && glov_input.mouseOver(param);\n  let handle_center_pos = param.x + xoffs + draggable_width * (value - param.min) / (param.max - param.min);\n  let handle_h = param.h;\n  let handle_w = sprites.slider_handle.uidata.wh[0] * handle_h;\n  let handle_x = handle_center_pos - handle_w / 2;\n  let handle_y = param.y + param.h / 2 - handle_h / 2;\n  let handle_color = color_slider_handle;\n  if (grabbed) {\n    handle_color = color_slider_handle_grab;\n  } else if (rollover) {\n    handle_color = color_slider_handle_over;\n  }\n\n  sprites.slider_handle.draw({\n    x: handle_x,\n    y: handle_y,\n    z: param.z + 0.1,\n    w: handle_w,\n    h: handle_h,\n    color: handle_color,\n    frame: 0\n  });\n\n  return value;\n}\n\nlet pp_bad_frames = 0;\n\nexport function tickUI(dt) {\n  last_frame_button_mouseover = frame_button_mouseover;\n  frame_button_mouseover = false;\n  focused_last_frame = focused_this_frame;\n  focused_this_frame = false;\n  focused_key_not = null;\n  modal_stealing_focus = false;\n  touch_changed_focus = false;\n  per_frame_dom_alloc[glov_engine.global_frame_index % per_frame_dom_alloc.length] = 0;\n\n  last_frame_edit_boxes = exports.this_frame_edit_boxes;\n  exports.this_frame_edit_boxes = [];\n  linkTick();\n\n  dom_elems_issued = 0;\n\n  let pp_this_frame = false;\n  if (modal_dialog || menu_up) {\n    let params = menu_fade_params;\n    if (!menu_up) {\n      // Modals get defaults\n      params = menu_fade_params_default;\n    }\n    menu_up_time += dt;\n    // Effects during modal dialogs\n    let factor = min(menu_up_time / 500, 1);\n    if (glov_engine.postprocessing && !glov_engine.defines.NOPP) {\n      glov_sprites.queuefn(params.z - 2, doBlurEffect.bind(null, factor, params));\n      glov_sprites.queuefn(params.z - 1, doDesaturateEffect.bind(null, factor, params));\n      pp_this_frame = true;\n    } else {\n      // Or, just darken\n      sprites.white.draw({\n        x: camera2d.x0Real(),\n        y: camera2d.y0Real(),\n        z: params.z - 2,\n        color: params.fallback_darken,\n        w: camera2d.wReal(),\n        h: camera2d.hReal()\n      });\n    }\n  } else {\n    menu_up_time = 0;\n  }\n  menu_up = false;\n\n  if (!glov_engine.is_loading && glov_engine.getFrameDtActual() > 50 && pp_this_frame) {\n    pp_bad_frames = (pp_bad_frames || 0) + 1;\n    if (pp_bad_frames >= 3) {\n      // 3 in a row, disable superfluous postprocessing\n      glov_engine.postprocessingAllow(false);\n    }\n  } else if (pp_bad_frames) {\n    pp_bad_frames = 0;\n  }\n\n  if (modal_dialog) {\n    modalDialogRun();\n  }\n}\n\nexport function endFrame() {\n  if (glov_input.click({\n    x: -Infinity, y: -Infinity,\n    w: Infinity, h: Infinity\n  })) {\n    focusSteal('canvas');\n  }\n\n  for (let ii = 0; ii < last_frame_edit_boxes.length; ++ii) {\n    let edit_box = last_frame_edit_boxes[ii];\n    let idx = exports.this_frame_edit_boxes.indexOf(edit_box);\n    if (idx === -1) {\n      edit_box.unrun();\n    }\n  }\n\n  while (dom_elems_issued < dom_elems.length) {\n    let elem = dom_elems.pop();\n    dynamic_text_elem.removeChild(elem);\n  }\n}\n\nexport function menuUp(param) {\n  merge(menu_fade_params, menu_fade_params_default);\n  if (param) {\n    merge(menu_fade_params, param);\n  }\n  menu_up = true;\n  modal_stealing_focus = true;\n  glov_input.eatAllInput();\n}\n\nfunction copyTextToClipboard(text) {\n  let textArea = document.createElement('textarea');\n  textArea.style.position = 'fixed';\n  textArea.style.top = 0;\n  textArea.style.left = 0;\n  textArea.style.width = '2em';\n  textArea.style.height = '2em';\n  textArea.style.border = 'none';\n  textArea.style.outline = 'none';\n  textArea.style.boxShadow = 'none';\n  textArea.style.background = 'transparent';\n  textArea.value = text;\n\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  let ret = false;\n  try {\n    ret = document.execCommand('copy');\n  } catch (err) {\n    // do nothing\n  }\n\n  document.body.removeChild(textArea);\n  return ret;\n}\n\nexport function provideUserString(title, thing, str) {\n  let copy_success = copyTextToClipboard(str);\n  modalTextEntry({\n    edit_w: 400,\n    edit_text: str,\n    title,\n    text: copy_success ? `${thing} copied to clipboard!` : 'Copy to clipboard FAILED, please copy from below\\n',\n    buttons: {\n      OK: null\n    }\n  });\n}\n\nexport function drawRect(x0, y0, x1, y1, z, color) {\n  let mx = min(x0, x1);\n  let my = min(y0, y1);\n  let Mx = max(x0, x1);\n  let My = max(y0, y1);\n  sprites.white.draw({\n    x: mx,\n    y: my,\n    z,\n    color,\n    w: Mx - mx,\n    h: My - my\n  });\n}\n\nfunction spreadTechParams(spread) {\n  // spread=0 -> 1\n  // spread=0.5 -> 2\n  // spread=0.75 -> 4\n  // spread=1 -> large enough to AA\n  spread = min(max(spread, 0), 0.99);\n\n  let tech_params = {\n    param0: vec4(0, 0, 0, 0)\n  };\n\n  tech_params.param0[0] = 1 / (1 - spread);\n  tech_params.param0[1] = -0.5 * tech_params.param0[0] + 0.5;\n  return tech_params;\n}\n\nfunction drawCircleInternal(sprite, x, y, z, r, spread, tu1, tv1, tu2, tv2, color) {\n  let x0 = x - r * 2 + r * 4 * tu1;\n  let x1 = x - r * 2 + r * 4 * tu2;\n  let y0 = y - r * 2 + r * 4 * tv1;\n  let y1 = y - r * 2 + r * 4 * tv2;\n  glov_sprites.queueraw(sprite.texs, x0, y0, z, x1 - x0, y1 - y0, tu1, tv1, tu2, tv2, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function drawCircle(x, y, z, r, spread, color) {\n  if (!sprites.circle) {\n    const CIRCLE_SIZE = 32;\n    let data = new Uint8Array(CIRCLE_SIZE * CIRCLE_SIZE);\n    let midp = (CIRCLE_SIZE - 1) / 2;\n    for (let i = 0; i < CIRCLE_SIZE; i++) {\n      for (let j = 0; j < CIRCLE_SIZE; j++) {\n        let d = sqrt((i - midp) * (i - midp) + (j - midp) * (j - midp)) / midp;\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * CIRCLE_SIZE] = v * 255;\n      }\n    }\n    sprites.circle = glov_sprites.create({\n      url: 'circle',\n      width: CIRCLE_SIZE, height: CIRCLE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  drawCircleInternal(sprites.circle, x, y, z, r, spread, 0, 0, 1, 1, color);\n}\n\nexport function drawHollowCircle(x, y, z, r, spread, color) {\n  if (!sprites.hollow_circle) {\n    const CIRCLE_SIZE = 128;\n    const LINE_W = 2;\n    let data = new Uint8Array(CIRCLE_SIZE * CIRCLE_SIZE);\n    let midp = (CIRCLE_SIZE - 1) / 2;\n    for (let i = 0; i < CIRCLE_SIZE; i++) {\n      for (let j = 0; j < CIRCLE_SIZE; j++) {\n        let d = sqrt((i - midp) * (i - midp) + (j - midp) * (j - midp)) / midp;\n        let v = clamp(1 - d, 0, 1);\n        if (v > 0.5) {\n          v = 1 - v;\n        }\n        v += LINE_W / CIRCLE_SIZE;\n        data[i + j * CIRCLE_SIZE] = v * 255;\n      }\n    }\n    sprites.hollow_circle = glov_sprites.create({\n      url: 'hollow_circle',\n      width: CIRCLE_SIZE, height: CIRCLE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  drawCircleInternal(sprites.hollow_circle, x, y, z, r, spread, 0, 0, 1, 1, color);\n}\n\nexport function drawLine(x0, y0, x1, y1, z, w, spread, color) {\n  if (!sprites.line) {\n    const LINE_SIZE = 32;\n    let data = new Uint8Array(LINE_SIZE * LINE_SIZE);\n    let midp = (LINE_SIZE - 1) / 2;\n    for (let i = 0; i < LINE_SIZE; i++) {\n      for (let j = 0; j < LINE_SIZE; j++) {\n        let d = abs((i - midp) / midp);\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * LINE_SIZE] = v * 255;\n      }\n    }\n    sprites.line = glov_sprites.create({\n      url: 'line',\n      width: LINE_SIZE, height: LINE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n\n  let dx = x1 - x0;\n  let dy = y1 - y0;\n  let length = Math.sqrt(dx * dx + dy * dy);\n  dx /= length;\n  dy /= length;\n  let tangx = -dy * w;\n  let tangy = dx * w;\n\n  glov_sprites.queueraw4(sprites.line.texs, x0 + tangx, y0 + tangy, x1 + tangx, y1 + tangy, x1 - tangx, y1 - tangy, x0 - tangx, y0 - tangy, z, 0, 0, 1, 1, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function drawCone(x0, y0, x1, y1, z, w0, w1, spread, color) {\n  if (!sprites.cone) {\n    const CONE_SIZE = 32;\n    let data = new Uint8Array(CONE_SIZE * CONE_SIZE);\n    let midp = (CONE_SIZE - 1) / 2;\n    for (let i = 0; i < CONE_SIZE; i++) {\n      for (let j = 0; j < CONE_SIZE; j++) {\n        let dx = 0;\n        let dy = 0;\n        let d = 0;\n        if (i > midp) {\n          dx = (i - midp) / midp;\n          dy = abs(j - midp) / midp;\n          let dCircle = sqrt(dx * dx + dy * dy);\n          d = dx * dCircle;\n        }\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * CONE_SIZE] = v * 255;\n      }\n    }\n    sprites.cone = glov_sprites.create({\n      url: 'cone',\n      width: CONE_SIZE, height: CONE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  let dx = x1 - x0;\n  let dy = y1 - y0;\n  let length = Math.sqrt(dx * dx + dy * dy);\n  dx /= length;\n  dy /= length;\n  let tangx = -dy;\n  let tangy = dx;\n  glov_sprites.queueraw4(sprites.cone.texs, x0 - tangx * w0, y0 - tangy * w0, x0 + tangx * w0, y0 + tangy * w0, x1 + tangx * w1, y1 + tangy * w1, x1 - tangx * w1, y1 - tangy * w1, z, 0, 0, 1, 1, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function scaleSizes(scale) {\n  button_height = round(32 * scale);\n  font_height = round(24 * scale);\n  button_width = round(200 * scale);\n  button_img_size = button_height;\n  modal_button_width = round(button_width / 2);\n  modal_width = round(600 * scale);\n  modal_y0 = round(200 * scale);\n  modal_title_scale = 1.2;\n  modal_pad = round(16 * scale);\n  tooltip_width = round(400 * scale);\n  tooltip_pad = round(8 * scale);\n  panel_pixel_scale = button_height / 13; // button_height / panel pixel resolution\n  tooltip_panel_pixel_scale = panel_pixel_scale;\n}\n\nexport function setModalSizes(_modal_button_width, width, y0, title_scale, pad) {\n  modal_button_width = _modal_button_width || round(button_width / 2);\n  modal_width = width || 600;\n  modal_y0 = y0 || 200;\n  modal_title_scale = title_scale || 1.2;\n  modal_pad = pad || modal_pad;\n}\n\nexport function setFontHeight(_font_height) {\n  font_height = _font_height;\n}\n\nexport function setTooltipWidth(_tooltip_width, _tooltip_panel_pixel_scale) {\n  tooltip_width = _tooltip_width;\n  tooltip_panel_pixel_scale = _tooltip_panel_pixel_scale;\n  tooltip_pad = modal_pad / 2 * _tooltip_panel_pixel_scale;\n}\n\nscaleSizes(1);","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n/*\n  API usage:\n  engine.defines = urlhash.register({\n    key: 'D',\n    type: SET,\n  });\n  urlhash.register({\n    key: 'pos',\n    // type: TYPE_STRING,\n    change: (newvalue) => {},\n    title: (value) => 'string',\n    def: '1,2',\n    hides: { otherfield: true },\n    push: true, // do a pushState instead of replaceState when this changes\n    hide_values: { foo: true }, // do not add to URL if values is in the provided set\n  });\n  urlhash.set('pos', '3,4');\n  urlhash.get('pos')\n\n  urlhash.route('w/:w')     // use URLs like foo.com/w/1   instead of foo.com/?w=1\n  urlhash.route('w/:w/:wg')  // use URLs like foo.com/w/1/2 instead of foo.com/?w=1&wg=2\n\n  // Called whenever the URL state is pushed, even if to exactly the same URL (e.g. on link click)\n  urlhash.onChange(cb)\n*/\n\nconst assert = require('assert');\nconst { callEach } = require('../../common/util.js');\n\nconst HISTORY_UPDATE_TIME = 1000;\n\nexport let TYPE_SET = 'set';\nexport let TYPE_STRING = 'string';\n\nlet params = {};\n\nlet title_suffix = '';\n\nlet url_base = (document.location.href || '').match(/^[^#?]+/)[0];\n//Removes index.html et all\nurl_base = url_base.replace(/[^/]*$/, '');\nlet on_change = [];\n\nexport function getURLBase() {\n  return url_base;\n}\n\nexport function onChange(cb) {\n  on_change.push(cb);\n}\n\nfunction cmpNumKeys(a, b) {\n  let d = b.keys.length - a.keys.length;\n  if (d) {\n    return d;\n  }\n  // otherwise alphabetical for stability\n  for (let ii = 0; ii < a.keys.length; ++ii) {\n    if (a.keys[ii] < b.keys[ii]) {\n      return -1;\n    } else if (a.keys[ii] > b.keys[ii]) {\n      return 1;\n    }\n  }\n  assert(false); // two routes with identical keys\n  return 0;\n}\n\nconst route_param_regex = /:(\\w+)/g;\nlet routes = [];\nexport function route(route_string) {\n  let keys = [];\n  // foo/:key/:bar => foo/([^/&?]+)/([^/&?]+)\n  let base = route_string.replace(route_param_regex, function (ignored, match) {\n    keys.push(match);\n    return '([^/&?]+)';\n  });\n  let regex = new RegExp(`^${base}(?:$|\\\\?)`);\n  let new_route = {\n    route_string,\n    regex,\n    keys\n  };\n  for (let ii = 0; ii < keys.length; ++ii) {\n    let opts = params[keys[ii]];\n    // Must have already registered these keys\n    assert(opts);\n    opts.routes = opts.routes || [];\n    opts.routes.push(new_route);\n  }\n  routes.push(new_route);\n  routes.sort(cmpNumKeys);\n}\n\nfunction queryString() {\n  let href = String(document.location);\n  return href.slice(url_base.length);\n}\n\nconst regex_value = /[^\\w]\\w+=([^&]+)/;\nfunction getValue(query_string, opts) {\n  if (opts.routes) {\n    for (let ii = 0; ii < opts.routes.length; ++ii) {\n      let r = opts.routes[ii];\n      let m = query_string.match(r.regex);\n      if (m) {\n        let idx = r.keys.indexOf(opts.key);\n        return m[1 + idx];\n      }\n    }\n  }\n  let m = query_string.match(opts.regex) || [];\n  if (opts.type === TYPE_SET) {\n    let r = {};\n    for (let ii = 0; ii < m.length; ++ii) {\n      let m2 = m[ii].match(regex_value);\n      assert(m2);\n      r[m2[1]] = 1;\n    }\n    return r;\n  } else {\n    return m[1] || opts.def;\n  }\n}\n\nlet last_history_str = null; // always re-set it on the first update\n\nfunction goInternal(query_string) {\n  // with the '?'\n  // Update all values, except those hidden by what is currently in the query string\n  let hidden = {};\n  for (let key in params) {\n    let opts = params[key];\n    if (opts.hides) {\n      if (getValue(query_string, opts)) {\n        for (let otherkey in opts.hides) {\n          hidden[otherkey] = 1;\n        }\n      }\n    }\n  }\n\n  let dirty = {};\n  for (let key in params) {\n    if (hidden[key]) {\n      continue;\n    }\n    let opts = params[key];\n    let new_value = getValue(query_string, opts);\n    if (opts.type === TYPE_SET) {\n      for (let v in new_value) {\n        if (!opts.value[v]) {\n          opts.value[v] = 1;\n          dirty[key] = true;\n        }\n      }\n      for (let v in opts.value) {\n        if (!new_value[v]) {\n          delete opts.value[v];\n          dirty[key] = true;\n        }\n      }\n    } else {\n      if (new_value !== opts.value) {\n        dirty[key] = true;\n        opts.value = new_value;\n      }\n    }\n  }\n\n  // Call all change callbacks\n  for (let key in dirty) {\n    let opts = params[key];\n    if (opts.change) {\n      opts.change(opts.value);\n    }\n  }\n  callEach(on_change);\n}\n\nlet eff_title;\nfunction toString() {\n  eff_title = '';\n  let values = [];\n  let hidden = {};\n  for (let key in params) {\n    let opts = params[key];\n    if (opts.hides && opts.value) {\n      for (let otherkey in opts.hides) {\n        hidden[otherkey] = 1;\n      }\n    }\n  }\n  let root_value = '';\n  outer: // eslint-disable-line no-labels\n  for (let ii = 0; ii < routes.length; ++ii) {\n    let r = routes[ii];\n    let route_title = '';\n    for (let jj = 0; jj < r.keys.length; ++jj) {\n      let key = r.keys[jj];\n      if (hidden[key]) {\n        continue outer; // eslint-disable-line no-labels\n      }\n      let opts = params[key];\n      if (opts.hide_values[opts.value]) {\n        continue outer; // eslint-disable-line no-labels\n      }\n      // has a value, is not hidden, continue\n      if (!route_title && opts.title) {\n        route_title = opts.title(opts.value);\n      }\n    }\n    // route is good!\n    root_value = r.route_string.replace(route_param_regex, function (ignored, key) {\n      hidden[key] = true;\n      return String(params[key].value);\n    });\n    if (!eff_title && route_title) {\n      eff_title = route_title;\n    }\n    break;\n  }\n  for (let key in params) {\n    if (hidden[key]) {\n      continue;\n    }\n    let opts = params[key];\n    if (opts.type === TYPE_SET) {\n      for (let v in opts.value) {\n        values.push(`${key}=${v}`);\n      }\n    } else {\n      if (!opts.hide_values[opts.value]) {\n        values.push(`${key}=${opts.value}`);\n        if (!eff_title && opts.title) {\n          eff_title = opts.title(opts.value);\n        }\n      }\n    }\n  }\n  if (title_suffix) {\n    if (eff_title) {\n      eff_title = `${eff_title} | ${title_suffix}`;\n    } else {\n      eff_title = title_suffix;\n    }\n  }\n  return `${root_value}${values.length ? '?' : ''}${values.join('&')}`;\n}\n\nexport function refreshTitle() {\n  toString();\n  if (eff_title && eff_title !== document.title) {\n    document.title = eff_title;\n  }\n}\n\nfunction periodicRefreshTitle() {\n  refreshTitle();\n  setTimeout(periodicRefreshTitle, 1000);\n}\n\nfunction onPopState() {\n  let query_string = queryString();\n  last_history_str = query_string;\n  goInternal(query_string);\n  refreshTitle();\n}\n\nlet on_url_change;\nexport function onURLChange(cb) {\n  on_url_change = cb;\n}\n\nlet last_history_set_time = 0;\nlet scheduled = false;\nlet need_push_state = false;\nfunction updateHistory(new_need_push_state) {\n  let new_str = toString();\n  if (last_history_str === new_str) {\n    return;\n  }\n  need_push_state = need_push_state || new_need_push_state;\n  last_history_str = new_str;\n  if (scheduled) {\n    // already queued up\n    return;\n  }\n  let delay = HISTORY_UPDATE_TIME;\n  if (Date.now() - last_history_set_time > HISTORY_UPDATE_TIME) {\n    // Been awhile, apply \"instantly\" (but still wait until next tick to ensure\n    //   any other immediate changes are registered)\n    delay = 1;\n  }\n  scheduled = true;\n  setTimeout(function () {\n    scheduled = false;\n    last_history_set_time = Date.now();\n    if (need_push_state) {\n      need_push_state = false;\n      window.history.pushState(undefined, eff_title, `${url_base}${last_history_str}`);\n    } else {\n      window.history.replaceState(undefined, eff_title, `${url_base}${last_history_str}`);\n    }\n    if (eff_title) {\n      document.title = eff_title;\n    }\n    if (on_url_change) {\n      on_url_change();\n    }\n    //window.history.replaceState(undefined, eff_title, `#${last_history_str}`);\n  }, delay);\n}\n\n// Optional startup\nexport function startup(param) {\n  assert(!title_suffix);\n  title_suffix = param.title_suffix;\n\n  // Refresh the current URL, it might be in the non-rooted format\n  updateHistory(false);\n\n  if (title_suffix) {\n    refreshTitle();\n    setTimeout(periodicRefreshTitle, 1000);\n  }\n}\n\nexport function register(opts) {\n  assert(opts.key);\n  assert(!params[opts.key]);\n  opts.type = opts.type || TYPE_STRING;\n  let regex_search = `(?:[^\\\\w])${opts.key}=([^&]+)`;\n  let regex_type = '';\n  if (opts.type === TYPE_SET) {\n    regex_type = 'g';\n  } else {\n    opts.def = opts.def || '';\n    opts.hide_values = opts.hide_values || {};\n    opts.hide_values[opts.def] = true;\n  }\n  opts.regex = new RegExp(regex_search, regex_type);\n  params[opts.key] = opts;\n  // Get initial value\n  opts.value = getValue(queryString(), opts);\n  let ret = opts.value;\n  if (opts.type === TYPE_SET && typeof Proxy === 'function') {\n    // Auto-apply changes to URL if someone modifies the proxy\n    ret = new Proxy(opts.value, {\n      set: function (target, prop, value) {\n        if (value) {\n          target[prop] = 1;\n        } else {\n          delete target[prop];\n        }\n        updateHistory();\n        return true;\n      }\n    });\n  }\n\n  if (!window.onpopstate) {\n    window.onpopstate = onPopState;\n  }\n\n  return ret;\n}\n\nexport function set(key, value, value2) {\n  let opts = params[key];\n  assert(opts);\n  if (opts.type === TYPE_SET) {\n    if (Boolean(opts.value[value]) !== Boolean(value2)) {\n      opts.value[value] = value2 ? 1 : 0;\n      updateHistory(opts.push);\n    }\n  } else {\n    if (opts.value !== value) {\n      opts.value = value;\n      updateHistory(opts.push);\n    }\n  }\n}\n\nexport function get(key) {\n  let opts = params[key];\n  assert(opts);\n  return opts.value;\n}\n\nexport function go(query_string) {\n  // with the '?'\n  goInternal(query_string);\n  updateHistory(true);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off */\n\n// Vector math functions required by the rest of the engine taken piecemeal from\n// gl-matrix and related, as well as some generic math utilities\nexports.mat3 = require('gl-mat3/create');\nexports.mat4 = require('gl-mat4/create');\n\nconst { abs, max, min, floor, round, sqrt } = Math;\n\nexport function vec1(v) {\n  return new Float32Array([v]);\n}\n\nexport function vec2(a, b) {\n  let r = new Float32Array(2);\n  if (a || b) {\n    r[0] = a;\n    r[1] = b;\n  }\n  return r;\n}\n\nexport function vec3(a, b, c) {\n  let r = new Float32Array(3);\n  if (a || b || c) {\n    r[0] = a;\n    r[1] = b;\n    r[2] = c;\n  }\n  return r;\n}\n\nexport function vec4(a, b, c, d) {\n  let r = new Float32Array(4);\n  if (a || b || c || d) {\n    r[0] = a;\n    r[1] = b;\n    r[2] = c;\n    r[3] = d;\n  }\n  return r;\n}\n\nexport const unit_vec = vec4(1, 1, 1, 1);\nexport const half_vec = vec4(0.5, 0.5, 0.5, 0.5);\nexport const zero_vec = vec4();\nexport const identity_mat3 = exports.mat3();\nexport const identity_mat4 = exports.mat4();\nexport const xaxis = vec4(1, 0, 0, 0);\nexport const yaxis = vec4(0, 1, 0, 0);\nexport const zaxis = vec4(0, 0, 1, 0);\n\nexport function v2abs(out, a) {\n  out[0] = abs(a[0]);\n  out[1] = abs(a[1]);\n  return out;\n}\n\nexport function v2add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n\nexport function v2addScale(out, a, b, s) {\n  out[0] = a[0] + b[0] * s;\n  out[1] = a[1] + b[1] * s;\n  return out;\n}\n\nexport function v2copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\nexport function v2distSq(a, b) {\n  return (a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]);\n}\n\nexport function v2div(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n\nexport function v2floor(out, a) {\n  out[0] = floor(a[0]);\n  out[1] = floor(a[1]);\n  return out;\n}\n\nexport function v2lengthSq(a) {\n  return a[0] * a[0] + a[1] * a[1];\n}\n\nexport function v2lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  return out;\n}\n\nexport function v2mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n\nexport function v2normalize(out, a) {\n  let len = a[0] * a[0] + a[1] * a[1];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n  }\n  return out;\n}\n\nexport function v2same(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n\nexport function v2scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  return out;\n}\n\nexport function v2set(out, a, b) {\n  out[0] = a;\n  out[1] = b;\n  return out;\n}\n\nexport function v2sub(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n\nexport function v3add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\nexport function v3iAdd(a, b) {\n  a[0] += b[0];\n  a[1] += b[1];\n  a[2] += b[2];\n  return a;\n}\n\nexport function v3addScale(out, a, b, s) {\n  out[0] = a[0] + b[0] * s;\n  out[1] = a[1] + b[1] * s;\n  out[2] = a[2] + b[2] * s;\n  return out;\n}\n\nexport function v3copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\nexport function v3cross(out, a, b) {\n  let a0 = a[0];\n  let a1 = a[1];\n  let a2 = a[2];\n  let b0 = b[0];\n  let b1 = b[1];\n  let b2 = b[2];\n  out[0] = a1 * b2 - a2 * b1;\n  out[1] = a2 * b0 - a0 * b2;\n  out[2] = a0 * b1 - a1 * b0;\n  return out;\n}\n\n// determinant of the matrix made by (columns?) [a, b, c];\nexport function v3determinant(a, b, c) {\n  // let a00 = a[0];\n  // let a01 = a[1];\n  // let a02 = a[2];\n  // let a10 = b[0];\n  // let a11 = b[1];\n  // let a12 = b[2];\n  // let a20 = c[0];\n  // let a21 = c[2];\n  // let a22 = c[2];\n  let a00 = a[0];\n  let a01 = b[0];\n  let a02 = c[0];\n  let a10 = a[1];\n  let a11 = b[1];\n  let a12 = c[1];\n  let a20 = a[2];\n  let a21 = b[2];\n  let a22 = c[2];\n\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n\nexport function v3dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function v3distSq(a, b) {\n  return (a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]) + (a[2] - b[2]) * (a[2] - b[2]);\n}\n\nexport function v3div(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n\nexport function v3iFloor(a) {\n  a[0] = floor(a[0]);\n  a[1] = floor(a[1]);\n  a[2] = floor(a[2]);\n  return a;\n}\n\nexport function v3floor(out, a) {\n  out[0] = floor(a[0]);\n  out[1] = floor(a[1]);\n  out[2] = floor(a[2]);\n  return out;\n}\n\nexport function v3lengthSq(a) {\n  return a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n}\n\nexport function v3lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  out[2] = it * a[2] + t * b[2];\n  return out;\n}\n\nexport function v3iMax(a, b) {\n  a[0] = max(a[0], b[0]);\n  a[1] = max(a[1], b[1]);\n  a[2] = max(a[2], b[2]);\n  return a;\n}\n\nexport function v3iMin(a, b) {\n  a[0] = min(a[0], b[0]);\n  a[1] = min(a[1], b[1]);\n  a[2] = min(a[2], b[2]);\n  return a;\n}\n\nexport function v3mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n\nexport function v3mulMat4(out, a, m) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  out[0] = x * m[0] + y * m[4] + z * m[8];\n  out[1] = x * m[1] + y * m[5] + z * m[9];\n  out[2] = x * m[2] + y * m[6] + z * m[10];\n  return out;\n}\n\nexport function v3normalize(out, a) {\n  let len = a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\n\nexport function v3iNormalize(a) {\n  let len = a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    a[0] *= len;\n    a[1] *= len;\n    a[2] *= len;\n  }\n  return a;\n}\n\n// Treats `a` as vec3 input with w assumed to be 1\n// out[0]/[1] have had perspective divide and converted to normalized 0-1 range\n// out[2] is distance\nexport function v3perspectiveProject(out, a, m) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  let invw = 0.5 / (w || 0.00001);\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) * invw + 0.5;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) * -invw + 0.5;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14];\n  return out;\n}\n\nexport function v3round(out, a) {\n  out[0] = round(a[0]);\n  out[1] = round(a[1]);\n  out[2] = round(a[2]);\n  return out;\n}\n\nexport function v3same(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n\nexport function v3scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  out[2] = a[2] * s;\n  return out;\n}\n\nexport function v3set(out, a, b, c) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  return out;\n}\n\nexport function v3sub(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\nexport function v3iSub(a, b) {\n  a[0] -= b[0];\n  a[1] -= b[1];\n  a[2] -= b[2];\n  return a;\n}\n\nexport function v3zero(out) {\n  out[0] = out[1] = out[2] = 0;\n  return out;\n}\n\nexport function v4add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n\nexport function v4clone(a) {\n  return a.slice(0);\n}\n\nexport function v4copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\nexport function v4lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  out[2] = it * a[2] + t * b[2];\n  out[3] = it * a[3] + t * b[3];\n  return out;\n}\n\nexport function v4mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n\nexport function v4mulAdd(out, a, b, c) {\n  out[0] = a[0] * b[0] + c[0];\n  out[1] = a[1] * b[1] + c[1];\n  out[2] = a[2] * b[2] + c[2];\n  out[3] = a[3] * b[3] + c[3];\n  return out;\n}\n\nexport function v4same(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n\nexport function v4scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  out[2] = a[2] * s;\n  out[3] = a[3] * s;\n  return out;\n}\n\nexport function v4set(out, a, b, c, d) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  return out;\n}\n\nexport function v4zero(out) {\n  out[0] = out[1] = out[2] = out[3] = 0;\n  return out;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst { floor } = Math;\n\nlet offs = 0;\nfunction now() {\n  return Date.now() + offs;\n}\nmodule.exports = exports = now;\nexports.now = now;\nexports.sync = function (server_time) {\n  offs = server_time - Date.now();\n};\nexports.seconds = function () {\n  // Seconds since Jan 1st, 2020\n  return floor(now() / 1000) - 1577836800;\n};","const assert = require('assert');\nconst { filewatchOn, filewatchTriggerChange } = require('./filewatch.js');\nconst urlhash = require('./urlhash.js');\n\nlet fs = window.glov_webfs = window.glov_webfs || {};\nlet decoded = {};\nlet used = {};\n// export function webFSReady() {\n//   // TODO: async ready state?\n// }\n\nfunction decode(data) {\n  let len = data[0];\n  let str = data[1];\n  let u8 = new Uint8Array(len);\n  let idxo = 0;\n  let idxi = 0;\n  while (idxo < len) {\n    let byte = str.charCodeAt(idxi++);\n    if (byte === 126) {\n      byte = 0;\n    } else if (byte === 27) {\n      byte = str.charCodeAt(idxi++);\n    }\n    u8[idxo++] = byte;\n  }\n  assert.equal(idxi, str.length);\n  assert.equal(idxo, len);\n  return u8;\n}\n\nexport function webFSGetFile(filename, encoding) {\n  let ret = decoded[filename];\n  if (ret) {\n    return ret;\n  }\n  used[filename] = true;\n  let data = fs[filename];\n  assert(data, `Error loading file: ${filename}`);\n  if (encoding === 'text') {\n    ret = data[1];\n  } else {\n    ret = decode(data);\n  }\n  decoded[filename] = ret;\n  return ret;\n}\n\nexport function webFSExists(filename) {\n  return Boolean(fs[filename]);\n}\n\n// Don't report on files we know are loaded dynamically, and are small\nconst report_ignore_regex = /\\.(fp|vp)$/;\nexport function webFSReportUnused() {\n  let tot_size = 0;\n  for (let filename in fs) {\n    if (!used[filename] && !filename.match(report_ignore_regex)) {\n      console.warn(`WebFS file bundled but unreferenced: ${filename}`);\n      tot_size += fs[filename][0];\n    }\n  }\n  if (tot_size) {\n    console.warn(`WebFS wasting ${tot_size} bytes`);\n  }\n}\n\nfunction webFSReload() {\n  window.glov_webfs = {};\n  let scriptTag = document.createElement('script');\n  scriptTag.src = `${urlhash.getURLBase()}fsdata.js?rl=${Date.now()}`;\n  scriptTag.onload = function () {\n    if (window.glov_webfs) {\n      let old_fs = fs;\n      fs = window.glov_webfs;\n      decoded = {};\n      used = {};\n      for (let key in fs) {\n        let old_value = old_fs[key];\n        let new_value = fs[key];\n        for (let ii = 0; ii < new_value.length; ++ii) {\n          if (!old_value || new_value[ii] !== old_value[ii]) {\n            filewatchTriggerChange(key);\n            break;\n          }\n        }\n      }\n    }\n  };\n  document.getElementsByTagName('head')[0].appendChild(scriptTag);\n}\n\nfilewatchOn('fsdata.js', webFSReload);","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* global WebSocket, XMLHttpRequest */\n\nconst ack = require('../../common/ack.js');\nconst { ackInitReceiver } = ack;\nconst assert = require('assert');\nconst { min } = Math;\nconst urlhash = require('./urlhash.js');\nconst walltime = require('./walltime.js');\nconst wscommon = require('../../common/wscommon.js');\nconst { wsHandleMessage } = wscommon;\n\n// let net_time = 0;\n// export function getNetTime() {\n//   let r = net_time;\n//   net_time = 0;\n//   return r;\n// }\n\nexport function WSClient(path) {\n  this.id = null;\n  this.handlers = {};\n  this.socket = null;\n  this.connected = false;\n  this.disconnected = false;\n  this.retry_scheduled = false;\n  this.retry_count = 0;\n  this.disconnect_time = Date.now();\n  this.last_receive_time = Date.now();\n  this.last_send_time = Date.now();\n  this.auto_path = !path;\n  ackInitReceiver(this);\n\n  if (this.auto_path) {\n\n    path = document.location.toString().match(/^[^#?]+/)[0]; // remove search and anchor\n\n\n    if (path.slice(-1) !== '/') {\n      // /file.html or /path/file.html or /path\n      let idx = path.lastIndexOf('/');\n      if (idx !== -1) {\n        let filename = path.slice(idx + 1);\n        if (filename.indexOf('.') !== -1) {\n          path = path.slice(0, idx + 1);\n        } else {\n          path += '/';\n        }\n      } else {\n        path += '/';\n      }\n    }\n    path = path.replace(/^http/, 'ws');\n    this.path = `${path}ws`;\n  } else {\n    this.path = path;\n  }\n\n  if (path.match(/:\\d+\\//)) {\n    // has port, don't try anything fancy\n    this.path2 = this.path;\n  } else if (path.match(/^ws:/)) {\n    // no port, try wss:// if this fails\n    // Should fix Comcast injection issue\n    this.path2 = this.path.replace(/^ws:/, 'wss:');\n  } else {\n    // Using wss:// some browsers will not allow connecting to ws://, so don't even try\n    this.path2 = this.path;\n  }\n\n  this.connect(false);\n\n  this.onMsg('cack', this.onConnectAck.bind(this));\n  this.onMsg('app_ver', this.onAppVer.bind(this));\n  this.onMsg('error', this.onError.bind(this));\n}\n\nWSClient.prototype.timeSinceDisconnect = function () {\n  return Date.now() - this.disconnect_time;\n};\n\nWSClient.prototype.onAppVer = function (ver) {\n  if (ver !== BUILD_TIMESTAMP) {\n    if (this.on_app_ver_mismatch) {\n      this.on_app_ver_mismatch();\n    } else {\n      if (this.auto_path) {\n        console.error(`App version mismatch (server: ${ver}, client: ${BUILD_TIMESTAMP}), reloading`);\n        if (window.reloadSafe) {\n          window.reloadSafe();\n        } else {\n          document.location.reload();\n        }\n      } else {\n        console.warn(`App version mismatch (server: ${ver}, client: ${BUILD_TIMESTAMP}), ignoring`);\n      }\n    }\n  }\n};\n\nWSClient.prototype.onConnectAck = function (data, resp_func) {\n  let client = this;\n  walltime.sync(data.time);\n  client.connected = true;\n  client.disconnected = false;\n  client.id = data.id;\n  client.secret = data.secret;\n  if (data.app_ver) {\n    client.onAppVer(data.app_ver);\n  }\n  // Fire user-level connect handler as well\n  assert(client.handlers.connect);\n  client.handlers.connect(client, {\n    client_id: client.id\n  });\n  resp_func();\n};\n\nWSClient.prototype.wsPak = function (msg) {\n  return wscommon.wsPak(msg, null, this);\n};\n\nWSClient.prototype.send = function (msg, data, resp_func) {\n  wscommon.sendMessage.call(this, msg, data, resp_func);\n};\n\nWSClient.prototype.onError = function (e) {\n  console.error(e);\n  throw e;\n};\n\n// cb(client, data, resp_func)\nWSClient.prototype.onMsg = function (msg, cb) {\n  assert.ok(!this.handlers[msg]);\n  this.handlers[msg] = function wrappedCallback(client, data, resp_func) {\n    // Client interface does not need a client passed to it!\n    return cb(data, resp_func);\n  };\n};\n\nWSClient.prototype.checkForNewAppVersion = function () {\n  if (this.app_ver_check_in_progress) {\n    return;\n  }\n  this.app_ver_check_in_progress = true;\n  let xhr = new XMLHttpRequest();\n  xhr.open('GET', `${urlhash.getURLBase()}app.ver.json`, true);\n  // xhr.responseType = 'json'; // causes un-catchable, un-reported errors\n  xhr.onload = () => {\n    this.app_ver_check_in_progress = false;\n    let text;\n    try {\n      text = xhr.responseText;\n      let obj = JSON.parse(text);\n      if (obj && obj.ver) {\n        this.onAppVer(obj.ver);\n      }\n    } catch (e) {\n      console.error('Received invalid response when checking app version:', text || '<empty response>');\n      // Probably internal server error or such as the server is restart, try again momentarily\n      // This is not triggered on connection errors, only if we got a (non-parseable) response from the server\n      if (!this.delayed_recheck) {\n        this.delayed_recheck = true;\n        setTimeout(() => {\n          this.delayed_recheck = false;\n          this.checkForNewAppVersion();\n        }, 1000);\n      }\n    }\n  };\n  xhr.onerror = () => {\n    this.app_ver_check_in_progress = false;\n  };\n  xhr.send(null);\n};\n\nWSClient.prototype.retryConnection = function () {\n  let client = this;\n  assert(!client.socket);\n  assert(!client.retry_scheduled);\n  client.retry_scheduled = true;\n  ++client.retry_count;\n  this.checkForNewAppVersion();\n  setTimeout(function () {\n    assert(client.retry_scheduled);\n    assert(!client.socket);\n    client.retry_scheduled = false;\n    client.connect(true);\n  }, min(client.retry_count * client.retry_count * 100, 15000));\n};\n\nWSClient.prototype.connect = function (for_reconnect) {\n  let client = this;\n\n  let path = `${client.retry_count % 2 ? client.path2 : client.path}?pver=${wscommon.PROTOCOL_VERSION}${for_reconnect && client.id && client.secret ? `&reconnect=${client.id}&secret=${client.secret}` : ''}`;\n  let socket = new WebSocket(path);\n  socket.binaryType = 'arraybuffer';\n  client.socket = socket;\n\n  // Protect callbacks from ever firing if we've already disconnected this socket\n  //   from the WSClient\n  function guard(fn) {\n    return function (...args) {\n      if (client.socket !== socket) {\n        return;\n      }\n      fn(...args);\n    };\n  }\n\n  function abort(skip_close) {\n    client.socket = null;\n    if (client.connected) {\n      client.disconnect_time = Date.now();\n      client.disconnected = true;\n    }\n    client.connected = false;\n    if (!skip_close) {\n      try {\n        socket.close();\n      } catch (e) {\n        // ignore\n      }\n    }\n    ack.failAll(client);\n  }\n\n  function retry(skip_close) {\n    abort(skip_close);\n    client.retryConnection();\n  }\n\n  // Local state, for this one connection\n  let connected = false;\n  client.socket.addEventListener('error', guard(function (err) {\n    if (!connected) {\n      console.log('WebSocket error during initial connection, retrying...', err);\n      retry();\n    } else {\n      console.error('WebSocket error', err);\n      // Disconnect and reconnect here, is this a terminal error? Probably not, we'll get a 'close' event if it is?\n      // We some error occasionally on iOS, not sure what error, but it auto-reconnects fine, so let's\n      // not do a throw\n      // client.onError(err);\n    }\n  }));\n\n  client.socket.addEventListener('message', guard(function (message) {\n    // net_time -= Date.now();\n    assert(message.data instanceof ArrayBuffer);\n    wsHandleMessage(client, new Uint8Array(message.data));\n    // net_time += Date.now();\n  }));\n\n  client.socket.addEventListener('open', guard(function () {\n    console.log('WebSocket open');\n    connected = true;\n    // reset retry count so next retry is fast if we get disconnected\n    client.retry_count = 0;\n  }));\n\n  client.socket.addEventListener('close', guard(function () {\n    console.log('WebSocket close, retrying connection...');\n    retry(true);\n  }));\n\n  let doPing = guard(function () {\n    if (Date.now() - client.last_send_time > wscommon.PING_TIME && client.connected && client.socket.readyState === 1) {\n      client.send('ping');\n    }\n    setTimeout(doPing, wscommon.PING_TIME);\n  });\n  setTimeout(doPing, wscommon.PING_TIME);\n\n  // For debugging reconnect handling\n  // setTimeout(function () {\n  //   if (connected) {\n  //     socket.close();\n  //   }\n  // }, 5000);\n};","module.exports={\"font_size\":8,\"imageW\":128,\"imageH\":128,\"spread\":2,\"noFilter\":1,\"channels\":1,\"char_infos\":[{\"c\":32,\"x0\":61,\"y0\":63,\"xpad\":4,\"w\":0,\"h\":0},{\"c\":33,\"x0\":92,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":34,\"x0\":16,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":2},{\"c\":35,\"x0\":98,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":36,\"x0\":38,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":37,\"x0\":108,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":38,\"x0\":118,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":39,\"x0\":24,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":2},{\"c\":40,\"x0\":2,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":41,\"x0\":9,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":42,\"x0\":109,\"y0\":54,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":43,\"x0\":117,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":44,\"x0\":30,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":2,\"h\":2},{\"c\":45,\"x0\":67,\"y0\":63,\"yoffs\":3,\"xpad\":1,\"w\":3,\"h\":1},{\"c\":46,\"x0\":75,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":1,\"h\":1},{\"c\":47,\"x0\":16,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":48,\"x0\":26,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":49,\"x0\":35,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":50,\"x0\":42,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":51,\"x0\":51,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":52,\"x0\":60,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":53,\"x0\":69,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":54,\"x0\":78,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":55,\"x0\":87,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":56,\"x0\":96,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":57,\"x0\":105,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":58,\"x0\":2,\"y0\":63,\"yoffs\":2,\"xpad\":1,\"w\":1,\"h\":3},{\"c\":59,\"x0\":115,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":1,\"h\":4},{\"c\":60,\"x0\":114,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":61,\"x0\":8,\"y0\":63,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":62,\"x0\":122,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":63,\"x0\":2,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":64,\"x0\":11,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":65,\"x0\":21,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":66,\"x0\":30,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":67,\"x0\":39,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":68,\"x0\":47,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":69,\"x0\":56,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":70,\"x0\":64,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":71,\"x0\":72,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":72,\"x0\":81,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":73,\"x0\":90,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":74,\"x0\":98,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":75,\"x0\":107,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":76,\"x0\":116,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":77,\"x0\":2,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":78,\"x0\":12,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":79,\"x0\":21,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":80,\"x0\":30,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":81,\"x0\":47,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":82,\"x0\":39,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":83,\"x0\":48,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":84,\"x0\":57,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":85,\"x0\":65,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":86,\"x0\":74,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":87,\"x0\":83,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":88,\"x0\":93,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":89,\"x0\":102,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":90,\"x0\":111,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":91,\"x0\":119,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":92,\"x0\":2,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":93,\"x0\":12,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":94,\"x0\":37,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":2},{\"c\":95,\"x0\":81,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":4,\"h\":1},{\"c\":96,\"x0\":45,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":2},{\"c\":97,\"x0\":121,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":98,\"x0\":19,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":99,\"x0\":2,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":100,\"x0\":28,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":101,\"x0\":10,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":102,\"x0\":37,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":103,\"x0\":56,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":104,\"x0\":45,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":105,\"x0\":54,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":106,\"x0\":2,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":7},{\"c\":107,\"x0\":60,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":108,\"x0\":69,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":109,\"x0\":19,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":4},{\"c\":110,\"x0\":29,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":111,\"x0\":38,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":112,\"x0\":65,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":113,\"x0\":74,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":114,\"x0\":47,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":115,\"x0\":55,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":116,\"x0\":75,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":117,\"x0\":64,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":118,\"x0\":73,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":119,\"x0\":82,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":4},{\"c\":120,\"x0\":92,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":121,\"x0\":83,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":122,\"x0\":100,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":123,\"x0\":83,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":124,\"x0\":91,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":125,\"x0\":97,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":126,\"x0\":52,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":2},{\"c\":160,\"x0\":90,\"y0\":63,\"xpad\":3,\"w\":1,\"h\":1},{\"c\":65533,\"x0\":105,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":128263,\"x0\":9,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":10,\"h\":7},{\"c\":128264,\"x0\":24,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":9,\"h\":7}]}\n","module.exports={\"font_size\":16,\"imageW\":1024,\"imageH\":64,\"spread\":2,\"noFilter\":1,\"channels\":1,\"char_infos\":[{\"c\":32,\"x0\":172,\"y0\":21,\"xpad\":8,\"w\":0,\"h\":0},{\"c\":33,\"x0\":137,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":34,\"x0\":81,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":4},{\"c\":35,\"x0\":144,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":36,\"x0\":59,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":37,\"x0\":159,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":38,\"x0\":174,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":39,\"x0\":92,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":4},{\"c\":40,\"x0\":189,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":41,\"x0\":198,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":42,\"x0\":41,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":43,\"x0\":52,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":44,\"x0\":99,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":4,\"h\":4},{\"c\":45,\"x0\":141,\"y0\":21,\"yoffs\":7,\"xpad\":2,\"w\":6,\"h\":2},{\"c\":46,\"x0\":152,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":2,\"h\":2},{\"c\":47,\"x0\":207,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":48,\"x0\":222,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":49,\"x0\":235,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":50,\"x0\":244,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":51,\"x0\":257,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":52,\"x0\":270,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":53,\"x0\":283,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":54,\"x0\":296,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":55,\"x0\":309,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":56,\"x0\":322,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":57,\"x0\":335,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":58,\"x0\":63,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":2,\"h\":6},{\"c\":59,\"x0\":877,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":2,\"h\":8},{\"c\":60,\"x0\":348,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":61,\"x0\":70,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":62,\"x0\":359,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":63,\"x0\":370,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":64,\"x0\":383,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":65,\"x0\":398,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":66,\"x0\":411,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":67,\"x0\":424,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":68,\"x0\":435,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":69,\"x0\":448,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":70,\"x0\":459,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":71,\"x0\":470,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":72,\"x0\":483,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":73,\"x0\":496,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":74,\"x0\":507,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":75,\"x0\":520,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":76,\"x0\":533,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":77,\"x0\":544,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":78,\"x0\":559,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":79,\"x0\":572,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":80,\"x0\":585,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":81,\"x0\":72,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":82,\"x0\":598,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":83,\"x0\":611,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":84,\"x0\":624,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":85,\"x0\":635,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":86,\"x0\":648,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":87,\"x0\":661,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":88,\"x0\":676,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":89,\"x0\":689,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":90,\"x0\":702,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":91,\"x0\":713,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":92,\"x0\":722,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":93,\"x0\":737,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":94,\"x0\":108,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":4},{\"c\":95,\"x0\":159,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":8,\"h\":2},{\"c\":96,\"x0\":119,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":4},{\"c\":97,\"x0\":884,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":98,\"x0\":746,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":99,\"x0\":897,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":100,\"x0\":759,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":101,\"x0\":908,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":102,\"x0\":772,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":103,\"x0\":85,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":104,\"x0\":783,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":105,\"x0\":796,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":106,\"x0\":2,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":14},{\"c\":107,\"x0\":803,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":108,\"x0\":816,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":109,\"x0\":921,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":10,\"h\":8},{\"c\":110,\"x0\":936,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":111,\"x0\":949,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":112,\"x0\":98,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":113,\"x0\":111,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":114,\"x0\":962,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":115,\"x0\":973,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":116,\"x0\":823,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":117,\"x0\":986,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":118,\"x0\":999,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":119,\"x0\":2,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":10,\"h\":8},{\"c\":120,\"x0\":17,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":121,\"x0\":124,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":122,\"x0\":28,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":123,\"x0\":834,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":124,\"x0\":845,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":125,\"x0\":852,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":126,\"x0\":128,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":4},{\"c\":160,\"x0\":178,\"y0\":21,\"xpad\":7,\"w\":1,\"h\":1},{\"c\":65533,\"x0\":863,\"y0\":2,\"yoffs\":3,\"xpad\":1,\"w\":9,\"h\":10},{\"c\":128263,\"x0\":11,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":19,\"h\":14},{\"c\":128264,\"x0\":35,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":19,\"h\":14}]}\n","module.exports={\"font_size\":32,\"imageW\":1024,\"imageH\":512,\"spread\":8,\"channels\":1,\"char_infos\":[{\"c\":13,\"x0\":307,\"y0\":381,\"w\":1,\"h\":1},{\"c\":32,\"x0\":325,\"y0\":381,\"xpad\":6.10156,\"w\":1,\"h\":1},{\"c\":33,\"x0\":436,\"y0\":230,\"yoffs\":4,\"xpad\":1.13281,\"w\":6,\"h\":22},{\"c\":34,\"x0\":879,\"y0\":347,\"yoffs\":4,\"w\":10,\"h\":8},{\"c\":35,\"x0\":673,\"y0\":309,\"yoffs\":10,\"w\":16,\"h\":17},{\"c\":36,\"x0\":215,\"y0\":8,\"yoffs\":1,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":37,\"x0\":933,\"y0\":148,\"yoffs\":4,\"xpad\":0.773438,\"w\":26,\"h\":23},{\"c\":38,\"x0\":976,\"y0\":148,\"yoffs\":4,\"xpad\":0.570313,\"w\":20,\"h\":23},{\"c\":39,\"x0\":906,\"y0\":347,\"yoffs\":4,\"w\":5,\"h\":8},{\"c\":40,\"x0\":8,\"y0\":190,\"yoffs\":5,\"w\":8,\"h\":23},{\"c\":41,\"x0\":33,\"y0\":190,\"yoffs\":5,\"xpad\":0.890625,\"w\":7,\"h\":23},{\"c\":42,\"x0\":645,\"y0\":347,\"yoffs\":2,\"w\":11,\"h\":11},{\"c\":43,\"x0\":706,\"y0\":309,\"yoffs\":9,\"xpad\":0.414063,\"w\":15,\"h\":17},{\"c\":44,\"x0\":928,\"y0\":347,\"yoffs\":22,\"w\":5,\"h\":8},{\"c\":45,\"x0\":252,\"y0\":381,\"yoffs\":16,\"w\":9,\"h\":3},{\"c\":46,\"x0\":156,\"y0\":381,\"yoffs\":22,\"w\":5,\"h\":4},{\"c\":47,\"x0\":57,\"y0\":190,\"yoffs\":4,\"w\":13,\"h\":23},{\"c\":48,\"x0\":459,\"y0\":230,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":49,\"x0\":402,\"y0\":270,\"yoffs\":5,\"xpad\":5.67188,\"w\":12,\"h\":21},{\"c\":50,\"x0\":431,\"y0\":270,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":21},{\"c\":51,\"x0\":493,\"y0\":230,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":22},{\"c\":52,\"x0\":464,\"y0\":270,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":21},{\"c\":53,\"x0\":526,\"y0\":230,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":22},{\"c\":54,\"x0\":559,\"y0\":230,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":55,\"x0\":498,\"y0\":270,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":21},{\"c\":56,\"x0\":593,\"y0\":230,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":57,\"x0\":627,\"y0\":230,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":58,\"x0\":401,\"y0\":347,\"yoffs\":12,\"w\":5,\"h\":14},{\"c\":59,\"x0\":651,\"y0\":309,\"yoffs\":12,\"w\":5,\"h\":18},{\"c\":60,\"x0\":867,\"y0\":103,\"yoffs\":4,\"w\":12,\"h\":25},{\"c\":61,\"x0\":847,\"y0\":347,\"yoffs\":14,\"w\":15,\"h\":9},{\"c\":62,\"x0\":896,\"y0\":103,\"yoffs\":4,\"w\":12,\"h\":25},{\"c\":63,\"x0\":661,\"y0\":230,\"yoffs\":4,\"xpad\":0.195313,\"w\":12,\"h\":22},{\"c\":64,\"x0\":87,\"y0\":190,\"yoffs\":7,\"xpad\":1.21094,\"w\":23,\"h\":23},{\"c\":65,\"x0\":531,\"y0\":270,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":66,\"x0\":567,\"y0\":270,\"yoffs\":5,\"xpad\":0.882813,\"w\":18,\"h\":21},{\"c\":67,\"x0\":690,\"y0\":230,\"yoffs\":5,\"xpad\":0.945313,\"w\":17,\"h\":22},{\"c\":68,\"x0\":602,\"y0\":270,\"yoffs\":5,\"xpad\":1.01563,\"w\":20,\"h\":21},{\"c\":69,\"x0\":639,\"y0\":270,\"yoffs\":5,\"xpad\":0.617188,\"w\":16,\"h\":21},{\"c\":70,\"x0\":672,\"y0\":270,\"yoffs\":5,\"w\":15,\"h\":21},{\"c\":71,\"x0\":724,\"y0\":230,\"yoffs\":5,\"xpad\":1.75,\"w\":18,\"h\":22},{\"c\":72,\"x0\":704,\"y0\":270,\"yoffs\":5,\"xpad\":2.53906,\"w\":18,\"h\":21},{\"c\":73,\"x0\":739,\"y0\":270,\"yoffs\":5,\"xpad\":2.54688,\"w\":6,\"h\":21},{\"c\":74,\"x0\":759,\"y0\":230,\"yoffs\":5,\"xpad\":2.75781,\"w\":6,\"h\":22},{\"c\":75,\"x0\":762,\"y0\":270,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":76,\"x0\":798,\"y0\":270,\"yoffs\":5,\"w\":16,\"h\":21},{\"c\":77,\"x0\":831,\"y0\":270,\"yoffs\":5,\"xpad\":2.27344,\"w\":21,\"h\":21},{\"c\":78,\"x0\":869,\"y0\":270,\"yoffs\":5,\"xpad\":2.74219,\"w\":19,\"h\":21},{\"c\":79,\"x0\":127,\"y0\":190,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":80,\"x0\":905,\"y0\":270,\"yoffs\":5,\"xpad\":0.828125,\"w\":17,\"h\":21},{\"c\":81,\"x0\":165,\"y0\":190,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":82,\"x0\":939,\"y0\":270,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":83,\"x0\":203,\"y0\":190,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":23},{\"c\":84,\"x0\":975,\"y0\":270,\"yoffs\":5,\"w\":17,\"h\":21},{\"c\":85,\"x0\":782,\"y0\":230,\"yoffs\":5,\"xpad\":2.04688,\"w\":19,\"h\":22},{\"c\":86,\"x0\":8,\"y0\":309,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":87,\"x0\":44,\"y0\":309,\"yoffs\":5,\"w\":30,\"h\":21},{\"c\":88,\"x0\":818,\"y0\":230,\"yoffs\":5,\"w\":20,\"h\":22},{\"c\":89,\"x0\":91,\"y0\":309,\"yoffs\":5,\"w\":18,\"h\":21},{\"c\":90,\"x0\":126,\"y0\":309,\"yoffs\":5,\"xpad\":0.226563,\"w\":17,\"h\":21},{\"c\":91,\"x0\":925,\"y0\":103,\"yoffs\":4,\"w\":9,\"h\":25},{\"c\":92,\"x0\":235,\"y0\":190,\"yoffs\":4,\"w\":13,\"h\":23},{\"c\":93,\"x0\":951,\"y0\":103,\"yoffs\":4,\"xpad\":1.70313,\"w\":7,\"h\":25},{\"c\":94,\"x0\":950,\"y0\":347,\"yoffs\":14,\"xpad\":0.1875,\"w\":13,\"h\":8},{\"c\":95,\"x0\":278,\"y0\":381,\"yoffs\":23,\"xpad\":0.4375,\"w\":12,\"h\":3},{\"c\":96,\"x0\":57,\"y0\":381,\"yoffs\":3,\"w\":6,\"h\":6},{\"c\":97,\"x0\":738,\"y0\":309,\"yoffs\":10,\"xpad\":1.29688,\"w\":14,\"h\":17},{\"c\":98,\"x0\":265,\"y0\":190,\"yoffs\":4,\"xpad\":0.890625,\"w\":16,\"h\":23},{\"c\":99,\"x0\":769,\"y0\":309,\"yoffs\":10,\"xpad\":0.273438,\"w\":14,\"h\":17},{\"c\":100,\"x0\":298,\"y0\":190,\"yoffs\":4,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":101,\"x0\":800,\"y0\":309,\"yoffs\":10,\"xpad\":1.04688,\"w\":15,\"h\":17},{\"c\":102,\"x0\":855,\"y0\":230,\"yoffs\":4,\"w\":10,\"h\":22},{\"c\":103,\"x0\":330,\"y0\":190,\"yoffs\":10,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":104,\"x0\":882,\"y0\":230,\"yoffs\":4,\"xpad\":1.10156,\"w\":16,\"h\":22},{\"c\":105,\"x0\":160,\"y0\":309,\"yoffs\":5,\"xpad\":1.34375,\"w\":6,\"h\":21},{\"c\":106,\"x0\":78,\"y0\":57,\"yoffs\":5,\"xpad\":1.07031,\"w\":7,\"h\":28},{\"c\":107,\"x0\":915,\"y0\":230,\"yoffs\":4,\"xpad\":0.171875,\"w\":15,\"h\":22},{\"c\":108,\"x0\":947,\"y0\":230,\"yoffs\":4,\"xpad\":1.46875,\"w\":6,\"h\":22},{\"c\":109,\"x0\":50,\"y0\":347,\"yoffs\":10,\"xpad\":1.14063,\"w\":25,\"h\":16},{\"c\":110,\"x0\":92,\"y0\":347,\"yoffs\":10,\"xpad\":2.03906,\"w\":15,\"h\":16},{\"c\":111,\"x0\":832,\"y0\":309,\"yoffs\":10,\"xpad\":0.828125,\"w\":16,\"h\":17},{\"c\":112,\"x0\":362,\"y0\":190,\"yoffs\":10,\"xpad\":0.890625,\"w\":16,\"h\":23},{\"c\":113,\"x0\":395,\"y0\":190,\"yoffs\":10,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":114,\"x0\":184,\"y0\":347,\"yoffs\":11,\"xpad\":0.203125,\"w\":10,\"h\":15},{\"c\":115,\"x0\":865,\"y0\":309,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":17},{\"c\":116,\"x0\":587,\"y0\":309,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":20},{\"c\":117,\"x0\":124,\"y0\":347,\"yoffs\":11,\"xpad\":1.64844,\"w\":15,\"h\":16},{\"c\":118,\"x0\":211,\"y0\":347,\"yoffs\":11,\"w\":15,\"h\":15},{\"c\":119,\"x0\":243,\"y0\":347,\"yoffs\":11,\"w\":23,\"h\":15},{\"c\":120,\"x0\":283,\"y0\":347,\"yoffs\":11,\"w\":16,\"h\":15},{\"c\":121,\"x0\":970,\"y0\":230,\"yoffs\":11,\"w\":15,\"h\":22},{\"c\":122,\"x0\":316,\"y0\":347,\"yoffs\":11,\"xpad\":0.851563,\"w\":13,\"h\":15},{\"c\":123,\"x0\":1002,\"y0\":230,\"yoffs\":6,\"w\":9,\"h\":22},{\"c\":124,\"x0\":8,\"y0\":8,\"w\":7,\"h\":32},{\"c\":125,\"x0\":8,\"y0\":270,\"yoffs\":6,\"xpad\":0.460938,\"w\":8,\"h\":22},{\"c\":126,\"x0\":127,\"y0\":381,\"yoffs\":16,\"xpad\":0.3125,\"w\":12,\"h\":5},{\"c\":144,\"x0\":980,\"y0\":347,\"yoffs\":-5,\"w\":14,\"h\":8},{\"c\":160,\"x0\":343,\"y0\":381,\"xpad\":6.10156,\"w\":1,\"h\":1},{\"c\":161,\"x0\":33,\"y0\":270,\"yoffs\":4,\"xpad\":1.13281,\"w\":6,\"h\":22},{\"c\":162,\"x0\":427,\"y0\":190,\"yoffs\":7,\"xpad\":0.273438,\"w\":14,\"h\":23},{\"c\":163,\"x0\":183,\"y0\":309,\"yoffs\":5,\"xpad\":0.304688,\"w\":14,\"h\":21},{\"c\":164,\"x0\":614,\"y0\":309,\"yoffs\":9,\"xpad\":0.328125,\"w\":20,\"h\":20},{\"c\":165,\"x0\":214,\"y0\":309,\"yoffs\":5,\"w\":18,\"h\":21},{\"c\":166,\"x0\":458,\"y0\":190,\"yoffs\":4,\"xpad\":2.10156,\"w\":6,\"h\":23},{\"c\":167,\"x0\":102,\"y0\":57,\"yoffs\":2,\"xpad\":1.25,\"w\":17,\"h\":28},{\"c\":168,\"x0\":178,\"y0\":381,\"yoffs\":4,\"xpad\":0.453125,\"w\":9,\"h\":4},{\"c\":169,\"x0\":481,\"y0\":190,\"yoffs\":4,\"xpad\":0.625,\"w\":25,\"h\":23},{\"c\":170,\"x0\":551,\"y0\":347,\"yoffs\":4,\"xpad\":0.296875,\"w\":10,\"h\":12},{\"c\":171,\"x0\":673,\"y0\":347,\"yoffs\":13,\"xpad\":0.140625,\"w\":11,\"h\":11},{\"c\":172,\"x0\":729,\"y0\":347,\"yoffs\":13,\"xpad\":0.382813,\"w\":15,\"h\":10},{\"c\":173,\"x0\":361,\"y0\":381,\"xpad\":2.94531,\"w\":1,\"h\":1},{\"c\":174,\"x0\":249,\"y0\":309,\"yoffs\":1,\"xpad\":0.3125,\"w\":22,\"h\":21},{\"c\":175,\"x0\":204,\"y0\":381,\"yoffs\":4,\"w\":9,\"h\":4},{\"c\":176,\"x0\":32,\"y0\":381,\"yoffs\":4,\"w\":8,\"h\":7},{\"c\":177,\"x0\":895,\"y0\":309,\"yoffs\":9,\"w\":14,\"h\":17},{\"c\":178,\"x0\":423,\"y0\":347,\"yoffs\":2,\"xpad\":0.890625,\"w\":11,\"h\":14},{\"c\":179,\"x0\":156,\"y0\":347,\"yoffs\":2,\"xpad\":1.52344,\"w\":11,\"h\":16},{\"c\":180,\"x0\":80,\"y0\":381,\"yoffs\":3,\"w\":6,\"h\":6},{\"c\":181,\"x0\":56,\"y0\":270,\"yoffs\":11,\"xpad\":1.85938,\"w\":15,\"h\":22},{\"c\":182,\"x0\":288,\"y0\":309,\"yoffs\":5,\"xpad\":0.5,\"w\":26,\"h\":21},{\"c\":183,\"x0\":230,\"y0\":381,\"yoffs\":16,\"w\":5,\"h\":4},{\"c\":184,\"x0\":8,\"y0\":381,\"yoffs\":25,\"xpad\":0.0703125,\"w\":7,\"h\":8},{\"c\":185,\"x0\":451,\"y0\":347,\"yoffs\":2,\"xpad\":0.6875,\"w\":10,\"h\":14},{\"c\":186,\"x0\":578,\"y0\":347,\"yoffs\":4,\"xpad\":0.625,\"w\":11,\"h\":12},{\"c\":187,\"x0\":701,\"y0\":347,\"yoffs\":13,\"xpad\":0.140625,\"w\":11,\"h\":11},{\"c\":188,\"x0\":247,\"y0\":8,\"yoffs\":2,\"xpad\":0.0546875,\"w\":25,\"h\":29},{\"c\":189,\"x0\":136,\"y0\":57,\"yoffs\":2,\"xpad\":1.22656,\"w\":25,\"h\":28},{\"c\":190,\"x0\":289,\"y0\":8,\"yoffs\":2,\"xpad\":0.109375,\"w\":26,\"h\":29},{\"c\":191,\"x0\":88,\"y0\":270,\"yoffs\":6,\"xpad\":0.09375,\"w\":13,\"h\":22},{\"c\":192,\"x0\":178,\"y0\":57,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":193,\"x0\":214,\"y0\":57,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":194,\"x0\":250,\"y0\":57,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":195,\"x0\":648,\"y0\":103,\"w\":19,\"h\":26},{\"c\":196,\"x0\":252,\"y0\":103,\"yoffs\":-1,\"w\":19,\"h\":27},{\"c\":197,\"x0\":286,\"y0\":57,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":198,\"x0\":331,\"y0\":309,\"yoffs\":5,\"xpad\":0.28125,\"w\":27,\"h\":21},{\"c\":199,\"x0\":322,\"y0\":57,\"yoffs\":5,\"xpad\":0.945313,\"w\":17,\"h\":28},{\"c\":200,\"x0\":356,\"y0\":57,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":201,\"x0\":389,\"y0\":57,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":202,\"x0\":422,\"y0\":57,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":203,\"x0\":288,\"y0\":103,\"yoffs\":-1,\"xpad\":0.617188,\"w\":16,\"h\":27},{\"c\":204,\"x0\":455,\"y0\":57,\"yoffs\":-2,\"xpad\":1.54688,\"w\":7,\"h\":28},{\"c\":205,\"x0\":479,\"y0\":57,\"yoffs\":-2,\"xpad\":0.546875,\"w\":8,\"h\":28},{\"c\":206,\"x0\":504,\"y0\":57,\"yoffs\":-2,\"w\":11,\"h\":28},{\"c\":207,\"x0\":321,\"y0\":103,\"yoffs\":-1,\"w\":9,\"h\":27},{\"c\":208,\"x0\":375,\"y0\":309,\"yoffs\":5,\"xpad\":1.22656,\"w\":20,\"h\":21},{\"c\":209,\"x0\":684,\"y0\":103,\"xpad\":2.74219,\"w\":19,\"h\":26},{\"c\":210,\"x0\":332,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":211,\"x0\":370,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":212,\"x0\":408,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":213,\"x0\":347,\"y0\":103,\"xpad\":1.22656,\"w\":21,\"h\":27},{\"c\":214,\"x0\":532,\"y0\":57,\"yoffs\":-1,\"xpad\":1.22656,\"w\":21,\"h\":28},{\"c\":215,\"x0\":346,\"y0\":347,\"yoffs\":11,\"xpad\":0.359375,\"w\":15,\"h\":15},{\"c\":216,\"x0\":523,\"y0\":190,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":217,\"x0\":446,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":218,\"x0\":482,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":219,\"x0\":518,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":220,\"x0\":570,\"y0\":57,\"yoffs\":-1,\"xpad\":2.04688,\"w\":19,\"h\":28},{\"c\":221,\"x0\":606,\"y0\":57,\"yoffs\":-2,\"w\":18,\"h\":28},{\"c\":222,\"x0\":412,\"y0\":309,\"yoffs\":5,\"xpad\":1.00781,\"w\":17,\"h\":21},{\"c\":223,\"x0\":446,\"y0\":309,\"yoffs\":5,\"xpad\":1.30469,\"w\":17,\"h\":21},{\"c\":224,\"x0\":69,\"y0\":148,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":225,\"x0\":100,\"y0\":148,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":226,\"x0\":131,\"y0\":148,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":227,\"x0\":561,\"y0\":190,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":228,\"x0\":592,\"y0\":190,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":229,\"x0\":975,\"y0\":103,\"yoffs\":2,\"xpad\":1.29688,\"w\":14,\"h\":25},{\"c\":230,\"x0\":926,\"y0\":309,\"yoffs\":10,\"xpad\":0.960938,\"w\":24,\"h\":17},{\"c\":231,\"x0\":623,\"y0\":190,\"yoffs\":10,\"xpad\":0.273438,\"w\":14,\"h\":23},{\"c\":232,\"x0\":162,\"y0\":148,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":233,\"x0\":194,\"y0\":148,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":234,\"x0\":226,\"y0\":148,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":235,\"x0\":654,\"y0\":190,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":236,\"x0\":686,\"y0\":190,\"yoffs\":3,\"xpad\":1.34375,\"w\":6,\"h\":23},{\"c\":237,\"x0\":709,\"y0\":190,\"yoffs\":3,\"w\":8,\"h\":23},{\"c\":238,\"x0\":734,\"y0\":190,\"yoffs\":3,\"w\":11,\"h\":23},{\"c\":239,\"x0\":118,\"y0\":270,\"yoffs\":4,\"w\":9,\"h\":22},{\"c\":240,\"x0\":762,\"y0\":190,\"yoffs\":4,\"xpad\":1.53125,\"w\":15,\"h\":23},{\"c\":241,\"x0\":144,\"y0\":270,\"yoffs\":4,\"xpad\":2.03906,\"w\":15,\"h\":22},{\"c\":242,\"x0\":258,\"y0\":148,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":243,\"x0\":291,\"y0\":148,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":244,\"x0\":324,\"y0\":148,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":245,\"x0\":794,\"y0\":190,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":246,\"x0\":827,\"y0\":190,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":247,\"x0\":478,\"y0\":347,\"yoffs\":11,\"xpad\":0.453125,\"w\":14,\"h\":14},{\"c\":248,\"x0\":967,\"y0\":309,\"yoffs\":10,\"xpad\":0.828125,\"w\":16,\"h\":17},{\"c\":249,\"x0\":357,\"y0\":148,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":250,\"x0\":389,\"y0\":148,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":251,\"x0\":421,\"y0\":148,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":252,\"x0\":860,\"y0\":190,\"yoffs\":4,\"xpad\":1.64844,\"w\":15,\"h\":23},{\"c\":253,\"x0\":64,\"y0\":8,\"yoffs\":3,\"w\":15,\"h\":30},{\"c\":254,\"x0\":554,\"y0\":8,\"yoffs\":4,\"xpad\":0.890625,\"w\":16,\"h\":29},{\"c\":255,\"x0\":587,\"y0\":8,\"yoffs\":4,\"w\":15,\"h\":29},{\"c\":256,\"x0\":720,\"y0\":103,\"w\":19,\"h\":26},{\"c\":257,\"x0\":892,\"y0\":190,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":258,\"x0\":385,\"y0\":103,\"yoffs\":-1,\"w\":19,\"h\":27},{\"c\":259,\"x0\":453,\"y0\":148,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":260,\"x0\":641,\"y0\":57,\"yoffs\":5,\"w\":21,\"h\":28},{\"c\":261,\"x0\":923,\"y0\":190,\"yoffs\":10,\"w\":16,\"h\":23},{\"c\":262,\"x0\":619,\"y0\":8,\"yoffs\":-2,\"xpad\":0.945313,\"w\":17,\"h\":29},{\"c\":263,\"x0\":484,\"y0\":148,\"yoffs\":3,\"xpad\":0.273438,\"w\":14,\"h\":24},{\"c\":268,\"x0\":653,\"y0\":8,\"yoffs\":-2,\"xpad\":0.945313,\"w\":17,\"h\":29},{\"c\":269,\"x0\":515,\"y0\":148,\"yoffs\":3,\"xpad\":0.273438,\"w\":14,\"h\":24},{\"c\":270,\"x0\":679,\"y0\":57,\"yoffs\":-2,\"xpad\":1.01563,\"w\":20,\"h\":28},{\"c\":271,\"x0\":956,\"y0\":190,\"yoffs\":4,\"w\":22,\"h\":23},{\"c\":272,\"x0\":480,\"y0\":309,\"yoffs\":5,\"xpad\":1.22656,\"w\":20,\"h\":21},{\"c\":273,\"x0\":995,\"y0\":190,\"yoffs\":4,\"xpad\":0.0703125,\"w\":17,\"h\":23},{\"c\":274,\"x0\":756,\"y0\":103,\"xpad\":0.617188,\"w\":16,\"h\":26},{\"c\":275,\"x0\":8,\"y0\":230,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":278,\"x0\":421,\"y0\":103,\"yoffs\":-1,\"xpad\":0.617188,\"w\":16,\"h\":27},{\"c\":279,\"x0\":40,\"y0\":230,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":280,\"x0\":716,\"y0\":57,\"yoffs\":5,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":281,\"x0\":72,\"y0\":230,\"yoffs\":10,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":282,\"x0\":749,\"y0\":57,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":283,\"x0\":546,\"y0\":148,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":286,\"x0\":782,\"y0\":57,\"yoffs\":-1,\"xpad\":1.75,\"w\":18,\"h\":28},{\"c\":287,\"x0\":96,\"y0\":8,\"yoffs\":3,\"xpad\":2.07031,\"w\":15,\"h\":30},{\"c\":290,\"x0\":817,\"y0\":57,\"yoffs\":5,\"xpad\":1.75,\"w\":18,\"h\":28},{\"c\":291,\"x0\":32,\"y0\":8,\"yoffs\":2,\"xpad\":2.07031,\"w\":15,\"h\":31},{\"c\":298,\"x0\":789,\"y0\":103,\"w\":9,\"h\":26},{\"c\":299,\"x0\":176,\"y0\":270,\"yoffs\":4,\"w\":9,\"h\":22},{\"c\":302,\"x0\":852,\"y0\":57,\"yoffs\":5,\"xpad\":0.546875,\"w\":8,\"h\":28},{\"c\":303,\"x0\":877,\"y0\":57,\"yoffs\":5,\"w\":8,\"h\":28},{\"c\":304,\"x0\":454,\"y0\":103,\"yoffs\":-1,\"xpad\":1.54688,\"w\":7,\"h\":27},{\"c\":305,\"x0\":378,\"y0\":347,\"yoffs\":11,\"xpad\":1.34375,\"w\":6,\"h\":15},{\"c\":310,\"x0\":687,\"y0\":8,\"yoffs\":5,\"w\":19,\"h\":29},{\"c\":311,\"x0\":128,\"y0\":8,\"yoffs\":4,\"xpad\":0.171875,\"w\":15,\"h\":30},{\"c\":313,\"x0\":902,\"y0\":57,\"yoffs\":-2,\"w\":16,\"h\":28},{\"c\":314,\"x0\":815,\"y0\":103,\"w\":8,\"h\":26},{\"c\":315,\"x0\":723,\"y0\":8,\"yoffs\":5,\"w\":16,\"h\":29},{\"c\":316,\"x0\":160,\"y0\":8,\"yoffs\":4,\"xpad\":1.46875,\"w\":6,\"h\":30},{\"c\":317,\"x0\":202,\"y0\":270,\"yoffs\":4,\"w\":16,\"h\":22},{\"c\":318,\"x0\":235,\"y0\":270,\"yoffs\":4,\"w\":12,\"h\":22},{\"c\":321,\"x0\":517,\"y0\":309,\"yoffs\":5,\"xpad\":0.046875,\"w\":16,\"h\":21},{\"c\":322,\"x0\":264,\"y0\":270,\"yoffs\":4,\"w\":11,\"h\":22},{\"c\":323,\"x0\":935,\"y0\":57,\"yoffs\":-2,\"xpad\":2.74219,\"w\":19,\"h\":28},{\"c\":324,\"x0\":104,\"y0\":230,\"yoffs\":3,\"xpad\":2.03906,\"w\":15,\"h\":23},{\"c\":325,\"x0\":756,\"y0\":8,\"yoffs\":5,\"xpad\":2.74219,\"w\":19,\"h\":29},{\"c\":326,\"x0\":578,\"y0\":148,\"yoffs\":10,\"xpad\":2.03906,\"w\":15,\"h\":24},{\"c\":327,\"x0\":971,\"y0\":57,\"yoffs\":-2,\"xpad\":2.74219,\"w\":19,\"h\":28},{\"c\":328,\"x0\":136,\"y0\":230,\"yoffs\":3,\"xpad\":2.03906,\"w\":15,\"h\":23},{\"c\":332,\"x0\":478,\"y0\":103,\"xpad\":1.22656,\"w\":21,\"h\":27},{\"c\":333,\"x0\":168,\"y0\":230,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":336,\"x0\":792,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":337,\"x0\":610,\"y0\":148,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":338,\"x0\":292,\"y0\":270,\"yoffs\":5,\"xpad\":0.390625,\"w\":29,\"h\":22},{\"c\":339,\"x0\":8,\"y0\":347,\"yoffs\":10,\"xpad\":0.65625,\"w\":25,\"h\":17},{\"c\":340,\"x0\":8,\"y0\":103,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":341,\"x0\":201,\"y0\":230,\"yoffs\":3,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":342,\"x0\":830,\"y0\":8,\"yoffs\":5,\"w\":19,\"h\":29},{\"c\":343,\"x0\":228,\"y0\":230,\"yoffs\":11,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":344,\"x0\":44,\"y0\":103,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":345,\"x0\":255,\"y0\":230,\"yoffs\":3,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":346,\"x0\":866,\"y0\":8,\"yoffs\":-2,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":347,\"x0\":643,\"y0\":148,\"yoffs\":3,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":350,\"x0\":898,\"y0\":8,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":351,\"x0\":282,\"y0\":230,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":23},{\"c\":352,\"x0\":930,\"y0\":8,\"yoffs\":-2,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":353,\"x0\":673,\"y0\":148,\"yoffs\":3,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":354,\"x0\":80,\"y0\":103,\"yoffs\":5,\"w\":17,\"h\":28},{\"c\":355,\"x0\":840,\"y0\":103,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":26},{\"c\":356,\"x0\":114,\"y0\":103,\"yoffs\":-2,\"w\":17,\"h\":28},{\"c\":357,\"x0\":312,\"y0\":230,\"yoffs\":4,\"w\":15,\"h\":23},{\"c\":362,\"x0\":516,\"y0\":103,\"xpad\":2.04688,\"w\":19,\"h\":27},{\"c\":363,\"x0\":344,\"y0\":230,\"yoffs\":4,\"xpad\":1.64844,\"w\":15,\"h\":23},{\"c\":366,\"x0\":962,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":367,\"x0\":8,\"y0\":148,\"yoffs\":2,\"xpad\":1.64844,\"w\":15,\"h\":25},{\"c\":368,\"x0\":8,\"y0\":57,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":369,\"x0\":703,\"y0\":148,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":370,\"x0\":148,\"y0\":103,\"yoffs\":5,\"xpad\":2.04688,\"w\":19,\"h\":28},{\"c\":371,\"x0\":338,\"y0\":270,\"yoffs\":11,\"w\":17,\"h\":22},{\"c\":376,\"x0\":552,\"y0\":103,\"yoffs\":-1,\"w\":18,\"h\":27},{\"c\":377,\"x0\":184,\"y0\":103,\"yoffs\":-2,\"xpad\":0.226563,\"w\":17,\"h\":28},{\"c\":378,\"x0\":376,\"y0\":230,\"yoffs\":3,\"xpad\":0.851563,\"w\":13,\"h\":23},{\"c\":379,\"x0\":587,\"y0\":103,\"yoffs\":-1,\"xpad\":0.226563,\"w\":17,\"h\":27},{\"c\":380,\"x0\":372,\"y0\":270,\"yoffs\":4,\"xpad\":0.851563,\"w\":13,\"h\":22},{\"c\":381,\"x0\":218,\"y0\":103,\"yoffs\":-2,\"xpad\":0.226563,\"w\":17,\"h\":28},{\"c\":382,\"x0\":406,\"y0\":230,\"yoffs\":3,\"xpad\":0.851563,\"w\":13,\"h\":23},{\"c\":402,\"x0\":40,\"y0\":148,\"yoffs\":4,\"w\":12,\"h\":25},{\"c\":536,\"x0\":183,\"y0\":8,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":30},{\"c\":537,\"x0\":735,\"y0\":148,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":538,\"x0\":44,\"y0\":57,\"yoffs\":5,\"w\":17,\"h\":29},{\"c\":539,\"x0\":621,\"y0\":103,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":27},{\"c\":8226,\"x0\":103,\"y0\":381,\"yoffs\":13,\"xpad\":0.28125,\"w\":7,\"h\":6},{\"c\":8482,\"x0\":606,\"y0\":347,\"yoffs\":5,\"xpad\":0.882813,\"w\":22,\"h\":12},{\"c\":8592,\"x0\":761,\"y0\":347,\"yoffs\":11,\"xpad\":0.882813,\"w\":26,\"h\":10},{\"c\":8593,\"x0\":765,\"y0\":148,\"yoffs\":4,\"xpad\":7.88281,\"w\":19,\"h\":24},{\"c\":8594,\"x0\":804,\"y0\":347,\"yoffs\":11,\"xpad\":0.882813,\"w\":26,\"h\":10},{\"c\":8595,\"x0\":801,\"y0\":148,\"yoffs\":4,\"xpad\":7.88281,\"w\":19,\"h\":24},{\"c\":8734,\"x0\":509,\"y0\":347,\"yoffs\":11,\"xpad\":0.6875,\"w\":25,\"h\":14},{\"c\":9742,\"x0\":837,\"y0\":148,\"yoffs\":4,\"w\":31,\"h\":24},{\"c\":9743,\"x0\":885,\"y0\":148,\"yoffs\":4,\"w\":31,\"h\":24},{\"c\":65533,\"x0\":550,\"y0\":309,\"yoffs\":5,\"w\":20,\"h\":21}]}","/*eslint global-require:off, no-labels:off*/\nconst glov_local_storage = require('./glov/local_storage.js');\nglov_local_storage.storage_prefix = 'macrogen'; // Before requiring anything else that might load from this\n\nconst assert = require('assert');\nconst { calculateBiomesTest } = require('./biome_test.js');\nconst camera2d = require('./glov/camera2d.js');\nconst continent_gen = require('./continent_gen.js');\nconst { continentDeserialize, continentSerialize } = require('./continent_serialize.js');\nconst { continentSerializeTest } = require('./continent_serialize_test.js');\nconst {\n  continentGen,\n  // D_OPEN,\n  D_BORDER,\n  // D_SEA,\n  D_SEA2,\n  D_INLAND_SEA,\n  D_COASTLINE,\n  D_LAKE\n} = continent_gen;\nconst engine = require('./glov/engine.js');\nconst input = require('./glov/input.js');\nconst { linkText } = require('./glov/link.js');\nconst { min, floor, round, sqrt } = Math;\nconst net = require('./glov/net.js');\nconst shaders = require('./glov/shaders.js');\nconst sprites = require('./glov/sprites.js');\nconst textures = require('./glov/textures.js');\nconst ui = require('./glov/ui.js');\nconst { clamp, clone } = require('../common/util.js');\nconst {\n  vec2, v2mul, v2sub,\n  v3set,\n  vec4\n} = require('./glov/vmath.js');\n\nwindow.Z = window.Z || {};\nZ.BACKGROUND = 1;\nZ.SPRITES = 10;\nZ.PARTICLES = 20;\nZ.UI_TEST = 200;\n\n// let app = exports;\n// Virtual viewport for our game logic\nexport const game_width = 480;\nexport const game_height = 240;\n\nexport function main() {\n  if (engine.DEBUG) {\n    // Enable auto-reload, etc\n    net.init({ engine });\n  }\n\n  if (!engine.startup({\n    antialias: true,\n    game_width,\n    game_height,\n    pixely: 'on',\n    viewport_postprocess: false,\n    do_borders: false\n  })) {\n    return;\n  }\n\n  assert(window.worldsModAPI);\n  let mapi = window.worldsModAPI({\n    // For testing against local build:\n    // hosts: {\n    //   debug3000: 'http://localhost:3000/'\n    // },\n  });\n\n  let shader_hex = shaders.create('shaders/hex.fp');\n\n  // Perfect sizes for pixely modes\n  ui.scaleSizes(13 / 32);\n  ui.setFontHeight(8);\n  let style_labels = ui.font.style({\n    outline_width: 4.0,\n    outline_color: 0x000000ff\n  });\n\n  let style_link = ui.font.style(null, {\n    color: 0x5040FFff,\n    outline_width: 4.0,\n    outline_color: 0x00000020\n  });\n  let style_link_hover = ui.font.style(null, {\n    color: 0x0000FFff,\n    outline_width: 4.0,\n    outline_color: 0x00000020\n  });\n\n  const createSprite = sprites.create;\n\n  let modes = {\n    view: 3,\n    edit: 0\n  };\n\n  let debug_tex1;\n  let debug_tex2;\n  let debug_sprite;\n  let opts = clone(continent_gen.default_opts);\n  let hex_tex_size = opts.hex_tex_size;\n  let tex_total_size = hex_tex_size * hex_tex_size;\n  opts.output.debug = true;\n\n  let hex_param = vec4(hex_tex_size, 0, 0, 0);\n  shaders.addGlobal('hex_param', hex_param);\n\n  let tex_data1 = new Uint8Array(tex_total_size * 4);\n  let tex_data_color = new Uint8Array(tex_total_size * 4);\n\n  let test_export = false;\n\n  let color = vec4(0, 0, 0, 1);\n  function updateDebugTexture(cdata) {\n    let start = Date.now();\n    let view_mode = modes.view;\n    let {\n      land, fill, tslope, rslope, river, elev, water_level,\n      rstrahler, humidity, classif, time\n    } = cdata;\n    let width = hex_tex_size;\n    let height = width;\n\n    function seaColor(pos) {\n      return elev[pos] / (water_level[pos] || opts.output.sea_range);\n    }\n\n    function setColorBuffer(buf, scale, do_ocean) {\n      for (let ii = 0; ii < tex_total_size; ++ii) {\n        if (land[ii]) {\n          let v = clamp(buf[ii] * scale, 0, 255);\n          tex_data_color[ii * 4] = v;\n          tex_data_color[ii * 4 + 1] = v;\n          tex_data_color[ii * 4 + 2] = v;\n        } else {\n          tex_data_color[ii * 4] = 0;\n          tex_data_color[ii * 4 + 1] = 0;\n          tex_data_color[ii * 4 + 2] = seaColor(ii) * 255;\n        }\n        tex_data_color[ii * 4 + 3] = 255;\n      }\n    }\n\n    if (view_mode === 0) {\n      for (let ii = 0; ii < tex_total_size; ++ii) {\n        let landv = land[ii] ? 1 : 0;\n        v3set(color, landv, landv, landv);\n        let f = fill[ii];\n        if (f > 0) {\n          if (f === D_COASTLINE) {\n            v3set(color, 0.8, 0.7, 0.3);\n          } else if (f === D_INLAND_SEA) {\n            color[1] = 0.25;\n            color[2] = 1.0;\n          } else if (f === D_BORDER) {\n            color[0] = 1.0;\n            color[2] = 0.5;\n          } else if (f <= D_SEA2) {\n            color[2] = 1;\n          } else if (f === D_LAKE) {\n            color[0] = color[1] = 0.25;\n            color[2] = 1;\n          }\n        }\n        for (let jj = 0; jj < 4; ++jj) {\n          tex_data_color[ii * 4 + jj] = clamp(color[jj] * 255, 0, 255);\n        }\n      }\n    } else if (view_mode === 1) {\n      let tslope_min = typeof opts.tslope.min === 'object' ? opts.tslope.min.add + opts.tslope.min.mul : opts.tslope.min;\n      let tslope_range = typeof opts.tslope.range === 'object' ? opts.tslope.range.add + opts.tslope.range.mul : opts.tslope.range;\n      let tslope_mul = 255 / (tslope_min + tslope_range);\n      setColorBuffer(tslope, tslope_mul);\n    } else if (view_mode === 2) {\n      setColorBuffer(rslope, 255 / opts.rslope.steps);\n    } else if (view_mode === 3) {\n      for (let ii = 0; ii < tex_total_size; ++ii) {\n        if (land[ii]) {\n          let v = opts.river.show_elev ? (elev[ii] - opts.output.sea_range) / opts.output.land_range : 0;\n          v3set(color, v, v, v);\n        } else {\n          v3set(color, 0, 0, seaColor(ii));\n        }\n        for (let jj = 0; jj < 4; ++jj) {\n          tex_data_color[ii * 4 + jj] = clamp(color[jj] * 255, 0, 255);\n        }\n      }\n    } else if (view_mode === 4) {\n      setColorBuffer(humidity, 1);\n    } else if (view_mode === 5) {\n      calculateBiomesTest(width, cdata, tex_data_color);\n      if (opts.classif.show_rivers) {\n        view_mode = 3;\n      }\n    } else if (view_mode === 6) {\n      for (let pos = 0; pos < tex_total_size; ++pos) {\n        let c = classif[pos];\n        v3set(color, c > 1 ? 255 : 0, c && c < 3 ? 255 : 0, c ? 0 : 255);\n        for (let jj = 0; jj < 4; ++jj) {\n          tex_data_color[pos * 4 + jj] = color[jj];\n        }\n      }\n      if (opts.classif.show_rivers) {\n        view_mode = 3;\n      }\n    }\n\n    // interleave data\n    for (let ii = 0; ii < tex_total_size; ++ii) {\n      tex_data1[ii * 4] = river[ii];\n      tex_data1[ii * 4 + 1] = rstrahler[ii];\n      tex_data1[ii * 4 + 2] = 0;\n      tex_data1[ii * 4 + 3] = 0;\n    }\n\n    if (!debug_tex1) {\n      debug_tex1 = textures.load({\n        name: 'proc_gen_debug1',\n        format: textures.format.RGBA8,\n        width,\n        height,\n        data: tex_data1,\n        filter_min: gl.NEAREST,\n        filter_mag: gl.NEAREST,\n        wrap_s: gl.CLAMP_TO_EDGE,\n        wrap_t: gl.CLAMP_TO_EDGE\n      });\n      debug_tex2 = textures.load({\n        name: 'proc_gen_debug3',\n        format: textures.format.RGBA8,\n        width,\n        height,\n        data: tex_data_color,\n        filter_min: gl.NEAREST,\n        filter_mag: gl.NEAREST,\n        wrap_s: gl.CLAMP_TO_EDGE,\n        wrap_t: gl.CLAMP_TO_EDGE\n      });\n    } else {\n      debug_tex1.updateData(width, height, tex_data1);\n      debug_tex2.updateData(width, height, tex_data_color);\n    }\n    if (!debug_sprite) {\n      debug_sprite = createSprite({\n        texs: [debug_tex1, debug_tex2]\n      });\n    }\n    console.log(`Debug texture update in ${Date.now() - start + time}ms`);\n    hex_param[1] = view_mode;\n  }\n\n  let serialize_size;\n  function doExport(cdata) {\n    if (0) {\n      continentSerializeTest(cdata);\n    } else if (0) {\n      // Send to server\n      let start = Date.now();\n      let ser = continentSerialize(cdata);\n      console.log(`Serialized in ${Date.now() - start}ms`);\n      start = Date.now();\n      serialize_size = ser.length;\n      /*let deser =*/continentDeserialize(ser);\n      console.log(`Deserialized in ${Date.now() - start}ms`);\n      let pak = net.client.wsPak('export');\n      pak.writeBuffer(ser);\n      pak.send();\n    } else {\n      // Send to WorldsFRVR via Mod API\n      // Expects the raw (unserialized) data in the form:\n      //   {\n      //     sea_level: 8192,\n      //     max_elevation: 24576,\n      //     elev: new Uint16Array(256*256),\n      //     humidity: new Uint8Array(256*256),\n      //     river: new Uint8Array(256*256),\n      //     water_level: new Uint16Array(256*256),\n      //     classif: new Uint8Array(256*256),\n      //   };\n      mapi.continentDataSet(cdata);\n    }\n  }\n\n  let need_regen = true;\n  let debug_uvs = vec4(0, hex_tex_size + 1, hex_tex_size + 1, 0);\n  let cdata;\n  function test(dt) {\n    camera2d.setAspectFixed2(game_width, game_height);\n\n    if (need_regen) {\n      need_regen = false;\n      opts.early_out = modes.view < 3 ? 'river' : null;\n      cdata = continentGen(opts);\n      updateDebugTexture(cdata);\n    }\n\n    {\n      const HEX_ASPECT = 1.5 / sqrt(3);\n      let w = min(camera2d.w(), camera2d.h());\n      let x = camera2d.x1() - w * HEX_ASPECT;\n      let y = camera2d.y0();\n      debug_sprite.draw({\n        x, y, w, h: w,\n        z: Z.UI - 10,\n        uvs: debug_uvs,\n        shader: shader_hex\n      });\n      let mouse_pos = input.mousePos();\n      if (mouse_pos[0] > x && mouse_pos[0] < x + w && mouse_pos[1] > y && mouse_pos[1] < y + w) {\n        // convert to texcoords\n        mouse_pos[0] = (mouse_pos[0] - x) / w * (hex_tex_size + 1);\n        mouse_pos[1] = (1 - (mouse_pos[1] - y) / w) * (hex_tex_size + 1);\n\n        // same in hex.fp\n        const HEX_HEIGHT = 1.0;\n        const VIEW_OFFS = vec2(0.5, 0.0);\n        const HEX_EDGE = HEX_HEIGHT / sqrt(3.0);\n        const HEX_EXTRA_WIDTH = 0.5 * HEX_EDGE; // cos(60/180*PI) * HEX_EDGE\n        const HEX_WIDTH = HEX_EDGE + HEX_EXTRA_WIDTH; // 1.5 * HEX_EDGE\n        const HEX_NON_EXTRA = HEX_EDGE / HEX_WIDTH; // 2/3rds\n        const HEX_HEIGHT_2 = HEX_HEIGHT / 2.0; // sin(60/180*PI) (0.85) * HEX_EDGE\n        const HEX_SLOPE = HEX_HEIGHT_2 / HEX_EXTRA_WIDTH;\n\n        let fpos = v2sub(vec2(), mouse_pos, VIEW_OFFS);\n        v2mul(fpos, fpos, vec2(1 / HEX_WIDTH, 1 / HEX_HEIGHT));\n        let ix = floor(fpos[0]);\n        let odd = ix & 1;\n        if (odd) {\n          fpos[1] -= 0.5;\n        }\n        let fracx = fpos[0] - ix;\n        let iy = floor(fpos[1]);\n        if (fracx < HEX_NON_EXTRA) {\n          // in solid section\n        } else {\n          // in overlapping section\n          let run = (fracx - HEX_NON_EXTRA) * HEX_WIDTH;\n          let fracy = fpos[1] - iy;\n          if (fracy > 0.5) {\n            // in top half\n            let slope = (1.0 - fracy) * HEX_HEIGHT / run;\n            if (slope < HEX_SLOPE) {\n              // in next over and up\n              ix++;\n              if (odd) {\n                iy++;\n              }\n            }\n          } else {\n            // in bottom half\n            let slope = fracy * HEX_HEIGHT / run;\n            if (slope < HEX_SLOPE) {\n              // in next over and down\n              ix++;\n              if (!odd) {\n                iy--;\n              }\n            }\n          }\n        }\n\n        if (ix >= 0 && ix < hex_tex_size && iy >= 0 && iy < hex_tex_size) {\n          let {\n            land, fill, tslope, rslope, river, elev, debug_priority,\n            coast_distance, ocean_distance, sea_level,\n            rstrahler, humidity\n          } = cdata;\n          let z = Z.UI - 5;\n          ui.print(style_labels, x, y, z, `${ix},${iy}`);\n          y += ui.font_height;\n          let idx = iy * hex_tex_size + ix;\n          ui.print(style_labels, x, y, z, `Land: ${land[idx]}`);\n          y += ui.font_height;\n          ui.print(style_labels, x, y, z, `Flags: ${fill[idx]}`);\n          y += ui.font_height;\n          ui.print(style_labels, x, y, z, `TSlope: ${tslope[idx]}`);\n          y += ui.font_height;\n          ui.print(style_labels, x, y, z, `RSlope: ${rslope[idx]}`);\n          y += ui.font_height;\n          ui.print(style_labels, x, y, z, `RElev: ${elev[idx] - sea_level}`);\n          y += ui.font_height;\n          ui.print(style_labels, x, y, z, `RProir: ${debug_priority[idx]}`);\n          y += ui.font_height;\n          ui.print(style_labels, x, y, z, `Strahler: ${rstrahler[idx]}`);\n          y += ui.font_height;\n          ui.print(style_labels, x, y, z, `Humidity: ${humidity[idx]}`);\n          y += ui.font_height;\n          ui.print(style_labels, x, y, z, `Coast Distance: ${coast_distance[idx]} / ${ocean_distance[idx]}`);\n          y += ui.font_height;\n          // ui.print(style_labels, x, y, z, `blur_temp1: ${blur_temp1[idx] - opts.output.sea_range}`);\n          // y += ui.font_height;\n          // ui.print(style_labels, x, y, z, `blur_temp2: ${blur_temp2[idx] - opts.output.sea_range}`);\n          // y += ui.font_height;\n          let rbits = river[idx];\n          ui.print(style_labels, x, y, z, `River: ${rbits & 1 ? 'Up' : '  '} ${rbits & 2 ? 'UR' : '  '} ` + `${rbits & 4 ? 'LR' : '  '} ${rbits & 8 ? 'Dn' : '  '} ${rbits & 16 ? 'LL' : '  '} ${rbits & 32 ? 'UL' : '  '}`);\n          y += ui.font_height;\n        }\n      }\n    }\n\n    let x = ui.button_height;\n    let button_spacing = ui.button_height + 2;\n    let y = x;\n    // if (ui.buttonText({ x, y, text: 'Regen' })) {\n    //   need_regen = true;\n    // }\n    // y += button_spacing;\n\n    function sliderInternal(field, value, min_v, max_v, fixed) {\n      let old_value = value;\n      value = ui.slider(value, {\n        x, y,\n        min: min_v,\n        max: max_v\n      });\n      if (!fixed) {\n        value = round(value);\n      } else if (fixed === 1) {\n        value = round(value * 10) / 10;\n      } else if (fixed === 2) {\n        value = round(value * 100) / 100;\n      }\n      ui.print(style_labels, x + ui.button_width + 4, y + 3, Z.UI, `${field}: ${value.toFixed(fixed)}`);\n      y += button_spacing;\n      if (old_value !== value) {\n        need_regen = true;\n      }\n      return value;\n    }\n\n    let x0 = x;\n    let subopts;\n    function slider(field, min_v, max_v, fixed, ex) {\n      x = x0;\n      let is_ex = false;\n      if (ex) {\n        is_ex = typeof subopts[field] === 'object';\n        if (ui.buttonText({ x, y, text: is_ex ? 'v' : '-',\n          w: ui.button_height })) {\n          is_ex = !is_ex;\n          if (is_ex) {\n            subopts[field] = {\n              min: subopts[field],\n              max: subopts[field],\n              freq: 1\n            };\n          } else {\n            subopts[field] = subopts[field].max;\n          }\n          need_regen = true;\n        }\n        x += 16;\n      }\n      if (is_ex) {\n        ui.print(style_labels, x, y + 3, Z.UI, `${field}`);\n        y += button_spacing;\n        subopts[field].min = sliderInternal('min', subopts[field].min, min_v, max_v, fixed);\n        subopts[field].max = sliderInternal('max', subopts[field].max, min_v, max_v, fixed);\n        subopts[field].freq = sliderInternal('freq', subopts[field].freq, 0.1, 2, 1);\n      } else {\n        subopts[field] = sliderInternal(field, subopts[field], min_v, max_v, fixed);\n      }\n    }\n    function toggle(field) {\n      if (ui.buttonText({ x, y, text: `${field}: ${subopts[field] ? 'ON' : 'off'}` })) {\n        subopts[field] = !subopts[field];\n        need_regen = true;\n      }\n      y += button_spacing;\n    }\n    subopts = opts;\n    slider('seed', 0, 100, 0);\n\n    function modeButton(subkey, name, id) {\n      let w = ui.button_width * 0.38;\n      let colors_selected = ui.makeColorSet(vec4(0, 1, 0, 1));\n      let selected = modes[subkey] === id;\n      if (ui.buttonText({\n        x, y, w, text: `${name}`,\n        colors: selected ? colors_selected : null\n      })) {\n        modes[subkey] = id;\n        if (subkey === 'view') {\n          need_regen = true;\n        }\n      }\n      x += w + 2;\n    }\n    ui.print(style_labels, x, y + 2, Z.UI, 'View:');\n    x += 25;\n    let aspect = engine.width / engine.height;\n    let num_rows = aspect > 1.9 ? 1 : 2;\n    modeButton('view', 'coast', 0);\n    modeButton('view', 'tslope', 1);\n    modeButton('view', 'rslope', 2);\n    modeButton('view', 'river', 3);\n    if (num_rows === 2) {\n      y += button_spacing;\n      x = x0 + 25;\n    }\n    modeButton('view', 'humid', 4);\n    modeButton('view', 'classif', 6);\n    modeButton('view', 'biomes', 5);\n    y += button_spacing;\n    x = x0;\n    ui.print(style_labels, x, y + 2, Z.UI, 'Edit:');\n    x += 25;\n    num_rows = aspect > 1.77 ? 2 : 3;\n    modeButton('edit', 'coast', 0);\n    modeButton('edit', 'tslope', 1);\n    modeButton('edit', 'rslope', 2);\n    modeButton('edit', 'river', 3);\n    if (num_rows === 3) {\n      y += button_spacing;\n      x = x0 + 25;\n    }\n    modeButton('edit', 'lakes', 8);\n    modeButton('edit', 'blur', 9);\n    if (num_rows === 2) {\n      y += button_spacing;\n      x = x0 + 25;\n    }\n    modeButton('edit', 'mtify', 7);\n    modeButton('edit', 'humid', 4);\n    if (num_rows === 3) {\n      y += button_spacing;\n      x = x0 + 25;\n    }\n    modeButton('edit', 'ocean', 5);\n    modeButton('edit', 'classif', 10);\n    modeButton('edit', 'output', 6);\n    y += button_spacing;\n    x = x0;\n\n    if (modes.edit === 0) {\n      subopts = opts.coast;\n      slider('cutoff', 0.15, 1.0, 2);\n      slider('frequency', 0.1, 10, 1, true);\n      //slider('amplitude', 0.01, 10, 2);\n      slider('persistence', 0.01, 2, 2, true);\n      slider('lacunarity', 1, 10.0, 2, true);\n      slider('octaves', 1, 10, 0);\n      slider('domain_warp', 0, 2, 0);\n      if (subopts.domain_warp) {\n        slider('warp_freq', 0.01, 3, 1);\n        slider('warp_amp', 0, 2, 2);\n      }\n      toggle('fill_seas');\n      toggle('channels');\n    } else if (modes.edit === 1) {\n      subopts = opts.tslope;\n      slider('frequency', 0.1, 10, 1, true);\n      //slider('amplitude', 0.01, 10, 2);\n      slider('min', 0, 10, 0, true);\n      slider('range', 0, 255, 0, true);\n      slider('persistence', 0.01, 2, 2, true);\n      slider('lacunarity', 1, 10.0, 2, true);\n      slider('octaves', 1, 10, 0);\n      slider('domain_warp', 0, 2, 0);\n      if (subopts.domain_warp) {\n        slider('warp_freq', 0.01, 3, 1);\n        slider('warp_amp', 0, 2, 2);\n      }\n    } else if (modes.edit === 2) {\n      subopts = opts.rslope;\n      slider('frequency', 0.1, 10, 1, true);\n      //slider('amplitude', 0.01, 10, 2);\n      slider('persistence', 0.01, 2, 2, true);\n      slider('lacunarity', 1, 10.0, 2, true);\n      slider('octaves', 1, 10, 0);\n      slider('domain_warp', 0, 2, 0);\n      if (subopts.domain_warp) {\n        slider('warp_freq', 0.01, 3, 1);\n        slider('warp_amp', 0, 2, 2);\n      }\n      slider('steps', 1, 64, 0);\n    } else if (modes.edit === 3) {\n      subopts = opts.river;\n      slider('weight_bend', 1, 10, 0);\n      slider('weight_afork', 1, 10, 0);\n      slider('weight_sfork', 1, 10, 0);\n      slider('max_tslope', 1, 200, 0);\n      slider('tuning_h', 1, 200, 0);\n      toggle('show_elev');\n      toggle('prune');\n      toggle('mtify_prune');\n      if (subopts.mtify_prune) {\n        slider('mtify_prune_grace', 0, 200, 0);\n      }\n    } else if (modes.edit === 4) {\n      subopts = opts.humidity;\n      slider('frequency', 0.1, 10, 1, true);\n      slider('persistence', 0.01, 2, 2, true);\n      slider('lacunarity', 1, 10.0, 2, true);\n      slider('octaves', 1, 10, 0);\n      slider('domain_warp', 0, 2, 0);\n      if (subopts.domain_warp) {\n        slider('warp_freq', 0.01, 3, 1);\n        slider('warp_amp', 0, 2, 2);\n      }\n      slider('rainshadow', 0, 1, 2, true);\n      toggle('show_relief');\n    } else if (modes.edit === 5) {\n      subopts = opts.ocean;\n      slider('frequency', 0.1, 10, 1, true);\n      slider('persistence', 0.01, 2, 2, true);\n      slider('lacunarity', 1, 10.0, 2, true);\n      slider('octaves', 1, 10, 0);\n      slider('domain_warp', 0, 2, 0);\n      if (subopts.domain_warp) {\n        slider('warp_freq', 0.01, 3, 1);\n        slider('warp_amp', 0, 2, 2);\n      }\n    } else if (modes.edit === 6) {\n      subopts = opts.output;\n      slider('sea_range_exp', 6, 15, 0);\n      slider('land_range_exp', 6, 15, 0);\n      subopts.sea_range = 1 << subopts.sea_range_exp;\n      subopts.land_range = 1 << subopts.land_range_exp;\n\n      if (mapi.connected()) {\n        ui.print(style_labels, x, y, Z.UI, `WorldsModAPI connected to ${mapi.connected()}`);\n        y += ui.font_height + 2;\n        if (ui.buttonText({ x, y, text: 'Export' }) || test_export) {\n          test_export = false;\n          opts.output.debug = false;\n          doExport(continentGen(opts));\n          opts.output.debug = true;\n        }\n        y += button_spacing;\n        if (serialize_size) {\n          ui.print(style_labels, x, y, Z.UI, 'Data exported! Create a New World to use this data.');\n          y += ui.font_height + 2;\n          ui.print(style_labels, x, y, Z.UI, `Size: ${serialize_size}`);\n          y += ui.font_height + 2;\n        }\n      } else {\n        ui.print(style_labels, x, y, Z.UI, 'To export, open Worlds FRVR');\n        y += ui.font_height + 2;\n        linkText({\n          style_link, style_link_hover,\n          x, y,\n          url: 'https://worlds.frvr.com/'\n        });\n      }\n    } else if (modes.edit === 7) {\n      subopts = opts.mountainify;\n      slider('peak_radius', 2, 50, 0);\n      slider('peak_percent', 0, 1, 2);\n      slider('peak_k', 1, 10, 0);\n      slider('blend_radius', 2, 50, 0);\n      slider('height_scale', 0, 8, 1);\n      slider('weight_local', 0, 1, 2);\n      slider('power_min', 1, 8, 1);\n      slider('power_max', 1, 8, 1);\n      slider('power_blend', 0.01, 1, 2);\n      slider('cdist_ramp', 0, 50, 0);\n    } else if (modes.edit === 8) {\n      subopts = opts.lakes;\n      slider('lake_search_radius', 2, 50, 0);\n      slider('lake_percent', 0, 1, 2);\n      slider('lake_k', 1, 10, 0);\n      slider('min_sep', 2, 50, 0);\n    } else if (modes.edit === 9) {\n      subopts = opts.blur;\n      slider('threshold', 1, 2000, 0);\n      slider('weight', 0, 1, 2);\n    } else if (modes.edit === 10) {\n      subopts = opts.classif;\n      slider('cut1', -1, 1, 3);\n      slider('cut2', 0, 1, 3);\n      slider('blur_w', 1, 10, 0);\n      slider('blur_scale', 0, 1000, 0);\n      toggle('show_rivers');\n    }\n  }\n\n  function testInit(dt) {\n    engine.setState(test);\n    test(dt);\n  }\n\n  engine.setState(testInit);\n}","const { sqrt } = Math;\n\nexport const SKEW_X = 1 / sqrt(1 - 0.5 * 0.5); // 1.1547\n\n// biome type classification categories from continent generation\nexport const C_WATER = 0;\nexport const C_PLAINS = 1;\nexport const C_HILLS = 2;\nexport const C_MOUNTAINS = 3;","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nfunction ok(exp, msg) {\n  if (exp) {\n    return;\n  }\n  throw new Error(`Assertion failed: ${msg ? msg : exp === undefined ? '' : JSON.stringify(exp)}`);\n}\nmodule.exports = ok;\nmodule.exports.ok = ok;\n\nfunction equal(a, b) {\n  if (a === b) {\n    return;\n  }\n  throw new Error(`Assertion failed: \"${a}\"===\"${b}\"`);\n}\nmodule.exports.equal = equal;\n","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nexport let Buffer = {};\nBuffer.isBuffer = function (b) {\n  return false;\n};\n","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n// Dummy shim module that does not exist in worker bundles, to catch bat requires at bundle-time instead of run-time\n\nmodule.exports = true;\n","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off */\n\nconst assert = require('assert');\nconst { isPacket } = require('./packet.js');\n\nexport function ackInitReceiver(receiver) {\n  receiver.last_pak_id = 0;\n  receiver.resp_cbs = {};\n  receiver.responses_waiting = 0;\n}\n\nconst ACKFLAG_IS_RESP = 1 << 3;\nconst ACKFLAG_ERR = 1 << 4;\nconst ACKFLAG_DATA_JSON = 1 << 5;\n// `receiver` is really the sender, here, but will receive any response\nexport function ackWrapPakStart(pak, receiver, msg) {\n  let flags = 0;\n\n  pak.ack_data = {\n    receiver\n  };\n\n  if (typeof msg === 'number') {\n    flags |= ACKFLAG_IS_RESP;\n    pak.writeInt(msg);\n  } else {\n    pak.writeAnsiString(msg);\n  }\n  let resp_pak_id = receiver ? ++receiver.last_pak_id : 0;\n  pak.ack_data.resp_pak_id = resp_pak_id;\n  pak.ack_data.resp_pak_id_offs = pak.getOffset();\n  pak.writeInt(resp_pak_id);\n\n  pak.ack_data.data_offs = pak.getOffset();\n  pak.ack_data.flags = flags;\n}\n\nexport function ackWrapPakPayload(pak, data) {\n  if (isPacket(data)) {\n    pak.appendRemaining(data);\n  } else {\n    pak.ack_data.flags |= ACKFLAG_DATA_JSON;\n    pak.writeJSON(data);\n  }\n}\n\nexport function ackWrapPakFinish(pak, err, resp_func) {\n  let flags = pak.ack_data.flags;\n  let offs = pak.getOffset();\n  if (err) {\n    // Nothing else must have been written\n    assert.equal(pak.ack_data.data_offs, offs);\n    flags |= ACKFLAG_ERR;\n    pak.writeString(String(err));\n    offs = pak.getOffset();\n  }\n  pak.makeReadable();\n  let resp_pak_id = 0;\n  if (resp_func) {\n    resp_pak_id = pak.ack_data.resp_pak_id;\n    assert(resp_pak_id);\n    assert(pak.ack_data.receiver);\n    pak.ack_data.receiver.resp_cbs[resp_pak_id] = resp_func;\n  } else {\n    pak.seek(pak.ack_data.resp_pak_id_offs);\n    pak.zeroInt();\n    pak.seek(offs);\n  }\n  pak.updateFlags(flags);\n  delete pak.ack_data;\n  return resp_pak_id;\n}\n\nfunction ackReadHeader(pak) {\n  let flags = pak.getFlags();\n  let msg = flags & ACKFLAG_IS_RESP ? pak.readInt() : pak.readAnsiString();\n  let pak_id = pak.readInt();\n  let err = flags & ACKFLAG_ERR ? pak.readString() : undefined;\n  let data;\n  if (flags & ACKFLAG_DATA_JSON) {\n    data = pak.readJSON();\n  } else {\n    data = pak;\n  }\n  return {\n    msg,\n    err,\n    data,\n    pak_id\n  };\n}\n\nexport function failAll(receiver, err) {\n  err = err || 'ERR_DISCONNECTED';\n  let cbs = receiver.resp_cbs;\n  receiver.resp_cbs = {};\n  receiver.responses_waiting = 0;\n  for (let pak_id in cbs) {\n    cbs[pak_id](err);\n  }\n}\n\n// `source` is a string for debug/logging only\n// `receiver` needs initReceicver called on it, have .onError() in the prototype and optionally .log()\n// sendFunc(msg, err, data, resp_func)\n// handleFunc(msg, data, resp_func)\n// eslint-disable-next-line consistent-return\nexport function ackHandleMessage(receiver, source, net_data_or_pak, send_func, pak_func, handle_func) {\n  let net_data = isPacket(net_data_or_pak) ? ackReadHeader(net_data_or_pak) : net_data_or_pak;\n  let { err, data, msg, pak_id } = net_data;\n  let now = Date.now();\n  let expecting_response = Boolean(pak_id);\n  let timeout_id;\n  if (expecting_response) {\n    timeout_id = 'pending';\n  }\n  let sent_response = false;\n  let start_time = now;\n\n  function preSendResp() {\n    assert(!sent_response, 'Response function called twice');\n    sent_response = true;\n\n    if (expecting_response) {\n      if (timeout_id) {\n        if (timeout_id !== 'pending') {\n          clearTimeout(timeout_id);\n        }\n      } else {\n        (receiver.log ? receiver : console).log(`Response finally sent for ${msg} after ${((Date.now() - start_time) / 1000).toFixed(1)}s`);\n      }\n      receiver.responses_waiting--;\n    }\n  }\n\n  function respFunc(err, resp_data, resp_func) {\n    preSendResp();\n    // the callback wants to send a response, and possibly get a response from that!\n    if (!expecting_response) {\n      // But, the other end is not expecting a response from this packet, black-hole it\n      if (resp_func) {\n        // We better not be expecting a response to our response!\n        receiver.onError(`Sending a response to a packet (${msg}) that did not expect` + ' one, but we are expecting a response');\n        return;\n      }\n      // however, if there was an error, let's forward that along as an error message\n      if (err) {\n        send_func('error', null, err, null);\n      }\n      return;\n    }\n    send_func(pak_id, err, resp_data, resp_func);\n  }\n  respFunc.expecting_response = expecting_response;\n  respFunc.pak = function (ref_pak) {\n    assert(expecting_response);\n    let pak = pak_func(pak_id, ref_pak);\n    let orig_send = pak.send;\n    pak.send = function (err, resp_func) {\n      preSendResp();\n      orig_send.call(pak, err, resp_func);\n    };\n    return pak;\n  };\n\n  if (typeof msg === 'number') {\n    let cb = receiver.resp_cbs[msg];\n    if (!cb) {\n      return receiver.onError(`Received response to unknown packet with id ${msg} from ${source}`);\n    }\n    delete receiver.resp_cbs[msg];\n    cb(err, data, respFunc); // eslint-disable-line callback-return\n  } else {\n    if (!msg) {\n      return receiver.onError(`Received message with no .msg from ${source}`);\n    }\n    handle_func(msg, data, respFunc);\n  }\n  if (expecting_response) {\n    // Note, this may be -1 if respFunc has already been called\n    receiver.responses_waiting++;\n    if (!sent_response) {\n      // timeout warning for response\n      timeout_id = setTimeout(function () {\n        timeout_id = null;\n        (receiver.log ? receiver : console).log(`Response not sent for ${msg} from ${source} after ${((Date.now() - start_time) / 1000).toFixed(1)}s`);\n      }, 15 * 1000);\n    }\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off */\n/* globals atob */\n\n// Encoding is fastest with non-native calls: http://jsperf.com/base64-encode\n// Decoding is fastest using window.btoa: http://jsperf.com/base64-decode\n\nconst { floor } = Math;\n\nconst chr_table = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\nconst PAD = '=';\n\n// dv is a DataView with a .u8 property\nfunction encode(dv, offset, length) {\n  let data = dv.u8;\n  let result = '';\n  let i;\n  let effi;\n  // Convert every three bytes to 4 ascii characters.\n  for (i = 0; i < length - 2; i += 3) {\n    effi = offset + i;\n    result += chr_table[data[effi] >> 2];\n    result += chr_table[((data[effi] & 0x03) << 4) + (data[effi + 1] >> 4)];\n    result += chr_table[((data[effi + 1] & 0x0f) << 2) + (data[effi + 2] >> 6)];\n    result += chr_table[data[effi + 2] & 0x3f];\n  }\n\n  // Convert the remaining 1 or 2 bytes, pad out to 4 characters.\n  if (length % 3) {\n    i = length - length % 3;\n    effi = offset + i;\n    result += chr_table[data[effi] >> 2];\n    if (length % 3 === 2) {\n      result += chr_table[((data[effi] & 0x03) << 4) + (data[effi + 1] >> 4)];\n      result += chr_table[(data[effi + 1] & 0x0f) << 2];\n      result += PAD;\n    } else {\n      result += chr_table[(data[effi] & 0x03) << 4];\n      result += PAD + PAD;\n    }\n  }\n\n  return result;\n}\n\nfunction decodeNativeBrowser(data, allocator) {\n  let str = atob(data);\n  let len = str.length;\n  let dv = allocator(len);\n  let u8 = dv.u8;\n  for (let ii = 0; ii < len; ++ii) {\n    u8[ii] = str.charCodeAt(ii);\n  }\n  dv.decode_size = len;\n  return dv;\n}\n\nfunction encodeNativeNode(dv, offset, length) {\n  // Allocates a Buffer() object each time - could have our allocDataView do that if needed for perf\n  return Buffer.from(dv.buffer).toString('base64', offset, offset + length);\n}\n// Faster, but uses an internal function that might break:\n// function encodeNativeNode(dv, offset, length) {\n//   return Buffer.prototype.base64Slice.call(dv.u8, offset, offset + length);\n// }\n\nfunction decodeNativeNode(data, allocator) {\n  let buffer_len = (data.length >> 2) * 3 + floor(data.length % 4 / 1.5);\n  let dv = allocator(buffer_len);\n  let buffer = Buffer.from(dv.buffer);\n  dv.decode_size = buffer.write(data, 'base64');\n  return dv;\n}\n\nconst BROWSER = typeof window !== 'undefined';\n\n// string -> Uint8Array or Buffer\nexports.base64Decode = BROWSER ? decodeNativeBrowser : decodeNativeNode;\n// Uint8Array or Buffer -> string\nexports.base64Encode = BROWSER ? encode : encodeNativeNode;","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst { isInteger } = require('./util.js');\n\nfunction canonical(cmd) {\n  return cmd.toLowerCase().replace(/[_.]/g, '');\n}\n\nexport const TYPE_INT = 0;\nexport const TYPE_FLOAT = 1;\nexport const TYPE_STRING = 2;\nconst TYPE_NAME = ['INTEGER', 'NUMBER', 'STRING'];\n\nexport function defaultHandler(err, resp) {\n  if (err) {\n    console.error(err, resp);\n  } else {\n    console.info(resp);\n  }\n}\n\nfunction checkAccess(access, list) {\n  if (list) {\n    for (let ii = 0; ii < list.length; ++ii) {\n      if (!access || !access[list[ii]]) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nfunction CmdParse(params) {\n  this.cmds = {};\n  this.cmds_for_complete = this.cmds;\n  this.was_not_found = false;\n  this.storage = params && params.storage; // expects .setJSON(), .getJSON()\n  this.default_handler = defaultHandler;\n  this.register({\n    cmd: 'cmd_list',\n    func: this.cmdList.bind(this),\n    access_show: ['hidden']\n  });\n}\nCmdParse.prototype.cmdList = function (str, resp_func) {\n  if (!this.cmd_list) {\n    let list = this.cmd_list = {};\n    for (let cmd in this.cmds) {\n      let cmd_data = this.cmds[cmd];\n      let access = []; // combine for data compaction\n      if (cmd_data.access_show) {\n        access = access.concat(cmd_data.access_show);\n      }\n      if (cmd_data.access_run) {\n        access = access.concat(cmd_data.access_run);\n      }\n      if (access.indexOf('hidden') !== -1) {\n        continue;\n      }\n      let data = {\n        name: cmd_data.name,\n        help: cmd_data.help\n      };\n      if (cmd_data.usage) {\n        data.usage = cmd_data.usage;\n      }\n      if (access.length) {\n        data.access_show = access;\n      }\n      list[cmd] = data;\n    }\n  }\n  resp_func(null, this.cmd_list);\n};\n\nCmdParse.prototype.setDefaultHandler = function (fn) {\n  assert(this.default_handler === defaultHandler); // Should only set this once\n  this.default_handler = fn;\n};\nCmdParse.prototype.handle = function (self, str, resp_func) {\n  resp_func = resp_func || this.default_handler;\n  this.was_not_found = false;\n  let m = str.match(/^([^\\s]+)(?:\\s+(.*))?$/);\n  if (!m) {\n    resp_func('Missing command');\n    return true;\n  }\n  let cmd = canonical(m[1]);\n  let cmd_data = this.cmds[cmd];\n  if (cmd_data && !checkAccess(self && self.access, cmd_data.access_run)) {\n    // this.was_not_found = true;\n    resp_func(`Access denied: \"${m[1]}\"`);\n    return false;\n  }\n  if (!cmd_data) {\n    this.was_not_found = true;\n    resp_func(`Unknown command: \"${m[1]}\"`);\n    return false;\n  }\n  cmd_data.fn.call(self, m[2] || '', resp_func);\n  return true;\n};\n\nCmdParse.prototype.register = function (param) {\n  assert.equal(typeof param, 'object');\n  let { cmd, func, help, usage, access_show, access_run } = param;\n  assert(cmd && func);\n  this.cmds[canonical(cmd)] = {\n    name: cmd,\n    fn: func,\n    help: help || '',\n    usage: usage || undefined,\n    access_show,\n    access_run\n  };\n};\n\nCmdParse.prototype.registerValue = function (cmd, param) {\n  assert(TYPE_NAME[param.type] || !param.set);\n  assert(param.set || param.get);\n  let label = param.label || cmd;\n  let store = param.store && this.storage || false;\n  let store_key = `cmd_parse_${canonical(cmd)}`;\n  if (param.ver) {\n    store_key += `_${param.ver}`;\n  }\n  if (store) {\n    assert(param.set);\n    let init_value = this.storage.getJSON(store_key);\n    if (init_value !== undefined) {\n      param.set(init_value);\n    }\n  }\n  let fn = (str, resp_func) => {\n    function value() {\n      resp_func(null, `${label} = ${param.get()}`);\n    }\n    function usage() {\n      resp_func(`Usage: /${cmd} ${TYPE_NAME[param.type]}`);\n    }\n    if (!str) {\n      if (param.get) {\n        return value();\n      } else {\n        return usage();\n      }\n    }\n    if (!param.set) {\n      return resp_func(`Usage: /${cmd}`);\n    }\n    let n = Number(str);\n    if (param.range) {\n      if (n < param.range[0]) {\n        n = param.range[0];\n      } else if (n > param.range[1]) {\n        n = param.range[1];\n      }\n    }\n    let store_value = n;\n    if (param.type === TYPE_INT) {\n      if (!isInteger(n)) {\n        return usage();\n      }\n      param.set(n);\n    } else if (param.type === TYPE_FLOAT) {\n      if (!isFinite(n)) {\n        return usage();\n      }\n      param.set(n);\n    } else {\n      store_value = str;\n      param.set(str);\n    }\n    if (store) {\n      this.storage.setJSON(store_key, store_value);\n    }\n    if (param.get) {\n      return value();\n    } else {\n      return resp_func(null, `${label} udpated`);\n    }\n  };\n  this.register({\n    cmd,\n    func: fn,\n    help: param.help || (param.get && param.set ? `Set or display \"${label}\" value` : param.set ? `Set \"${label}\" value` : `Display \"${label}\" value`),\n    usage: param.usage || (param.get ? `Display \"${label}\" value\\n  Usage: /${cmd}\\n` : '') + (param.set ? `Set \"${label}\" value\\n  Usage: /${cmd} NewValue` : ''),\n    access_show: param.access_show,\n    access_run: param.access_run\n  });\n};\n\nfunction cmpCmd(a, b) {\n  if (a.cname < b.cname) {\n    return -1;\n  }\n  return 1;\n}\n\n// for auto-complete\nCmdParse.prototype.addServerCommands = function (new_cmds) {\n  let cmds = this.cmds_for_complete;\n  if (this.cmds_for_complete === this.cmds) {\n    cmds = this.cmds_for_complete = {};\n    for (let cname in this.cmds) {\n      cmds[cname] = this.cmds[cname];\n    }\n  }\n  for (let cname in new_cmds) {\n    if (!cmds[cname]) {\n      cmds[cname] = new_cmds[cname];\n    }\n  }\n};\n\nCmdParse.prototype.autoComplete = function (str, access) {\n  let list = [];\n  str = str.split(' ');\n  let first_tok = canonical(str[0]);\n  for (let cname in this.cmds_for_complete) {\n    if (str.length === 1 && cname.slice(0, first_tok.length) === first_tok || str.length > 1 && cname === first_tok) {\n      let cmd_data = this.cmds_for_complete[cname];\n      if (checkAccess(access, cmd_data.access_show) && checkAccess(access, cmd_data.access_run)) {\n        list.push({\n          cname,\n          cmd: cmd_data.name,\n          help: cmd_data.help,\n          usage: cmd_data.usage\n        });\n      }\n    }\n  }\n  list.sort(cmpCmd);\n  return list; // .slice(0, 20); Maybe?\n};\n\nCmdParse.prototype.canonical = canonical;\n\nCmdParse.prototype.TYPE_INT = TYPE_INT;\nCmdParse.prototype.TYPE_FLOAT = TYPE_FLOAT;\nCmdParse.prototype.TYPE_STRING = TYPE_STRING;\n\nexport function create(params) {\n  return new CmdParse(params);\n}","/**\n *\n *  MD5 (Message-Digest Algorithm)\n *  http://www.webtoolkit.info/\n *\n * Modified by railGun to handle node.js Buffer objects\n *\n **/\n\n/* eslint no-bitwise:off, new-cap:off*/\nconst assert = require('assert');\n\nfunction stringUtf8Encode(str) {\n  let c;\n  let n;\n  let utftext = [];\n  str = str.replace(/\\r\\n/g, '\\n');\n  for (n = 0; n < str.length; ++n) {\n    c = str.charCodeAt(n);\n    if (c < 128) {\n      utftext.push(String.fromCharCode(c));\n    } else if (c > 127 && c < 2048) {\n      utftext.push(String.fromCharCode(c >> 6 | 192));\n      utftext.push(String.fromCharCode(c & 63 | 128));\n    } else {\n      utftext.push(String.fromCharCode(c >> 12 | 224));\n      utftext.push(String.fromCharCode(c >> 6 & 63 | 128));\n      utftext.push(String.fromCharCode(c & 63 | 128));\n    }\n  }\n  return utftext.join('');\n}\n\nfunction rotateLeft(lValue, iShiftBits) {\n  return lValue << iShiftBits | lValue >>> 32 - iShiftBits;\n}\n\nfunction addUnsigned(lX, lY) {\n  let lX8 = lX & 0x80000000;\n  let lY8 = lY & 0x80000000;\n  let lX4 = lX & 0x40000000;\n  let lY4 = lY & 0x40000000;\n  let lResult = (lX & 0x3FFFFFFF) + (lY & 0x3FFFFFFF);\n  if (lX4 & lY4) {\n    return lResult ^ 0x80000000 ^ lX8 ^ lY8;\n  }\n  if (lX4 | lY4) {\n    if (lResult & 0x40000000) {\n      return lResult ^ 0xC0000000 ^ lX8 ^ lY8;\n    } else {\n      return lResult ^ 0x40000000 ^ lX8 ^ lY8;\n    }\n  } else {\n    return lResult ^ lX8 ^ lY8;\n  }\n}\n\nfunction F(x, y, z) {\n  return x & y | ~x & z;\n}\nfunction G(x, y, z) {\n  return x & z | y & ~z;\n}\nfunction H(x, y, z) {\n  return x ^ y ^ z;\n}\nfunction I(x, y, z) {\n  return y ^ (x | ~z);\n}\n\nfunction FF(a, b, c, d, x, s, ac) {\n  a = addUnsigned(a, addUnsigned(addUnsigned(F(b, c, d), x), ac));\n  return addUnsigned(rotateLeft(a, s), b);\n}\n\nfunction GG(a, b, c, d, x, s, ac) {\n  a = addUnsigned(a, addUnsigned(addUnsigned(G(b, c, d), x), ac));\n  return addUnsigned(rotateLeft(a, s), b);\n}\n\nfunction HH(a, b, c, d, x, s, ac) {\n  a = addUnsigned(a, addUnsigned(addUnsigned(H(b, c, d), x), ac));\n  return addUnsigned(rotateLeft(a, s), b);\n}\n\nfunction II(a, b, c, d, x, s, ac) {\n  a = addUnsigned(a, addUnsigned(addUnsigned(I(b, c, d), x), ac));\n  return addUnsigned(rotateLeft(a, s), b);\n}\n\nfunction convertToWordArray(string) {\n  let lWordCount;\n  let lMessageLength = string.length;\n  let lNumberOfWords_temp1 = lMessageLength + 8;\n  let lNumberOfWords_temp2 = (lNumberOfWords_temp1 - lNumberOfWords_temp1 % 64) / 64;\n  let lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;\n  let lWordArray = new Array(lNumberOfWords - 1);\n  let lBytePosition = 0;\n  let lByteCount = 0;\n  while (lByteCount < lMessageLength) {\n    lWordCount = (lByteCount - lByteCount % 4) / 4;\n    lBytePosition = lByteCount % 4 * 8;\n    lWordArray[lWordCount] |= string.charCodeAt(lByteCount) << lBytePosition;\n    lByteCount++;\n  }\n  lWordCount = (lByteCount - lByteCount % 4) / 4;\n  lBytePosition = lByteCount % 4 * 8;\n  lWordArray[lWordCount] |= 0x80 << lBytePosition;\n  lWordArray[lNumberOfWords - 2] = lMessageLength << 3;\n  lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;\n  return lWordArray;\n}\n\n// function convertByteArraytoWordArray(arr) {\n//   let lWordCount;\n//   let lMessageLength = arr.length;\n//   let lNumberOfWords_temp1 = lMessageLength + 8;\n//   let lNumberOfWords_temp2 =\n//     (lNumberOfWords_temp1 - (lNumberOfWords_temp1 % 64)) / 64;\n//   let lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;\n//   let lWordArray = new Array(lNumberOfWords - 1);\n//   let lBytePosition = 0;\n//   let lByteCount = 0;\n//   while (lByteCount < lMessageLength) {\n//     lWordCount = (lByteCount - (lByteCount % 4)) / 4;\n//     lBytePosition = (lByteCount % 4) * 8;\n//     lWordArray[lWordCount] |= arr[lByteCount] << lBytePosition;\n//     lByteCount++;\n//   }\n//   lWordCount = (lByteCount - (lByteCount % 4)) / 4;\n//   lBytePosition = (lByteCount % 4) * 8;\n//   lWordArray[lWordCount] |= 0x80 << lBytePosition;\n//   lWordArray[lNumberOfWords - 2] = lMessageLength << 3;\n//   lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;\n//   return lWordArray;\n// }\n\nfunction wordToHex(lValue) {\n  let wordToHexValue = '';\n\n  let wordToHexValue_temp = '';\n\n  let lByte;\n  let lCount;\n  for (lCount = 0; lCount <= 3; lCount++) {\n    lByte = lValue >>> lCount * 8 & 255;\n    wordToHexValue_temp = `0${lByte.toString(16)}`;\n    wordToHexValue += wordToHexValue_temp.substr(wordToHexValue_temp.length - 2, 2);\n  }\n  return wordToHexValue;\n}\n\n// string can either be a string, node.js Buffer, array (of numbers < 256)\n// or a typed array\nmodule.exports = function md5(string) {\n  let AA;\n  let BB;\n  let CC;\n  let DD;\n  let a;\n  let b;\n  let c;\n  let d;\n  let k;\n  let S11 = 7;\n  let S12 = 12;\n  let S13 = 17;\n  let S14 = 22;\n  let S21 = 5;\n  let S22 = 9;\n  let S23 = 14;\n  let S24 = 20;\n  let S31 = 4;\n  let S32 = 11;\n  let S33 = 16;\n  let S34 = 23;\n  let S41 = 6;\n  let S42 = 10;\n  let S43 = 15;\n  let S44 = 21;\n\n  let x;\n  if (typeof string === 'string') {\n    string = stringUtf8Encode(string);\n    x = convertToWordArray(string);\n  } else {\n    assert(false); // disable due to not used\n    // node.js buffer or Array\n    // x = convertByteArraytoWordArray(string);\n  }\n\n  a = 0x67452301;\n  b = 0xEFCDAB89;\n  c = 0x98BADCFE;\n  d = 0x10325476;\n\n  for (k = 0; k < x.length; k += 16) {\n    AA = a;\n    BB = b;\n    CC = c;\n    DD = d;\n    a = FF(a, b, c, d, x[k], S11, 0xD76AA478);\n    d = FF(d, a, b, c, x[k + 1], S12, 0xE8C7B756);\n    c = FF(c, d, a, b, x[k + 2], S13, 0x242070DB);\n    b = FF(b, c, d, a, x[k + 3], S14, 0xC1BDCEEE);\n    a = FF(a, b, c, d, x[k + 4], S11, 0xF57C0FAF);\n    d = FF(d, a, b, c, x[k + 5], S12, 0x4787C62A);\n    c = FF(c, d, a, b, x[k + 6], S13, 0xA8304613);\n    b = FF(b, c, d, a, x[k + 7], S14, 0xFD469501);\n    a = FF(a, b, c, d, x[k + 8], S11, 0x698098D8);\n    d = FF(d, a, b, c, x[k + 9], S12, 0x8B44F7AF);\n    c = FF(c, d, a, b, x[k + 10], S13, 0xFFFF5BB1);\n    b = FF(b, c, d, a, x[k + 11], S14, 0x895CD7BE);\n    a = FF(a, b, c, d, x[k + 12], S11, 0x6B901122);\n    d = FF(d, a, b, c, x[k + 13], S12, 0xFD987193);\n    c = FF(c, d, a, b, x[k + 14], S13, 0xA679438E);\n    b = FF(b, c, d, a, x[k + 15], S14, 0x49B40821);\n    a = GG(a, b, c, d, x[k + 1], S21, 0xF61E2562);\n    d = GG(d, a, b, c, x[k + 6], S22, 0xC040B340);\n    c = GG(c, d, a, b, x[k + 11], S23, 0x265E5A51);\n    b = GG(b, c, d, a, x[k], S24, 0xE9B6C7AA);\n    a = GG(a, b, c, d, x[k + 5], S21, 0xD62F105D);\n    d = GG(d, a, b, c, x[k + 10], S22, 0x2441453);\n    c = GG(c, d, a, b, x[k + 15], S23, 0xD8A1E681);\n    b = GG(b, c, d, a, x[k + 4], S24, 0xE7D3FBC8);\n    a = GG(a, b, c, d, x[k + 9], S21, 0x21E1CDE6);\n    d = GG(d, a, b, c, x[k + 14], S22, 0xC33707D6);\n    c = GG(c, d, a, b, x[k + 3], S23, 0xF4D50D87);\n    b = GG(b, c, d, a, x[k + 8], S24, 0x455A14ED);\n    a = GG(a, b, c, d, x[k + 13], S21, 0xA9E3E905);\n    d = GG(d, a, b, c, x[k + 2], S22, 0xFCEFA3F8);\n    c = GG(c, d, a, b, x[k + 7], S23, 0x676F02D9);\n    b = GG(b, c, d, a, x[k + 12], S24, 0x8D2A4C8A);\n    a = HH(a, b, c, d, x[k + 5], S31, 0xFFFA3942);\n    d = HH(d, a, b, c, x[k + 8], S32, 0x8771F681);\n    c = HH(c, d, a, b, x[k + 11], S33, 0x6D9D6122);\n    b = HH(b, c, d, a, x[k + 14], S34, 0xFDE5380C);\n    a = HH(a, b, c, d, x[k + 1], S31, 0xA4BEEA44);\n    d = HH(d, a, b, c, x[k + 4], S32, 0x4BDECFA9);\n    c = HH(c, d, a, b, x[k + 7], S33, 0xF6BB4B60);\n    b = HH(b, c, d, a, x[k + 10], S34, 0xBEBFBC70);\n    a = HH(a, b, c, d, x[k + 13], S31, 0x289B7EC6);\n    d = HH(d, a, b, c, x[k], S32, 0xEAA127FA);\n    c = HH(c, d, a, b, x[k + 3], S33, 0xD4EF3085);\n    b = HH(b, c, d, a, x[k + 6], S34, 0x4881D05);\n    a = HH(a, b, c, d, x[k + 9], S31, 0xD9D4D039);\n    d = HH(d, a, b, c, x[k + 12], S32, 0xE6DB99E5);\n    c = HH(c, d, a, b, x[k + 15], S33, 0x1FA27CF8);\n    b = HH(b, c, d, a, x[k + 2], S34, 0xC4AC5665);\n    a = II(a, b, c, d, x[k], S41, 0xF4292244);\n    d = II(d, a, b, c, x[k + 7], S42, 0x432AFF97);\n    c = II(c, d, a, b, x[k + 14], S43, 0xAB9423A7);\n    b = II(b, c, d, a, x[k + 5], S44, 0xFC93A039);\n    a = II(a, b, c, d, x[k + 12], S41, 0x655B59C3);\n    d = II(d, a, b, c, x[k + 3], S42, 0x8F0CCC92);\n    c = II(c, d, a, b, x[k + 10], S43, 0xFFEFF47D);\n    b = II(b, c, d, a, x[k + 1], S44, 0x85845DD1);\n    a = II(a, b, c, d, x[k + 8], S41, 0x6FA87E4F);\n    d = II(d, a, b, c, x[k + 15], S42, 0xFE2CE6E0);\n    c = II(c, d, a, b, x[k + 6], S43, 0xA3014314);\n    b = II(b, c, d, a, x[k + 13], S44, 0x4E0811A1);\n    a = II(a, b, c, d, x[k + 4], S41, 0xF7537E82);\n    d = II(d, a, b, c, x[k + 11], S42, 0xBD3AF235);\n    c = II(c, d, a, b, x[k + 2], S43, 0x2AD7D2BB);\n    b = II(b, c, d, a, x[k + 9], S44, 0xEB86D391);\n    a = addUnsigned(a, AA);\n    b = addUnsigned(b, BB);\n    c = addUnsigned(c, CC);\n    d = addUnsigned(d, DD);\n  }\n\n  let temp = wordToHex(a) + wordToHex(b) + wordToHex(c) + wordToHex(d);\n  return temp.toLowerCase();\n};\n\n/* // Uncomment this and run \"node MD5.js file.ext\"\nvar FS = require('fs');\nvar data = FS.readFileSync(process.argv[2]);\nvar md5 = module.exports(data);\nconsole.log('MD5 = ' + md5);\n// */","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code derived from libGLOV (C++), also MIT Licensed\n\n/* eslint no-bitwise:off */\n\n// Upon read, throw an exception if there is any data read error (e.g. read off of end of packet)\n\n// TODO: Maybe: Have 2 offsets, one for writing (data_len?), one for reading (buf_offs?),\n//   then there should be many fewer ?pak.readable branches\n//   that return different values under different circumstances, and maybe fewer .makeReadable() calls needed.\n\n\n// 3 bits of flags reserved for internal use\nconst PACKET_DEBUG = exports.PACKET_DEBUG = 1 << 0;\nconst PACKET_RESERVED1 = exports.PACKET_RESERVED1 = 1 << 1;\nconst PACKET_RESERVED2 = exports.PACKET_RESERVED2 = 1 << 2;\nconst FLAG_PACKET_INTERNAL = PACKET_DEBUG | PACKET_RESERVED1 | PACKET_RESERVED2;\n\n// Internal, runtime-only (not serialized) flags < 8 bits\nconst PACKET_UNOWNED_BUFFER = 1 << 8;\n\nexports.default_flags = 0;\n\nconst assert = require('assert');\nconst { max } = Math;\nconst { isInteger, log2 } = require('../common/util.js');\n// const { isInteger, log2 } = require('../../build.dev/common/util.js');\nconst { base64Encode, base64Decode } = require('../common/base64.js');\n\nconst FALSYS = [undefined, null, 0, false, '', NaN];\nconst PAK_BUF_DEFAULT_SIZE = 1024;\n\nconst UNDERRUN = 'PKTERR_UNDERRUN';\n\nconst POOL_PACKETS = 5000;\nconst POOL_TIMEOUT = 5000;\nconst POOL_BUF_BY_SIZE = [0, // 2^0 : 1 - shouldn't be allocated ever?\n10, // 2^1 : 2\n10, // 2^2 : 4\n20, // 2^3 : 8\n20, // 2^4 : 16\n20, // 2^5 : 32\n20, // 2^6 : 64\n20, // 2^7 : 128\n20, // 2^8 : 256\n20, // 2^9 : 512\n5000, // 2^10 : 1024 - standard Packet size\n20, // 2^11 : 2048\n20, // 2^12 : 4096\n20, // 2^13 : 8192\n20, // 2^14 : 16384\n20, // 2^15 : 32768\n20, // 2^16 : 65536\n10, // 2^17 : 131072\n10];\n\nlet pak_pool = [];\nlet pak_debug_pool = [];\nlet buf_pool = POOL_BUF_BY_SIZE.map(() => []);\n\nfunction allocDataView(size) {\n  let pool_idx = log2(size);\n  assert(pool_idx);\n  if (pool_idx >= buf_pool.length) {\n    pool_idx = 0;\n  }\n  if (pool_idx) {\n    size = 1 << pool_idx;\n    if (buf_pool[pool_idx].length) {\n      // No reinit here, just a container\n      //console.log(`Buffer FROMPOOL:${size}/${pool_idx}`);\n      return buf_pool[pool_idx].pop();\n    }\n  } else {}\n  // Enable this (and lower pool size) to track down big packets:\n  // console.log(`Allocating UNPOOLABLE buffer of size ${size} from ${new Error().stack}`);\n\n  //console.log(`Buffer ALLOC:${size}`);\n  let u8 = new Uint8Array(size);\n  let dv = new DataView(u8.buffer);\n  dv.u8 = u8;\n  if (pool_idx) {\n    dv.packet_pool_idx = pool_idx;\n  }\n  return dv;\n}\n\nfunction wrapU8AsDataView(u8) {\n  let dv = new DataView(u8.buffer, u8.byteOffset, u8.byteLength);\n  dv.u8 = u8;\n  return dv;\n}\n\nfunction utf8ByteLength(str) {\n  let len = str.length;\n  let ret = len;\n  for (let ii = 0; ii < len; ++ii) {\n    let c = str.charCodeAt(ii);\n    if (c > 0x7F) {\n      ++ret;\n      if (c > 0x07FF) {\n        ++ret;\n        if (c > 0xFFFF) {\n          ++ret;\n          if (c > 0x1FFFFF) {\n            ++ret;\n            if (c > 0x3FFFFFF) {\n              ++ret;\n            }\n          }\n        }\n      }\n    }\n  }\n  return ret;\n}\n\n// Assumes buffer will fit it\nfunction utf8WriteChar(buf, buf_offs, c) {\n  if (c <= 0x7F) {\n    buf.u8[buf_offs++] = c;\n  } else if (c <= 0x07FF) {\n    buf.u8[buf_offs++] = c >> 6 | 0xC0;\n    buf.u8[buf_offs++] = c & 0x3F | 0x80;\n  } else if (c <= 0xFFFF) {\n    buf.u8[buf_offs++] = c >> 12 | 0xE0;\n    buf.u8[buf_offs++] = c >> 6 & 0x3F | 0x80;\n    buf.u8[buf_offs++] = c & 0x3F | 0x80;\n  } else if (c <= 0x1FFFFF) {\n    buf.u8[buf_offs++] = c >> 18 | 0xF0;\n    buf.u8[buf_offs++] = c >> 12 & 0x3F | 0x80;\n    buf.u8[buf_offs++] = c >> 6 & 0x3F | 0x80;\n    buf.u8[buf_offs++] = c & 0x3F | 0x80;\n  } else if (c <= 0x3FFFFFF) {\n    buf.u8[buf_offs++] = c >> 24 | 0xF8;\n    buf.u8[buf_offs++] = c >> 18 & 0x3F | 0x80;\n    buf.u8[buf_offs++] = c >> 12 & 0x3F | 0x80;\n    buf.u8[buf_offs++] = c >> 6 & 0x3F | 0x80;\n    buf.u8[buf_offs++] = c & 0x3F | 0x80;\n  } else if (c <= 0x7FFFFFFF) {\n    buf.u8[buf_offs++] = c >> 30 | 0xFC;\n    buf.u8[buf_offs++] = c >> 24 & 0x3F | 0x80;\n    buf.u8[buf_offs++] = c >> 18 & 0x3F | 0x80;\n    buf.u8[buf_offs++] = c >> 12 & 0x3F | 0x80;\n    buf.u8[buf_offs++] = c >> 6 & 0x3F | 0x80;\n    buf.u8[buf_offs++] = c & 0x3F | 0x80;\n  }\n  return buf_offs;\n}\n\nfunction poolBuf(dv) {\n  // if it's poolable (not part of another Buffer), pool it!\n  assert(dv);\n  assert(dv.u8);\n  let pool_idx = dv.packet_pool_idx;\n  if (pool_idx) {\n    let arr = buf_pool[pool_idx];\n    if (arr.length < POOL_BUF_BY_SIZE[pool_idx]) {\n      //console.log(`Buffer TOPOOL:${dv.byteLength}/${pool_idx}`);\n      arr.push(dv);\n    }\n  } else {\n    // console.log(`Buffer UNPOOLABLE:${dv.byteLength}`);\n  }\n}\n\nexport function packetBufPoolAlloc(size) {\n  return allocDataView(size);\n}\nexport function packetBufPoolFree(dv) {\n  poolBuf(dv);\n}\n\nfunction Packet(flags, init_size, pak_debug) {\n  this.reinit(flags, init_size, pak_debug);\n}\nPacket.prototype.reinit = function (flags, init_size, pak_debug) {\n  this.flags = flags || 0;\n  this.has_flags = false;\n  this.buf = null;\n  this.buf_len = 0;\n  this.buf_offs = 0;\n  this.bufs = null;\n  this.bsizes = null;\n  this.readable = false;\n  this.ref_count = 1;\n  this.pak_debug = pak_debug;\n  if (init_size) {\n    this.fit(init_size, true);\n    this.buf_len = init_size;\n  }\n};\nPacket.prototype.ref = function () {\n  ++this.ref_count;\n};\nPacket.prototype.pool = function () {\n  assert(this.ref_count);\n  if (--this.ref_count) {\n    return;\n  }\n  // Do not clear on pool(), callers (readInt()) may still momentarily reference .buf, etc\n  if (this.flags & PACKET_UNOWNED_BUFFER) {\n    // doing nothing with buffers, still pooling the packet\n  } else {\n    if (this.buf) {\n      poolBuf(this.buf);\n    }\n    if (this.bufs) {\n      for (let ii = 0; ii < this.bufs.length; ++ii) {\n        poolBuf(this.bufs[ii]);\n      }\n    }\n  }\n  if (pak_pool.length < POOL_PACKETS) {\n    pak_pool.push(this);\n  }\n  if (this.pak_debug) {\n    this.pak_debug.poolDebug();\n  }\n};\n\nPacket.prototype.totalSize = function () {\n  let ret = 0;\n  if (this.readable) {\n    return this.buf_len;\n  }\n  if (this.bsizes) {\n    for (let ii = 0; ii < this.bsizes.length; ++ii) {\n      ret += this.bsizes[ii];\n    }\n  }\n  ret += this.buf_offs;\n  return ret;\n};\n\nPacket.prototype.setReadable = function () {\n  assert(this.buf);\n  assert(!this.bufs);\n  assert(!this.readable);\n  this.readable = true;\n};\n\nPacket.prototype.makeReadable = function () {\n  assert(this.buf);\n  assert(!this.readable); // otherwise just reset offset? or do nothing?\n  let total = this.totalSize(); // before this.readable = true\n  this.readable = true;\n  if (!this.bufs) {\n    this.buf_len = total;\n    this.buf_offs = 0;\n    return;\n  }\n  let buf = allocDataView(total);\n  let u8 = buf.u8;\n  let offs = 0;\n  for (let ii = 0; ii < this.bufs.length; ++ii) {\n    let bsize = this.bsizes[ii];\n    let dv = this.bufs[ii];\n    if (offs + bsize > total) {\n      // unused portion would overrun\n      assert.equal(dv.byteOffset, 0);\n      u8.set(new Uint8Array(dv.buffer, 0, bsize), offs);\n    } else {\n      u8.set(dv.u8, offs);\n    }\n    offs += bsize;\n    poolBuf(dv);\n  }\n  assert.equal(this.buf.byteOffset, 0); // Would handle it, but should never happen here, these are our pooled buffers?\n  u8.set(new Uint8Array(this.buf.buffer, this.buf.byteOffset, this.buf_offs), offs);\n  poolBuf(this.buf);\n  assert.equal(offs + this.buf_offs, total);\n  this.bufs = this.bsizes = null;\n  this.buf = buf;\n  this.buf_offs = 0;\n  this.buf_len = total; // buffer is actually buf.buffer.byteLength, but we can't read past `total`\n};\n\nPacket.prototype.flush = function () {\n  let { buf, buf_offs } = this;\n  if (!this.bufs) {\n    this.bufs = [buf];\n    this.bsizes = [buf_offs];\n  } else {\n    this.bufs.push(buf);\n    this.bsizes.push(buf_offs);\n  }\n  this.buf = null;\n  this.buf_len = 0;\n  this.buf_offs = 0;\n};\nPacket.prototype.fit = function (extra_bytes, no_advance) {\n  let { buf, buf_len, buf_offs } = this;\n  let new_offs = buf_offs + extra_bytes;\n  if (new_offs <= buf_len) {\n    if (!no_advance) {\n      this.buf_offs = new_offs;\n    }\n    return buf_offs;\n  }\n  assert(!this.readable); // Shouldn't happen on concatenated buffers\n  if (buf) {\n    this.flush();\n  }\n  this.buf_len = buf_len = max(PAK_BUF_DEFAULT_SIZE, extra_bytes);\n  this.buf = allocDataView(buf_len);\n  this.buf_offs = no_advance ? 0 : extra_bytes;\n  return 0;\n};\nPacket.prototype.advance = function (bytes) {\n  let offs = this.buf_offs;\n  let new_offs = offs + bytes;\n  this.buf_offs = new_offs;\n  if (new_offs > this.buf_len) {\n    throw new Error(UNDERRUN);\n  }\n  if (new_offs === this.buf_len) {\n    this.pool();\n  }\n  return offs;\n};\nPacket.prototype.ended = function () {\n  return this.buf_offs === this.buf_len;\n};\n\n// low-level write/read functions\nPacket.prototype.writeU8 = function (v) {\n  assert(v >= 0 && v < 256);\n  let offs = this.fit(1);\n  this.buf.u8[offs] = v;\n};\nPacket.prototype.readU8 = function () {\n  return this.buf.u8[this.advance(1)];\n};\n// Packed int, first byte:\n// 0-247 byte\n// 248 positive 16-bit\n// 249 negative 16-bit\n// 250 positive 32-bit\n// 251 negative 32-bit\n// 252 positive 64-bit\n// 253 negative 64-bit\n// 254 unused\n// 255 negative byte\nPacket.prototype.writeInt = function (v) {\n  assert(isInteger(v));\n  let offs = this.fit(9, true); // 9 is max size of a packed int\n  let buf = this.buf;\n  let neg = v < 0 ? 1 : 0;\n  if (neg) {\n    v = -v;\n  }\n  if (v < 248) {\n    // || neg && v < 256 would also decode right\n    if (neg) {\n      buf.u8[offs++] = 255;\n    }\n    buf.u8[offs++] = v;\n  } else {\n    if (v < 65536) {\n      buf.u8[offs++] = 248 + neg;\n      buf.setUint16(offs, v, true);\n      offs += 2;\n    } else if (v < 4294967296) {\n      buf.u8[offs++] = 250 + neg;\n      buf.setUint32(offs, v, true);\n      offs += 4;\n    } else {\n      buf.u8[offs++] = 252 + neg;\n      let low_bits = v >>> 0;\n      buf.setUint32(offs, low_bits, true);\n      offs += 4;\n      buf.setUint32(offs, (v - low_bits) / 4294967296, true);\n      offs += 4;\n    }\n  }\n  this.buf_offs = offs;\n};\nPacket.prototype.zeroInt = function () {\n  // Overwrite an existing int with a zero, keeping the same packed size\n  let b1 = this.buf.u8[this.buf_offs];\n  if (b1 < 248) {\n    this.buf.u8[this.buf_offs++] = 0;\n    return;\n  }\n  // Otherwise, leave header bit\n  this.buf_offs++;\n  let zeroes = 1;\n  switch (b1) {\n    case 253:\n    case 252:\n      // 8\n      zeroes += 4;\n    case 251: // eslint-disable-line no-fallthrough\n    case 250:\n      // 4\n      zeroes += 2;\n    case 249: // eslint-disable-line no-fallthrough\n    case 248:\n      // 2\n      zeroes++;\n    case 255:\n      // eslint-disable-line no-fallthrough\n      // 1\n      break;\n    default:\n      throw new Error('PKTERR_PACKED_INT');\n  }\n  while (zeroes) {\n    --zeroes;\n    this.buf.u8[this.buf_offs++] = 0;\n  }\n};\nPacket.prototype.readInt = function () {\n  let b1 = this.buf.u8[this.advance(1)];\n  if (b1 < 248) {\n    return b1;\n  }\n  let sign = 1;\n  switch (b1) {\n    case 249:\n      sign = -1;\n    case 248:\n      // eslint-disable-line no-fallthrough\n      return sign * this.buf.getUint16(this.advance(2), true);\n    case 251:\n      sign = -1;\n    case 250:\n      // eslint-disable-line no-fallthrough\n      return sign * this.buf.getUint32(this.advance(4), true);\n    case 253:\n      sign = -1;\n    case 252:\n      {\n        // eslint-disable-line no-fallthrough\n        let low_bits = this.buf.getUint32(this.advance(4), true);\n        let high_bits = this.buf.getUint32(this.advance(4), true);\n        return sign * (high_bits * 4294967296 + low_bits);\n      }\n    case 255:\n      return -this.buf.u8[this.advance(1)];\n    default:\n      throw new Error('PKTERR_PACKED_INT');\n  }\n};\nPacket.prototype.writeFloat = function (v) {\n  assert.equal(typeof v, 'number');\n  if (!v) {\n    this.buf.u8[this.fit(1)] = 0;\n    return;\n  }\n  let offs = this.fit(5, true);\n  this.buf.setFloat32(offs, v, true);\n  if (this.buf.u8[offs] <= 1) {\n    // escape a 0 or 1 in the first byte\n    this.buf.u8[offs++] = 1;\n    this.buf.setFloat32(offs, v, true);\n  }\n  this.buf_offs = offs + 4;\n};\nPacket.prototype.readFloat = function () {\n  let offs = this.advance(1);\n  let b1 = this.buf.u8[offs];\n  if (!b1) {\n    return 0;\n  }\n  if (b1 === 1) {\n    return this.buf.getFloat32(this.advance(4), true);\n  }\n  this.advance(3);\n  return this.buf.getFloat32(offs, true);\n};\nPacket.prototype.writeU32 = function (v) {\n  assert.equal(typeof v, 'number');\n  this.buf.setUint32(this.fit(4), v, true);\n};\nPacket.prototype.readU32 = function () {\n  return this.buf.getUint32(this.advance(4), true);\n};\nPacket.prototype.writeString = function (v) {\n  assert.equal(typeof v, 'string'); // Could maybe do a toString() here if not\n  let byte_length = utf8ByteLength(v);\n  this.writeInt(byte_length); // Just 1 byte for small strings\n  if (!byte_length) {\n    return;\n  }\n  let offs = this.fit(byte_length);\n  let buf = this.buf;\n  for (let ii = 0; ii < v.length; ++ii) {\n    let c = v.charCodeAt(ii);\n    if (c <= 0x7F) {\n      buf.u8[offs++] = c;\n    } else {\n      offs = utf8WriteChar(buf, offs, c);\n    }\n  }\n};\n// Only called on multi-byte characters; Supplied the first byte for efficiency\nPacket.prototype.utf8ReadChar = function (c) {\n  let buf = this.buf;\n  if (c >= 0xC0 && c < 0xE0) {\n    return (c & 0x1F) << 6 | buf.u8[this.buf_offs++] & 0x3F;\n  } else if (c >= 0xE0 && c < 0xF0) {\n    return (c & 0x0F) << 12 | (buf.u8[this.buf_offs++] & 0x3F) << 6 | buf.u8[this.buf_offs++] & 0x3F;\n  } else if (c >= 0xF0 && c < 0xF8) {\n    return (c & 0x0F) << 18 | (buf.u8[this.buf_offs++] & 0x3F) << 12 | (buf.u8[this.buf_offs++] & 0x3F) << 6 | buf.u8[this.buf_offs++] & 0x3F;\n  } else if (c >= 0xF8 && c < 0xFC) {\n    return (c & 0x0F) << 24 | (buf.u8[this.buf_offs++] & 0x3F) << 18 | (buf.u8[this.buf_offs++] & 0x3F) << 12 | (buf.u8[this.buf_offs++] & 0x3F) << 6 | buf.u8[this.buf_offs++] & 0x3F;\n  } else {\n    //if (c >= 0xFC) {\n    return (c & 0x0F) << 30 | (buf.u8[this.buf_offs++] & 0x3F) << 24 | (buf.u8[this.buf_offs++] & 0x3F) << 18 | (buf.u8[this.buf_offs++] & 0x3F) << 12 | (buf.u8[this.buf_offs++] & 0x3F) << 6 | buf.u8[this.buf_offs++] & 0x3F;\n  }\n};\n\nlet string_assembly = [];\nPacket.prototype.readString = function () {\n  let byte_length = this.readInt();\n  if (!byte_length) {\n    return '';\n  }\n  if (this.buf_offs + byte_length > this.buf_len) {\n    throw new Error(UNDERRUN);\n  }\n\n  let { buf } = this;\n  let end_offset = this.buf_offs + byte_length;\n  let ret;\n  if (byte_length > 8192) {\n    ret = '';\n    while (this.buf_offs < end_offset) {\n      let c = buf.u8[this.buf_offs++];\n      if (c > 0x7F) {\n        c = this.utf8ReadChar(c);\n      }\n      ret += String.fromCharCode(c);\n    }\n  } else {\n    string_assembly.length = byte_length;\n    let ii = 0;\n    while (this.buf_offs < end_offset) {\n      let c = buf.u8[this.buf_offs++];\n      if (c > 0x7F) {\n        c = this.utf8ReadChar(c);\n      }\n      string_assembly[ii++] = c;\n    }\n    if (string_assembly.length !== ii) {\n      // truncate if multi-byte UTF8 produced single characters\n      string_assembly.length = ii;\n    }\n    ret = String.fromCharCode.apply(undefined, string_assembly);\n  }\n  if (this.buf_offs === this.buf_len) {\n    this.pool();\n  }\n  return ret;\n};\n// Much more efficient than writeString if the input is known to be ANSI-ish (all characters <= 255)\nPacket.prototype.writeAnsiString = function (v) {\n  assert.equal(typeof v, 'string'); // Could maybe do a toString() here if not\n  let byte_length = v.length;\n  this.writeInt(byte_length);\n  let offs = this.fit(byte_length);\n  let { buf } = this;\n  for (let ii = 0; ii < byte_length; ++ii) {\n    buf.u8[offs++] = v.charCodeAt(ii);\n  }\n};\nPacket.prototype.readAnsiString = function () {\n  let len = this.readInt();\n  let offs = this.advance(len);\n  let { buf } = this;\n  string_assembly.length = len;\n  for (let ii = 0; ii < len; ++ii) {\n    string_assembly[ii] = buf.u8[offs++];\n  }\n  return String.fromCharCode.apply(undefined, string_assembly);\n};\n\n// high-level write/read functions\nPacket.prototype.writeJSON = function (v) {\n  if (!v) {\n    let idx = FALSYS.indexOf(v);\n    assert(idx !== -1);\n    this.writeU8(idx + 1);\n    return;\n  }\n  this.writeU8(0);\n  this.writeString(JSON.stringify(v));\n};\nPacket.prototype.readJSON = function () {\n  let byte = this.readU8();\n  if (byte) {\n    if (byte - 1 >= FALSYS.length) {\n      throw new Error('PKTERR_JSON_HEADER');\n    }\n    return FALSYS[byte - 1];\n  }\n  let str = this.readString();\n  return JSON.parse(str);\n};\n// Uint8Array or Buffer object?\nPacket.prototype.writeBuffer = function (v) {\n  this.writeInt(v.length);\n  if (v.length) {\n    let offs = this.fit(v.length);\n    this.buf.u8.set(v, offs);\n  }\n};\nconst null_buf = new Uint8Array(0);\nPacket.prototype.readBuffer = function (do_copy) {\n  let len = this.readInt();\n  if (!len) {\n    return null_buf;\n  }\n  let offs = this.advance(len);\n  if (do_copy) {\n    return this.buf.u8.slice(offs, len);\n  } else {\n    let { buf } = this;\n    return new Uint8Array(buf.buffer, buf.byteOffset + offs, len);\n  }\n};\nPacket.prototype.writeBool = function (v) {\n  this.writeU8(v ? 1 : 0);\n};\nPacket.prototype.readBool = function () {\n  return Boolean(this.readU8());\n};\n\nPacket.prototype.append = function (pak) {\n  assert.equal(this.flags & FLAG_PACKET_INTERNAL, pak.flags & FLAG_PACKET_INTERNAL);\n  if (pak.bufs) {\n    for (let ii = 0; ii < pak.bufs.length; ++ii) {\n      let buf = pak.bufs[ii];\n      let bsize = pak.bsizes[ii];\n      let offs = this.fit(bsize);\n      if (bsize !== buf.byteLength) {\n        this.buf.u8.set(new Uint8Array(buf.buffer, buf.byteOffset, bsize), offs);\n      } else {\n        this.buf.u8.set(buf.u8, offs);\n      }\n    }\n  }\n  if (pak.buf) {\n    let buf = pak.buf;\n    let bsize = pak.readable ? pak.buf_len : pak.buf_offs;\n    let offs = this.fit(bsize);\n    if (bsize !== buf.byteLength) {\n      this.buf.u8.set(new Uint8Array(buf.buffer, buf.byteOffset, bsize), offs);\n    } else {\n      this.buf.u8.set(buf.u8, offs);\n    }\n  }\n};\n\nPacket.prototype.appendRemaining = function (pak) {\n  assert.equal(this.flags & FLAG_PACKET_INTERNAL, pak.flags & FLAG_PACKET_INTERNAL);\n  assert(pak.readable);\n  assert(!pak.bufs);\n  assert(pak.buf);\n  assert(pak.buf_offs <= pak.buf_len);\n  let bsize = pak.buf_len - pak.buf_offs;\n  if (bsize) {\n    let offs = this.fit(bsize);\n    this.buf.u8.set(new Uint8Array(pak.buf.buffer, pak.buf.byteOffset + pak.buf_offs, bsize), offs);\n  }\n  // everything consumed, pool it\n  pak.pool();\n};\n\nPacket.prototype.toJSON = function () {\n  let ret = {\n    f: this.flags\n  };\n\n  if (this.bufs) {\n    ret.b = [];\n    for (let ii = 0; ii < this.bufs.length; ++ii) {\n      ret.b.push(base64Encode(this.bufs[ii], 0, this.bsizes[ii]));\n    }\n  }\n  if (this.buf) {\n    if (this.readable) {\n      ret.d = base64Encode(this.buf, 0, this.buf_len);\n    } else {\n      ret.d = base64Encode(this.buf, 0, this.buf_offs);\n    }\n  }\n  return ret;\n};\n\nPacket.prototype.setBuffer = function (buf, buf_len) {\n  assert(!this.buf);\n  assert(!this.bufs);\n  assert(this.flags & PACKET_UNOWNED_BUFFER); // Probably okay if not?\n  assert(buf instanceof Uint8Array);\n  this.buf = wrapU8AsDataView(buf);\n  this.buf_len = buf_len;\n  this.readable = true;\n};\n\nPacket.prototype.getBuffer = function () {\n  assert(this.buf);\n  assert(!this.bufs);\n  return this.buf.u8;\n};\n\nPacket.prototype.getBufferLen = function () {\n  assert(this.buf);\n  assert(!this.bufs);\n  return this.readable ? this.buf_len : this.buf_offs;\n};\n\nPacket.prototype.getOffset = function () {\n  if (this.readable) {\n    return this.buf_offs;\n  }\n  return this.totalSize();\n};\n\nPacket.prototype.seek = function (pos) {\n  assert(this.readable); // .makeReadable should be called so that it is a single buffer\n  assert(pos >= 0 && pos <= this.buf_len);\n  this.buf_offs = pos;\n};\n\nPacket.prototype.writeFlags = function () {\n  assert(!this.has_flags);\n  assert.equal(this.buf_offs, 0);\n  this.writeU8(this.flags);\n  this.has_flags = true;\n};\n\nPacket.prototype.updateFlags = function (flags) {\n  assert(this.has_flags);\n  assert(!(flags & FLAG_PACKET_INTERNAL));\n  this.flags = this.flags & FLAG_PACKET_INTERNAL | flags;\n  let buf = this.bufs ? this.bufs[0] : this.buf;\n  buf.u8[0] = this.flags;\n};\n\nPacket.prototype.readFlags = function () {\n  let read = this.readU8();\n  assert.equal(read, this.flags & 0xFF);\n  this.has_flags = true;\n  return this.flags;\n};\n\nPacket.prototype.getFlags = function () {\n  return this.flags;\n};\n\nPacket.prototype.getInternalFlags = function () {\n  return this.flags & FLAG_PACKET_INTERNAL;\n};\n\nfunction PacketDebug(flags, init_size) {\n  this.reinit(flags, init_size);\n}\nPacketDebug.prototype.reinit = function (flags, init_size) {\n  this.in_pool = false;\n  if (pak_pool.length) {\n    this.pak = pak_pool.pop();\n    this.pak.reinit(flags, init_size, this);\n  } else {\n    this.pak = new Packet(flags, init_size, this);\n  }\n  this.warned = false;\n  this.pool_timer = setTimeout(() => {\n    console.warn(`Packet not pooled after 5s: ${this.contents()}`);\n    this.warned = true;\n  }, POOL_TIMEOUT);\n};\nPacketDebug.prototype.poolDebug = function () {\n  if (this.warned) {\n    console.warn('Packet pooled after timeout');\n  } else {\n    clearTimeout(this.pool_timer);\n  }\n  assert(!this.in_pool);\n  this.in_pool = true; // Set this, as if pooled, even if discarded\n  if (pak_debug_pool.length < POOL_PACKETS) {\n    pak_debug_pool.push(this);\n  }\n};\nconst types = [null, 'U8', 'U32', 'Int', 'Float', 'String', 'AnsiString', 'JSON', 'Bool', 'Buffer'];\n// Functions (types) that read and write a debug byte\ntypes.forEach((type, idx) => {\n  if (!type) {\n    // don't use debug ID 0\n    return;\n  }\n  let write = `write${type}`;\n  let read = `read${type}`;\n  let write_fn = Packet.prototype[write];\n  let read_fn = Packet.prototype[read];\n  PacketDebug.prototype[write] = function (v) {\n    this.pak.writeU8(idx);\n    write_fn.call(this.pak, v);\n  };\n  PacketDebug.prototype[read] = function (param) {\n    let found_idx = this.pak.readU8();\n    if (found_idx !== idx) {\n      assert(false, `PacketDebug error: Expected ${type}(${idx}), found ${types[found_idx]}(${found_idx})`);\n    }\n    return read_fn.call(this.pak, param);\n  };\n});\nPacketDebug.prototype.zeroInt = function () {\n  this.pak.writeU8(3); // types.indexof('Int')\n  this.pak.zeroInt();\n};\n// Functions that simply fall through\n['ended', 'getBuffer', 'getBufferLen', 'getFlags', 'getInternalFlags', 'getOffset', 'makeReadable', 'pool', 'readFlags', // *not* wrapped in debug headers\n'ref', 'seek', 'setBuffer', 'setReadable', 'toJSON', 'totalSize', 'updateFlags', 'writeFlags'].forEach(fname => {\n  let fn = Packet.prototype[fname];\n  PacketDebug.prototype[fname] = function () {\n    return fn.apply(this.pak, arguments); // eslint-disable-line prefer-rest-params\n  };\n});\nPacketDebug.prototype.append = function (pak) {\n  assert(pak instanceof PacketDebug);\n  this.pak.append(pak.pak);\n};\nPacketDebug.prototype.appendRemaining = function (pak) {\n  assert(pak instanceof PacketDebug);\n  this.pak.appendRemaining(pak.pak);\n};\nfunction format(v) {\n  switch (typeof v) {\n    case 'object':\n      return JSON.stringify(v);\n    default:\n      return v;\n  }\n}\nPacketDebug.prototype.contents = function () {\n  let { pak } = this;\n  let cur_offs = pak.getOffset();\n  let read_len = cur_offs;\n  let ret = [`buf:${pak.buf_offs}/${pak.buf_len}`];\n  if (pak.bufs) {\n    // write packet, just combine and reset location when done\n    pak.makeReadable();\n    ret.push('bufs');\n  } else if (pak.buf) {\n    // read packet, or write packet that is a single buf\n    if (pak.readable) {\n      read_len = pak.buf_len;\n    }\n    pak.buf_offs = 0;\n  } else {\n    ret.push('empty');\n    read_len = -1;\n  }\n  let saved_ref_count = pak.ref_count;\n  pak.ref(); // prevent auto pooling\n  try {\n    if (pak.has_flags) {\n      ret.push(`flags:${pak.readU8()}`);\n    }\n    while (pak.buf_offs < read_len) {\n      let type_idx = pak.readU8();\n      let type = types[type_idx];\n      if (!type) {\n        ret.push(`UnknownType:${type_idx}`);\n        break;\n      }\n      let val = pak[`read${type}`]();\n      ret.push(`${type}:${format(val)}`);\n    }\n  } catch (e) {\n    ret.push(`Error dumping packet contents: ${e}`);\n  }\n  pak.ref_count = saved_ref_count;\n  pak.buf_offs = cur_offs;\n  return ret.join(',');\n};\n\nfunction packetCreate(flags, init_size) {\n  if (flags === undefined) {\n    flags = exports.default_flags;\n  }\n  let pool = flags & PACKET_DEBUG ? pak_debug_pool : pak_pool;\n  if (pool.length) {\n    let pak = pool.pop();\n    pak.reinit(flags, init_size);\n    return pak;\n  }\n  if (flags & PACKET_DEBUG) {\n    return new PacketDebug(flags, init_size);\n  }\n  return new Packet(flags, init_size);\n}\nexports.packetCreate = packetCreate;\n\nfunction packetFromBuffer(buf, buf_len, need_copy) {\n  let flags = buf[0];\n  assert.equal(typeof flags, 'number'); // `buf` should be a Buffer or Uint8Array, not a DataView like other funcs here\n  if (need_copy) {\n    assert(buf_len);\n    assert(buf.buffer instanceof ArrayBuffer);\n    let pak = packetCreate(flags, buf_len);\n    if (buf.byteLength !== buf_len) {\n      buf = Buffer.from(buf.buffer, 0, buf_len);\n    }\n    pak.getBuffer().set(buf);\n    pak.setReadable();\n    return pak;\n  } else {\n    // reference unowned/unpoolable buffer\n    assert(buf instanceof Uint8Array);\n    let pak = packetCreate(flags | PACKET_UNOWNED_BUFFER);\n    pak.setBuffer(buf, buf_len || buf.byteLength);\n    return pak;\n  }\n}\nexports.packetFromBuffer = packetFromBuffer;\n\nfunction packetFromJSON(js_obj) {\n  let pak = packetCreate(js_obj.f);\n\n  let payload = pak.pak || pak;\n\n  function decode(str) {\n    return base64Decode(str, allocDataView);\n  }\n  if (js_obj.b) {\n    payload.bsizes = [];\n    payload.bufs = [];\n    for (let ii = 0; ii < js_obj.b.length; ++ii) {\n      let buf = decode(js_obj.b[ii]);\n      payload.bufs.push(buf);\n      payload.bsizes.push(buf.decode_size);\n      delete buf.decode_size;\n    }\n  }\n  if (js_obj.d) {\n    payload.buf = decode(js_obj.d);\n    payload.buf_len = payload.buf.decode_size;\n    delete payload.buf.decode_size;\n    payload.buf_offs = 0;\n  }\n\n  return pak;\n}\nexports.packetFromJSON = packetFromJSON;\n\nfunction isPacket(thing) {\n  return thing instanceof Packet || thing instanceof PacketDebug;\n}\nexports.isPacket = isPacket;","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint prefer-rest-params:off, no-underscore-dangle:off */\n\nconst assert = require('assert');\n\nfunction EventEmitter() {\n  this._listeners = {};\n}\n\nmodule.exports = EventEmitter;\nmodule.exports.EventEmitter = EventEmitter;\n\nfunction addListener(ee, type, fn, once) {\n  assert(typeof fn === 'function');\n  let arr = ee._listeners[type];\n  if (!arr) {\n    arr = ee._listeners[type] = [];\n  }\n  arr.push({\n    once,\n    fn\n  });\n}\n\nEventEmitter.prototype.hasListener = function (type, fn) {\n  let arr = this._listeners[type];\n  if (!arr) {\n    return false;\n  }\n  for (let ii = 0; ii < arr.length; ++ii) {\n    if (arr[ii].fn === fn) {\n      return true;\n    }\n  }\n  return false;\n};\n\nEventEmitter.prototype.on = function (type, fn) {\n  addListener(this, type, fn, 0);\n  return this;\n};\n\nEventEmitter.prototype.once = function (type, fn) {\n  addListener(this, type, fn, 1);\n  return this;\n};\n\nEventEmitter.prototype.removeListener = function (type, fn) {\n  let arr = this._listeners[type];\n  assert(arr);\n  for (let ii = 0; ii < arr.length; ++ii) {\n    if (arr[ii].fn === fn) {\n      arr.splice(ii, 1);\n      return this;\n    }\n  }\n  assert(false); // expected to find the listener!\n  return this;\n};\n\nfunction filterNotOnce(elem) {\n  return !elem.once;\n}\n\nEventEmitter.prototype.emit = function (type, ...args) {\n  let arr = this._listeners[type];\n  if (!arr) {\n    return false;\n  }\n\n  let any = false;\n  let any_once = false;\n  for (let ii = 0; ii < arr.length; ++ii) {\n    let elem = arr[ii];\n    any = true;\n    elem.fn(...args);\n    if (elem.once) {\n      any_once = true;\n    }\n  }\n  if (any_once) {\n    this._listeners[type] = arr.filter(filterNotOnce);\n  }\n\n  return any;\n};\n\n// Aliases\n// EventEmitter.prototype.addListener = EventEmitter.prototype.on;","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst { abs, floor, min, max, random, round, pow, sqrt } = Math;\n\nexport function nop() {\n  // empty\n}\n\nexport function empty(obj) {\n  for (let key in obj) {\n    return false;\n  }\n  return true;\n}\n\nexport function easeInOut(v, a) {\n  let va = pow(v, a);\n  return va / (va + pow(1 - v, a));\n}\n\nexport function easeIn(v, a) {\n  return 2 * easeInOut(0.5 * v, a);\n}\n\nexport function easeOut(v, a) {\n  return 2 * easeInOut(0.5 + 0.5 * v, a) - 1;\n}\n\nexport function clone(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nexport function merge(dest, src) {\n  for (let f in src) {\n    dest[f] = src[f];\n  }\n  return dest;\n}\n\nexport function has(obj, field) {\n  return Object.prototype.hasOwnProperty.call(obj, field);\n}\n\nexport function defaults(dest, src) {\n  for (let f in src) {\n    if (!has(dest, f)) {\n      dest[f] = src[f];\n    }\n  }\n  return dest;\n}\n\nexport function cloneShallow(src) {\n  return merge({}, src);\n}\n\nexport function clamp(v, mn, mx) {\n  return min(max(mn, v), mx);\n}\n\nexport function lerp(a, v0, v1) {\n  return (1 - a) * v0 + a * v1;\n}\n\nexport function mix(v0, v1, a) {\n  // GLSL semantics\n  return (1 - a) * v0 + a * v1;\n}\n\nexport function sign(a) {\n  return a < 0 ? -1 : a > 0 ? 1 : 0;\n}\n\n// log2 rounded up to nearest integer\nexport function log2(val) {\n  for (let ii = 1, jj = 0;; ii <<= 1, ++jj) {\n    // eslint-disable-line no-bitwise\n    if (ii >= val) {\n      return jj;\n    }\n  }\n}\n\nexport function ridx(arr, idx) {\n  arr[idx] = arr[arr.length - 1];\n  arr.pop();\n}\n\nexport function round100(a) {\n  return round(a * 100) / 100;\n}\n\nexport function round1000(a) {\n  return round(a * 1000) / 1000;\n}\n\nexport function fract(a) {\n  return a - floor(a);\n}\n\nexport function nearSame(a, b, tol) {\n  return abs(b - a) <= tol;\n}\n\nexport function titleCase(str) {\n  return str.split(' ').map(word => `${word[0].toUpperCase()}${word.slice(1)}`).join(' ');\n}\n\nconst EPSILON = 0.00001;\n\n// http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/\nexport function lineCircleIntersect(p1, p2, pCircle, radius) {\n  let dp = [p2[0] - p1[0], p2[1] - p1[1]];\n  let a = dp[0] * dp[0] + dp[1] * dp[1];\n  let b = 2 * (dp[0] * (p1[0] - pCircle[0]) + dp[1] * (p1[1] - pCircle[1]));\n  let c = pCircle[0] * pCircle[0] + pCircle[1] * pCircle[1];\n  c += p1[0] * p1[0] + p1[1] * p1[1];\n  c -= 2 * (pCircle[0] * p1[0] + pCircle[1] * p1[1]);\n  c -= radius * radius;\n  let bb4ac = b * b - 4 * a * c;\n  if (abs(a) < EPSILON || bb4ac < 0) {\n    return false;\n  }\n\n  let mu1 = (-b + sqrt(bb4ac)) / (2 * a);\n  let mu2 = (-b - sqrt(bb4ac)) / (2 * a);\n  if (mu1 >= 0 && mu1 <= 1 || mu2 >= 0 && mu2 <= 1) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function inherits(ctor, superCtor) {\n  // From Node.js\n  assert(typeof superCtor === 'function');\n  // not needed? ctor.super_ = superCtor; // eslint-disable-line no-underscore-dangle\n  // second parameter also not actually needed, just defines new Foo().constructor === Foo?\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n}\n\nexport function isPowerOfTwo(n) {\n  return (n & n - 1) === 0; // eslint-disable-line no-bitwise\n}\n\nexport function nextHighestPowerOfTwo(x) {\n  --x;\n  for (let i = 1; i < 32; i <<= 1) {\n    // eslint-disable-line no-bitwise\n    x |= x >> i; // eslint-disable-line no-bitwise\n  }\n  return x + 1;\n}\n\nexport function logdata(data) {\n  if (data === undefined) {\n    return '';\n  }\n  let r = JSON.stringify(data);\n  if (r.length < 120) {\n    return r;\n  }\n  return `${r.slice(0, 120 - 3)}...`;\n}\n\nexport function isInteger(v) {\n  return typeof v === 'number' && isFinite(v) && floor(v) === v;\n}\n\nexport function toNumber(v) {\n  return Number(v);\n}\n\nexport function randomNot(not_value, max_value) {\n  let new_value;\n  do {\n    new_value = floor(random() * max_value);\n  } while (new_value === not_value);\n  return new_value;\n}\n\nexport function toArray(array_like) {\n  return Array.prototype.slice.call(array_like);\n}\n\nexport function matchAll(str, re) {\n  let ret = [];\n  let m;\n  do {\n    m = re.exec(str);\n    if (m) {\n      ret.push(m[1]);\n    }\n  } while (m);\n  return ret;\n}\n\nexport function callEach(arr, pre_clear, ...args) {\n  if (arr && arr.length) {\n    for (let ii = 0; ii < arr.length; ++ii) {\n      arr[ii](...args);\n    }\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst ack = require('./ack.js');\nconst assert = require('assert');\nconst { ackHandleMessage, ackWrapPakStart, ackWrapPakPayload, ackWrapPakFinish } = ack;\nconst packet = require('./packet.js');\nconst { isPacket, packetCreate, packetFromBuffer } = packet;\n\nexport const CONNECTION_TIMEOUT = 60000;\nexport const PING_TIME = CONNECTION_TIMEOUT / 2;\nexports.PROTOCOL_VERSION = '1';\n\n// Rough estimate, if over, will prevent resizing the packet\nconst PAK_HEADER_SIZE = 1 + // flags\n1 + 16 + // message id\n1 + 9; // resp_pak_id\n\nexport function wsPakSendDest(client, pak) {\n  if (!client.connected || client.socket.readyState !== 1) {\n    console.error('Attempting to send on a disconnected link (internal), ignoring');\n    pak.pool();\n    return;\n  }\n  let buf = pak.getBuffer(); // a Uint8Array\n  let buf_len = pak.getBufferLen();\n  if (buf_len !== buf.length) {\n    buf = new Uint8Array(buf.buffer, buf.byteOffset, buf_len);\n  }\n  if (client.ws_server) {\n    client.socket.send(buf, function () {\n      pak.pool();\n    });\n  } else {\n    client.socket.send(buf);\n    pak.pool();\n  }\n  client.last_send_time = Date.now();\n}\n\nfunction wsPakSendFinish(pak, err, resp_func) {\n  let { client, msg } = pak.ws_data;\n  delete pak.ws_data;\n  let ack_resp_pkt_id = ackWrapPakFinish(pak, err, resp_func);\n\n  if (!client.connected || client.socket.readyState !== 1) {\n    // WebSocket.OPEN\n    (client.log ? client : console).log(`Attempting to send msg=${msg} on a disconnected link, ignoring`);\n    if (!client.log && client.onError && msg && typeof msg !== 'number') {\n      // On the client, if we try to send a new packet while disconnected, this is an application error\n      client.onError(`Attempting to send msg=${msg} on a disconnected link`);\n    }\n\n    if (ack_resp_pkt_id) {\n      // Callback will never be dispatched through ack.js, remove the callback here\n      delete client.resp_cbs[ack_resp_pkt_id];\n    }\n    pak.pool();\n    return;\n  }\n\n  assert.equal(Boolean(resp_func), Boolean(ack_resp_pkt_id));\n\n  wsPakSendDest(client, pak);\n}\n\nfunction wsPakSend(err, resp_func) {\n  let pak = this; //eslint-disable-line no-invalid-this\n  if (typeof err === 'function' && !resp_func) {\n    resp_func = err;\n    err = null;\n  }\n  wsPakSendFinish(pak, err, resp_func);\n}\n\nexport function wsPak(msg, ref_pak, client) {\n  assert(typeof msg === 'string' || typeof msg === 'number');\n\n  // Assume new packet needs to be comparable to old packet, in flags and size\n  let pak = packetCreate(ref_pak ? ref_pak.getInternalFlags() : packet.default_flags, ref_pak ? ref_pak.totalSize() + PAK_HEADER_SIZE : 0);\n  pak.writeFlags();\n\n  ackWrapPakStart(pak, client, msg);\n\n  pak.ws_data = {\n    msg,\n    client\n  };\n  pak.send = wsPakSend;\n  return pak;\n}\n\nfunction sendMessageInternal(client, msg, err, data, resp_func) {\n  let is_packet = isPacket(data);\n  let pak = wsPak(msg, is_packet ? data : null, client);\n\n  if (!err) {\n    ackWrapPakPayload(pak, data);\n  }\n\n  pak.send(err, resp_func);\n}\n\nexport function sendMessage(msg, data, resp_func) {\n  sendMessageInternal(this, msg, null, data, resp_func); // eslint-disable-line no-invalid-this\n}\n\nexport function wsHandleMessage(client, buf) {\n  let now = Date.now();\n  let source = client.id ? `client ${client.id}` : 'server';\n  if (!(buf instanceof Uint8Array)) {\n    (client.log ? client : console).log(`Received incorrect WebSocket data type from ${source} (${typeof buf})`);\n    return client.onError('Invalid data received');\n  }\n  let pak = packetFromBuffer(buf, buf.length, false);\n  pak.readFlags();\n  client.last_receive_time = now;\n\n  return ackHandleMessage(client, source, pak, function sendFunc(msg, err, data, resp_func) {\n    if (resp_func && !resp_func.expecting_response) {\n      resp_func = null;\n    }\n    sendMessageInternal(client, msg, err, data, resp_func);\n  }, function pakFunc(msg, ref_pak) {\n    return wsPak(msg, ref_pak, client);\n  }, function handleFunc(msg, data, resp_func) {\n    let handler = client.handlers[msg];\n    if (!handler) {\n      let error_msg = `No handler for message ${JSON.stringify(msg)} from ${source}`;\n      console.error(error_msg, data);\n      if (client.onError) {\n        return client.onError(error_msg);\n      }\n      return resp_func(error_msg);\n    }\n    return handler(client, data, resp_func);\n  });\n}"]}